{
    "version": "https://jsonfeed.org/version/1",
    "title": "DzcGood • All posts by \"linux\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2021/12/11/Lock/",
            "url": "http://example.com/2021/12/11/Lock/",
            "title": "锁",
            "date_published": "2021-12-11T15:45:14.000Z",
            "content_html": "<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"962746a3e7c0b72fc3226ff705b08cdf2bcaac8ea8f23e13e8375cfa5fa9d459\">f46145baa895be668001f2b23a8fcc0d834e94f8186c4aa7593749a179f008404482741393ff588571995379413d0c909c0f7f9c41cc129f4de13bf929f9582eb60e8aca727964b63d685cff860843ab74e81ceca6e9ffab5464163f622521b241c4a46ef4d020fa35d7c39ea1048c7c1074084f589b79697aef98d826dd42f8e8841f77bd362f5fe92c89fa46d17b1fb7a55b50e4a4bc8f35b4ce4404026f739ea19fbe1d59f53f0cfd943f147618f6a997b996b655129f3da703616a88b944c9faba8e4a60a863f0920a987a09bb62c54ef3ea99e7efa62196dec8eb7f84dbc98e00996691d7de0a4382fa8f86f738337db0b9eb6b2f690e1f348dd6ee4b4c86de82d7d8967494fd913734cb52260f75b445a21b26649e4e2298c090a90a872aa77fabbb540d2b849fb150de8153cbe0fe770f2b2e7bc918dbc9e42aad97455af513ecae9cfe476b52e957006834564f596ee5d4d409edb7f2557c8fa549786c949236da340a24cb59618a0873b76522fa5dd3aed31255fa811a53235cea3f76ab45e226c58ae7e2d3879a26b6eff5c84ca3f100373f735402171bef142b63400b3ea2f61622ca6f5a3ef40486b0e43ebaf4149ab73cd50563594e6b084a2278cd390a002fa9eadb7eea37c2e56ab6bd18458d0aac305731270e86d29ea321c73529c587696012b0097fcb875e3265306ed43cbba596c61f28cb84a3c8342d29562be40cbf20a452be0eee4eae58707f82fe28a5c661fe84f4cae123403b0143bbeaf0b6a39950263f810c86f5e29efd765f147caeb5b9464ec883f147b877fdb3765cbcc73f61fb1f5edaf4846066392378053d79b7367bf71d7f71c52c684514bdec64508f18a4284be874ab4495729641920e963770bcd38e783d8f2f84ca64d2f539dde5b87edea69f6c3784e89465d403ce775e79b3bd914bb67cff678b0a47fd7505d95586a24b4f22331743ba904f604331eddae4afcc7e678c8e0bbf2579af65e5ef24719a5b9570deedf28798a73c14dc3cc29a3470ec7e58402738269952ffa3a9050937e4a3065647a90f33cd872adbe902840807d75efaa1c02d7145235810008a6ecde2fb1229e1d8f4639af18397eb9944be6b24cb8976e2113fdd87e5a5a43fd0ca52678d3d3bf5390636ce29f37ad64897dee98c42070b3ab8109b50cd8ba5831a316d93b11d0ca1e417622c00123f8f1f3404c7280da79f83d30c88059bbb6ebf8774999db13d36cf5643464fe7a873b7e12cd75e5f80a6273f1c7707f2143d797030d736d2f0bfad919b9cddb0a3a457efd7154d4edb1c0e608ec2d2c0967ee3d6d5794195db88453e3dac8d81c15476591cdd6d87c6ec81bb5eaac6582a101104ce94b4355d11f945224e4909f7f1f6515b97dc6186efbb97bdc20e7482e8d3e339b73ec48d870c915563430e8d5ac83f21cfded6ad2fba72b5575fd116d1f0aa0e79df0ec1cd1a62ffab1e4553c5ca336646308f1d6b14bf899ffb3ff3678fce42b323bc9b18bffeea5fd8db1833509c3af85fc416670ce8117ac06d332929f77328b187adaff052a45f46fdd1f3c31c93c214d9d6b519cdb7c8500913426401575c307933cd66cc20cdb57f1dd3a482f2421c8c2e2b0c315f6c0b93646b99f039b582c5b23d0362b845efcae8dcd110e97c3c8417235cce346453312b8a8def7f9468e647ce5974b8ddd1fa4584c653a3b4618cafa201635f75597a35cdfa9e0f1fc2e3e39792c157646ddad1a277e6135a77fb8827fcbd7a61474f8a2d0887f4a7114efb5dca81677af8d8734d35b635234796ecca8c1c5e230105c74ffb95c31357c84924be97bc010d6e5af182b71dbb9d66d78238f31bc7d74e6648c421b3eea40794725386bc7738f1266d0b587f5f3284ba4aa63386c4d21688496c9485573c92beea6751c0da0cb638e6270d38c1d5cf9f3e1ba6f85fba12e737d9cce9d0b4d8ed23ebd8b2bc3cf074fe329c2e0db5cfb5e4b170132c88a568ad27538c576a9e7cc0e5884eb12bb7416b4fe767e7b3919e87ff7f0e8dfd54a7926598e1e268df116272e082a8c479ab3f5647965e4dab68e85dc4456f058a6082984657e61d39ca23c839f818b8f68b87eb7469c1ff7dd0a3ee15cd54a3f77706ec4ef07d009d26619f334ffc0b316913ee432ba656689ab00e3dad4fe5f6a36e35c4bd20e7e61d696209f48dc4241be617f9ce7e65bdf3929d7cf4da513c9ba24b1fa61f2adbe4bd91141af0b2eedf79c7e639c2a8a695ed79f35cb191217abd86e5c34a13c3cf043884d2a952e65a010df3d77352c37df4be037bd9affd7e8df6a4b117aee05aaaab162deaccc27f3fa700d1e553898e7441b1b031d41c935acb84147f0fac686291e2ef54f9b3f5f25f7c683d59538a3286262974643b10a88b37b2f93f7c3c0b7b50286775a1d623d7aad566a0c27474a414ac71be8b19da77139b6d764caca34f04cd8bca851f7a3af4f43314b5dd4ea9473e21d60780ba34c838bc46c585d5a02fb008dee79d152f17460fc17bad24630662b7e922cd45d12213207aec5a41164feccb093052b1c88e246a59d9ebca2e3109ce11a789c071701b00958354424baa7a2a26ec0fb6698ffc38d1592e6c8e8527bebd14861780c18870447a4c1690db8ad3b3f5eeade8ab63992a60012ba137e0d90714c3f5cd28a15e96f7b0e1b568a37349ead0b4e4272ae6d7ee9aaede5eb4038ffeb1aa0ce0cd57ff22c83bef3d8ce0871f4f15acf8f348c4e3c3f2ec7cc6348678117995de1051c2784017ccf3d6ce03639346094133bf974f64debd1cf7c7963602ebed2bb38124979b9404e2e0a8f2f25e73ba0f129e1a961986d3970dc225ad4d4ce9e02d0dab1e4e7e2f300f7d72d8397733e90dfebca18c2e144b12ceef2510aab70cd828fbff01fe0367d00d996f01164c0d6006cbbfffc59a485369842ae225f1286eb6e68fce51d478a1d46ddb4b19df8f8b300f6f74fdc2093b8b082ba2ec244ba42192c4c70aac79e8478790bb3459a1ba34ffe0f318aff36169f37f1c233e467369391f01543489b4eddb9a5de58811c384d78e6566463fb0d802ad3c16ad3d841404e8c520632185bee0ac33cb6edf1b36f19adaba66601724d96bcf34ad64af206072e45b209334026c5df3bd7340ce11ab95872fbe22cb2f56ff2f5e88ff54c58000aca1c4ee4c6d7a7df8c40b542b8ea95918e34a11b80897e483f299104834aa7123b4ef95b55c38f6fb4232553f7726209dade70254b4dca8c29bd7428cb48a823ba3d12b1624b10eefaaab822f37a3ca21871aeaeac4553c56751624b61ceb4838af45aa9af4a6847b176eb83304a7b1b86e1ec3d1216577408e86852ec3aba10c7920e17800ec27d6d48aad67ffe34794b7dcd8e1a8d7fd419f0b93b1a213aba04c8f0de37491849231458082b9ed42afe2b579d5f21eb519100d1f3a318868db4d83e413789c7a83e387050eb0b0a421f621bf0fdac4d787930cea5952d4447995c0a983663c9e9881b044dde1892bcf24bc8ce2471a84785c8008e8f13712712ce445161b65e4c43fc9e5c0ec6c8d83d336c81d633a15c006a2075302ed83ab46e2ff3d6bfd6aebc9bfa5092c013c9a4b1cf9fe779a234f4f2c46110d58f7ae4f85b18d4ad62736ae40b3f304b5f1bb9532cb01ee9dbaa46603613ed364fc5324189d3721a141ee41dfa55cd98f574a3c74da984598f009af8bb7813a9574320df01b485dc7a61b48d93da7a23cbccbe00e9c646d192268cad0f962d9ccdc2f9bdc2765c7c8d0379bf5ffa44bd70327c16703531894fc61b98163a639aa21022485baaea05b20ff25732900ff74e7e92a3262191c201615e8d417e9cd6644ba6bddfa1b5a83d2bd0e7bb5963db9cdb81a1cdff02200bd85442727f2f228ccab3252eb3e338f0aefcedc2d5d7fffce24e0b1e3e781f6a6b1df2a5e74dccec706a6bca5f47dc827470a994b935d214595570911620f88e241b408b3fa93d0dfd92cab0a414bd62a633024454479156884114e7c8f6631d81ddd78d296282d73218e63617b7a82c35691ef80fdb4f9c6cae7ff8bcffd16bfd2171a546066ebfdadbb3f6c4e69ea39e4c973b7701e48cf137e35e827a0673ea238d96f112a7e752af57ce39b8cf5ba0c35dd5f45141566f524d07b8f1280fe083f07fbaa3c1964f15f2782a1eea3407f6f714e30e6e20ad8e46a2342a47b410585ee254ae1ab74073aeb2decec0401fc38e5ddd1d9358c2af5e53754ac9097a696f065143915ac2c8b6414b75f00b45da0c0f803aa31c3573aff61ac8acbf282ed9c06cc4f0805038a2e76a59b5c080dddddf638304139daa3e61a745634360f2fdc3ee47646dc8d1afad384c9a0af9fe0083fadc4c69c36b8fefec515f0a20cef3a64ccdc5f5552f7565cd9008e1fc60bdf68e1cb272315f079a9820d25a68daae7742ccbbc2d1446ef3fcdb0bdb794448bb348b9c21a19759d55a266524ada87fd029263c1bf4f21946e9aef08594324abc4677198f97c7147bf1d53f5e7327cf4158329562e255f01f42d99da768eec1691abb2ba8ad2011cec9ea46bb3d682b77f8709ba5bcc1f2b5bc86b724fe3de6f0d5f8667fbaa98b77ed54d2986855e0840c89f2740876d6d6de7bbb7179d3e2dfb019133c8bb3b3abbc72552e74aefe18e7db9585cd638a76a3468341fac13b243548e2e875d426d4f17488c06e938331bda4eb7f5da6c9099259c82485082818d50bd597255d8da3f47f9680a3d4bdfff7f1bf093d3de22ad42cc9d68c625251c38358ead40c0e89dc1cb9043a97b72f5f7b7fe577d9e609ffcf2c81d54690ba97b15cc27a127fde339d267baae08397f678dc6c8e339ef1c0199994f8df7a8a6b89ec3187441c3be3db99c5f41a1bff273febb60bc52cb918d714c44638cab4c8ff265f488058d684181b4e4e1b29966845fb34b83cddc35d463ca743466bb60c8f2e307948e50aefeaaa08623327a0340005a6957242b61810928aeb162517525372c6e105f014ec8200c775593084c9fb454b731b1551f86e78f401d331f350a3a5b410a00a7dce84ddf3cecac77ba5cff6928f8bd7ca2568e0a287168fcea843e89c4ab780befa50c29c5accaa07bce01add32862a3ef22818b905c24536b87d48eee8d5f1e198f7bdaebbdb79132cec86cb01d6ab995334a529094513117e40e6d9bcb479617af50173b2a01ea5ae2f835801f8e8b32408b72be9debf0d192b82de2250264760b72a3c1bc44c97fd63bbc2c09f736b0622ea7e59cc2c7b49851120604f255b53981dafd847a49d96e02021d0659dcc79a9c2dd14e71bb80308b3bc7c18aa3c1e25ec484d68d8404cd4962ea33c3a1e45589a6cb4379f5cb97094b08bedcf77f97832ba384d7d93a8b2113315580cb7608c3219b02d47cd789066eaaae3a06425501289efd53c1562d5bca72a88004675a43b2c5c7e23bd0449c5feff43b7d2682e471f246e35da22990d5ecc32fdc91a6072c196cbcb260eced6b794324047e372c6836830fc8217afa2b752fe0d88f77c12f322c7eb640239b17c054840b278c6b6f77b6b0bc1d70b67782d5e071a4022727d0b05625c52e8f6658f2e434cca01474a1b752f3e7a0a520920566449e795d6369ba45635eae482bec124303829f2782f35c920b6978a40a3adcee28d4be60d78830d42e5082b46489623ded77814afd2989a809aa8ed2a4db4455cd7e88f13528eea481126232a0f4013f28db960452d1e8c1a00207adfd59ede483c982ab6fb598309685fd979de384d12a4be04c09f4456a45254b74c44b664a5d0095b9853946f50ac07dd34fb6d2b9612ea74c7f58dad1b9d8d7258bcdb9653987ca9b06a031d9ad4d0af939ca8ccd49540dc09025d41f2f6c8ce20d29484540efd9d6f78286fc5f450f04132278f05faa917d51c842014bab23a889fb9151b007613a0d32f67bfbc1a8b88c1e1a25c61e7d06bbc72d5792926b89a78f8f5a004c746014e0ab6136d2b3d558e9b89d7ff25fa1af1f047299ec8f002f8d5076b7402a24af99ceefd4eeb218fe3ecdedd7c1533add8745d7c13f8d279bd7dd1b9b5523414df11cf4de2a9c557ce00696fd7f4a01df8574a6029aed9a27a927a725a686838753d9bbbd147bc6931ac41ae09980c899eb0436576cfab9924ab049839dfc5f4afd03bfb6c860341eea72e65eab76a98a20ffd78d9f874ada92ecd8f45bbe10bc4dc1a613128181e0f902fc473b85a73a21568481583eefe50c64dac55bf39ae1d2c2091ba8f452f331d78d07d9e332194bdb102bd909db3d8f59a46593d8ec054728263c6b7fe040b2e7f660195fe4fdae26acb6182dbaca884309cfb0e9d1c2169e507dac0faa05a37464ab12d1b16169642957a5028afe24e8872166bf0d59f30a3b8972eece7106ace641410781fa04bde3ad9cf0e271a196d9627eb0417449bec3766cca8fb3869acd30229d4b30d97261d73b1279d7158514933eb0f1b6ad6af6542ec166cc6272d9ba237516c7c611dafbb159a59a8ad0aef914066f486f07feee992b92b015be9ca5c1d03fb22415d5bfe229de27a1cfba5fcd70c856eb9861c54384490bd050180a67886a1dbc2564175d8647989ad0a47e2fbd87c02d099b3e29dab52bee8d2918250c627d560df26cf7c1553993c8b4c66e493d76c102eed7760e781a7711d2b9046aa8c1d9911525a8ce3010c6d13396f189cf2d9a11f8a6be4117d925074ea17dd0e627566dacb796db8e238b24016f39e3c7829f53b7629325eac03cc5698732dec31dad86eb5e9931e511babed00e844d138e5d7746f08e329bbf2c540b7573d40c9db695130eb052c0e6d64f409bbaf400c3ca0462b1aae04398956777e5483e00c28e23825f4fae094a614c8a7398c836d3547487af04415a87b3a665dd690f73f23c4dae5aa18348aa42d8318beed307d2520b0565c9b474172b02b24bc329046e51d46d95c13adf9ceaecbcfc260c29e24fd39a14f1adef65e028a42f6ab883a3709a1c576adec4a9df2f7e5f5dad8a37cbb99b26c90154f0e228b9f7b184cfa47fa2500c3d2f24b319198f55466435b8b316a6806565217a4186933e20669b69035891c4532a8e097ab9662a52fc448c751620f26be62f6514e5a0822ce0eb67296fcb33daa965cb190487fcc108242f31dfb9242aa663ac2d18471653faa9b51a784c1aba481a35237141f8fdb38788636da48844d7a2d7f85c7ca6ded6a692e49575f69e0af22fd8b12459921153b86205de3ceb977fb8dc176a0afa4da9ec613b4081eab8a76f20904a9565cd6030433683658245423e38f2d2180829aff75e663b883d4a5a32933f7a2c6ddbd5e997293475af5849942142cfca1b719d4e8e9281da8b999616174a61270799e56779c9f1de02e6b9fb0ea5119382e07131c20092ac649914b73470b6912b859d759a6b9d21ce723a5491ee63aa51da0dbcfb25bacd5f7ac2b740d0731c14e6949c463a572e323d67801e2b44c89963b7167f03de78526569382ce846ccf05b68253012cdeb03f5162c6604094eb8549dd1277dc3f18abd24f5e00ed1f3c57f9c207c065e56ae57fb171265ecce10e0e2580c4871fed04716d07e792dc99e784b88b5f4c00c85a2c8629b8e2ef1b4061eb7a35178e267a119f53067f5f48382a3ae089b05ecd1a822798bc28bcd8137894f69c33bdff87f17e5c92c779a141a965b9add296662077bd876af8c72cf7408b9bc0c4b9bbf5c67a4dd75136adad5f730879c9243ce692b0995307f03ef5e08befb5271059f1858b94b3fd7700c3ee590a66ec16c656ae7c42ac878a8ede37def5a82c95a6f35670914ba2d71fe1a2a21d7a55d57e552ec8d98ffd4bbb71c087dc1ebf3ae38deac48092525ad506edcc9fa75fbffae53cd080b72d5ae7705e0b94f0cc8cae38f9064e3e67fd2eb1930c199aadfd103c119acb7cd5b988d76e4fb33d32c5c4e8c79dd1af35a2e5400497be35a530d7eb6e98309e5479829089699563eb62a2ae04e5b7820a61ea73fa7f3a56f68feffe7915c9e7549655f79a7b95e4999b5b506def803877b6806ab3a0a9752b1452d6a98d651e29bc0bf6585665b0a45cbfe30204e399bb2c59dcf43de55193a4f6865061d8d7be0bbcfc70f325218f3919194fea67ba6f2b59ef4fbe77f17f0027be239bffea8cc8b2752dfdd30690d58334fcf52784b3ad70a22c1bba6df1fa0a978b93709eff3df5a33b5b89669d71d926413ded743a69d2b34e9acddc2a317636ac7e054e7ef684718a8b3c8715730830cb1fe290521b76cdd015629842a24d456d208dddc96265bff8d4b0df69ce81fcbee4046a5609c9583d91367d0b6e7530ba0f8f5f223dc80beee9b73365f28e8f9f6e8fd8121f047d117fd24f8337bd2e258910c3a6bea297214ef78bf41ec25822dcfbac5c769387968330cf035539b56ed62b8c77e1c095855e6e8e6d8ace4e80f1c5e504e95e1920de13bf1f14f49f424eebbb2dba8868a87f5db6c3937922d00a4ef2acdc0a8fb9c461d41d459a5d6610f535658d01142fc5a6f9d9359f56ffc0baea6f04a325d6497f03ebc51e9bd4828bb55713f01c20cb0f3b88e85861896bfebd63a64143086ead2f770252237522ca61627939fb9dcd7bcf85b9f9d0f13340cfaab0c4f8ad8279ee16dedecd7b271132cd1dc92626aaa10bf9f1a545af78fa9087e5885718c36de5779f57c3f1fa9ce66dc80c66d1732e0f078243abe4132eb8ae6a8b5ffebd5dfe3a2c051cbc9a3af0dacaf60f68f3e9eae21d54cad95a67572d32fe9fcab19adc1b5dc586579e4eb29a667b7cd99bcfa8a9edc61da2caf2f3d2e2b137456de745e15971f2a0e061defc98a7ca35eb5bbbeaa6034d02dcb5bae4b58a662357caa82ce6eee177a42e4d997badd4685489b68baf19f252e5f662baea8baa9a479af63af1bb9d44a42e17160fdfe118c58f4020b496983f5c754c7caff0253a6e4ddeadc8d4046ef8ffbdc72050133aeda54e645e2d3df1cc1db549145f9ccffde80fef9a5c87f093883c6a08a69bb571c0673f4544aadc32b0786c74097f791eaea8c4af67069889fb506064e007518e0849f33e933d294b59ddd4f3a2b82d24d7fcfb59f043bdff72a7e27191e3384c70e1c5ebc0d3bc9c59e48cef88c4a74feeb505bf0b55935f98caf765d2c0d64750e64cd0401cde5760aa67a1cd66c5bf155a7bbc2b310e6f020069ca0ed673f10bac803e695080448ed74c57d2be136997a70af9ccd3021187c4794c96b034b092f094bc9772b8a9ae9bae54475c11e3ac942c2f50869db85d7416035ac6bd7408fdb5bf8026d5470f92c237554879e74a54ddc3d5c1fc3dcb71c056550a3a4910595d50d529627b0229b90d878e486148dee74545985bc014831d47498e8e858206e7482859be774867316c46e51a6a1553607055ac2759fc2216a81e907d7e556742fbaea8d700b4f16a89cbcc1a2cdf7bf17cdb28e6a2153aec6ec7639ce9c50c19331483b7a9d68776441270f7cbe793ae46333233cea5f9d7f59839707c845a41b4f83cbbcbec025d0c53e794990c45078508f8fa756053156e9e362d2f2d3ce0f6f2af47f558e92ab3b4da8f013b4d0488be6399c2bc14c2d76e40283e8540822a78b96437e54a514ff268449620f23df2f63fab0d3032772f725bbd7f8b564e2c814c023ffff2148c49aabf65a788b9ab48a2b58d8fcc022891eb6672a4e48c65d672a4ca3cce818105efee5c85ac229cc2cde39d0141507f311ebb8e115541363715eba7e7411f799b3322707115a3eb6e1a0a81e2cd4b99002bf5566c57293bb021142e5edc3956734ba2770cabe7d457be5dfc9d7d015ee8c191e30c303d5733ff12af5a45993fa4fe2d9aa674833a000db00a3ad32314caf193ad073659369df2c9ad12da2b2c1b8d5a28ae89104bcb2794bf2418ed457d6845a99145027ef3c82325d170e309d700c3826de60a62e7d68ca4b68fb3e03e8b1481dd55e8301e52f5735c7d3f2f13a5c0d46f2b20acd15a44b21f9e777be4d64246784c1cff1686e27183d7f5705900679384eb9b214cbecee3a55005be3fd0f52404f2777d6b290c37949842c7e3f67a3df43d987cd72b79c1aec010c469e1368ffee3db379e484dd9807ec77980422248b63ebe20e7c8915cb1577d9f60452900d576ab23faadfc3d84213e572391895e83c8851d7d0c4e3d3eb75026e632a8bdde88fb34dde70c537ea7402ca3f170507cb271e65811d4d84e4630fff1eb9c27e2a33de3cc866eb28786db2b96d75f08d0db89ee1f7f3d30ad67e76e75b2cc9527c597fe4a382840d044ef9a666cce672b0460673b5dba1a7003adf69ceafa0fae418ddea1f89943eae5a09b2ca4c02efc9fd64664e3ed9a6d3611816320cb4cfe0193b7df04f633fd1f0b53f2c48ffed7ad78408aae6f2090843961693f599490b9a917888d9a1c1cdf779ef081e76bc6f634b9579a550234acb4ee0667e8708d37425813029f8d869eb397f9d0b25fc89e9a227b61a7786beb1c8d0fd520cda3bce57450f80b1bb55de110351890b23e30528151c0e25d63973fd78e7e19f5817504d88bce7de34b3aa490c2ec5a38531b0f0aec77de0fa97411d2f81c550321e9a1e4df47cad509637744daa22694e080ec72664c5f57a8ca132fa4aa1e9030e92a0bbf7e52f6cef22a20f83b32fedf2189fcb16fd783435a835b929edb1ce465963eded55cd0579864fc7bb50c049cef1d0c5a8f097bbd5d78f28b47cfc05b4389168ef8595de6328437dbea4010ab11d62145624ccf9409ecd820cfa671db23fd31a468f2555e0e2d886738965efa40e2156f990cc00a1d0b47508ad7158aac73a94b8b9be9cfb4a00adc0c664f98eecb495b8fccf0b56418f447f0fd40778d0aa46102ad3f092eb2be7efc21f8d292ff9f3e1ed88a2fe5bf2d186117ea29f1a03bd8b5f9224684f744f2983afd5be057126cbb24ce0668ea811d36e25f25a4f3e0e6a3e976eabe6859523df1d713acd75c2fc8e849dcfb56d55ac93dbde03d992ece8aba4b347e0c4449ae265d0760c24e52cc2cfefd2d62428e98c8c572220725730aa589a80c7d693ea3b479db595055fa6712c43d45e33c4e0a9c91d2de5e2f636208c89ea8fa0881a586b18af0ec3c44d68baca81b2ff58bb434980a72ac05bb18c0a9071c1b7ad2e4cda9a88a9b8dfca925fb2cc16bff13a0573e45acbd3a29473e06869dedad0ce81de34c0c0654954d52e5e9c439a4e384f3c9dc4b42a01536cdd8d183c970ac9ec9d490572bdd84c8ef1d704301172e90df33a378ad238e7382793075434563fee7a74bb4d3e39a0c2225453b62e76ccaa48991a3a36f264dda3da7374373f268379f133712e8d0819fc765bfdcaddf3100acf9705a47e735ecdeea962e22a6ed47a00eb13d4a872f0a8763aa5cc64887e40fe52f77b53095057373a38cf171a21b14e605cfd2930c027aa2fef7a8dc7789392c491b59454bff54344fa98107bdc68c8295cbdcffcf53a01237cbc47b58ed07fafe2f05554e61028b6ff6d39923a0ad94fc84de3110ecfa78fefd5fe03ef805bf78d817b9cfd4feeea14541051f5e51efdaa29659869b87a924f67b28ab841d3160f800dc8502b7ce843678c087e0b609f7022a89c466a80117d9d43062fc9ce2d73e2f76f4296e194d8ce4deb9aa1b34bb0df6f485e145a8592da47d0da10de698085b1449e4e6226b72dbe70252deddec65b4efa2cdb615a5cdefd5d2fc82d11594765a2d5aaad5fc8a2511b6bd5f7315312b20c787acad7e1a145b4c8fbb3d93f84fe35fefb9ff8bece5bef16121152ad8a32b44e257ef2decc039c7f96bd3443cbfd3eb6f004d307f69be3df0d63599018f1cb83e7d5e34ed15e64de15e452fb2f8bb999cd79f44781d356a749fb69a0c1589d7e522baf505dfe1da6b54146efc775fd254fece57b03c17271c758cb8800871245e5618e56fede426ba7fac23e7474d7ef427e2c02cd564e8aaa191c54dd18f5a936bc77762ca4b436a65ed9b0d3017249d81ab78c9ec4fe3dda417d81f78bfdf2da48617e41e0d8672a10b01e3b3478e08c8cda5a1e37b83efc6d0fbba49f3555c03967672f974f13196171331005a11b8163f221a16714d0ed9e55a12d418ef34105f64f8f6f28feb4d99476aa9fa418c87713474666e989c69bc9264c91a2ed522f1e09b7f24c5f91c1c49db83a15edc290f30dfe5c8cb42cf5be50278861b46174aa62d8a83e6eda6f6a85c5f784e799d3f92174a61fe00d10def64eac91b8d71484dae5e5a5fe902b82b27013ba7ba7a052e94527c2d6a79bb81575f9524226b650558da6343d5ef024760dcf92e66b8909b144a314e6c916542177820820465db561ef56659c4ccb516d7cfaefe037dc7d2d59d96a13b3720d815eedc84b52bd145ca02bef849ef849ce656af3b3d2c8f8a5a3ceffaf5daf87c6d3a1aa855c2edd3d83c6449b0029281a93a46cdc883cafb4e5af8052bac85d4138476d902ffca7cb17ce75da0c1c783f4ac404672db6b5361a4e13328e45263e33628b2cbf79fc056a683dc5dae398fed1ab34c309c2ebb68869c80737556cf6dbf6e0ab23ac30abfe75fb6e3f14126eaa3ebe0eedf25fa9c9d552126b3495b626c3fc51f2f7775d7df5a6373899c9c6701bbda85cdcf1741d78663beb714b6aa2ba9fcaa4f0c04b06424ce6c6105336bd2d8cb5c93f6fe17915bf9fd2e4515b7b98d86167f2d47b52194613331dbc63da7c65df4f57515636231db252934e47aa95af1399456628a605b81759ee87c1082c683654c20164cd3db3b7d00219f229b2d27acfb0a302054a88f370101796573608f5deb8686ea9033e140406519e67aaf16980c9b53d9ff00d6cf6919732122d9b3a0f6e5ab9146670169312ec98c962bfac364a09ce98d8f23c9fc48c6e537fec134ea0136c4460dd5c633d949bc0c5b65ed8c4147def29743ebef9fcec0d910d466fb1dd46744bd6ddbd88257c7d9aa3610d17aef9af5d8bdaa05daf6536fdab4106c28994d8800cbf23307632ae5bd556bd8171f22936d8d8f3ee1efdecbc799bdaf7b3def0e75723e074c419332b7f2bd45faddb22b8def2bcdbb36cfed85eb82b00259daba8f383fc5aaf38508a3fa5f987e998e73fc5e5202876ce0dd1b7ede29251df230f5f126c4017778d0e316f6f05f6be36e93933473863ab728037a15c6ecda867d67b6914a4aa4a8be4e4ef2b8a61d5826da0051992672fd577bb2792aebe84632f9170d931d7037f6c5571a0a9e062c5a34ad672aae706152784eef9449b966478124373fbb40dc8cd80f97654920b15567a4ba09f2a57bb4eeb93865c7a73f30df477ddfad86cf8bc4f44ce66c640f4e54b268cb074df3f6593f2bbd4776c779d7779f048fade84b493712a56f4014e50474a55184f3a14be9f612d1a5227b2bbf02b12ceae2fcd4c6617224ae6a0ad9e8d184e3abf571cf4017072fe55a2a3557e08dd4cf3d5ec6405a9a31e993eb79a7aef133ef8f3907ce696c039a832f12a5b598065069855373dc97a9ef46e4dcc90499f6f1912d0812d540c8b259aaae6c9cb6b274f92b4d7b59af21aa186d9fb3ce2c56f821df3391e4db3abbaec11bdb8912dac7c2f865ba24d4dd82e5a65f0fdd99b7de239de43805522f9da4fbd397c65be1d314f6e6de7f4b1191e09e9dfb275aa21008620a9ce42d902a9ac602fb4cee9894b541bead3503340b04e2e1246e5e2f4ffd89b8144e11fb2c3155fcbd902c2fc3a42b4f7afaaebf951ad3a2cc2294c403f0a5de0d06bf0e3d289e9639609dd538e9089da14c7fa50023fadd3b6465a81be384a147847090f59859c80fc5668ad59a9dce2faa7cb1f3c5c2bfa4f3b84ee3dbdd8a5645a91e509f5932486f894bebfd76fb41880801f96daef7174a31f407456b5ac72be9419c82dbaa00d4912ee1bff19ebc662cb51abe2c51aff0773c86b64b68fa69410797e7319a22205571e45f1ab26e46d0ceaeff9effefffb81f1febc62088f893f782c6d50254506ceb7a9f3d83d41f2fa9be5bfd726f6dd07a0c08885a54cd94839badb0db57aa3e9ffc4ee85127a3ccc5e435190357c764aac8238150a3a3f8fb3a553ad3af017769e318b165d45d3266d77a2a4b7d5ce55bb74f7754170bc3ddbbd53b624f0b27d884a38d2a908f6cdf14a3089ac9f341f2f8da6af4370e4e3d441cbd289979bf9e9c1043078aa9608a80fb6fc6b4841ef719e017d35eb6cc08c5d7724df91e0dfe7a87d0ea56742e26d86e9e222157ea2fac4e9210ad9c64a6338f4259aee81df87f1e1086836664dd1641e8cb10351aeb45d91963ee7fd57816164787fdc5b14a4a03d993e0384cb82211e8c44d27b1e63eae6f8501b70a687d6bd30681651486f2864b04fc1464785e15a8b9de50db411553d225db0c6a4afdf8f64197da010bf2221959fbbb00744d4379c54de950ff65f5f2919170ea3986449790428ead469bd0aa8eba5377a0f20be95b096a4234257dd3123aa89b4f63dad589d60ca521167fa1cf506a6b4f48bfa466c66a46e2430edbf589601bf3f72e36c5043cb2ecc4f215cc15fc4b8e441a926aaeeb49cf475d6d2eec039e01aa9e2565b4ad6fe8680b86a82d147bca1860e63fd2fac5de87705bb5ab6d9b645aa7d72b03366afca356fea9c97517b6f92df5d9bca472161506979f4fe2e80dd4a933502d28ab1a9c7c53e2af9a6537e10648eaabf874868ce512fc0e178e748e9631ca348ecf23e9fbb8dc01f8b1d9b502c6cc183ab7ceef7d6a6a053199fb754def0d4fe5d98d782e93c06bf48a9f47ece4dbe7d00f37f80a2eb57ba31b4c188b7e47ec599e3143e0723d5d3a9c30cf4d79ed956dd7d288df6598e442fe5eb58c2f7b7da4e11b67bd63237f26cdad428b616c7027b9a7befe902061fa58da329f177e4392e226174eee2ebd1b0679c26f5afe932aadb6bd86f5bf6702e6c6adbe7d9c20d20a672705ef50f1fe5a51d73c601e300bf4539de7ebed8dd7df50bc0c35d6eed9c6ede11020a7eb1abd0e10d80b9978f5220115c0e55a2920e2392b31df755071da798f8f445d3889f53b8dd3b60d486e41a401ea755ab7e5d16633b913e75c0aab164be7d717fd2191d5c833fd972e068ede04e51da8e2ff508ec1ecef9c2da8a303a1f53bbf30aa9ccf463497f9642dcf06d69957cc7bccda7626e445c2156dc42dc21def6543b6d3abf9697c5895ccafc33bfd58c1c2e428fc13668d77288c273a2418f5032a56ea8669d824d0d969187f34dbb40b154adcf842f176ee308747bd43877ef5d1c6c5908ca76209a5f89fb2191318783055beb630388dd5d885c814a70bea2bb209a240a86ec19f6f58d52cbc4749aabcb5ee4ac765884faae4e646db715aba66ec9f507bb03248f68aea38f5c1198b54e5b42feabc53761a0d7e3a20235f9eb13bfc4b070978cf62dc5724e884f46178683df7e3541b4fa50e481128b73279115f71393b8217e713f157cccc19d03e67af98f925b4d43bd36970b1b64d487c98a4bb2c7fab1f6e03c9802e9df70617b55369aa602c10e99210656273e8cec4b528c4097a6f40f9c9c5363e54cce4940200b5bd5da12b507e571a267cf31532f1202fa3d73e14f01f9ce8a0ce73ab241b880e1e913fd23b4551e80eb5a152e097205345af3ecd3e892a4c7fd6f4c62da476a0603fe30f3aedbffb78660af47e5bba408de9d2544fed2157a7a113f697ea4dda542ed205bd82e100ceba2510169f8c56b7ee5a61e9fdc8ab4ca53fc2375960dfde6bb6c65127a2ec88d5a53ca2fdb18e14813bf4f70c2c86d4f281b16761aa58fcfe9ccf1b698793f839ea12a2cecf2a66863abb3966afa481e009bf342087498295d9a73f7514af0593f5acd061d5948e6b70785418839c395e05d7538258eb8adb4fe1b956146cb7dd0d5fb75735fe8b5127a8b63f82443c74a9e0713e1ac8687d55a9d66c6879921843204c9a225f89e5532fe398435bcc21f40135b54efd20932c3d24ebcd882d1ee2047a0d53388cf047156cabe5cdf8cab41e0449d44e337d51581ee021c210b3227ecb30671b01d07cbf29e5407ae60ed7ac07fdc2a0853897bb7b98a45f3dd26503a65ca8058e62a524614848e27ade326551114dc3c7cbee4912ce729c8421bd89e795b2d52601aece474ae90deb97d94b503484fd39541bd2ef09b6b13098f271d386fac481670357b4cf1ed8e6c95cb46264cf95963d7cd0941d655e88a8c431eb28da4bf849d5f860bff33e7b9832aee210d5dfe5193d55f1a60c76d97549a3daa05aceb1c69f6629b0b980d9b8bd2530d94b8e604d39f70dac6e501b8c4cf9dfd235c452c7bf58f9af5be6ebf92c2b4ad18c07b901bf17279124164d3efd081f1ab644aaa5e60436becdfe721483aab77264d104a4f8cebece905d091d36e3f1840fd08960f0610af6b10001b0aa24afd7e017e6201ad8f2f666df133119fcb1d7a775cd3cf924ce2c802a44e35be554ed6adce84192ac636c54d23bcb386b0f3c1c976253ae9f69f9b48c56e2b7d2e6b8035ad72c0d90b68e16d5a9ec1ca495252c4799ba4023f0e3b1e1f3f6ea3c10224efe7fd8b74360d2a6d90af94332d5fd6d6f019b180f41b11d0684d11bc8997abcfa51dbc5e9e9874a50db7552332b771f73e2f698a87f458487f6c721e9b6dbbfb7cb43713f32fbe496379d78d7272b9841aed0b84bd7cf12348f8f8d3a423fd25bd9107ffabff33c7454d04931d80ef331c51616bc761dfa69047c570e946ab2b283017c18d622085ad14fa932ba503fa5897e0c88ff004ff267a6fe8a77af305a120bcc58962f6f6801f491bded8b9e79819ec2611f97edd43b12bd9923c0873bc3abbbbd95b1da594149c0b9cc083307e7242da25d6ddf82670e412727709ef113c1df5c772d7f27ab68085a5f2e8a179795aa3cd7d17f99e14295fcfe87a3489a68fbc3b503a2ce4e5578a7c6968de5a144e1e8be64abe48105994bd138a159b8fa54363254b1d85a0ba2b383631e47702c4d411595b07914441df1edc3c8dd63c5fa867ea78417b604a4a1446373dc503ce33e7e2fbd124223b3a0379467fb328967572cb64f1fb16823f0edc56ae730f2db8ead93850139c3741ed91110b14e4c3a770a5afd51de9adff1ac41f200dfcbbfd0a44154fe819f19196bf9984cca3579781b218a342c53d15b270c97a5ed3e35d5674574a042216cccfd78b97a893c8e2f475fce380febf722636dedcbd6cd1909050c8cf08e2782267ccb1fe2116b07e64852b3ecb0aafaf45fd64e0887fb494305bc269a90a43bdb848ae16acf43a4da3936cc266d1171af56e26dd40a6f6ab0b6cf78c08ae8aba0882040f8d9b2d4f1cdee1f9dc0b485a00bca42ec65eb24051a70e9b6c59356665ce9de2843ff6eb7e49778112b1a8386f225e2a16f31154cd9c815ab432a12827071b5c47084ce998f59ca291da214f684e480cad40e09c86c367903b8a04210343b936994d52da1ab992df2c354d0110ea5ac0fac272c729c1ff6e8a0e37f788246f48a3858ebeff1d2aa296079cb805684cd83ed06159ade7ecbc045ddc3fdc3f0bd837a7f5aeb3064a4fd76ce0cd89ed198dba3be70aa88f21522f7eb3ef6fd5fe7454d239a4a8b3e285115ab4e40d70fa26dccdc2bc9cd879583295b1923239f21797bcb093090feb6bf35a7201acfb9742933695af129110a7f63660b53c6a6d3fbdb8574dd50af6807e2865a69b3776674d85bbfbe7b23714c5d4ba2d3f2451d5252e5c6667df7f5dcfdf58a20f3f658b363c65f335a8147aa61ffee7c6223b85516580eeac47a1763b842d8abd220f773bfb6c15e8060452bae3c0f9c2f2f9e3aa2ecf795dd49222e7b335c89eb20fc1d6e0b262e686df5d9132a363ed3ef40928c14c5f6131628f8ea8115e5b8c7be92dcd825e9f28cf0e754b705b76b34d9cd065a970bdf67a31865fef8e98d720b4ebe3ac3b18c71318c650d6458a49ca4329bdcac82af16bd1b643d780e8e24f5e6fe49e0d5eb550330e0626934e996b795c1bd622799f90eb26dc0ff9ad376525b21a4bf6114fb32a3ae270c1284e693be84fca3346bca812d59efd28524f8974b84a448e7369b1039427cffaae0ceda5a9ef42562afccbedebf37522bb999d568281beba74ac8409e6c0f0a50cc21e18af82ad213f7bf382645723f31443eabdaf6c880952c2cc25b41d5cda88e50987130ed6502c41d2d5de18d19ea0746da1dcda0fea2357eba84078e4c14faeb2a97e34830352363bc8fee761cc49a99baf449a705c00415627d3a1d408b570e6b212a2ffd9faa206311f6660cf187c0442a858d6150585839425cb1d95b309fb8e6cd9e785051d0788352e648131edca0db1e7dde9d42ec9adfd2ba4b2c4b780acb4f1ab68bf8cd4aa4bf6e1060885dcff85b973df76616c3a2053669844e8310d753750b358bba1a1c2a924332c7a8f30338bbcf0fd87590e9aeb6310398ded4487ddc957fafbe93b0680706bfe9b86ecd50138fccdbe022061887874ca3f1959bc9264dc4928caf4bb71032e23b6cb47c1542fe00d6fdb35b208d726a940cce3d159d3f7d41560d75d373069a6714552f85d21be1f3b02b75c0523dcc04dad6a99b39c6541bad46eeb40896145c8e0d3f0960c5336869bf3c4f877c1e14cabe05bd7b83a5f14d0fd42e55fc4ee135acfe65d97181ccedd2378774df90b04e0e23228ab190b97f286909c41619a709fff3682e745372ce09735c8d57b5eb21db5605f70dc2a0498c84da998754a2a2ae671d7f5a9f4a33171b1980206c531fd9c0b28a8ce248df365d1dada972eedb8fc4d257b56f733b2a0798be3c6ae98969c5ece1b9b326c3b6778c253172ea19c1edeb7a4101705fbee386a5895cce2be35053e8ad1a5d7288ddb8bc818c4dcc2feb41fddbea5a03da2c2d88459adf09227bb31b99577b658843c6ad009f62adb73f4f86d8f0621792bbf00f6c6cc8bcd7fbf67a5e352ee41ae5350b2ae4742e5bee989e1f061e175c75690996d1cf587d4f74b939bdcf633b27379510da04a7fbc504ef3513ea1ce745bab72acf6c30c6a37a886a326a31b27406ef3268c80c708688b258bd21118e46651be93e2f667d30e7c7b8be9fb31fbb6266297a9c1c41eecef7ae7e679c738e55b430c3bedf7481c5f115c0c532a402474f4e8b1e117786f3b48692dc7b75a987f5005922498b624c4397b61b6063bb937ad1f5754f168ba9bdf57eaee60e21a4ad397b787b4c17d97b6d942f8af50d4af6832130490b3bed1786274bb469e1ed857475d4422de0904ccce1d6755cd41bccbd6541066b553e52a06550551c5d289c2b48507117f49b4ad267cf9df3de80c52232cf06484dbfb0f9956b18a97bc5facd2fdcee7fae724feac3ccab236b75a400e78806fee5495ba064f22a0fd05f10d749a59b2d3f97edb7bf62a3dfacaf68e79dac03467cb38464aeabc362b273840b41b3252cf15bc3b576ccc42d7548e53a01d6cbe9526913cbe78420277ccba321e5ef17290372e5a42ec3e0d756bc374e1ced2b89513bb0286dff386a58ccab3ee8ec10d7cb14abc325dff43aa4f64e477b8d6280fda928c31e7c1f338eb9d3f878bc965b1531e833a708a4750bcffb317fc989126be358c10f73ca2822f2ba5ce8126a1e3682dfbb47b94999ba14b512dd3c7bf5de7057ec3d2e2b7c81a728a8606acb950b732ec592cb3b5bafeeca572bac0ee94b94ede13a01236dcf29dd23a2d3ae760ad3c8b048803093110033e6004f70f6fd3207a3dba79559ee2ea6b2e2759f32018e0182bdcd53c6b72df61d4925092b93faf2cc845915ede7fdbd16275da32acde580f3e5c274aa26e162e4b2a97ed7a4dd7367b5c525f9f56f3235190e553290e848818572c1ccf430319a8973ef58edfcc2176b29d0c18bdc12d6495b14828797af9e901e7d261bb9d8d70955c2baca88d0e2f7c85f9e6c3eaa7aba53df57a9aec8293fac2157cc34583c40d71be499b42af715939ac429341c4158c097873d9567831e6c048b1a9c3f2c16340ba18482d6e974a7d31b2ea9f812e2572db09e6dcb825526f72f2c4cd801fcfc432be6a7eea0f90fa09094313b00003f747612b32d657fe582fe139dd1070ae4c92c529eeddb5be33ccec7410da787f88b2469d00db758a8480b91c833103470f2b1b81f068da49387b1a1ecaecacaaef6da4826b8446def021b4dc295c7cb1575e9aa13d63f85e4ba47c0aa0a9533f39b053725f784d9d752806bb106686b3880fcbccae48479bed98384e3b9ef303361dc1ad83210cd9c107edcd58c9ba2f2bf7a3caab93e3ab3aea1d096484b988ec3e86023e53352d2ce5dd306854b591a646bfea499383dd0fd291cecc6455767eb01a73749d4dc2a62fb1d7ca78dd417bdd027c19593e69f67ec02bc60809130ced34bb137129f8719eca84ae5b0f4d2599dcb187d31797c603d0c3ab75aee38a8f789e0d04c4304157ce164c9609a734f53cb9a3b86aa20739f9f090e92d9c99374b4fdc7c28296a0e85bc6268be99017b5de4ba496ede722f9382f4f80caf431cb81c7bd497347172734a45a76881126916aed60e8d8f6996ad0583db954366488bf6a880be722ea4df3900cef90cbbe2c54a54acaad0ba439f11dd48d759ceab88ce93aa92885c1adcae82a8800d50a9eb2100f651f1a3641fabaa98634a071adfea0257b1bc308a4e9e7ee424f6b1d192dacdb926bb16a7496239903d641530b90f7a32df9a16f6dc3f6cf1cb6dc461f52387f32025b8b6028278a874e2fc1a54148713425cb4206f1954f2cd6c33d04ba0579c76b395f53abfd1b8d98c074c59fb0c85330c7d48b6def64982959573d0bfaaf16d86b18bc6d2f75c7a6eb46251f1ebf7ceb11efe7e5902028907a0c9283b1876af55aa5d2c9afa09ee93ae26d783be8a848b378b44f914f08b8c8932b5999cc2d66eaa1009d8d2487acb8f570afe4353189ce79bdeb5dc1f2f299364af57e1d10f8faa3e4542da47d2066e1322f9422231990926394d387b60e66d84bf6c38377ed58ffdd04124838f9b9d0c9cf7d58831221140057bb96ffba279d80cff16b63e164eb0c5a1da27a416f1fa97b00cbd36a91e72543071583dfbc46beede928f333bb6bd961fa90265b429058f5cbdd38b44111d52f3b15d86e8bf2904d677e75009aa4fc2b9c3aa9ee43f299a666fcd55173189a27deb13549dff18591a8ca1ac87858629d65c47c7f9c77f73e6df7266b66a5b4120d170cec36ad8c1566efb1a1ae70b32bc43ef6f62bb86600324cf1bdbdbe83a92f013d1f03a643f63095c0c531d329fe0f8ccbaa7200ce88fc106c00cdc201238ec1fd7b0ffde88bac9fdd15d5edf367fa57e8381d2973013e2c6eb8a6c22f3152e883fcd44859aa284d49e3e0e9670cf0c17970be609a9def1dcb1a81209890d9d0b33a27946df97d089f5aef3c582a56572506343247da2accf850f6467876651d486a3379b683a7edf38b41bd515f82670de471fa44d8757c95dc9a289b45833cb3c48af4de04c97cfae13d48cf8f913df3e9cb50faaad10ccd8a2caa7305cb651216d10740920c7f220b955af25b5604bd28f1e31cef6aa44f99b68cb698440c0254159b0d3042558993b573c76a6c82cc8ea6b2883e06ae3562b20599ce5dcc597ae1b24d624b21b7a4a986fefb529c978bf4b91748db994d9b351c657c3cfc1caa34cbb80789cea3f2312bc63582c9ad47bbde8bf7fc177bf883c87c2b0c22eef5d638f8b85f1602777d0cb8d7f5c78f7caf88ec95dddf5c1b9bbbdd6db154c1982ec9474b32f073e</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-shrink\">\n      <input class=\"hbe hbe-input-field hbe-input-field-shrink\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-shrink\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-shrink\">您好, 这里需要密码，如果你确实想看，可以联系我</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">",
            "tags": [
                "Linux",
                "锁"
            ]
        },
        {
            "id": "http://example.com/2021/11/15/SystemCall_ProcessCommunication/",
            "url": "http://example.com/2021/11/15/SystemCall_ProcessCommunication/",
            "title": "系统调用与进程通信",
            "date_published": "2021-11-15T02:07:24.000Z",
            "content_html": "<h1 id=\"系统调用与进程通信\"><a class=\"markdownIt-Anchor\" href=\"#系统调用与进程通信\">#</a> 系统调用与进程通信</h1>\n<h2 id=\"系统调用\"><a class=\"markdownIt-Anchor\" href=\"#系统调用\">#</a> 系统调用</h2>\n<h3 id=\"查询sys_call_table的地址\"><a class=\"markdownIt-Anchor\" href=\"#查询sys_call_table的地址\">#</a> 查询 sys_call_table 的地址</h3>\n<p>通过命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">sudo cat /proc/kallsyms | grep sys_call_table<br></code></pre></div></td></tr></table></figure>\n<p>查找到 sys_call_table 的地址为<strong> 0xffffffffb48001e0</strong>：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090038725.png\" alt=\"sys_call_table地址\"></p>\n<h3 id=\"查询可用的系统调用号\"><a class=\"markdownIt-Anchor\" href=\"#查询可用的系统调用号\">#</a> 查询可用的系统调用号</h3>\n<p>通过命令打开<strong> unistd_32.h</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">vim /usr/include/asm/unistd_32.h<br></code></pre></div></td></tr></table></figure>\n<p>如图所示，可以看到<strong> 387 号</strong>是可用的系统调用号：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090150894.png\" alt=\"unistd_32.h\"></p>\n<h3 id=\"创建dzc_testc文件\"><a class=\"markdownIt-Anchor\" href=\"#创建dzc_testc文件\">#</a> 创建 dzc_test.c 文件</h3>\n<p>创建 dzc_test.c 文件，在文件内定义系统调用，其中使用到的 sys_call_table 地址和可用系统调用号为上述的<strong> 0xffffffffb48001e0</strong> 以及<strong> 387</strong></p>\n<p>代码如下：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/kernel.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/init.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/module.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/sched.h&gt;</span></span><br>  <br>MODULE_LICENSE(<span class=\"hljs-string\">&quot;Dual BSD/GPL&quot;</span>);<br><span class=\"hljs-comment\">//sys_call_table地址</span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">define</span> SYS_CALL_TABLE_ADDRESS 0xffffffffb48001e0  </span><br><span class=\"hljs-comment\">//系统调用号为387</span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">define</span> NUM 387  </span><br><span class=\"hljs-comment\">//用来存储cr0寄存器原来的值</span><br><span class=\"hljs-keyword\">int</span> orig_cr0;  <br><span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">long</span> *sys_call_table_my=<span class=\"hljs-number\">0</span>;<br><span class=\"hljs-comment\">//定义一个函数指针，用来保存一个系统调用</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-title\">int</span><span class=\"hljs-params\">(*anything_saved)</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">void</span>)</span></span>;  <br><span class=\"hljs-comment\">//使cr0寄存器的第17位设置为0（内核空间可写）</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">clear_cr0</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">void</span>)</span> </span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">int</span> cr0=<span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">int</span> ret;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%cr0,%%rax&quot;</span>:<span class=\"hljs-string\">&quot;=a&quot;</span>(cr0))</span></span>;<br>    ret=cr0;<br>    cr0&amp;=<span class=\"hljs-number\">0xfffffffffffeffff</span>;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%rax,%%cr0&quot;</span>::<span class=\"hljs-string\">&quot;a&quot;</span>(cr0))</span></span>;<br>    <span class=\"hljs-keyword\">return</span> ret;<br>&#125;<br><br><span class=\"hljs-comment\">//使cr0寄存器设置为内核不可写</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setback_cr0</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> val)</span> </span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%rax,%%cr0&quot;</span>::<span class=\"hljs-string\">&quot;a&quot;</span>(val))</span></span>;<br>&#125;<br><br><span class=\"hljs-comment\">//定义自己的系统调用</span><br><span class=\"hljs-function\">asmlinkage <span class=\"hljs-keyword\">long</span> <span class=\"hljs-title\">sys_mycall</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">void</span>)</span> </span><br><span class=\"hljs-function\"></span>&#123;   <br>    <span class=\"hljs-comment\">//在这里输出我的学号和姓名</span><br>    printk(<span class=\"hljs-string\">&quot;20192121026_邓智超\\n&quot;</span>);<br>    <span class=\"hljs-keyword\">return</span> current-&gt;pid;    <br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">int</span> __init <span class=\"hljs-title\">call_init</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">void</span>)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    sys_call_table_my=(<span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">long</span>*)(SYS_CALL_TABLE_ADDRESS);<br>    printk(<span class=\"hljs-string\">&quot;开始执行系统调用\\n&quot;</span>);<br>    <span class=\"hljs-comment\">//保存系统调用表中的NUM位置上的系统调用</span><br>    anything_saved=(<span class=\"hljs-keyword\">int</span>(*)(<span class=\"hljs-keyword\">void</span>))(sys_call_table_my[NUM]);<br>    <span class=\"hljs-comment\">//使内核地址空间可写</span><br>    orig_cr0=clear_cr0();<br>    <span class=\"hljs-comment\">//用自己的系统调用替换NUM位置上的系统调用</span><br>    sys_call_table_my[NUM]=(<span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">long</span>) &amp;sys_mycall;<br>    <span class=\"hljs-comment\">//使内核地址空间不可写</span><br>    setback_cr0(orig_cr0);<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br> <br><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> __exit <span class=\"hljs-title\">call_exit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">void</span>)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    printk(<span class=\"hljs-string\">&quot;系统调用结束\\n&quot;</span>);<br>    orig_cr0=clear_cr0();<br>    <span class=\"hljs-comment\">//将系统调用恢复</span><br>    sys_call_table_my[NUM]=(<span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">long</span>)anything_saved;<br>    setback_cr0(orig_cr0);<br>&#125;<br> <br>module_init(call_init);<br>module_exit(call_exit);<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"创建makefile文件\"><a class=\"markdownIt-Anchor\" href=\"#创建makefile文件\">#</a> 创建 Makefile 文件</h3>\n<p>查询到内核源码的路径为 **/usr/src/kernels/4.18.0-193.14.2.el8_2.x86_64**</p>\n<p>使用 vim Makefile 命令创建 Makefile 文件，并在其中添加内容为：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">obj-m:=dzc_test.o<br>CURRENT_PATH:=$(shell pwd)<br>LINUX_KERNEL_PATH:=/usr/src/kernels/4.18.0-193.14.2.el8_2.x86_64<br>all:<br>        make -C  $(LINUX_KERNEL_PATH) M=$(CURRENT_PATH) modules<br>clean:<br>        make -C  $(LINUX_KERNEL_PATH) M=$(CURRENT_PATH) clean<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"安装内核模块\"><a class=\"markdownIt-Anchor\" href=\"#安装内核模块\">#</a> 安装内核模块</h3>\n<p>执行命令<strong> make</strong>，并通过命令 **ls | grep ‘dzc_test.*’** 查看是否执行成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090308520.png\" alt=\"make结果\"></p>\n<p>使用如下命令插入模块：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">insmod dzc_test.ko<br></code></pre></div></td></tr></table></figure>\n<p>使用如下命令检查插入是否成功：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">lsmod<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090421309.png\" alt=\"插入结果\"></p>\n<p>可以看到名为<strong> dzc_test</strong> 的模块，说明插入成功。</p>\n<h3 id=\"测试\"><a class=\"markdownIt-Anchor\" href=\"#测试\">#</a> 测试</h3>\n<p>创建 test.c 并在其中添加代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;linux/kernel.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/syscall.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br> <br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">long</span> x = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-comment\">//测试387号调用</span><br>\tx = syscall(<span class=\"hljs-number\">387</span>);    <br>\t<span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;20192121026_邓智超：%d\\n&quot;</span>, x);<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>使用<strong> gcc test.c</strong> 和 <strong>./a.out</strong> 命名查看运行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090504128.png\" alt=\"运行结果\"></p>\n<p>通过<strong> dmesg</strong> 命令查看系统调用的结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090725356.png\" alt=\"dmesg命令\"></p>\n<p>可见输出 &quot;20192121026_邓智超&quot;，说明添加系统调用成功</p>\n<h2 id=\"进程通信\"><a class=\"markdownIt-Anchor\" href=\"#进程通信\">#</a> 进程通信</h2>\n<h3 id=\"代码实践1\"><a class=\"markdownIt-Anchor\" href=\"#代码实践1\">#</a> 代码实践 1</h3>\n<h4 id=\"信号-signal\"><a class=\"markdownIt-Anchor\" href=\"#信号-signal\">#</a> 信号 - SIGNAL</h4>\n<p>创建 signal.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;signal.h&gt;</span></span><br><span class=\"hljs-keyword\">int</span> k;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">int_func</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> sig)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    k = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;int_func\\n&quot;</span>);<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    signal(SIGINT, int_func);<br>    k = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">while</span>(k == <span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Hello!\\n&quot;</span>);<br>    &#125;<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK!\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc signal.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114172111407.png\" alt=\"signal运行结果\"></p>\n<h4 id=\"管道-pipe\"><a class=\"markdownIt-Anchor\" href=\"#管道-pipe\">#</a> 管道 - PIPE</h4>\n<p>创建 pipe.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> p1,fd[<span class=\"hljs-number\">2</span>];<br>    <span class=\"hljs-comment\">//定义读缓冲区</span><br>    <span class=\"hljs-keyword\">char</span> outpipe[<span class=\"hljs-number\">50</span>];<br>    <span class=\"hljs-comment\">//定义写缓冲区</span><br>    <span class=\"hljs-keyword\">char</span> inpipe[<span class=\"hljs-number\">50</span>];<br>    <span class=\"hljs-comment\">//创建无名管道fd</span><br>    pipe(fd);<br>    <span class=\"hljs-keyword\">while</span>((p1 = fork()) == <span class=\"hljs-number\">-1</span>);<br>    <span class=\"hljs-comment\">//子进程返回</span><br>    <span class=\"hljs-keyword\">if</span>(p1 == <span class=\"hljs-number\">0</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">strcpy</span>(inpipe, <span class=\"hljs-string\">&quot;This is a message!&quot;</span>);<br>        <span class=\"hljs-comment\">//写信息到管道</span><br>        write(fd[<span class=\"hljs-number\">1</span>], inpipe, <span class=\"hljs-number\">50</span>);<br>        <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>    &#125;<br>    <span class=\"hljs-keyword\">else</span><span class=\"hljs-comment\">//父进程返回</span><br>    &#123;<br>        <span class=\"hljs-comment\">//等待子进程终止</span><br>        wait(<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//从管道读信息到缓冲区</span><br>        read(fd[<span class=\"hljs-number\">0</span>], outpipe, <span class=\"hljs-number\">50</span>);<br>        <span class=\"hljs-comment\">//显示读到的信息</span><br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%s\\n&quot;</span>,outpipe);<br>        <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc pipe.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114173812416.png\" alt=\"pipe运行结果\"></p>\n<h4 id=\"消息传递\"><a class=\"markdownIt-Anchor\" href=\"#消息传递\">#</a> 消息传递</h4>\n<p>创建 Sndfile.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;linux/msg.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">define</span> MAXMSG 512</span><br><span class=\"hljs-comment\">//定义消息缓冲区数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">my_msg</span></span><br><span class=\"hljs-class\">&#123;</span><br>\t<span class=\"hljs-keyword\">long</span> <span class=\"hljs-keyword\">int</span> my_msg_type;<br>\t<span class=\"hljs-keyword\">int</span> i;<br>\t<span class=\"hljs-keyword\">char</span> some_text[MAXMSG];<br>&#125;msg;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">//定义消息换冲突内部标识</span><br>\t<span class=\"hljs-keyword\">int</span> msgid;<br>    <span class=\"hljs-comment\">//定义用户缓冲区\t</span><br>\t<span class=\"hljs-keyword\">char</span> buffer[BUFSIZ];<br>    <span class=\"hljs-comment\">//创建消息队列，key为12</span><br>\tmsgid = msgget(<span class=\"hljs-number\">12</span>,<span class=\"hljs-number\">0666</span>|IPC_CREAT);<br>    <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//提示键入消息内容</span><br>    \t<span class=\"hljs-built_in\">puts</span> ( <span class=\"hljs-string\">&quot;Enter some text:&quot;</span>);<br>        <span class=\"hljs-comment\">//标准输入送buffer</span><br>        fgets (buffer,BUFSIZ,<span class=\"hljs-built_in\">stdin</span>);<br>        msg.i++;<br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;i=%d\\n&quot;</span> , msg.i);<br>        msg.my_msg_type=<span class=\"hljs-number\">3</span>;<br>        <span class=\"hljs-comment\">//buffer中的内容送信息缓冲</span><br>        <span class=\"hljs-built_in\">strcpy</span>(msg.some_text,buffer); <br>        <span class=\"hljs-comment\">//发送消息到消息队列</span><br>        msgsnd(msgid, &amp;msg,MAXMSG,<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//消息为end结束</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(msg.some_text, <span class=\"hljs-string\">&quot;end&quot;</span>,<span class=\"hljs-number\">3</span>)==<span class=\"hljs-number\">0</span>)<br>        \t<span class=\"hljs-keyword\">break</span>;<br>\t&#125;<br>\t<span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Sndfile.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114175040124.png\" alt=\"Sndfile运行结果\"></p>\n<p>创建 Recfile.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;linux/msg.h&gt;</span></span><br><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">define</span> MAXMSG 512</span><br><span class=\"hljs-comment\">//定义消息换冲突数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">my_msg</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-keyword\">long</span> <span class=\"hljs-keyword\">int</span> my_msg_type;<br>    <span class=\"hljs-keyword\">int</span> i;<br>    <span class=\"hljs-keyword\">char</span> some_text[MAXMSG];<br>&#125;msg;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> msgid;<br>   \tmsg.my_msg_type=<span class=\"hljs-number\">3</span>;<br>    <span class=\"hljs-comment\">//获取消息队列，key为1234</span><br>    msgid=msgget(<span class=\"hljs-number\">12</span>,<span class=\"hljs-number\">0666</span>|IPC_CREAT);<br>    <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//接收消息</span><br>        msgrcv(msgid,&amp;msg,BUFSIZ,msg.my_msg_type,<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//显示消息</span><br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;You wrote:%s and i=%d\\n&quot;</span>,msg.some_text,msg.i);<br>        <span class=\"hljs-comment\">//消息为end则结束</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(msg.some_text, <span class=\"hljs-string\">&quot;end&quot;</span> ,<span class=\"hljs-number\">3</span>)==<span class=\"hljs-number\">0</span>)<br>        \t<span class=\"hljs-keyword\">break</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//删除消息队列</span><br>    msgctl(msgid,IPC_RMID,<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">exit</span> (<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Recfile.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114175351513.png\" alt=\"Recfile运行结果\"></p>\n<h4 id=\"共享内存\"><a class=\"markdownIt-Anchor\" href=\"#共享内存\">#</a> 共享内存</h4>\n<p>创建 Sndshm.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;linux/shm.h&gt;</span></span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> shmid;<br>    <span class=\"hljs-keyword\">char</span> *viraddr;<br>    <span class=\"hljs-keyword\">char</span> buffer[BUFSIZ];<br>    <span class=\"hljs-comment\">//创建共享内存</span><br>    shmid = shmget(<span class=\"hljs-number\">1234</span>, BUFSIZ, <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    <span class=\"hljs-comment\">//附接到共享内存</span><br>    viraddr = (<span class=\"hljs-keyword\">char</span>*)shmat(shmid, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//提示用户输入信息</span><br>        <span class=\"hljs-built_in\">puts</span>(<span class=\"hljs-string\">&quot;Enter some text:\\n&quot;</span>);<br>        <span class=\"hljs-comment\">//将标准输入送入到缓冲区中</span><br>        fgets(buffer, BUFSIZ, <span class=\"hljs-built_in\">stdin</span>);<br>        <span class=\"hljs-comment\">//采用追加方式写到共享内存</span><br>        <span class=\"hljs-built_in\">strcat</span>(viraddr, buffer);<br>        <span class=\"hljs-comment\">//当输入的字符串为&quot;end&quot;时，终止循环</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(buffer, <span class=\"hljs-string\">&quot;end&quot;</span>, <span class=\"hljs-number\">3</span>) == <span class=\"hljs-number\">0</span>)<br>            <span class=\"hljs-keyword\">break</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//切断与共享内存的链接</span><br>    shmdt(viraddr);<br>    <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Sndshm.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114182155111.png\" alt=\"Sndshm运行结果\"></p>\n<p>创建 Revshm.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span><span class=\"hljs-meta-string\">&lt;sys/shm.h&gt;</span></span><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>\t<span class=\"hljs-keyword\">int</span> shmid;<br>\t<span class=\"hljs-keyword\">char</span> *viraddr;<br>\t<span class=\"hljs-comment\">//创建共享内存</span><br>\tshmid=shmget(<span class=\"hljs-number\">1234</span>, BUFSIZ, <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    <span class=\"hljs-comment\">//附接到共享内存</span><br>\tviraddr=(<span class=\"hljs-keyword\">char</span>*)shmat(shmid, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>);<br>\t<span class=\"hljs-comment\">//输出共享内存的内容</span><br>\t<span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Your message is :\\n%s&quot;</span>, viraddr);<br>    <span class=\"hljs-comment\">//切断与共享内存的链接</span><br>\tshmdt(viraddr);<br>    <span class=\"hljs-comment\">//释放共享内存</span><br>\tshmctl(shmid,IPC_RMID, <span class=\"hljs-number\">0</span>);<br>\t<span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);\t<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Revshm.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114184820214.png\" alt=\"Revshm运行结果\"></p>\n<h3 id=\"代码实践2\"><a class=\"markdownIt-Anchor\" href=\"#代码实践2\">#</a> 代码实践 2</h3>\n<h4 id=\"思路\"><a class=\"markdownIt-Anchor\" href=\"#思路\">#</a> 思路</h4>\n<ul>\n<li>为 M1，M2 分别建立两个共享空间，创建三个进程，父进程，A 进程，B 进程，将共享内存连接到当前进程的地址空间，使得三个进程都能访问 M1,M2。</li>\n<li>设置两个信号量<strong> A_ENABLE，B_ENABLE</strong>，分别表示允许 A 执行和允许 B 执行。程序开始的时候，A_ENABLE = 1，B_ENABLE = 0。每次 A 执行时，对 A_ENABLE 执行<strong> P 操作</strong>，A 结束时，对 B_ENABLE 执行<strong> V 操作</strong>；每次 B 执行时，对 B_ENABLE 执行<strong> P 操作</strong>，B 结束时，对 A_ENABLE 执行<strong> V 操作</strong>，这样就可以达到 A 和 B 轮流执行的效果。</li>\n<li>为了使程序能够有较好的效果且能够停止，这里设置 A 和 B<strong> 分别执行 4 次</strong>操作</li>\n<li>此代码参考<a href=\"https://www.cnblogs.com/harrypotterjackson/p/11997774.html\">生产者消费者问题 多进程共享内存 - LightningStar - 博客园 (cnblogs.com)</a> 并按照题目要求做了修改以符合作业要求</li>\n</ul>\n<h4 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h4>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/stat.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;fcntl.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/shm.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;time.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/ipc.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/sem.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;sys/wait.h&gt;</span></span><br><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">define</span> MAX_NUM 4096</span><br><br><span class=\"hljs-comment\">//共享内存缓冲区资源的循环队列</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-keyword\">int</span> message[MAX_NUM];<br>    <span class=\"hljs-keyword\">int</span> front;<br>    <span class=\"hljs-keyword\">int</span> rear;<br>&#125;;<br><br><span class=\"hljs-comment\">//M1 M2</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span> <span class=\"hljs-title\">M</span>[2];</span><br><br><span class=\"hljs-comment\">//信号量数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">union</span> <span class=\"hljs-title\">semun</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-keyword\">int</span> value;<br>&#125;;<br><br><span class=\"hljs-comment\">//用于映射信号量编号与对应意义的映射</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">MUTEX</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-comment\">//是否允许A操作</span><br>    A_ENABLE,<br>    <span class=\"hljs-comment\">//是否允许B操作</span><br>    B_ENABLE,<br>    <span class=\"hljs-comment\">//信号量相关</span><br>    NUM_MUX<br>&#125;;<br><br><span class=\"hljs-comment\">//信号量集合描述符</span><br><span class=\"hljs-keyword\">int</span> semid;<br><br><span class=\"hljs-comment\">//共享空间描述符，M1,M2各占一个空间</span><br><span class=\"hljs-keyword\">int</span> shmid[<span class=\"hljs-number\">2</span>];<br><br><span class=\"hljs-comment\">//共享空间首地址</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span> *<span class=\"hljs-title\">shm</span>[2];</span><br><br><span class=\"hljs-comment\">//绑定共享内存</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">attach_shm</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">//将共享内存连接到当前进程的地址空间</span><br>    shm[<span class=\"hljs-number\">0</span>] = (struct Resource *)shmat(shmid[<span class=\"hljs-number\">0</span>], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>    shm[<span class=\"hljs-number\">1</span>] = (struct Resource *)shmat(shmid[<span class=\"hljs-number\">1</span>], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-keyword\">if</span> (shm[<span class=\"hljs-number\">0</span>] == (struct Resource *)<span class=\"hljs-number\">-1</span> || shm[<span class=\"hljs-number\">1</span>] == (struct Resource *)<span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmat failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//解绑共享内存</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">detach_shm</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">//把共享内存从当前进程中分离</span><br>    <span class=\"hljs-keyword\">if</span> (shmdt((<span class=\"hljs-keyword\">void</span> *)shm[<span class=\"hljs-number\">0</span>]) == <span class=\"hljs-number\">-1</span> || shmdt((<span class=\"hljs-keyword\">void</span> *)shm[<span class=\"hljs-number\">1</span>]) == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmdt failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//获取资源，对应信号量实施P操作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">P</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">short</span> <span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">int</span> num)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">sembuf</span> <span class=\"hljs-title\">sb</span> =</span><br>        &#123;<br>            num, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span> <span class=\"hljs-comment\">//0表示信号量编号,-1表示P操作,SEM_UNDO表示进程退出后，该进程对sem进行的操作将被撤销</span><br>        &#125;;<br>    <span class=\"hljs-comment\">//修改集合中，一个或多个信号量值</span><br>    semop(semid, &amp;sb, <span class=\"hljs-number\">1</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//释放资源，对应信号量实施V操作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">V</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">short</span> <span class=\"hljs-keyword\">unsigned</span> <span class=\"hljs-keyword\">int</span> num)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">sembuf</span> <span class=\"hljs-title\">sb</span> =</span> &#123;<br>        num, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span> <span class=\"hljs-comment\">//</span><br>    &#125;;<br>    semop(semid, &amp;sb, <span class=\"hljs-number\">1</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//读取数据，id为0，表示A在操作，id为2，表示B在操作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">readMessage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> id)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">// id = 0，读取M[1]，id = 1，读取M[0]</span><br>    <span class=\"hljs-keyword\">int</span> message = <span class=\"hljs-number\">0</span>;<br>    message = shm[-id + <span class=\"hljs-number\">1</span>]-&gt;message[shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front];<br>    shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front = (shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front + <span class=\"hljs-number\">1</span>) % MAX_NUM;<br>    <span class=\"hljs-comment\">// printf(&quot;M%d -&gt; front = %d\\n&quot;, -id + 2, shm[-id + 1]-&gt;front);</span><br>    <span class=\"hljs-keyword\">return</span> message;<br>&#125;<br><br><span class=\"hljs-comment\">//写入数据，id为0，表示A在操作，id为2，表示B在操作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">writeMessage</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> id)</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">//随机生成一个范围在[1,4096]的message</span><br>    <span class=\"hljs-keyword\">int</span> message = rand() % <span class=\"hljs-number\">4096</span> + <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-comment\">//id为0，向M[0]写入，id为1，向M[1]写入</span><br>    shm[id]-&gt;message[shm[id]-&gt;rear] = message;<br>    shm[id]-&gt;rear = (shm[id]-&gt;rear + <span class=\"hljs-number\">1</span>) % MAX_NUM;<br>    <span class=\"hljs-comment\">// printf(&quot;M%d -&gt; rear = %d\\n&quot;, id + 1, shm[id]-&gt;rear);</span><br>    <span class=\"hljs-keyword\">return</span> message;<br>&#125;<br><br><span class=\"hljs-comment\">//进程A的工作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processA</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    attach_shm();<br>\t<span class=\"hljs-comment\">//这里让A执行4次</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> m = <span class=\"hljs-number\">0</span>; m &lt; <span class=\"hljs-number\">4</span>; m++)<br>    &#123;<br>        P(A_ENABLE);<br>        <span class=\"hljs-comment\">//当前M1中元素个数</span><br>        <span class=\"hljs-keyword\">int</span> ele1Number = (shm[<span class=\"hljs-number\">0</span>]-&gt;rear - shm[<span class=\"hljs-number\">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>        <span class=\"hljs-comment\">//最多写入个数</span><br>        <span class=\"hljs-keyword\">int</span> maxNum = MAX_NUM - ele1Number;<br>        <span class=\"hljs-keyword\">int</span> randInt = rand() % <span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">//选一个小的数作为写入的信息数</span><br>        <span class=\"hljs-keyword\">int</span> times = maxNum &lt; randInt ? maxNum : randInt;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;A write message %d to M1\\n&quot;</span>, writeMessage(<span class=\"hljs-number\">0</span>));<br>        &#125;<br>        <span class=\"hljs-comment\">//如果M2队列为空，也就是刚刚开始A向B，B还没向A发送过信息</span><br>        <span class=\"hljs-comment\">//所以只在M2有消息的时候才读取</span><br>        <span class=\"hljs-keyword\">if</span> (shm[<span class=\"hljs-number\">1</span>]-&gt;front != shm[<span class=\"hljs-number\">1</span>]-&gt;rear)<br>        &#123;<br>            <span class=\"hljs-comment\">//当前M2中元素个数</span><br>            <span class=\"hljs-keyword\">int</span> eleNumber = (shm[<span class=\"hljs-number\">1</span>]-&gt;rear - shm[<span class=\"hljs-number\">1</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>            <span class=\"hljs-comment\">//随机读取[1, eleNumber]次</span><br>            <span class=\"hljs-keyword\">int</span> times = rand() % eleNumber + <span class=\"hljs-number\">1</span>;<br><br>            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>            &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;A read message %d from M2\\n&quot;</span>, readMessage(<span class=\"hljs-number\">0</span>));<br>            &#125;<br>        &#125;<br>        V(B_ENABLE);<br>    &#125;<br>    detach_shm();<br>&#125;<br><br><span class=\"hljs-comment\">//进程B的工作</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processB</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    attach_shm();<br>    <span class=\"hljs-comment\">//这里让B执行4次</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> m = <span class=\"hljs-number\">0</span>; m &lt; <span class=\"hljs-number\">4</span>; m++)<br>    &#123;<br>        P(B_ENABLE);<br>        <span class=\"hljs-comment\">//当前M1中元素个数</span><br>        <span class=\"hljs-keyword\">int</span> eleNumber = (shm[<span class=\"hljs-number\">0</span>]-&gt;rear - shm[<span class=\"hljs-number\">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>        <span class=\"hljs-keyword\">int</span> randInt = rand() % <span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">//选一个小的数作为读取的信息数</span><br>        <span class=\"hljs-keyword\">int</span> times = eleNumber &lt; randInt ? eleNumber : randInt;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;B read message %d from M1\\n&quot;</span>, readMessage(<span class=\"hljs-number\">1</span>));<br>        &#125;<br>        <span class=\"hljs-comment\">//向M2写times个信息</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;B write message %d to M2\\n&quot;</span>, writeMessage(<span class=\"hljs-number\">1</span>));<br>        &#125;<br>        V(A_ENABLE);<br>    &#125;<br>    detach_shm();<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> argc, <span class=\"hljs-keyword\">char</span> <span class=\"hljs-keyword\">const</span> *argv[])</span></span><br><span class=\"hljs-function\"></span>&#123;<br>    <span class=\"hljs-comment\">//记录父进程pid</span><br>    <span class=\"hljs-keyword\">pid_t</span> ppid = getpid();<br>    <span class=\"hljs-comment\">//信号集名字，信号集中信号量的个数，信号量集合的权限</span><br>    semid = semget((<span class=\"hljs-keyword\">key_t</span>)<span class=\"hljs-number\">1234</span>, NUM_MUX, IPC_CREAT | <span class=\"hljs-number\">0600</span>); <span class=\"hljs-comment\">//创建信号量</span><br>    <span class=\"hljs-keyword\">if</span> (semid == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        perror(<span class=\"hljs-string\">&quot;semget&quot;</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">// 初始化信号量</span><br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">union</span> <span class=\"hljs-title\">semun</span> <span class=\"hljs-title\">s</span>;</span><br>    <span class=\"hljs-comment\">//初始时，允许A执行</span><br>    s.value = <span class=\"hljs-number\">1</span>;<br>    semctl(semid, A_ENABLE, SETVAL, s);<br>    <span class=\"hljs-comment\">//初始时，不允许B执行</span><br>    s.value = <span class=\"hljs-number\">0</span>;<br>    semctl(semid, B_ENABLE, SETVAL, s);<br><br>    <span class=\"hljs-comment\">//创建共享内存</span><br>    shmid[<span class=\"hljs-number\">0</span>] = shmget((<span class=\"hljs-keyword\">key_t</span>)<span class=\"hljs-number\">1234</span>, <span class=\"hljs-keyword\">sizeof</span>(M[<span class=\"hljs-number\">0</span>]), <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    shmid[<span class=\"hljs-number\">1</span>] = shmget((<span class=\"hljs-keyword\">key_t</span>)<span class=\"hljs-number\">5678</span>, <span class=\"hljs-keyword\">sizeof</span>(M[<span class=\"hljs-number\">1</span>]), <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br><br>    <span class=\"hljs-keyword\">if</span> (shmid[<span class=\"hljs-number\">0</span>] == <span class=\"hljs-number\">-1</span> || shmid[<span class=\"hljs-number\">1</span>] == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmget failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>    attach_shm();<br>    <span class=\"hljs-comment\">//初始化共享内存</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>    &#123;<br>        <span class=\"hljs-built_in\">memset</span>(shm[i]-&gt;message, <span class=\"hljs-number\">0</span>, <span class=\"hljs-keyword\">sizeof</span>(shm[i]-&gt;message));<br>        shm[i]-&gt;front = <span class=\"hljs-number\">0</span>;<br>        shm[i]-&gt;rear = <span class=\"hljs-number\">0</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//创建3个进程：1个父进程 + 1个A + 1个B</span><br>    <span class=\"hljs-keyword\">pid_t</span> child_pid[<span class=\"hljs-number\">2</span>];<br>    <span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>    &#123;<br>        child_pid[i] = fork();<br>        <span class=\"hljs-comment\">//子进程</span><br>        <span class=\"hljs-keyword\">if</span> (child_pid[i] == <span class=\"hljs-number\">0</span>) <br>        &#123;<br>            <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>    &#125;<br>\t<span class=\"hljs-comment\">//A</span><br>    <span class=\"hljs-keyword\">if</span> (i == <span class=\"hljs-number\">0</span>) <br>    &#123;<br>        processA();<br>    &#125;<br>    <span class=\"hljs-comment\">//B</span><br>    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (i == <span class=\"hljs-number\">1</span>) <br>    &#123;<br>        processB();<br>    &#125;<br>\t<span class=\"hljs-comment\">//父进程</span><br>    <span class=\"hljs-keyword\">if</span> (getpid() == ppid) <br>    &#123;<br>        <span class=\"hljs-comment\">//等待子进程结束</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++) <br>        &#123;<br>            waitpid(child_pid[i], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>        &#125;<br>        detach_shm();<br>        <span class=\"hljs-comment\">//删除共享内存</span><br>        <span class=\"hljs-keyword\">if</span> (shmctl(shmid[<span class=\"hljs-number\">0</span>], IPC_RMID, <span class=\"hljs-number\">0</span>) == <span class=\"hljs-number\">-1</span> || shmctl(shmid[<span class=\"hljs-number\">1</span>], IPC_RMID, <span class=\"hljs-number\">0</span>) == <span class=\"hljs-number\">-1</span>)<br>        &#123;<br>            <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmctl(IPC_RMID) failed\\n&quot;</span>);<br>            <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"运行截图\"><a class=\"markdownIt-Anchor\" href=\"#运行截图\">#</a> 运行截图</h4>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013818473.png\" alt=\"M1M2运行截图1\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013923471.png\" alt=\"M1M2运行截图2\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013953657.png\" alt=\"M1M2运行截图3\"></p>\n",
            "tags": [
                "Linux",
                "学习笔记"
            ]
        }
    ]
}