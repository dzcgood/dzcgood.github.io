{
    "version": "https://jsonfeed.org/version/1",
    "title": "DzcGood • All posts by \"redis\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2021/11/29/Redis/",
            "url": "http://example.com/2021/11/29/Redis/",
            "title": "使用Jedis连接Redis",
            "date_published": "2021-11-28T16:20:35.000Z",
            "content_html": "<h1 id=\"使用jedis远程连接redis\"><a class=\"markdownIt-Anchor\" href=\"#使用jedis远程连接redis\">#</a> 使用 Jedis 远程连接 Redis</h1>\n<h2 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h2>\n<ul>\n<li>选用 Redis 数据库，部署在 linux 之后，用 Java 语言编写一个简单的客户端去与之交互</li>\n<li>操作包括：数据插入、修改、删除等，以及和 Redis 数据库相关的特色操作</li>\n</ul>\n<h2 id=\"开发环境\"><a class=\"markdownIt-Anchor\" href=\"#开发环境\">#</a> 开发环境</h2>\n<ul>\n<li>语言：Java11</li>\n<li>开发环境：IDEA 2021</li>\n<li>数据库：Redis 6.2</li>\n<li>数据库部署环境：CentOS Linux 8.2.2004</li>\n</ul>\n<h2 id=\"redis环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#redis环境搭建\">#</a> Redis 环境搭建</h2>\n<p>首先使用 wget 命令获取 Redis 安装包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">wget https://download.redis.io/releases/redis-6.2.6.tar.gz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128144154675.png\" alt=\"下载Redis\"></p>\n<p>然后使用 tar 命令解压</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">tar -zvxf redis-6.2.6.tar.gz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128162641814.png\" alt=\"解压redis\"></p>\n<p>将 redis 移动到 /usr/local/redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mv redis-6.2.6 /usr/local/redis<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128163212156.png\" alt=\"移动redis\"></p>\n<p>编译</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">cd /usr/local/redis<br>make<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128163849897.png\" alt=\"编译redis\"></p>\n<p>安装到指定目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">make PREFIX=/usr/local/redis install <br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128164428531.png\" alt=\"安装redis\"></p>\n<p>为了能使用客户机与远端数据库交互，需要修改 redis 配置文件中的 bind 项</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">vim redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改daemonize为<span class=\"hljs-built_in\">yes</span>，表示开启守护进程</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">注释<span class=\"hljs-built_in\">bind</span> 127.0.0.1::1，表示任何ip都可以访问</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">protected-mode设置为no</span><br></code></pre></div></td></tr></table></figure>\n<p>启动 redis 服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">./bin/redis-server&amp; ./redis.conf<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128170239028.png\" alt=\"启动redis\"></p>\n<p>查看 redis 是否正在运行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">netstat -lanp | grep 6379<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128170538421.png\" alt=\"查看redis是否正常运行\"></p>\n<h2 id=\"使用客户机访问redis\"><a class=\"markdownIt-Anchor\" href=\"#使用客户机访问redis\">#</a> 使用客户机访问 redis</h2>\n<p>选择使用 Redis 官方提供的 Jedis 来连接 Redis，需要在 maven 中添加以下依赖：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>redis.clients<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jedis<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.7.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>\n<p>一共创建了两个类</p>\n<ul>\n<li>第一个类是 RedisOperation，其中封装了建立连接，增删改查等操作</li>\n<li>第二个类是 RedisTest 用于测试以上操作</li>\n</ul>\n<p>以下是建立连接的函数，其作用是返回一个连接对象：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(password);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>接下来编写主函数进行连接，并使用 ping 方法测试是否连接成功。设置默认端口号为 6379</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">//设置默认端口为6379</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">//主函数</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>运行结果如下：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128190350397.png\" alt=\"建立接连\"></p>\n<p>调用 jedis.ping () 方法返回了 PONG，说明连接已经建立成功，服务正在运行</p>\n<h2 id=\"在客户机对数据库进行增删改查\"><a class=\"markdownIt-Anchor\" href=\"#在客户机对数据库进行增删改查\">#</a> 在客户机对数据库进行增删改查</h2>\n<h3 id=\"redisoperation的实现\"><a class=\"markdownIt-Anchor\" href=\"#redisoperation的实现\">#</a> RedisOperation 的实现</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:28</span><br><span class=\"hljs-comment\"> * Redis操作类，用于提供增删改查等操作</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisOperation</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 与远程数据库建立连接，并返回连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> ip 服务器的ip</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> port 端口号</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> password 连接密码</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 连接对象</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(password);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库增加键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库删除键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要删除的键值对的键</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.del(key);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库修改键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要修改的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 修改后的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库查找键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要查找的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 查询到的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">return</span> jedis.get(key);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"redistest的实现\"><a class=\"markdownIt-Anchor\" href=\"#redistest的实现\">#</a> RedisTest 的实现</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-keyword\">import</span> java.util.Scanner;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">/**默认连接端口号*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">/**redis连接对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>    <span class=\"hljs-comment\">/**RedisOperation操作类对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">utility</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的add()方法</span><br>            utility.add(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;插入成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向删除键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要删除的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的delete()方法</span><br>            utility.delete(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis修改键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的modify()方法</span><br>            utility.modify(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;修改成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis查询键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要查询的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的search()方法</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;查询成功，&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        jedis = redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        <span class=\"hljs-comment\">//增</span><br>        add();<br>        <span class=\"hljs-comment\">//删</span><br>        delete();<br>        <span class=\"hljs-comment\">//改</span><br>        modify();<br>        <span class=\"hljs-comment\">//查</span><br>        search();<br>        <span class=\"hljs-comment\">//关闭连接</span><br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"执行结果\"><a class=\"markdownIt-Anchor\" href=\"#执行结果\">#</a> 执行结果</h3>\n<p>为了使得执行的结果更加明显，首先在服务器端中先添加几对键值对：</p>\n<ul>\n<li>“weather” : “sunny”</li>\n<li>“temperature” : “27”</li>\n<li>“date” : “2021/11/28”</li>\n<li>“name” : “DengZhiChao”</li>\n</ul>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128195919555.png\" alt=\"服务器端添加数据\"></p>\n<p>增（向数据库插入 &quot;number&quot; : &quot;20192121026&quot; 的键值对）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200010763.png\" alt=\"增\"></p>\n<p>在服务器端查询键 &quot;number&quot;，可得结果 &quot;20192121026&quot;，说明插入数据成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200048775.png\" alt=\"服务器端验证插入结果\"></p>\n<p>删（删除 weather 对应的键值对）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200126931.png\" alt=\"删\"></p>\n<p>在服务器端查询所有的键，可以看见结果中没有值为 &quot;weather&quot; 的键，说明删除成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200155536.png\" alt=\"服务器端查询删除结果\"></p>\n<p>改（将 key 为 temperature 的 value 改成 28）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200333211.png\" alt=\"改\"></p>\n<p>在服务器端查询键 &quot;temperature&quot;，可得结果 &quot;28&quot;，说明修改数据成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200420078.png\" alt=\"image-20211128200420078\"></p>\n<p>查（查询 name 对应的值）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200505564.png\" alt=\"查\"></p>\n<p>在服务器端查询键 &quot;name&quot;，可得结果 &quot;DengZhiChao&quot;，说明查询数据正确</p>\n<h2 id=\"特色操作\"><a class=\"markdownIt-Anchor\" href=\"#特色操作\">#</a> 特色操作</h2>\n<h3 id=\"过期键功能\"><a class=\"markdownIt-Anchor\" href=\"#过期键功能\">#</a> 过期键功能</h3>\n<p>Redis 是运行在内存的非关系型数据库，可以为键设置一个过期时间，让它在指定的时间之后自动被删除。此功能可以被运用在网站临时验证码的存储，让验证码到达最大存储时间后，就被自动删除。接下来，将测试此功能，考虑到时间关系，我准备将过期时间设置成 30 秒。具体的验证方式是先插入一个键值对，并标记其过期时间为 30 秒，然后在 30 秒后再次查询此键值对，若不存在，则可以验证过期键的功能。</p>\n<p>说明：此功能在上述执行增删改查的结果基础上继续执行</p>\n<p>RedisOperation 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 设置指定键值对的过期时间</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要设置过期时间的key</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> time 多少时间后过期</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">(Jedis jedis, String key, <span class=\"hljs-type\">long</span> time)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.expire(key, time);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 测试过期键功能</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">()</span>&#123;<br>    <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>    <span class=\"hljs-comment\">//获取输入</span><br>    System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的键&quot;</span>);<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>    System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的时间&quot;</span>);<br>    <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> scanner.nextLong();<br>    <span class=\"hljs-comment\">//判空</span><br>    <span class=\"hljs-keyword\">if</span>(utility.search(jedis, key) == <span class=\"hljs-literal\">null</span>)&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;不存在键为&quot;</span> + key + <span class=\"hljs-string\">&quot;的键&quot;</span>);<br>    &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>        <span class=\"hljs-comment\">//调用操作类的expire()方法</span><br>        utility.expire(jedis, key, time);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>        System.out.println(<span class=\"hljs-string\">&quot;当前&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        System.out.println(<span class=\"hljs-string\">&quot;将在&quot;</span> + time + <span class=\"hljs-string\">&quot;秒后再次执行查询操作，请等待……&quot;</span>);<br>        <span class=\"hljs-comment\">//让程序停止一段时间</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            Thread.sleep(time * <span class=\"hljs-number\">1000</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        value = utility.search(jedis, key);<br>        <span class=\"hljs-keyword\">if</span>(value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(key + <span class=\"hljs-string\">&quot;对应的键值对已被删除，查询结果为null&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p>设置要过期的键为 date，过期时间为 30 秒</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128204108958.png\" alt=\"过期键功能\"></p>\n<p>在服务器端查询所有键，发现没有 date，说明 date 对应的键值对已经过期</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128204210720.png\" alt=\"服务器端测试过期键结果\"></p>\n<h3 id=\"对redis列表的操作\"><a class=\"markdownIt-Anchor\" href=\"#对redis列表的操作\">#</a> 对 Redis 列表的操作</h3>\n<p>Redis 列表是简单的字符串列表，按照插入顺序排序。我们可以添加一个元素到列表的头部（左边）或者尾部（右边），接下来将分别演示向列表头部和尾部插入键值对。</p>\n<p>说明：为了使得结果看起来更加明显，首先在服务器端创建一个 key 为 course 的列表，并向其中插入两条数据：database 和 os</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000206842.png\" alt=\"原有list\"></p>\n<p>RedisOperation 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 向Redis列表头部插入键值对</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">lpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.lpush(key, value);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 向Redis列表尾部插入键值对</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">rpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.rpush(key, value);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 中的实现</p>\n<p>头部插入：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000502856.png\" alt=\"插入列表头部\"></p>\n<p>在服务器端查询 key 为 course 的列表中的全部内容，可见第一条为 linux，说明在列表头部插入成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000600230.png\" alt=\"服务器端查询头部插入结果\"></p>\n<p>尾部插入：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000659482.png\" alt=\"插入列表尾部\"></p>\n<p>在服务器端查询 key 为 course 的列表中的全部内容，可见最后一条值为 CompilePrinciple，说明在列表尾部插入成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000841821.png\" alt=\"服务器端查询尾部插入结果\"></p>\n<h2 id=\"源代码\"><a class=\"markdownIt-Anchor\" href=\"#源代码\">#</a> 源代码</h2>\n<p>共两个类，RedisOperation 类和 RedisTest 类</p>\n<p>RedisOperation 类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:28</span><br><span class=\"hljs-comment\"> * Redis操作类，用于提供增删改查等操作</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisOperation</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 与远程数据库建立连接，并返回连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> ip 服务器的ip</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> port 端口号</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> password 连接密码</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 连接对象</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(<span class=\"hljs-string\">&quot;xxxxxxxx&quot;</span>);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库增加键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库删除键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要删除的键值对的键</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.del(key);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库修改键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要修改的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 修改后的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库查找键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要查找的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 查询到的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">return</span> jedis.get(key);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 设置指定键值对的过期时间</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要设置过期时间的key</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> time 多少时间后过期</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">(Jedis jedis, String key, <span class=\"hljs-type\">long</span> time)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.expire(key, time);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表头部插入键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">lpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.lpush(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表尾部插入键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">rpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.rpush(key, value);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-keyword\">import</span> java.util.Scanner;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">/**默认连接端口号*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">/**redis连接对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>    <span class=\"hljs-comment\">/**RedisOperation操作类对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">utility</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的add()方法</span><br>            utility.add(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;插入成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向删除键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要删除的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的delete()方法</span><br>            utility.delete(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis修改键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的modify()方法</span><br>            utility.modify(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;修改成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis查询键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要查询的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的search()方法</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;查询成功，&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试过期键功能</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的时间&quot;</span>);<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> scanner.nextLong();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(utility.search(jedis, key) == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;不存在键为&quot;</span> + key + <span class=\"hljs-string\">&quot;的键&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的expire()方法</span><br>            utility.expire(jedis, key, time);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;当前&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>            System.out.println(<span class=\"hljs-string\">&quot;将在&quot;</span> + time + <span class=\"hljs-string\">&quot;秒后再次执行查询操作，请等待……&quot;</span>);<br>            <span class=\"hljs-comment\">//让程序停止一段时间</span><br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                Thread.sleep(time * <span class=\"hljs-number\">1000</span>);<br>            &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            value = utility.search(jedis, key);<br>            <span class=\"hljs-keyword\">if</span>(value == <span class=\"hljs-literal\">null</span>)&#123;<br>                System.out.println(key + <span class=\"hljs-string\">&quot;对应的键值对已被删除，查询结果为null&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表的头部和尾部分别插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">listInsert</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>        &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;将向列表&quot;</span> +  (i == <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;头部&quot;</span> : <span class=\"hljs-string\">&quot;尾部&quot;</span>) + <span class=\"hljs-string\">&quot;插入元素：&quot;</span>);<br>            <span class=\"hljs-comment\">//获取输入</span><br>            <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>            System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>            <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>                <span class=\"hljs-keyword\">return</span>;<br>            &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                <span class=\"hljs-keyword\">if</span>(i == <span class=\"hljs-number\">0</span>)&#123;<br>                    utility.lpush(jedis, key, value);<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    utility.rpush(jedis, key, value);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        jedis = redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        <span class=\"hljs-comment\">//增</span><br>        add();<br>        <span class=\"hljs-comment\">//删</span><br>        delete();<br>        <span class=\"hljs-comment\">//改</span><br>        modify();<br>        <span class=\"hljs-comment\">//查</span><br>        search();<br>        <span class=\"hljs-comment\">//测试过期功能</span><br>        expire();<br>        <span class=\"hljs-comment\">//从列表头部和尾部分别插入</span><br>        listInsert();<br>        <span class=\"hljs-comment\">//关闭连接</span><br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n",
            "tags": [
                "学习笔记",
                "Redis",
                "Jedis"
            ]
        }
    ]
}