{
    "version": "https://jsonfeed.org/version/1",
    "title": "DzcGood",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2025/11/11/HetSyn/",
            "url": "http://example.com/2025/11/11/HetSyn/",
            "title": "HetSyn",
            "date_published": "2025-11-11T15:00:44.000Z",
            "content_html": "<h1 id=\"学术生涯总算留下了一点痕迹\"><a class=\"markdownIt-Anchor\" href=\"#学术生涯总算留下了一点痕迹\">#</a> 学术生涯总算留下了一点痕迹</h1>\n<p><s>咳咳，时隔多年突然想起来自己还有个博客</s></p>\n<p>第一次投稿居然中了！！！本来想写点，提笔时却不知道说什么了，总之就是<a href=\"https://neurips.cc/virtual/2025/loc/san-diego/poster/117410\">欢迎大家围观我们的工作</a></p>\n<p>We are pleased to present our work, <strong>“HetSyn: Versatile Timescale Integration in Spiking Neural Networks via Heterogeneous Synapses”</strong>.</p>\n<h2 id=\"motivations-contributions\"><a class=\"markdownIt-Anchor\" href=\"#motivations-contributions\">#</a> Motivations &amp; Contributions</h2>\n<p><strong>Motivations</strong></p>\n<ul>\n<li>Spiking Neural Networks (SNNs) offer a biologically plausible and energy-efficient computing paradigm characterized by sparse, event-driven signaling and intrinsic temporal processing capabilities.</li>\n<li>Synaptic heterogeneity, which is widely observed across brain regions and cell types, has been largely overlooked in the design of SNNs, and its computational potential remains under explored.</li>\n</ul>\n<p><img src=\"/img/HetSyn-1.svg\" alt=\"Synaptic Time Constants Distributions\" width=\"60%\"></p>\n<p><strong>Contributions</strong></p>\n<ul>\n<li>We propose HetSyn, the first modeling framework to explicitly explore synaptic heterogeneity in SNNs.</li>\n<li>We demonstrate that HetSyn serves as a unified and extensible framework, capable of representing a wide range of existing spiking neuron models.</li>\n<li>We instantiate HetSyn as HetSynLIF and demonstrate its effectiveness across multiple temporal tasks.</li>\n</ul>\n<h2 id=\"methods\"><a class=\"markdownIt-Anchor\" href=\"#methods\">#</a> Methods</h2>\n<h3 id=\"vanilla-lif\"><a class=\"markdownIt-Anchor\" href=\"#vanilla-lif\">#</a> Vanilla LIF</h3>\n<p>The vanilla Leaky Integrate-and-Fire (LIF) neuron, where all inputs share the same membrane time constant, is defined using the following differential equation:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>V</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mfrac><mrow><mi>V</mi><mo>−</mo><msub><mi>V</mi><mtext>rest</mtext></msub></mrow><msub><mi>τ</mi><mtext>m</mtext></msub></mfrac><mo>+</mo><munder><mo>∑</mo><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow></munder><msub><mi>w</mi><mi>i</mi></msub><mo>⋅</mo><mi>δ</mi><mrow><mo fence=\"true\">(</mo><mi>t</mi><mo>−</mo><msubsup><mi>t</mi><mi>i</mi><mi>j</mi></msubsup><mo fence=\"true\">)</mo></mrow><mo>−</mo><mi>ϑ</mi><mo>⋅</mo><munder><mo>∑</mo><mi>j</mi></munder><mi>δ</mi><mrow><mo fence=\"true\">(</mo><mi>t</mi><mo>−</mo><msubsup><mi>t</mi><mtext>s</mtext><mi>j</mi></msubsup><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\frac{d V}{d t}=-\\frac{V-V_{\\text {rest}}}{\\tau_{\\text{m}}}+\\sum_{i, j} w_{i} \\cdot \\delta\\left(t-t_{i}^{j}\\right)- \\vartheta \\cdot \\sum_{j} \\delta\\left(t-t_{\\text{s}}^{j}\\right)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.05744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.19633em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.1132em;\">τ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">m</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">rest</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.463782em;vertical-align:-1.413777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.80002em;vertical-align:-0.65002em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9425719999999999em;\"><span style=\"top:-2.4231360000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.180908em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.276864em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϑ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.463782em;vertical-align:-1.413777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">s</span></span></span></span></span><span style=\"top:-3.1130000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span></span></span></span></span></p>\n<p>In practice, computer simulations typically use a discrete-time formulation, and a spike is emitted by a Heaviside step function when the membrane potential exceeds a threshold.</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>V</mi><mi>t</mi></msup><mo>=</mo><mi>ρ</mi><mo>⋅</mo><msup><mi>V</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>w</mi><mi>i</mi></msub><mo>⋅</mo><msubsup><mi>z</mi><mi>i</mi><mi>t</mi></msubsup><mo>−</mo><mi>ϑ</mi><mo>⋅</mo><msup><mi>z</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">V^{t}=\\rho \\cdot V^{t-1}+\\sum_{i} w_{i} \\cdot z_{i}^{t}- \\vartheta \\cdot z^{t-1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.843556em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.63889em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.947438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.327674em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0500050000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0905559999999999em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϑ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.864108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>z</mi><mi>t</mi></msup><mo>=</mo><mtext>H</mtext><mo stretchy=\"false\">(</mo><msup><mi>V</mi><mi>t</mi></msup><mo>−</mo><mi>ϑ</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">z^{t}=\\text{H}(V^{t} -\\vartheta)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.843556em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.093556em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">H</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">ϑ</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<h3 id=\"equipped-with-hetsyn\"><a class=\"markdownIt-Anchor\" href=\"#equipped-with-hetsyn\">#</a> Equipped with HetSyn</h3>\n<p>In HetSyn, we replace the uniform time constant with synapse-specific decay factors and model the reset process as a negative current injection. Each synaptic current now evolves independently over time, allowing the neuron to integrate information at multiple timescales:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>V</mi><mi>t</mi></msup><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><msubsup><mi>I</mi><mi>i</mi><mi>t</mi></msubsup><mo>−</mo><msup><mi>J</mi><mi>t</mi></msup></mrow><annotation encoding=\"application/x-tex\">V^{t} = \\sum_{i} I_{i}^{t} - J^{t}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.843556em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.327674em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0500050000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.843556em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mrow><mi>d</mi><msubsup><mi>I</mi><mi>i</mi><mi>t</mi></msubsup></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mfrac><msubsup><mi>I</mi><mi>i</mi><mi>t</mi></msubsup><msub><mi>τ</mi><mrow><mtext>s</mtext><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mfrac><mo>+</mo><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>w</mi><mi>i</mi></msub><mo>⋅</mo><mi>δ</mi><mrow><mo fence=\"true\">(</mo><mi>t</mi><mo>−</mo><msubsup><mi>t</mi><mi>i</mi><mi>j</mi></msubsup><mo fence=\"true\">)</mo></mrow><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">\\frac{d I_i^{t}}{d t} =-\\frac{I_i^{t}}{\\tau_{\\text{s}, i}}+\\sum_{j} w_{i} \\cdot \\delta\\left(t-t_{i}^{j}\\right) \\\\\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.156556em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.470556em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-2.441336em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4426639999999997em;vertical-align:-0.972108em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.470556em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.1132em;\">τ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">s</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-2.441336em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.972108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.463782em;vertical-align:-1.413777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.80002em;vertical-align:-0.65002em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9425719999999999em;\"><span style=\"top:-2.4231360000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.180908em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.276864em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span></span><span class=\"mspace newline\"></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mrow><mi>d</mi><msup><mi>J</mi><mi>t</mi></msup></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mfrac><msup><mi>J</mi><mi>t</mi></msup><msub><mi>τ</mi><mi>J</mi></msub></mfrac><mo>+</mo><munder><mo>∑</mo><mi>j</mi></munder><mi>ϑ</mi><mo>⋅</mo><mi>δ</mi><mrow><mo fence=\"true\">(</mo><mi>t</mi><mo>−</mo><msubsup><mi>t</mi><mtext>s</mtext><mi>j</mi></msubsup><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\frac{d J^{t}}{d t} =-\\frac{J^{t}}{\\tau_{J}}+\\sum_{j} \\vartheta \\cdot \\delta\\left(t-t_{\\text{s}}^{j}\\right)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.156556em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.470556em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.306556em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.470556em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.1132em;\">τ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.1132em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.463782em;vertical-align:-1.413777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">ϑ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2246739999999998em;vertical-align:-0.35001em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8746639999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">s</span></span></span></span></span><span style=\"top:-3.1130000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mi>I</mi><mi>i</mi><mi>t</mi></msubsup><mo>=</mo><msub><mi>r</mi><mi>i</mi></msub><mo>⋅</mo><msubsup><mi>I</mi><mi>i</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo>+</mo><msub><mi>w</mi><mi>i</mi></msub><mo>⋅</mo><msubsup><mi>z</mi><mi>i</mi><mi>t</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">I_{i}^{t}=r_{i} \\cdot I_{i}^{t-1}+w_{i} \\cdot z_{i}^{t}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0905559999999999em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.59445em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.131103em;vertical-align:-0.266995em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.433005em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266995em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.59445em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0905559999999999em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.04398em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>J</mi><mi>t</mi></msup><mo>=</mo><mi>κ</mi><mo>⋅</mo><msup><mi>J</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mi>ϑ</mi><mo>⋅</mo><msup><mi>z</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">J^{t}=\\kappa \\cdot J^{t-1}+\\vartheta \\cdot z^{t-1}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.843556em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">κ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.947438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϑ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.864108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"generalization\"><a class=\"markdownIt-Anchor\" href=\"#generalization\">#</a> Generalization</h3>\n<p>HetSynLIF can generalize into three existing neuron types by adjusting parameters:</p>\n<ul>\n<li>If all synaptic decay factors <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">r_{ji}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> and the reset current decay factor <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>κ</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\kappa_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">κ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> are identical and equal to a shared value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span>, then the HetSynLIF model reduces to the HomNeuLIF model;</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>r</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>=</mo><msub><mi>κ</mi><mi>j</mi></msub><mo>=</mo><mi>ρ</mi><mo>→</mo><mtext>HomNeuLIF</mtext></mrow><annotation encoding=\"application/x-tex\">r_{ji} = \\kappa_j = \\rho \\rightarrow \\text{HomNeuLIF}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">κ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">HomNeuLIF</span></span></span></span></span></span></p>\n<ul>\n<li>Based on this, if we further decompose the reset current into a standard component <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>J</mi><mi>ϑ</mi><mi>t</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">J_{\\vartheta}^t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0766639999999998em;vertical-align:-0.2831079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.09618em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ϑ</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span></span></span></span> and an additional adaptation current <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>J</mi><mi>α</mi><mi>t</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">J_{\\alpha}^t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040556em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.09618em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.0037em;\">α</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span>, then HetSynLIF generalizes to the HomNeuALIF model;</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>r</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>=</mo><msub><mi>κ</mi><mi>j</mi></msub><mo>=</mo><mi>ρ</mi><mtext> &amp; </mtext><msubsup><mi>V</mi><mi>j</mi><mi>t</mi></msubsup><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><msubsup><mi>I</mi><mrow><mi>j</mi><mi>i</mi></mrow><mi>t</mi></msubsup><mo>−</mo><msubsup><mi>J</mi><mi>ϑ</mi><mi>t</mi></msubsup><mo>−</mo><msubsup><mi>J</mi><mi>α</mi><mi>t</mi></msubsup><mo>→</mo><mtext>HomNeuALIF</mtext></mrow><annotation encoding=\"application/x-tex\">r_{ji} = \\kappa_{j} = \\rho  \\space \\text{\\&amp;}  \\space V_j^t = \\sum_i I_{ji}^t - J_{\\vartheta}^t - J_{\\alpha}^t \\rightarrow \\text{HomNeuALIF}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">κ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.226664em;vertical-align:-0.383108em;\"></span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\"> </span><span class=\"mord text\"><span class=\"mord\">&amp;</span></span><span class=\"mspace\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.1130000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.383108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.327674em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0500050000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.1130000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.383108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0905559999999999em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.09618em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ϑ</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0905559999999999em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8435559999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.09618em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.0037em;\">α</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">HomNeuALIF</span></span></span></span></span></span></p>\n<ul>\n<li>For each post-synaptic neuron <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span>, if all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">r_{ji}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> equals to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>κ</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\kappa_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">κ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> equals to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>ρ</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\rho_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span> ,the HetSynLIF model generalizes to the HetNeuLIF model.<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>r</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>=</mo><msub><mi>κ</mi><mi>j</mi></msub><mo>=</mo><msub><mi>ρ</mi><mi>j</mi></msub><mo>→</mo><mtext>HetNeuLIF</mtext></mrow><annotation encoding=\"application/x-tex\">r_{ji} = \\kappa_j = \\rho_j \\rightarrow \\text{HetNeuLIF}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">κ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ρ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">HetNeuLIF</span></span></span></span></span></span></p>\n</li>\n</ul>\n<h2 id=\"experiments\"><a class=\"markdownIt-Anchor\" href=\"#experiments\">#</a> Experiments</h2>\n<p>We demonstrate that HetSynLlF not only improves the performance of SNNs across a variety of tasks, but also exhibits strong robustness to noise, enhanced working memory performance, and efficiency under limited neuron resources.</p>\n<p><strong>Performance on Pattern Generation Task</strong></p>\n<p>In pattern generation task, <strong>HetSynLIF</strong> learns long-term temporal dependencies faster and more accurately, and shows strong robustness to noise.</p>\n<p><img src=\"/img/HetSyn-2.svg\" alt=\"Performance on Pattern Generation Task\"></p>\n<p><strong>Performance on Delayed Match-to-Sample Task</strong></p>\n<p>In delayed match-to-sample task, <strong>HetSynLIF</strong> demonstrates excellent working memory performance, even with limited neuron resources.</p>\n<p><img src=\"/img/HetSyn-3.svg\" alt=\"Performance on Delayed Match-to-Sample Task\"></p>\n<p><strong>Performance on Speech Recognition</strong></p>\n<p><img src=\"/img/HetSyn-4.svg\" alt=\"Performance on Speech Recognition\"></p>\n<p><strong>Accuracy Comparison on Four Datasets</strong></p>\n<p><img src=\"/img/HetSyn-5.png\" alt=\"Accuracy Comparison on Four Datasets\" width=\"60%\"></p>\n<p>In addition, the HetSynLIF model demonstrates outstanding performance on the other three datasets as well, consistently outperforming prior methods, highlighting its effectiveness in processing multi-timescale temporal dynamics across both speech and visual recognition tasks.</p>\n<h2 id=\"conclusion\"><a class=\"markdownIt-Anchor\" href=\"#conclusion\">#</a> Conclusion</h2>\n<p>In summary, HetSyn brings synaptic heterogeneity into SNN modeling and achieves versatile timescale integration. We believe this framework opens new directions for building more efficient and brain-inspired learning systems.</p>\n",
            "tags": [
                "Brain-Like Computing",
                "Spiking Neural Networks"
            ]
        },
        {
            "id": "http://example.com/2021/12/23/JDBC/",
            "url": "http://example.com/2021/12/23/JDBC/",
            "title": "MySql安装及JDBC的使用",
            "date_published": "2021-12-22T17:41:57.000Z",
            "content_html": "<h1 id=\"mysql安装及jdbc的使用\"><a class=\"markdownIt-Anchor\" href=\"#mysql安装及jdbc的使用\">#</a> MySql 安装及 JDBC 的使用</h1>\n<h2 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h2>\n<ul>\n<li>在 Java 语言环境下，使用 ODBC 连接 MySQL 数据库，通过 SQL 语句完成对数据库的基本操作：创建数据表、插入数据、删除数据、修改数据、删除数据表、跨数据表操作</li>\n<li>实现额外功能：事务支持、索引支持、多用户（多客户端）同时访问数据库，记录它们的访问性能</li>\n<li>数据库内的初始数据至少有 5 个表格，至少共 100,000 条数据</li>\n</ul>\n<h2 id=\"环境\"><a class=\"markdownIt-Anchor\" href=\"#环境\">#</a> 环境</h2>\n<ul>\n<li>语言： <code>Java11</code></li>\n<li>开发环境： <code>IDEA 2021.1.1 x64</code></li>\n<li>数据库： <code>MySQL 8.0.26</code></li>\n<li>数据库部署环境： <code>CentOS Linux 8.2.2004</code></li>\n</ul>\n<h2 id=\"mysql环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#mysql环境搭建\">#</a> MySQL 环境搭建</h2>\n<p>首先使用 <code>wget</code>  命令获取 MySQL 安装包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.26-linux-glibc2.12-x86_64.tar.xz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205194455806.png\" alt=\"下载MySQL\"></p>\n<p>安装 MySQL 的依赖 <code>libaio库</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">yum install libaio<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205194728506.png\" alt=\"安装libaio库\"></p>\n<p>然后使用 <code>tar命令</code> 解压</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">tar -xvf mysql-8.0.26-linux-glibc2.12-x86_64.tar.xz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205195059898.png\" alt=\"解压安装包\"></p>\n<p>将解压后的文件夹重命名为 <code>mysql</code> ，并且移动到 <code>/usr/local/</code>  目录下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mv mysql-8.0.26-linux-glibc2.12-x86_64 /usr/local/mysql<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205195246696.png\" alt=\"移动\"></p>\n<p>创建存放数据库数据的文件夹  <code>data</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">cd /usr/local/mysql<br>mkdir data<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205195451681.png\" alt=\"创建data文件夹\"></p>\n<p>在 mysql 目录下新建  <code>tmp 文件夹</code> ，并修改文件夹的权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mkdir tmp<br>chmod 777 /tmp<br></code></pre></div></td></tr></table></figure>\n<p>创建 <code>mysql用户组</code> 和 <code>mysql 用户</code> ，并且将 mysql 目录极其下面所有文件权限分配给 mysql 用户</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">groupadd mysql<br>useradd -g mysql mysql<br>chown -R mysql.mysql /usr/local/mysql/<br></code></pre></div></td></tr></table></figure>\n<p>进行数据库初始化</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205200113298.png\" alt=\"初始化MySQL\"></p>\n<p>修改 mysql 的配置信息</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">vim /etc/my.cny<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">向配置文件中添加以下内容</span><br>[mysqld]<br>basedir=/usr/local/mysql   <br>datadir=/usr/local/mysql/data<br>socket=/usr/local/mysql/mysql.sock<br>character-set-server=utf8<br>port=3306<br>sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES<br>[client]<br>socket=/usr/local/mysql/mysql.sock<br>default-character-set=utf8<br></code></pre></div></td></tr></table></figure>\n<p>将 mysql 注册为服务，并检查是否注册成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">chkconfig --add mysql<br>chkconfig --list mysql<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205200919886.png\" alt=\"将mysql注册为服务\"></p>\n<p>启动服务，并查看服务状态</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">service mysql start<br>service mysql status<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205201113005.png\" alt=\"启动服务并查看状态\"></p>\n<p>将 <code>mysql命令</code> 软连接到 <code>/usr/bin</code>  用户执行目录下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">ln -s /usr/local/mysql/bin/mysql /usr/bin<br></code></pre></div></td></tr></table></figure>\n<p>连接 mysql 服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mysql -uroot -p<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205201628974.png\" alt=\"连接mysql服务\"></p>\n<p>设置允许 root 用户远程连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\">USE mysql<br><span class=\"hljs-keyword\">UPDATE</span> <span class=\"hljs-keyword\">user</span> <span class=\"hljs-keyword\">SET</span> host <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;%&#x27;</span> <span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">user</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;root&#x27;</span>;<br># 刷新以立即生效<br>FLUSH PRIVILEGES;<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205202053132.png\" alt=\"设置允许root用户远程连接\"></p>\n<h2 id=\"使用的数据库说明\"><a class=\"markdownIt-Anchor\" href=\"#使用的数据库说明\">#</a> 使用的数据库说明</h2>\n<p>为了使得接下来的操作能够顺利进行，首先需要现在服务器端创建一个 database。</p>\n<h3 id=\"sql脚本\"><a class=\"markdownIt-Anchor\" href=\"#sql脚本\">#</a> SQL 脚本</h3>\n<p>首先执行 SQL 脚本（脚本内容见源码部分）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mysql -uroot -p<br><span class=\"hljs-meta prompt_\">mysql&gt; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">source</span> /root/tools/MySQL/myemployees.sql</span><br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205214739140.png\" alt=\"执行脚本部分结果\"></p>\n<p>查看执行结果</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SHOW</span> DATABASES;<br>USE myemployees;<br><span class=\"hljs-keyword\">SHOW</span> TABLES;<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205214958067.png\" alt=\"脚本执行结果\"></p>\n<p>可以看到创建了一个名为 <code>myemployees</code>  的数据库，其中包含五张表： <code>departments</code> ,  <code>employees</code> ,  <code>job_grades</code> ,  <code>jobs</code> ,  <code>locations</code> 。</p>\n<h3 id=\"数据库描述\"><a class=\"markdownIt-Anchor\" href=\"#数据库描述\">#</a> 数据库描述</h3>\n<p>这是一个关于企业员工信息管理的数据库，其中包含了部门信息，雇员信息，工作种类，收入等级，地点的信息，以下是各张表的字段描述：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205220201057.png\" alt=\"departments表结构\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205220301808.png\" alt=\"employees表结构\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205220348783.png\" alt=\"job_grades表结构\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205220554836.png\" alt=\"jobs表结构\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205220659359.png\" alt=\"locations表结构\"></p>\n<h2 id=\"使用客户机访问mysql\"><a class=\"markdownIt-Anchor\" href=\"#使用客户机访问mysql\">#</a> 使用客户机访问 MySQL</h2>\n<p>选择使用 MySQL 官方提供的 <code>mysql-connector-j</code>  来连接 MySQL，需要在 maven 中添加以下依赖：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>mysql<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>8.0.26<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>\n<p>一共创建了两个类</p>\n<ul>\n<li>第一个类是 <code>MySqlOperation</code> ，其中封装了建立连接，增删改查等操作</li>\n<li>第二个类是 <code>ConnectionTest</code>  用于测试各类操作</li>\n</ul>\n<p>以下是建立连接和释放连接的函数，其作用分别是创建连接释放连接：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> java.sql.Connection;<br><span class=\"hljs-keyword\">import</span> java.sql.DriverManager;<br><span class=\"hljs-keyword\">import</span> java.sql.SQLException;<br><span class=\"hljs-keyword\">import</span> java.sql.Statement;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/12/5 - 21:00</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * 此类提供有关数据库的各项操作，包括获取数据库连接对象，增删改查等各项操作</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MySqlOperation</span> &#123;<br>    <span class=\"hljs-comment\">/**数据库连接对象*/</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Connection</span> <span class=\"hljs-variable\">con</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br><br>    <span class=\"hljs-comment\">/**Statement类对象*/</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Statement</span> <span class=\"hljs-variable\">stmt</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br><br>    <span class=\"hljs-comment\">/**JDBC驱动名及数据库URL*/</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">JDBC_DRIVER</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">DB_URL</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;jdbc:mysql://59.110.238.134:3306/&quot;</span> +<br>            <span class=\"hljs-string\">&quot;myemployees?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&quot;</span>;<br><br>    <span class=\"hljs-comment\">/**数据库的用户名与密码，需要根据自己的设置*/</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">USER</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;root&quot;</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">PASSWORD</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;wodeQfeima110&quot;</span>;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 用于创建数据库连接</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">getConnection</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//注册JDBC驱动</span><br>            Class.forName(JDBC_DRIVER);<br>            <span class=\"hljs-comment\">//建立连接</span><br>            System.out.println(<span class=\"hljs-string\">&quot;正在连接数据库……&quot;</span>);<br>            con = DriverManager.getConnection(DB_URL, USER, PASSWORD);<br>            <span class=\"hljs-comment\">//获取Statement对象</span><br>            stmt = con.createStatement();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-keyword\">if</span> (con != <span class=\"hljs-literal\">null</span>) &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;连接创建成功！&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;连接创建失败！&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 关闭数据库连接</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">closeConnection</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (con != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;正在关闭连接……&quot;</span>);<br>                con.close();<br>                System.out.println(<span class=\"hljs-string\">&quot;连接已关闭！Catch you later~&quot;</span>);<br>            &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>                throwables.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>接下来编写测试函数进行连接，测试是否连接成功</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  *测试能否正常连接服务端数据库</span><br><span class=\"hljs-comment\">  */</span><br><span class=\"hljs-meta\">@Test</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">connect</span><span class=\"hljs-params\">()</span>&#123;<br>    MySqlOperation.getConnection();<br>    MySqlOperation.closeConnection();<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>运行结果如下：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205225231564.png\" alt=\"连接测试\"></p>\n<h2 id=\"数据库基本操作\"><a class=\"markdownIt-Anchor\" href=\"#数据库基本操作\">#</a> 数据库基本操作</h2>\n<p>在 <code>MySqlOperation类</code> 中添加执行更新相关、查询相关的 sql 语句的函数：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 执行更新相关的SQL语句</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> sql 要执行的SQL语句</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">executeUpdate</span><span class=\"hljs-params\">(String sql)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (stmt != <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            stmt.executeUpdate(sql);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 执行查询相关的SQL语句</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> sql 要执行的SQL语句</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> ResultSet <span class=\"hljs-title function_\">executeQuery</span><span class=\"hljs-params\">(String sql)</span>&#123;<br>    <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>    <span class=\"hljs-keyword\">if</span> (stmt != <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            rs = stmt.executeQuery(sql);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> rs;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"创建数据表\"><a class=\"markdownIt-Anchor\" href=\"#创建数据表\">#</a> 创建数据表</h3>\n<p>此过程中，将创建一个名为 boys 的表格，其中记录了 <code>id</code>  和 <code>name</code></p>\n<p><code>ConnectionTest类</code> 中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试能否正常创建表格</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">createTableTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//将创建一个名为boys的表格，其中记录了`id`和`name`</span><br>        <span class=\"hljs-comment\">//先查询原有的表格</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;show tables;&quot;</span>;<br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(sql1);<br>        System.out.print(<span class=\"hljs-string\">&quot;现有的表如下：&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.print(rs.getString(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;, &quot;</span>);<br>            &#125;<br>            System.out.println();<br>            <span class=\"hljs-comment\">//新建一个表格</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;create table boys(id INT, name varchar(20));&quot;</span>;<br>            MySqlOperation.executeUpdate(sql2);<br>            <span class=\"hljs-comment\">//查询执行新建后的表格</span><br>            rs = MySqlOperation.executeQuery(sql1);<br>            System.out.print(<span class=\"hljs-string\">&quot;新建表格后，现有的表如下：&quot;</span>);<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.print(rs.getString(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;, &quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        System.out.println();<br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205233209004.png\" alt=\"创建数据表执行结果\"></p>\n<p>在服务机中查询表格，可见新增了一个名为 <code>boys</code>  的表格，说明执行正确</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211205233421266.png\" alt=\"服务器中查询结果\"></p>\n<h3 id=\"插入数据\"><a class=\"markdownIt-Anchor\" href=\"#插入数据\">#</a> 插入数据</h3>\n<p>先执行以下脚本，其功能是随机生成 100000 条数据，并插入到 boys 表中（执行时间略长）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\">USE myemployees;<br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> insert_values()<br><span class=\"hljs-keyword\">BEGIN</span> <br>\t# 计数器<br>\t<span class=\"hljs-keyword\">DECLARE</span> i <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\t# 接下来随机生成一个名字串，名字长度为<span class=\"hljs-number\">6</span>位<br>\t<span class=\"hljs-keyword\">DECLARE</span> str <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">6</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&#x27;&#x27;</span>;<br>\t<span class=\"hljs-keyword\">DECLARE</span> j <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\t<span class=\"hljs-keyword\">DECLARE</span> const_str <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">52</span>) <span class=\"hljs-keyword\">DEFAULT</span> &quot;abcdefghigklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;; <br>\ttag1: WHILE i <span class=\"hljs-operator\">&lt;=</span> <span class=\"hljs-number\">100000</span> DO<br>\t\t<span class=\"hljs-keyword\">SET</span> str <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;&#x27;</span>;<br>\t\t<span class=\"hljs-keyword\">SET</span> j <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>;<br>\t\ttag2: WHILE j <span class=\"hljs-operator\">&lt;=</span> <span class=\"hljs-number\">6</span> DO<br>\t\t\t# 每次随机生成一个字母并添加到str中<br>\t\t\t<span class=\"hljs-keyword\">SET</span> str <span class=\"hljs-operator\">=</span> CONCAT(str, SUBSTR(const_str, RAND()<span class=\"hljs-operator\">*</span><span class=\"hljs-number\">52</span> <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>));<br>\t\t\t<span class=\"hljs-keyword\">SET</span> j <span class=\"hljs-operator\">=</span> j <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">END</span> WHILE tag2;<br>\t\t<span class=\"hljs-keyword\">INSERT INTO</span> boys <span class=\"hljs-keyword\">VALUES</span>(i, str);<br>\t\t<span class=\"hljs-keyword\">SET</span> i <span class=\"hljs-operator\">=</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;<br>\t<span class=\"hljs-keyword\">END</span> WHILE tag1;<br>\t\t<br><span class=\"hljs-keyword\">END</span> $<br>DELIMITER ;<br><br><span class=\"hljs-keyword\">CALL</span> insert_values();<br></code></pre></div></td></tr></table></figure>\n<p>接下来，试着在新增的 <code>boys</code>  表中插入数据，就插入我的学号和姓名吧</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 在新增的`boys`表中插入数据(20192121026, DengZhiChao)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">insertTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//创建连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-comment\">//插入前有几条数据</span><br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from boys;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;插入前，boys表中有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//编写SQL语句，因为学号20192121026超过int范围了所以改成2121026</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;insert into boys values(2121026,\\&quot;DengZhiChao\\&quot;);&quot;</span>;<br>        <span class=\"hljs-comment\">//调用MySqlOperation中的方法</span><br>        MySqlOperation.executeUpdate(sql);<br>        <span class=\"hljs-comment\">//验证结果，插入后有几条数据</span><br>        rs = MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from boys;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;插入后，boys表中有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206010511434.png\" alt=\"插入数据执行结果\"></p>\n<p>在服务机中查询表格中的所有值，可见新增了一条值为 <code>(2121026, 'DengZhiChao')</code>  的记录，说明插入成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206010700732.png\" alt=\"服务器查询插入结果\"></p>\n<h3 id=\"修改数据\"><a class=\"markdownIt-Anchor\" href=\"#修改数据\">#</a> 修改数据</h3>\n<p>接下来，把刚才插入的数据 <code>(2121026, 'DengZhiChao')</code>  改成 <code>(2121026, 'DzcGood')</code></p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 把刚才插入的数据`(2121026, &#x27;DengZhiChao&#x27;)`改成`(2121026, &#x27;DzcGood&#x27;)`</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modifyTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建立连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-comment\">//编写SQL语句</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;update boys set name = \\&quot;DzcGood\\&quot; where id = 2121026;&quot;</span>;<br>        <span class=\"hljs-comment\">//调用MySqlOperation中的方法</span><br>        MySqlOperation.executeUpdate(sql);<br>        <span class=\"hljs-comment\">//验证结果</span><br>        System.out.print(<span class=\"hljs-string\">&quot;执行修改数据后，boys表中id为2121026对应的name为：&quot;</span>);<br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select name from boys where id = 2121026;&quot;</span>);<br>        <span class=\"hljs-comment\">//输出结果</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.println(rs.getString(<span class=\"hljs-string\">&quot;name&quot;</span>));<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206010911525.png\" alt=\"修改数据执行结果\"></p>\n<p>在服务机中查询表格中的所有值，可见学号 <code>2121026</code>  对应的 <code>name</code>  值为 <code>DzcGood</code> ，说明修改成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206011005937.png\" alt=\"服务器查询修改结果\"></p>\n<h3 id=\"删除数据\"><a class=\"markdownIt-Anchor\" href=\"#删除数据\">#</a> 删除数据</h3>\n<p>接下来将数据 <code>(2121026, 'DzcGood')</code>  从 <code>boys表</code> 中删除</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     *将数据`(2121026, &#x27;DzcGood&#x27;)`从`boys表`中删除</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">deleteTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建立连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-comment\">//删除前有几条数据</span><br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from boys;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;删除前，boys表中有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//编写SQL语句</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;delete from boys where id = 2121026;&quot;</span>;<br>        <span class=\"hljs-comment\">//调用MySqlOperation中的方法</span><br>        MySqlOperation.executeUpdate(sql);<br>        <span class=\"hljs-comment\">//验证结果，删除后有几条数据</span><br>        rs = MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from boys;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;执行修改数据后，boys表中还有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206011216013.png\" alt=\"删除数据执行结果\"></p>\n<p>在服务器中查询 <code>id</code>  为 <code>2121026</code>  的行数量，发现查询到的数量为 <code>0</code> ，说明删除成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206011429427.png\" alt=\"服务器查询删除结果\"></p>\n<h3 id=\"删除数据表\"><a class=\"markdownIt-Anchor\" href=\"#删除数据表\">#</a> 删除数据表</h3>\n<p>接下来将 <code>boys表</code> 删除</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 删除表格boys</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">dropTableTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//先查询原有的表格</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;show tables;&quot;</span>;<br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(sql1);<br>        System.out.print(<span class=\"hljs-string\">&quot;现有的表如下：&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.print(rs.getString(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;, &quot;</span>);<br>            &#125;<br>            System.out.println();<br>            <span class=\"hljs-comment\">//删除表格boys</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;drop table if exists boys;&quot;</span>;<br>            MySqlOperation.executeUpdate(sql2);<br>            <span class=\"hljs-comment\">//查询删除boys表格后的表格</span><br>            rs = MySqlOperation.executeQuery(sql1);<br>            System.out.print(<span class=\"hljs-string\">&quot;删除表格后，现有的表如下：&quot;</span>);<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.print(rs.getString(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;, &quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        System.out.println();<br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206012019341.png\" alt=\"删除表格执行结果\"></p>\n<p>在服务器中执行 <code>show tables;</code>  命令，可以看到， <code>boys</code>  表格已经不存在了</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206012210523.png\" alt=\"服务器查询删除表格结果\"></p>\n<h3 id=\"跨数据表操作\"><a class=\"markdownIt-Anchor\" href=\"#跨数据表操作\">#</a> 跨数据表操作</h3>\n<p>以 <code>join</code>  为例，查询每个 <code>department</code>  对应的 <code>manager</code>  姓名，这里需要用到 <code>departments</code>  和 <code>employees</code>  两张表</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     *查询每个`department`对应的`manager`姓名，这里需要用到`departments`和`employees`两张表</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">joinTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建立连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-comment\">//编写sql语句</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;SELECT d.department_name, e.last_name FROM departments AS d &quot;</span> +<br>                <span class=\"hljs-string\">&quot;INNER JOIN employees AS e ON d.manager_id = e.employee_id;&quot;</span>;<br>        <span class=\"hljs-comment\">//调用MySqlOperation的方法</span><br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(sql);<br>        <span class=\"hljs-comment\">//输出结果</span><br>        System.out.println(<span class=\"hljs-string\">&quot;department_name manager_name&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-keyword\">while</span>(rs.next())&#123;<br>                System.out.print(rs.getString(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot; &quot;</span>);<br>                System.out.println(rs.getString(<span class=\"hljs-number\">2</span>));<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206013341304.png\" alt=\"join操作执行结果\"></p>\n<h2 id=\"额外功能\"><a class=\"markdownIt-Anchor\" href=\"#额外功能\">#</a> 额外功能</h2>\n<h3 id=\"事务\"><a class=\"markdownIt-Anchor\" href=\"#事务\">#</a> 事务</h3>\n<p>设置 <code>autocommit = 0</code>  后，向 <code>job_grades</code>  表中插入一条数据，然后将其回滚</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 事务测试</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">transactionTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建立连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-comment\">//设置autocommit</span><br>        MySqlOperation.setAutoCommit(<span class=\"hljs-literal\">false</span>);<br>        <span class=\"hljs-comment\">//插入数据</span><br>        MySqlOperation.executeUpdate(<span class=\"hljs-string\">&quot;insert into job_grades values(&#x27;G&#x27;, 40001, 50000);&quot;</span>);<br>        <span class=\"hljs-comment\">//查询数据条数</span><br>        <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from job_grades;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//输出</span><br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;插入后，job_grades表共有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//回滚</span><br>        System.out.println(<span class=\"hljs-string\">&quot;开始回滚……&quot;</span>);<br>        MySqlOperation.rollback();<br>        <span class=\"hljs-comment\">//查询数据条数</span><br>        rs = MySqlOperation.executeQuery(<span class=\"hljs-string\">&quot;select count(*) from job_grades;&quot;</span>);<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//输出</span><br>            rs.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;回滚，job_grades表共有&quot;</span> + rs.getInt(<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&quot;条数据&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p><code>MySqlOperation</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 设置autocommit</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> b autocommit的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setAutoCommit</span><span class=\"hljs-params\">(<span class=\"hljs-type\">boolean</span> b)</span>&#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            con.setAutoCommit(b);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>    &#125;<br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 回滚</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">rollback</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            con.rollback();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206090530564.png\" alt=\"事务执行结果\"></p>\n<p>在服务器端查询 <code>job_grades</code>  表中的数据条数，结果是 <code>6</code>  条，说明插入操作已被回滚</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206090930886.png\" alt=\"服务器查询事务执行结果\"></p>\n<h3 id=\"索引\"><a class=\"markdownIt-Anchor\" href=\"#索引\">#</a> 索引</h3>\n<p>为了让索引的效果更明显，把 <code>boys</code>  表再次生成一下，可以看到，有一条值为 <code>(98000, 'XSyOwT')</code>  的数据，接下来，通过对比创建索引前和创建索引后查询到这条数据的时间来验证索引的效果</p>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 对boys表创建索引，对比使用索引前和使用索引后的效率差别</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">indexTest</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建立连接</span><br>        MySqlOperation.getConnection();<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;select * from boys where id = 98000;&quot;</span>;<br>        System.out.println(<span class=\"hljs-string\">&quot;查询id值为98000的数据……&quot;</span>);<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">before</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>        MySqlOperation.executeQuery(sql);<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">after</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>        System.out.println(<span class=\"hljs-string\">&quot;创建索引前，耗时&quot;</span> + (after - before) + <span class=\"hljs-string\">&quot;ms&quot;</span>);<br>        <span class=\"hljs-comment\">//创建索引</span><br>        MySqlOperation.executeUpdate(<span class=\"hljs-string\">&quot;alter table boys add index index_test(id);&quot;</span>);<br>        System.out.println(<span class=\"hljs-string\">&quot;创建索引后再次查询id值为98000的数据……&quot;</span>);<br>        <span class=\"hljs-comment\">//再次查询</span><br>        before = System.currentTimeMillis();<br>        MySqlOperation.executeQuery(sql);<br>        after = System.currentTimeMillis();<br>        System.out.println(<span class=\"hljs-string\">&quot;创建索引后，耗时&quot;</span> + (after - before) + <span class=\"hljs-string\">&quot;ms&quot;</span>);<br>        <span class=\"hljs-comment\">//释放连接</span><br>        MySqlOperation.closeConnection();<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：<br>\n创建索引前，耗时 258ms，创建索引后，耗时 71ms，效率提升还是很明显的。</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206095242655.png\" alt=\"索引执行结果\"></p>\n<h3 id=\"多用户\"><a class=\"markdownIt-Anchor\" href=\"#多用户\">#</a> 多用户</h3>\n<p>创建多个线程，每个线程创建一个 mysql 连接，分别对 <code>boys</code>  表执行查询操作，并记录每个线程所用的时间</p>\n<p><code>MySqlOperation</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建size个连接对象，并返回</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Connection[] getConnections(<span class=\"hljs-type\">int</span> size) &#123;<br>        Connection[] cons = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Connection</span>[size];<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//注册JDBC驱动</span><br>            Class.forName(JDBC_DRIVER);<br>            <span class=\"hljs-comment\">//建立连接</span><br>            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; size; i++) &#123;<br>                cons[i] = DriverManager.getConnection(DB_URL, USER, PASSWORD);<br>            &#125;<br>            <span class=\"hljs-keyword\">return</span> cons;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p><code>ConnectionTest</code>  类中的实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试多用户执行效率</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span>&#123;<br>        <span class=\"hljs-comment\">//创建100个连接对象</span><br>        <span class=\"hljs-keyword\">final</span> Connection[] cons = MySqlOperation.getConnections(<span class=\"hljs-number\">10</span>);<br>        <span class=\"hljs-comment\">//存储用时</span><br>        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">long</span>[] time = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">long</span>[<span class=\"hljs-number\">100</span>];<br>        <span class=\"hljs-comment\">//编写查询语句</span><br>        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;select * from boys where id = &quot;</span>;<br>        <span class=\"hljs-comment\">//开启100个线程</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; cons.length; i++) &#123;<br>            <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">temp</span> <span class=\"hljs-operator\">=</span> i;<br>            <span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">thread</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Runnable</span>() &#123;<br>                <span class=\"hljs-meta\">@Override</span><br>                <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> &#123;<br>                    <span class=\"hljs-comment\">//统计用时</span><br>                    <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">before</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>                    <span class=\"hljs-comment\">//查询98000，98001，98002……</span><br>                    <span class=\"hljs-keyword\">try</span> &#123;<br>                        cons[temp].createStatement().executeQuery(sql + (<span class=\"hljs-number\">98000</span> + temp) + <span class=\"hljs-string\">&quot;;&quot;</span>);<br>                        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">after</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>                        time[temp] = after - before;<br>                        System.out.println(<span class=\"hljs-string\">&quot;线程&quot;</span> + temp +<span class=\"hljs-string\">&quot;耗时&quot;</span> + time[temp] + <span class=\"hljs-string\">&quot;ms&quot;</span>);<br>                        <span class=\"hljs-comment\">//关闭连接</span><br>                        cons[temp].close();<br>                    &#125; <span class=\"hljs-keyword\">catch</span> (SQLException throwables) &#123;<br>                        throwables.printStackTrace();<br>                    &#125;<br>                &#125;<br>            &#125;);<br>            thread.start();<br>        &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>当用户数量为 <code>10</code>  名时，平均耗时 <code>140ms</code>  左右，当用户数量增加到 <code>100名</code> 时，平均耗时就增加到了 <code>200ms</code>  左右</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206110036245.png\" alt=\"用户数为10\"></p>\n<p>用户数 100 执行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211206105452319.png\" alt=\"用户数为100\"></p>\n",
            "tags": [
                "MySql",
                "JDBC",
                "学习笔记"
            ]
        },
        {
            "id": "http://example.com/2021/12/11/Lock/",
            "url": "http://example.com/2021/12/11/Lock/",
            "title": "锁",
            "date_published": "2021-12-11T15:45:14.000Z",
            "content_html": "<h1 id=\"锁\"><a class=\"markdownIt-Anchor\" href=\"#锁\">#</a> 锁</h1>\n<h2 id=\"基于标志的锁\"><a class=\"markdownIt-Anchor\" href=\"#基于标志的锁\">#</a> 基于标志的锁</h2>\n<p>以下是基于标志（flag）的锁的实现方式：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-keyword\">typedef</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">__lock_t</span> &#123;<span class=\"hljs-type\">int</span> flag;&#125; <span class=\"hljs-type\">lock_t</span>;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *mutex)</span></span>&#123;<br>    <span class=\"hljs-comment\">// 0 -&gt; lock is available, 1 -&gt; held</span><br>    mutex -&gt; flag = <span class=\"hljs-number\">0</span>;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">lock</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *mutex)</span></span>&#123;<br>    <span class=\"hljs-keyword\">while</span>(mutex -&gt; flag == <span class=\"hljs-number\">1</span>) <span class=\"hljs-comment\">// TEST the flag</span><br>        ;<span class=\"hljs-comment\">// spin-wait(do nothing)</span><br>    mutex -&gt; flag = <span class=\"hljs-number\">1</span>;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">unlock</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *mutex)</span></span>&#123;<br>    mutex -&gt; flag = <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"11\"><a class=\"markdownIt-Anchor\" href=\"#11\">#</a> 1.1</h3>\n<blockquote>\n<p>第 10 行的注释，spin-wait，是什么意思？</p>\n</blockquote>\n<p>答： <code>spin-wait</code>  是指自旋等待， <code>flag</code>  为 1 时，线程反复检查锁变量是否可用； <code>flag</code>  为 0 时，说明锁变量可用，设置 <code>flag</code>  为 1 表示保持该锁。</p>\n<h3 id=\"12\"><a class=\"markdownIt-Anchor\" href=\"#12\">#</a> 1.2</h3>\n<blockquote>\n<p>假设没有底层硬件或者操作系统的相关支持，该锁用于进程间的互斥，则其实现方式会有什么问题？请详细说明。</p>\n</blockquote>\n<p>答：获取、释放锁，实际上是读写存储内存或寄存器，因此这种读写操作必须是原子的。如果没有底层硬件或者操作系统的支持，那么就无法保证其操作的原子性。对于 <code>lock函数</code> ， <code>flag</code>  检测和设置本该是一体的，但由于无法保证原子性，那么 <code>while</code>  和 <code>mutex -&gt; flag = 1</code>  之间就可能混入其他线程的操作，例如线程 A 执行到 <code>mutex-&gt;flag = 1</code>  语句之前，另一个线程 B 运行到 <code>while</code> ，由于 <code>mutex-&gt;flag</code>  还未被赋值为 1，线程 B 也可以跳出 <code>while</code> ，于是线程 A 和 B 都拿到了这把锁。</p>\n<hr>\n<h2 id=\"基于test-and-set原子指令的锁\"><a class=\"markdownIt-Anchor\" href=\"#基于test-and-set原子指令的锁\">#</a> 基于 Test-and-Set 原子指令的锁</h2>\n<p>以下是 <code>Test-and-Set</code>  原子指令的实现逻辑：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">TestAndSet</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> *old_ptr, <span class=\"hljs-type\">int</span> <span class=\"hljs-keyword\">new</span>)</span> </span>&#123;<br>\t<span class=\"hljs-type\">int</span> old = *old_ptr;\t<span class=\"hljs-comment\">//fetch old value at old_ptr</span><br> \t*old_ptr = <span class=\"hljs-keyword\">new</span>;\t<span class=\"hljs-comment\">//store ‘new’ into old_ptr</span><br> \t<span class=\"hljs-keyword\">return</span> old;\t<span class=\"hljs-comment\">//return the old value</span><br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>以下是基于  <code>Test-and-Set</code>  指令的锁实现方式：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-keyword\">typedef</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">__lock_t</span> &#123;<br> \t<span class=\"hljs-type\">int</span> flag;<br>&#125; <span class=\"hljs-type\">lock_t</span>;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *lock)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// 0 indicates that lock is available, 1 that it is held</span><br>\tlock-&gt;flag = <span class=\"hljs-number\">0</span>;<br>&#125;<br><br> <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">lock</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *lock)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-built_in\">TestAndSet</span>(&amp;lock-&gt;flag, <span class=\"hljs-number\">1</span>) == <span class=\"hljs-number\">1</span>)<br>\t; <span class=\"hljs-comment\">// spin-wait (do nothing)</span><br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">unlock</span><span class=\"hljs-params\">(<span class=\"hljs-type\">lock_t</span> *lock)</span> </span>&#123;<br>\tlock-&gt;flag = <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"21\"><a class=\"markdownIt-Anchor\" href=\"#21\">#</a> 2.1</h3>\n<blockquote>\n<p>&quot;基于 Test-and-Set&quot; 指令的锁实现方式，是否可以解决 1.2 中，“基于标志 （flag）的锁实现方式” 所存在的问题，为什么？</p>\n</blockquote>\n<p>答：可以。“返回旧值” 和 “设置新值” 这两个操作共同组成了一个原子操作，执行期间不会被打断。当线程 A 执行 <code>TestAndSet</code>  原语时，会把 <code>lock-&gt;flag</code>  设置为 1，并返回之前的值。若返回值是 0，那么线程 A 就可以退出 <code>while</code> ，此时若线程 B 也进入 <code>while</code> ，由于 <code>TestAndSet</code>  原语已把 <code>lock-&gt;flag</code>  设置为 1，线程 B 无法退出 <code>while</code> ，也就不会出现有多个线程同时拿到同一把锁的情况。</p>\n<h3 id=\"22\"><a class=\"markdownIt-Anchor\" href=\"#22\">#</a> 2.2</h3>\n<blockquote>\n<p>假设系统中有 2 个线程 X 和 Y（优先级相同），它们之间通过 “CPU 时间片轮转调度策略” 来分享底层唯一的一个 CPU 资源。其中，X 在某个时刻通过图 3 的 lock () 获取到了锁，并且需要运行 10 个时间片才会调用 unlock () 来释放锁。请问，在此时间段内，Y 会分到时间片吗？如果可以分到，那么 Y 是个什么运行形态？此运行形态会带来什么样的负面效果？</p>\n</blockquote>\n<p>答：Y 会分到时间片。按照时间片轮转调度策略，X 的时间片结束之后，就会被移动到就绪队列尾部，这时 Y 分到时间片并开始执行，但是锁还被 X 占据，所以 Y 即使分到了时间片，也只能一直停留在 <code>while</code>  中，直到 Y 的时间片结束，然后轮到 X 继续执行…… 实际上 Y 除了循环判断 <code>lock-&gt;flag</code> ，并没有做什么有用的工作。这样的运行形态会使得 CPU 运行效率变得比较低，因为 Y 实际上并没有做什么工作，造成资源浪费。</p>\n<hr>\n<h2 id=\"基于linux的futex锁\"><a class=\"markdownIt-Anchor\" href=\"#基于linux的futex锁\">#</a> 基于 Linux 的 Futex 锁</h2>\n<p>以下是基于 Linux 的 Futex 锁实现方式：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">mutex_lock</span> <span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> *mutex)</span> </span>&#123;<br>\t<span class=\"hljs-type\">int</span> v;<br>\t<span class=\"hljs-comment\">/* Bit 31 was clear, we got the mutex (this is the fastpath) */</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">atomic_bit_test_set</span> (mutex, <span class=\"hljs-number\">31</span>) == <span class=\"hljs-number\">0</span>)<br>     \t<span class=\"hljs-keyword\">return</span>;<br>\t<span class=\"hljs-built_in\">atomic_increment</span> (mutex);<br>\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-number\">1</span>) &#123;<br> \t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">atomic_bit_test_set</span> (mutex, <span class=\"hljs-number\">31</span>) == <span class=\"hljs-number\">0</span>) &#123;<br> \t\t\t<span class=\"hljs-built_in\">atomic_decrement</span> (mutex);<br> \t\t\t<span class=\"hljs-keyword\">return</span>;<br> \t\t&#125;<br> \t\t<span class=\"hljs-comment\">/* We have to wait now. First make sure the futex value</span><br><span class=\"hljs-comment\"> \t\tWe are monitoring is truly negative (i.e. locked). */</span><br> \t\tv = *mutex;<br> \t\t<span class=\"hljs-keyword\">if</span> (v &gt;= <span class=\"hljs-number\">0</span>)<br>\t\t\t<span class=\"hljs-keyword\">continue</span>;<br> \t\t<span class=\"hljs-built_in\">futex_wait</span> (mutex, v);<br> \t&#125;<span class=\"hljs-comment\">/*end while*/</span><br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">mutex_unlock</span> <span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> *mutex)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">/* Adding 0x80000000 to the counter results in 0 if and only if</span><br><span class=\"hljs-comment\">     there are not other interested threads */</span><br>     <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">atomic_add_zero</span> (mutex, <span class=\"hljs-number\">0x80000000</span>))<br>         <span class=\"hljs-keyword\">return</span>;<br><br>     <span class=\"hljs-comment\">/* There are other threads waiting for this mutex,</span><br><span class=\"hljs-comment\">     wake one of them up. */</span><br>     <span class=\"hljs-built_in\">futex_wake</span> (mutex);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"31\"><a class=\"markdownIt-Anchor\" href=\"#31\">#</a> 3.1</h3>\n<blockquote>\n<p>该图中的第 4～5 行，和图中的第 8～11 行，具体实现什么作用？它们是否有功 能冗余和冲突？可以去掉当中的一个吗？为什么？</p>\n</blockquote>\n<p>答：</p>\n<ul>\n<li>4-5 行：判断锁是否被占用并置 1，若能获取锁，则直接退出 <code>mutex_lock()</code> 。</li>\n<li>8-11 行：被 <code>futex_wait</code>  的线程被 <code>futex_wake</code>  唤醒后，判断能否获取锁，若能则占用锁并退出 <code>while</code> 。</li>\n<li>不能去掉任何一个。对于 4-5 行，若能直接获取锁，则无需被 <code>wait</code> ；若去掉 8-11 行，则被 <code>wake</code>  后也无法跳出 <code>while</code> 。这两段代码是配合 <code>atomic_increment</code>  和 <code>atomic_decrement</code>  使用的，能够统计在等待的线程数，缺一不可。</li>\n</ul>\n<h3 id=\"32\"><a class=\"markdownIt-Anchor\" href=\"#32\">#</a> 3.2</h3>\n<blockquote>\n<p>在第 24～25 行中的 if 语句是用来干什么的？如果条件语句 atomic_add_zero (mutex, 0x80000000) 为真，为什么要直接 return，为什么不直接执行第 29 行程序呢？</p>\n</blockquote>\n<p>答：</p>\n<ul>\n<li><code>if</code>  语句是为了确保锁可用时，不会执行 <code>wait</code> 。假设没有 <code>if</code>  语句，A 没有获取到锁，在 A 执行 <code>wait</code>  之前，B 执行了 <code>unlock</code> ，此时 <code>atomic_add_zero</code>  返回 <code>true</code> ，也就不会执行 <code>wake</code> ，然后 A 执行了 <code>wait</code> ，此时如果没有新的线程加入，那么 A 就永远不会被唤醒。</li>\n<li>如果条件语句 <code>atomic_add_zero (mutex, 0x80000000)</code>  为真，说明在等待的线程数为 0，没有线程需要被 <code>wake</code> ，直接 <code>return</code>  能提高效率。</li>\n</ul>\n<h3 id=\"33\"><a class=\"markdownIt-Anchor\" href=\"#33\">#</a> 3.3</h3>\n<blockquote>\n<p>Futex 锁实现方式是否改进了 2.2 问题中提到的负面效果，为什么？</p>\n</blockquote>\n<p>答：改进了 2.2 问题中的负面效果， <code>futex_wait</code>  可以让正在执行但没有获得锁的线程睡眠，让出 CPU 给别的线程，避免了无用的等待，能提高 CPU 的使用效率。</p>\n",
            "tags": [
                "Linux",
                "锁"
            ]
        },
        {
            "id": "http://example.com/2021/11/29/Redis/",
            "url": "http://example.com/2021/11/29/Redis/",
            "title": "使用Jedis连接Redis",
            "date_published": "2021-11-28T16:20:35.000Z",
            "content_html": "<h1 id=\"使用jedis远程连接redis\"><a class=\"markdownIt-Anchor\" href=\"#使用jedis远程连接redis\">#</a> 使用 Jedis 远程连接 Redis</h1>\n<h2 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h2>\n<ul>\n<li>选用 Redis 数据库，部署在 linux 之后，用 Java 语言编写一个简单的客户端去与之交互</li>\n<li>操作包括：数据插入、修改、删除等，以及和 Redis 数据库相关的特色操作</li>\n</ul>\n<h2 id=\"开发环境\"><a class=\"markdownIt-Anchor\" href=\"#开发环境\">#</a> 开发环境</h2>\n<ul>\n<li>语言：Java11</li>\n<li>开发环境：IDEA 2021</li>\n<li>数据库：Redis 6.2</li>\n<li>数据库部署环境：CentOS Linux 8.2.2004</li>\n</ul>\n<h2 id=\"redis环境搭建\"><a class=\"markdownIt-Anchor\" href=\"#redis环境搭建\">#</a> Redis 环境搭建</h2>\n<p>首先使用 wget 命令获取 Redis 安装包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">wget https://download.redis.io/releases/redis-6.2.6.tar.gz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128144154675.png\" alt=\"下载Redis\"></p>\n<p>然后使用 tar 命令解压</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">tar -zvxf redis-6.2.6.tar.gz<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128162641814.png\" alt=\"解压redis\"></p>\n<p>将 redis 移动到 /usr/local/redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">mv redis-6.2.6 /usr/local/redis<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128163212156.png\" alt=\"移动redis\"></p>\n<p>编译</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">cd /usr/local/redis<br>make<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128163849897.png\" alt=\"编译redis\"></p>\n<p>安装到指定目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">make PREFIX=/usr/local/redis install <br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128164428531.png\" alt=\"安装redis\"></p>\n<p>为了能使用客户机与远端数据库交互，需要修改 redis 配置文件中的 bind 项</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">vim redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改daemonize为<span class=\"hljs-built_in\">yes</span>，表示开启守护进程</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">注释<span class=\"hljs-built_in\">bind</span> 127.0.0.1::1，表示任何ip都可以访问</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">protected-mode设置为no</span><br></code></pre></div></td></tr></table></figure>\n<p>启动 redis 服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">./bin/redis-server&amp; ./redis.conf<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128170239028.png\" alt=\"启动redis\"></p>\n<p>查看 redis 是否正在运行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">netstat -lanp | grep 6379<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128170538421.png\" alt=\"查看redis是否正常运行\"></p>\n<h2 id=\"使用客户机访问redis\"><a class=\"markdownIt-Anchor\" href=\"#使用客户机访问redis\">#</a> 使用客户机访问 redis</h2>\n<p>选择使用 Redis 官方提供的 Jedis 来连接 Redis，需要在 maven 中添加以下依赖：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>redis.clients<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jedis<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.7.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>\n<p>一共创建了两个类</p>\n<ul>\n<li>第一个类是 RedisOperation，其中封装了建立连接，增删改查等操作</li>\n<li>第二个类是 RedisTest 用于测试以上操作</li>\n</ul>\n<p>以下是建立连接的函数，其作用是返回一个连接对象：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(password);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<p>接下来编写主函数进行连接，并使用 ping 方法测试是否连接成功。设置默认端口号为 6379</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">//设置默认端口为6379</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">//主函数</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>运行结果如下：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128190350397.png\" alt=\"建立接连\"></p>\n<p>调用 jedis.ping () 方法返回了 PONG，说明连接已经建立成功，服务正在运行</p>\n<h2 id=\"在客户机对数据库进行增删改查\"><a class=\"markdownIt-Anchor\" href=\"#在客户机对数据库进行增删改查\">#</a> 在客户机对数据库进行增删改查</h2>\n<h3 id=\"redisoperation的实现\"><a class=\"markdownIt-Anchor\" href=\"#redisoperation的实现\">#</a> RedisOperation 的实现</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:28</span><br><span class=\"hljs-comment\"> * Redis操作类，用于提供增删改查等操作</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisOperation</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 与远程数据库建立连接，并返回连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> ip 服务器的ip</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> port 端口号</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> password 连接密码</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 连接对象</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(password);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库增加键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库删除键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要删除的键值对的键</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.del(key);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库修改键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要修改的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 修改后的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库查找键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要查找的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 查询到的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">return</span> jedis.get(key);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"redistest的实现\"><a class=\"markdownIt-Anchor\" href=\"#redistest的实现\">#</a> RedisTest 的实现</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-keyword\">import</span> java.util.Scanner;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">/**默认连接端口号*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">/**redis连接对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>    <span class=\"hljs-comment\">/**RedisOperation操作类对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">utility</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的add()方法</span><br>            utility.add(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;插入成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向删除键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要删除的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的delete()方法</span><br>            utility.delete(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis修改键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的modify()方法</span><br>            utility.modify(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;修改成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis查询键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要查询的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的search()方法</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;查询成功，&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        jedis = redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        <span class=\"hljs-comment\">//增</span><br>        add();<br>        <span class=\"hljs-comment\">//删</span><br>        delete();<br>        <span class=\"hljs-comment\">//改</span><br>        modify();<br>        <span class=\"hljs-comment\">//查</span><br>        search();<br>        <span class=\"hljs-comment\">//关闭连接</span><br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"执行结果\"><a class=\"markdownIt-Anchor\" href=\"#执行结果\">#</a> 执行结果</h3>\n<p>为了使得执行的结果更加明显，首先在服务器端中先添加几对键值对：</p>\n<ul>\n<li>“weather” : “sunny”</li>\n<li>“temperature” : “27”</li>\n<li>“date” : “2021/11/28”</li>\n<li>“name” : “DengZhiChao”</li>\n</ul>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128195919555.png\" alt=\"服务器端添加数据\"></p>\n<p>增（向数据库插入 &quot;number&quot; : &quot;20192121026&quot; 的键值对）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200010763.png\" alt=\"增\"></p>\n<p>在服务器端查询键 &quot;number&quot;，可得结果 &quot;20192121026&quot;，说明插入数据成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200048775.png\" alt=\"服务器端验证插入结果\"></p>\n<p>删（删除 weather 对应的键值对）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200126931.png\" alt=\"删\"></p>\n<p>在服务器端查询所有的键，可以看见结果中没有值为 &quot;weather&quot; 的键，说明删除成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200155536.png\" alt=\"服务器端查询删除结果\"></p>\n<p>改（将 key 为 temperature 的 value 改成 28）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200333211.png\" alt=\"改\"></p>\n<p>在服务器端查询键 &quot;temperature&quot;，可得结果 &quot;28&quot;，说明修改数据成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200420078.png\" alt=\"image-20211128200420078\"></p>\n<p>查（查询 name 对应的值）：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128200505564.png\" alt=\"查\"></p>\n<p>在服务器端查询键 &quot;name&quot;，可得结果 &quot;DengZhiChao&quot;，说明查询数据正确</p>\n<h2 id=\"特色操作\"><a class=\"markdownIt-Anchor\" href=\"#特色操作\">#</a> 特色操作</h2>\n<h3 id=\"过期键功能\"><a class=\"markdownIt-Anchor\" href=\"#过期键功能\">#</a> 过期键功能</h3>\n<p>Redis 是运行在内存的非关系型数据库，可以为键设置一个过期时间，让它在指定的时间之后自动被删除。此功能可以被运用在网站临时验证码的存储，让验证码到达最大存储时间后，就被自动删除。接下来，将测试此功能，考虑到时间关系，我准备将过期时间设置成 30 秒。具体的验证方式是先插入一个键值对，并标记其过期时间为 30 秒，然后在 30 秒后再次查询此键值对，若不存在，则可以验证过期键的功能。</p>\n<p>说明：此功能在上述执行增删改查的结果基础上继续执行</p>\n<p>RedisOperation 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 设置指定键值对的过期时间</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要设置过期时间的key</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> time 多少时间后过期</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">(Jedis jedis, String key, <span class=\"hljs-type\">long</span> time)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.expire(key, time);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 测试过期键功能</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">()</span>&#123;<br>    <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>    <span class=\"hljs-comment\">//获取输入</span><br>    System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的键&quot;</span>);<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>    System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的时间&quot;</span>);<br>    <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> scanner.nextLong();<br>    <span class=\"hljs-comment\">//判空</span><br>    <span class=\"hljs-keyword\">if</span>(utility.search(jedis, key) == <span class=\"hljs-literal\">null</span>)&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;不存在键为&quot;</span> + key + <span class=\"hljs-string\">&quot;的键&quot;</span>);<br>    &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>        <span class=\"hljs-comment\">//调用操作类的expire()方法</span><br>        utility.expire(jedis, key, time);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>        System.out.println(<span class=\"hljs-string\">&quot;当前&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        System.out.println(<span class=\"hljs-string\">&quot;将在&quot;</span> + time + <span class=\"hljs-string\">&quot;秒后再次执行查询操作，请等待……&quot;</span>);<br>        <span class=\"hljs-comment\">//让程序停止一段时间</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            Thread.sleep(time * <span class=\"hljs-number\">1000</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        value = utility.search(jedis, key);<br>        <span class=\"hljs-keyword\">if</span>(value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(key + <span class=\"hljs-string\">&quot;对应的键值对已被删除，查询结果为null&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>执行结果：</p>\n<p>设置要过期的键为 date，过期时间为 30 秒</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128204108958.png\" alt=\"过期键功能\"></p>\n<p>在服务器端查询所有键，发现没有 date，说明 date 对应的键值对已经过期</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211128204210720.png\" alt=\"服务器端测试过期键结果\"></p>\n<h3 id=\"对redis列表的操作\"><a class=\"markdownIt-Anchor\" href=\"#对redis列表的操作\">#</a> 对 Redis 列表的操作</h3>\n<p>Redis 列表是简单的字符串列表，按照插入顺序排序。我们可以添加一个元素到列表的头部（左边）或者尾部（右边），接下来将分别演示向列表头部和尾部插入键值对。</p>\n<p>说明：为了使得结果看起来更加明显，首先在服务器端创建一个 key 为 course 的列表，并向其中插入两条数据：database 和 os</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000206842.png\" alt=\"原有list\"></p>\n<p>RedisOperation 中的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 向Redis列表头部插入键值对</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">lpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.lpush(key, value);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">  * 向Redis列表尾部插入键值对</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">  * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">  * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">rpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>    <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>        jedis.rpush(key, value);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 中的实现</p>\n<p>头部插入：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000502856.png\" alt=\"插入列表头部\"></p>\n<p>在服务器端查询 key 为 course 的列表中的全部内容，可见第一条为 linux，说明在列表头部插入成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000600230.png\" alt=\"服务器端查询头部插入结果\"></p>\n<p>尾部插入：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000659482.png\" alt=\"插入列表尾部\"></p>\n<p>在服务器端查询 key 为 course 的列表中的全部内容，可见最后一条值为 CompilePrinciple，说明在列表尾部插入成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211129000841821.png\" alt=\"服务器端查询尾部插入结果\"></p>\n<h2 id=\"源代码\"><a class=\"markdownIt-Anchor\" href=\"#源代码\">#</a> 源代码</h2>\n<p>共两个类，RedisOperation 类和 RedisTest 类</p>\n<p>RedisOperation 类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:28</span><br><span class=\"hljs-comment\"> * Redis操作类，用于提供增删改查等操作</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisOperation</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 与远程数据库建立连接，并返回连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> ip 服务器的ip</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> port 端口号</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> password 连接密码</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 连接对象</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> Jedis <span class=\"hljs-title function_\">buildConnection</span><span class=\"hljs-params\">(String ip, <span class=\"hljs-type\">int</span> port, String password)</span>&#123;<br>        <span class=\"hljs-comment\">//指定Redis服务Host和port</span><br>        <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jedis</span>(ip, port);<br>        <span class=\"hljs-comment\">//指定连接所需要的密码</span><br>        jedis.auth(<span class=\"hljs-string\">&quot;xxxxxxxx&quot;</span>);<br>        <span class=\"hljs-comment\">//查看服务是否运行</span><br>        System.out.println(<span class=\"hljs-string\">&quot;服务正在运行：&quot;</span> + jedis.ping());<br>        <span class=\"hljs-keyword\">return</span> jedis;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库增加键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库删除键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要删除的键值对的键</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.del(key);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库修改键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要修改的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 修改后的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.set(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向数据库查找键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要查找的键值对的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 查询到的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">(Jedis jedis, String key)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">return</span> jedis.get(key);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 设置指定键值对的过期时间</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要设置过期时间的key</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> time 多少时间后过期</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">(Jedis jedis, String key, <span class=\"hljs-type\">long</span> time)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.expire(key, time);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表头部插入键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">lpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.lpush(key, value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表尾部插入键值对</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jedis 建立的连接对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> key 要插入的键</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> value 要插入的值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">rpush</span><span class=\"hljs-params\">(Jedis jedis, String key, String value)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (jedis != <span class=\"hljs-literal\">null</span>) &#123;<br>            jedis.rpush(key, value);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>RedisTest 类：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> redis.clients.jedis.Jedis;<br><br><span class=\"hljs-keyword\">import</span> java.util.Scanner;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> 邓智超 20192121026</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/11/28 - 18:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RedisTest</span> &#123;<br>    <span class=\"hljs-comment\">/**默认连接端口号*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_PORT</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">6379</span>;<br>    <span class=\"hljs-comment\">/**redis连接对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Jedis</span> <span class=\"hljs-variable\">jedis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>    <span class=\"hljs-comment\">/**RedisOperation操作类对象*/</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">utility</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的add()方法</span><br>            utility.add(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;插入成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向删除键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要删除的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的delete()方法</span><br>            utility.delete(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis修改键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">modify</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要修改的值&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的modify()方法</span><br>            utility.modify(jedis, key, value);<br>            System.out.println(<span class=\"hljs-string\">&quot;修改成功&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向redis查询键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要查询的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的search()方法</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;查询成功，&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试过期键功能</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">expire</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>        <span class=\"hljs-comment\">//获取输入</span><br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的键&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>        System.out.println(<span class=\"hljs-string\">&quot;请输入要设置过期的时间&quot;</span>);<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> scanner.nextLong();<br>        <span class=\"hljs-comment\">//判空</span><br>        <span class=\"hljs-keyword\">if</span>(utility.search(jedis, key) == <span class=\"hljs-literal\">null</span>)&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;不存在键为&quot;</span> + key + <span class=\"hljs-string\">&quot;的键&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-comment\">//调用操作类的expire()方法</span><br>            utility.expire(jedis, key, time);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> utility.search(jedis, key);<br>            System.out.println(<span class=\"hljs-string\">&quot;当前&quot;</span> + key + <span class=\"hljs-string\">&quot;对应的value为&quot;</span> + value);<br>            System.out.println(<span class=\"hljs-string\">&quot;将在&quot;</span> + time + <span class=\"hljs-string\">&quot;秒后再次执行查询操作，请等待……&quot;</span>);<br>            <span class=\"hljs-comment\">//让程序停止一段时间</span><br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                Thread.sleep(time * <span class=\"hljs-number\">1000</span>);<br>            &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            value = utility.search(jedis, key);<br>            <span class=\"hljs-keyword\">if</span>(value == <span class=\"hljs-literal\">null</span>)&#123;<br>                System.out.println(key + <span class=\"hljs-string\">&quot;对应的键值对已被删除，查询结果为null&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向Redis列表的头部和尾部分别插入键值对</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">listInsert</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>        &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;将向列表&quot;</span> +  (i == <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;头部&quot;</span> : <span class=\"hljs-string\">&quot;尾部&quot;</span>) + <span class=\"hljs-string\">&quot;插入元素：&quot;</span>);<br>            <span class=\"hljs-comment\">//获取输入</span><br>            <span class=\"hljs-type\">Scanner</span> <span class=\"hljs-variable\">scanner</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(System.in);<br>            System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的键&quot;</span>);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>            System.out.println(<span class=\"hljs-string\">&quot;请输入要插入的值&quot;</span>);<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> scanner.next();<br>            <span class=\"hljs-keyword\">if</span>(key == <span class=\"hljs-literal\">null</span> || value == <span class=\"hljs-literal\">null</span>)&#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;键和值不能为空&quot;</span>);<br>                <span class=\"hljs-keyword\">return</span>;<br>            &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                <span class=\"hljs-keyword\">if</span>(i == <span class=\"hljs-number\">0</span>)&#123;<br>                    utility.lpush(jedis, key, value);<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    utility.rpush(jedis, key, value);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">RedisOperation</span> <span class=\"hljs-variable\">redis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RedisOperation</span>();<br>        jedis = redis.buildConnection(<span class=\"hljs-string\">&quot;这里是ip&quot;</span>,DEFAULT_PORT,<span class=\"hljs-string\">&quot;这里是密码&quot;</span>);<br>        <span class=\"hljs-comment\">//增</span><br>        add();<br>        <span class=\"hljs-comment\">//删</span><br>        delete();<br>        <span class=\"hljs-comment\">//改</span><br>        modify();<br>        <span class=\"hljs-comment\">//查</span><br>        search();<br>        <span class=\"hljs-comment\">//测试过期功能</span><br>        expire();<br>        <span class=\"hljs-comment\">//从列表头部和尾部分别插入</span><br>        listInsert();<br>        <span class=\"hljs-comment\">//关闭连接</span><br>        jedis.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n",
            "tags": [
                "学习笔记",
                "Redis",
                "Jedis"
            ]
        },
        {
            "id": "http://example.com/2021/11/26/GrammerProblemProcessor/",
            "url": "http://example.com/2021/11/26/GrammerProblemProcessor/",
            "title": "文法问题处理器",
            "date_published": "2021-11-26T08:15:00.000Z",
            "content_html": "<h1 id=\"文法问题处理器\"><a class=\"markdownIt-Anchor\" href=\"#文法问题处理器\">#</a> 文法问题处理器</h1>\n<h2 id=\"问题描述\"><a class=\"markdownIt-Anchor\" href=\"#问题描述\">#</a> 问题描述</h2>\n<p>设计一个文法规则处理器，使其能够实现以下功能：</p>\n<ul>\n<li>检查并去除有害规则和多余规则</li>\n<li>消除该文法的左公共因子</li>\n<li>消除该文法的左递归</li>\n<li>求出经过前面步骤处理好的文法各非终结符号的 first 集合与 follow 集合</li>\n<li>对输入的句子进行最左推导分析</li>\n<li>使用符号’@‘代表’ε’</li>\n</ul>\n<h2 id=\"系统流程图\"><a class=\"markdownIt-Anchor\" href=\"#系统流程图\">#</a> 系统流程图</h2>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E6%B5%81%E7%A8%8B%E5%9B%BE.jpg\" alt=\"系统流程图\"></p>\n<h2 id=\"存储结构设计\"><a class=\"markdownIt-Anchor\" href=\"#存储结构设计\">#</a> 存储结构设计</h2>\n<h3 id=\"文法规则存储结构\"><a class=\"markdownIt-Anchor\" href=\"#文法规则存储结构\">#</a> 文法规则存储结构</h3>\n<p>对于一条文法规则，使用 string 来存储左边部分，用 vector&lt;vector&lt;string&gt;&gt; 来存储右边部分。</p>\n<p>例如：对于文法规则 A -&gt; acd | efg | hig，则右边部分的存储结构为 [[a, c, d], [e, f, g], [h, i, g]]</p>\n<p>类声明如下：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">//使用&#x27;@&#x27;标识EPSILON</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> EPSILON <span class=\"hljs-string\">&quot;@&quot;</span></span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LinkNode</span><br>&#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-comment\">//规则左部</span><br>    string left;<br>    <span class=\"hljs-comment\">//规则右部分 abc | def | hji，一个vector&lt;char&gt;元素代表一种可能</span><br>    vector&lt;vector&lt;string&gt;&gt; right;<br>    <span class=\"hljs-comment\">//构造函数，str是左边部分</span><br>    <span class=\"hljs-built_in\">LinkNode</span>(string str);<br>    <span class=\"hljs-comment\">//右边添加规则</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(vector&lt;string&gt; &amp;nodes)</span></span>;<br>    <span class=\"hljs-comment\">//判断是否有epsilon存在</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">includesEpsilon</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//toString()方法</span><br>    <span class=\"hljs-function\">string <span class=\"hljs-title\">toString</span><span class=\"hljs-params\">()</span></span>;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"文法处理器存储结构\"><a class=\"markdownIt-Anchor\" href=\"#文法处理器存储结构\">#</a> 文法处理器存储结构</h3>\n<p>文法处理器的功能包括对文法的存储以及各种处理操作。</p>\n<ul>\n<li>使用 vector&lt;LinkNode&gt; 存储多条文法规则</li>\n<li>使用 vector&lt;string&gt; 存储用户输入的待推导句子、终结符号、非终结符号</li>\n<li>使用 map&lt;string, set&lt;string&gt;&gt; 存储各个非终结符号对应的 first 集合和 follow 集合</li>\n</ul>\n<p>类声明如下：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Processor</span><br>&#123;<br><span class=\"hljs-keyword\">public</span>:<br>    vector&lt;string&gt;input;<span class=\"hljs-comment\">//存用户输入的待分析句子</span><br>    <span class=\"hljs-type\">int</span> startWordIndex;<span class=\"hljs-comment\">//开始节点索引    </span><br>    string startNode;<span class=\"hljs-comment\">//开始结点值   </span><br>    vector&lt;LinkNode&gt; grammers;<span class=\"hljs-comment\">//存文法   </span><br>    vector&lt;string&gt; finalWord;<span class=\"hljs-comment\">//终结符号</span><br>    vector&lt;string&gt; nonFinalWord;<span class=\"hljs-comment\">//非终结符号   </span><br>    map&lt;string, set&lt;string&gt;&gt; first;<span class=\"hljs-comment\">//First集合   </span><br>    map&lt;string, set&lt;string&gt;&gt; follow;<span class=\"hljs-comment\">//Follow集合   </span><br>    ofstream log;<span class=\"hljs-comment\">//文件流，用于写出日志   </span><br>    <span class=\"hljs-built_in\">Processor</span>(string filePath);<span class=\"hljs-comment\">//构造函数，参数是文件路径 </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//初始化终结符号和非终结符号    </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">dealLeftRecursion</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//处理左递归   </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">dealLeftCommonFacotr</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//处理左公因子 </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">simplify</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//化简 </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">getFirst</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//生成First集合   </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">getFollow</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//生成Follow集合   </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isFinalWord</span><span class=\"hljs-params\">(string word)</span></span>;<span class=\"hljs-comment\">//判断是不是终结符号  </span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isWord</span><span class=\"hljs-params\">(string word)</span></span>;<span class=\"hljs-comment\">//判断是不是该文法能处理的符号</span><br>    <span class=\"hljs-comment\">//按照指定符号拆分字符串</span><br>    <span class=\"hljs-function\">vector&lt;string&gt; <span class=\"hljs-title\">splitString</span><span class=\"hljs-params\">(string str, string spliter)</span></span>;  <br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">printGrammers</span><span class=\"hljs-params\">()</span></span>;<span class=\"hljs-comment\">//输出当前文法信息到log文件   </span><br>    vector&lt;vector&lt;string&gt;&gt; <span class=\"hljs-built_in\">leftMostDerivation</span>();<span class=\"hljs-comment\">//最左推导</span><br><span class=\"hljs-keyword\">private</span>:<br>    <span class=\"hljs-comment\">//用于存储是否访问过</span><br>    <span class=\"hljs-type\">bool</span> visited[MAX_NODE_NUMBER];<br>    <span class=\"hljs-comment\">//找到非终结符号word对应的是第几条规则</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">getIndex</span><span class=\"hljs-params\">(string word)</span></span>;<br>    <span class=\"hljs-comment\">//配合getFirst()函数使用，递归实现求某条规则的first集合</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">findFirst</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> i)</span></span>;<br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">dfs</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> x)</span></span>;<span class=\"hljs-comment\">//深度优先遍历</span><br>    <span class=\"hljs-comment\">//处理单条文法的左公因子</span><br>    <span class=\"hljs-function\">vector&lt;LinkNode&gt; <span class=\"hljs-title\">dealCommonFactor</span><span class=\"hljs-params\">(LinkNode&amp;node)</span></span>;<br>    <span class=\"hljs-comment\">//生成一个没有使用过的非终结符号名</span><br>    <span class=\"hljs-function\">string <span class=\"hljs-title\">generateNewName</span><span class=\"hljs-params\">(string source)</span></span>;<br>    <span class=\"hljs-comment\">//将str1的follow添加到str2的follow集合</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">append</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> string &amp;str1, <span class=\"hljs-type\">const</span> string &amp;str2)</span></span>;<br>&#125;;<br><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"界面设计\"><a class=\"markdownIt-Anchor\" href=\"#界面设计\">#</a> 界面设计</h2>\n<h3 id=\"读取文法并做处理的界面\"><a class=\"markdownIt-Anchor\" href=\"#读取文法并做处理的界面\">#</a> 读取文法并做处理的界面</h3>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211126170426459.png\" alt=\"读取文法并做处理的界面\"></p>\n<h3 id=\"最左推导界面\"><a class=\"markdownIt-Anchor\" href=\"#最左推导界面\">#</a> 最左推导界面</h3>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211126170501759.png\" alt=\"最左推导界面\"></p>\n<h2 id=\"主要算法说明\"><a class=\"markdownIt-Anchor\" href=\"#主要算法说明\">#</a> 主要算法说明</h2>\n<h3 id=\"去除无效文法\"><a class=\"markdownIt-Anchor\" href=\"#去除无效文法\">#</a> 去除无效文法</h3>\n<ul>\n<li>对于形如 A -&gt; A 的有害规则，在读取规则时就可以将其去除</li>\n<li>对于直接或间接无法终止的规则，暂时没想好怎么处理……</li>\n<li>对于用不到的无效规则，可以采用深度优先的方法，设置一个 bool 数组用于标记是否访问过各条文法规则，从开始结点遍历文法规则，当遍历结束时，对于没有访问过的文法规则，就将其删除</li>\n</ul>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E5%8E%BB%E9%99%A4%E5%A4%9A%E4%BD%99%E8%A7%84%E5%88%99.jpg\" alt=\"去除多余规则\"></p>\n<h3 id=\"去除左递归\"><a class=\"markdownIt-Anchor\" href=\"#去除左递归\">#</a> 去除左递归</h3>\n<ul>\n<li>先将文法右边的非终结符号用其对应的转换规则取代，例如：S -&gt; Qc | c，R -&gt; Sa | a，Q -&gt; Rb | b，就先把 S 带入 R，然后把 R 带入 Q 中，这种做法可以使得间接的左递归也转化成直接左递归</li>\n<li>然后再开始消除直接左递归，例如 A -&gt; Aa|b，就转换成 A -&gt; bA‘，A’ -&gt; aA’ | ε</li>\n</ul>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E5%8E%BB%E9%99%A4%E5%B7%A6%E9%80%92%E5%BD%92.jpg\" alt=\"去除左递归\"></p>\n<h3 id=\"去除左公因子\"><a class=\"markdownIt-Anchor\" href=\"#去除左公因子\">#</a> 去除左公因子</h3>\n<p>处理的思路是每次只寻找一个左公因子</p>\n<ul>\n<li>例如 A -&gt; ab | abc</li>\n<li>第一次处理后变成 A -&gt; aA’，A’ -&gt; b | bc</li>\n<li>第二次处理后变成 A -&gt; aA’，A‘ -&gt; bA’’，A’‘ -&gt; ε | c</li>\n</ul>\n<p>定义从调函数，其功能是对于某条文法规则，若有左公因子，就返回处理好后的（一条变多条）文法规则，若没有左公因子，就返回一个空的 vector；定义一个主调函数，定义变量 i，当 i 小于文法数量时，就一直执行从调函数，若从调函数返回的向量为空，就说明此文法规则无左公因子，那么 i++，否则就将目前处理的文法规则替换为从调函数返回的（多条）文法规则</p>\n<p>因为逻辑比较复杂，所以流程图化的有点乱</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E6%8F%90%E5%8F%96%E5%B7%A6%E5%85%AC%E5%9B%A0%E5%AD%90.jpg\" alt=\"提取左公因子\"></p>\n<h3 id=\"求first集合\"><a class=\"markdownIt-Anchor\" href=\"#求first集合\">#</a> 求 first 集合</h3>\n<p>对于规则 X -&gt; x1x2…xn，first (x) 的计算方法如下：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-built_in\">first</span>(X) = &#123;&#125;<br>k = <span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">while</span>(k &lt;= n)<br>&#123;<br>\t<span class=\"hljs-keyword\">if</span>(xk为终结符号或ε)<br>        <span class=\"hljs-built_in\">first</span>(xk) = xk;<br>    <span class=\"hljs-built_in\">first</span>(x) = <span class=\"hljs-built_in\">first</span>(x) ∪ <span class=\"hljs-built_in\">first</span>(xk) - &#123;ε&#125;;<br>    <span class=\"hljs-keyword\">if</span>(ε 不属于 <span class=\"hljs-built_in\">first</span>(xk))<br>        <span class=\"hljs-keyword\">break</span>;<br>    k++;<br>&#125; <br><span class=\"hljs-keyword\">if</span>(k == n + <span class=\"hljs-number\">1</span>)<br>    <span class=\"hljs-built_in\">first</span>(x) += &#123;ε&#125;;<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E6%B1%82first%E9%9B%86%E5%90%88.jpg\" alt=\"求first集合\"></p>\n<h3 id=\"求follow集合\"><a class=\"markdownIt-Anchor\" href=\"#求follow集合\">#</a> 求 follow 集合</h3>\n<p>计算 follow 集合的算法如下：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-built_in\">follow</span>(开始符号) = &#123;$&#125;<br>其他任何一个非终结符号A，则执行<span class=\"hljs-built_in\">follow</span>(A) = &#123;&#125;<br><span class=\"hljs-keyword\">while</span>(有follow集合在变化)<br>    循环：对每条文法规则A -&gt; X1X<span class=\"hljs-number\">2.</span>..Xn都执行<br>    \t对于每个非终结符号Xi，都执行<br>    \t\t把<span class=\"hljs-built_in\">first</span>(Xi<span class=\"hljs-number\">+1</span>Xi<span class=\"hljs-number\">+2.</span>..Xn)-&#123;ε&#125;添加到<span class=\"hljs-built_in\">follow</span>(Xi)<br>    \t\t<span class=\"hljs-keyword\">if</span>(ε in <span class=\"hljs-built_in\">first</span>(Xi<span class=\"hljs-number\">+1</span>Xi<span class=\"hljs-number\">+2.</span>..Xn))<br>                把<span class=\"hljs-built_in\">follow</span>(A)添加到<span class=\"hljs-built_in\">follow</span>(Xi)<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E6%B1%82follow%E9%9B%86%E5%90%88.jpg\" alt=\"求follow集合\"></p>\n<h3 id=\"最左推导\"><a class=\"markdownIt-Anchor\" href=\"#最左推导\">#</a> 最左推导</h3>\n<p>设计一个计数器，表示当前匹配到第几个字符。从开始符号开始执行，每次执行找到当前已生成符号串从左到右第一个非终结符号，查看该终结符号的文法规则：</p>\n<ul>\n<li>若第一个字符是终结符号，且和待匹配字符相同，就选择该转换</li>\n<li>若第一个字符是非终结符号，且 first 集合包含待匹配字符，就选择该转换</li>\n<li>若第一个字符是非终结符号，且 follow 集合包含待匹配字符，就选择 ε 转换</li>\n</ul>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/%E6%9C%80%E5%B7%A6%E6%8E%A8%E5%AF%BC.jpg\" alt=\"最左推导\"></p>\n<h2 id=\"其他说明\"><a class=\"markdownIt-Anchor\" href=\"#其他说明\">#</a> 其他说明</h2>\n<p>本文法问题处理器对于以下集中情况暂时无法处理，有待后续改进：</p>\n<ul>\n<li>直接或间接无法终止的文法规则，目前想到的处理思路是当递归深度超过一定程度时就报错，但是具体实现的时候遇到了问题</li>\n<li>输入时或处理后出现某条文法规则可以变成’ε’，且 first 和 follow 集合的交集不为空的情况，这个暂时想不到好的办法解决。</li>\n</ul>\n",
            "tags": [
                "编译原理",
                "SCNU-CS"
            ]
        },
        {
            "id": "http://example.com/2021/11/15/SystemCall_ProcessCommunication/",
            "url": "http://example.com/2021/11/15/SystemCall_ProcessCommunication/",
            "title": "系统调用与进程通信",
            "date_published": "2021-11-15T02:07:24.000Z",
            "content_html": "<h1 id=\"系统调用与进程通信\"><a class=\"markdownIt-Anchor\" href=\"#系统调用与进程通信\">#</a> 系统调用与进程通信</h1>\n<h2 id=\"系统调用\"><a class=\"markdownIt-Anchor\" href=\"#系统调用\">#</a> 系统调用</h2>\n<h3 id=\"查询sys_call_table的地址\"><a class=\"markdownIt-Anchor\" href=\"#查询sys_call_table的地址\">#</a> 查询 sys_call_table 的地址</h3>\n<p>通过命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">sudo cat /proc/kallsyms | grep sys_call_table<br></code></pre></div></td></tr></table></figure>\n<p>查找到 sys_call_table 的地址为<strong> 0xffffffffb48001e0</strong>：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090038725.png\" alt=\"sys_call_table地址\"></p>\n<h3 id=\"查询可用的系统调用号\"><a class=\"markdownIt-Anchor\" href=\"#查询可用的系统调用号\">#</a> 查询可用的系统调用号</h3>\n<p>通过命令打开<strong> unistd_32.h</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">vim /usr/include/asm/unistd_32.h<br></code></pre></div></td></tr></table></figure>\n<p>如图所示，可以看到<strong> 387 号</strong>是可用的系统调用号：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090150894.png\" alt=\"unistd_32.h\"></p>\n<h3 id=\"创建dzc_testc文件\"><a class=\"markdownIt-Anchor\" href=\"#创建dzc_testc文件\">#</a> 创建 dzc_test.c 文件</h3>\n<p>创建 dzc_test.c 文件，在文件内定义系统调用，其中使用到的 sys_call_table 地址和可用系统调用号为上述的<strong> 0xffffffffb48001e0</strong> 以及<strong> 387</strong></p>\n<p>代码如下：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/kernel.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/init.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/module.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/sched.h&gt;</span></span><br>  <br>MODULE_LICENSE(<span class=\"hljs-string\">&quot;Dual BSD/GPL&quot;</span>);<br><span class=\"hljs-comment\">//sys_call_table地址</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> SYS_CALL_TABLE_ADDRESS 0xffffffffb48001e0  </span><br><span class=\"hljs-comment\">//系统调用号为387</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> NUM 387  </span><br><span class=\"hljs-comment\">//用来存储cr0寄存器原来的值</span><br><span class=\"hljs-type\">int</span> orig_cr0;  <br><span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span> *sys_call_table_my=<span class=\"hljs-number\">0</span>;<br><span class=\"hljs-comment\">//定义一个函数指针，用来保存一个系统调用</span><br><span class=\"hljs-type\">static</span> <span class=\"hljs-title function_\">int</span><span class=\"hljs-params\">(*anything_saved)</span><span class=\"hljs-params\">(<span class=\"hljs-type\">void</span>)</span>;  <br><span class=\"hljs-comment\">//使cr0寄存器的第17位设置为0（内核空间可写）</span><br><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">clear_cr0</span><span class=\"hljs-params\">(<span class=\"hljs-type\">void</span>)</span> <br>&#123;<br>    <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">int</span> cr0=<span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">int</span> ret;<br>    <span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title function_\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%cr0,%%rax&quot;</span>:<span class=\"hljs-string\">&quot;=a&quot;</span>(cr0))</span>;<br>    ret=cr0;<br>    cr0&amp;=<span class=\"hljs-number\">0xfffffffffffeffff</span>;<br>    <span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title function_\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%rax,%%cr0&quot;</span>::<span class=\"hljs-string\">&quot;a&quot;</span>(cr0))</span>;<br>    <span class=\"hljs-keyword\">return</span> ret;<br>&#125;<br><br><span class=\"hljs-comment\">//使cr0寄存器设置为内核不可写</span><br><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">setback_cr0</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> val)</span> <br>&#123;<br>    <span class=\"hljs-keyword\">asm</span> <span class=\"hljs-title function_\">volatile</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&quot;movq %%rax,%%cr0&quot;</span>::<span class=\"hljs-string\">&quot;a&quot;</span>(val))</span>;<br>&#125;<br><br><span class=\"hljs-comment\">//定义自己的系统调用</span><br>asmlinkage <span class=\"hljs-type\">long</span> <span class=\"hljs-title function_\">sys_mycall</span><span class=\"hljs-params\">(<span class=\"hljs-type\">void</span>)</span> <br>&#123;   <br>    <span class=\"hljs-comment\">//在这里输出我的学号和姓名</span><br>    printk(<span class=\"hljs-string\">&quot;20192121026_邓智超\\n&quot;</span>);<br>    <span class=\"hljs-keyword\">return</span> current-&gt;pid;    <br>&#125;<br><br><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">int</span> __init <span class=\"hljs-title function_\">call_init</span><span class=\"hljs-params\">(<span class=\"hljs-type\">void</span>)</span><br>&#123;<br>    sys_call_table_my=(<span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span>*)(SYS_CALL_TABLE_ADDRESS);<br>    printk(<span class=\"hljs-string\">&quot;开始执行系统调用\\n&quot;</span>);<br>    <span class=\"hljs-comment\">//保存系统调用表中的NUM位置上的系统调用</span><br>    anything_saved=(<span class=\"hljs-type\">int</span>(*)(<span class=\"hljs-type\">void</span>))(sys_call_table_my[NUM]);<br>    <span class=\"hljs-comment\">//使内核地址空间可写</span><br>    orig_cr0=clear_cr0();<br>    <span class=\"hljs-comment\">//用自己的系统调用替换NUM位置上的系统调用</span><br>    sys_call_table_my[NUM]=(<span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span>) &amp;sys_mycall;<br>    <span class=\"hljs-comment\">//使内核地址空间不可写</span><br>    setback_cr0(orig_cr0);<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br> <br><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> __exit <span class=\"hljs-title function_\">call_exit</span><span class=\"hljs-params\">(<span class=\"hljs-type\">void</span>)</span><br>&#123;<br>    printk(<span class=\"hljs-string\">&quot;系统调用结束\\n&quot;</span>);<br>    orig_cr0=clear_cr0();<br>    <span class=\"hljs-comment\">//将系统调用恢复</span><br>    sys_call_table_my[NUM]=(<span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span>)anything_saved;<br>    setback_cr0(orig_cr0);<br>&#125;<br> <br>module_init(call_init);<br>module_exit(call_exit);<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"创建makefile文件\"><a class=\"markdownIt-Anchor\" href=\"#创建makefile文件\">#</a> 创建 Makefile 文件</h3>\n<p>查询到内核源码的路径为 **/usr/src/kernels/4.18.0-193.14.2.el8_2.x86_64**</p>\n<p>使用 vim Makefile 命令创建 Makefile 文件，并在其中添加内容为：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">obj-m:=dzc_test.o<br>CURRENT_PATH:=$(shell pwd)<br>LINUX_KERNEL_PATH:=/usr/src/kernels/4.18.0-193.14.2.el8_2.x86_64<br>all:<br>        make -C  $(LINUX_KERNEL_PATH) M=$(CURRENT_PATH) modules<br>clean:<br>        make -C  $(LINUX_KERNEL_PATH) M=$(CURRENT_PATH) clean<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"安装内核模块\"><a class=\"markdownIt-Anchor\" href=\"#安装内核模块\">#</a> 安装内核模块</h3>\n<p>执行命令<strong> make</strong>，并通过命令 **ls | grep ‘dzc_test.*’** 查看是否执行成功</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090308520.png\" alt=\"make结果\"></p>\n<p>使用如下命令插入模块：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">insmod dzc_test.ko<br></code></pre></div></td></tr></table></figure>\n<p>使用如下命令检查插入是否成功：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs shell\">lsmod<br></code></pre></div></td></tr></table></figure>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090421309.png\" alt=\"插入结果\"></p>\n<p>可以看到名为<strong> dzc_test</strong> 的模块，说明插入成功。</p>\n<h3 id=\"测试\"><a class=\"markdownIt-Anchor\" href=\"#测试\">#</a> 测试</h3>\n<p>创建 test.c 并在其中添加代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;linux/kernel.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/syscall.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br> <br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span> x = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-comment\">//测试387号调用</span><br>\tx = syscall(<span class=\"hljs-number\">387</span>);    <br>\t<span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;20192121026_邓智超：%d\\n&quot;</span>, x);<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>使用<strong> gcc test.c</strong> 和 <strong>./a.out</strong> 命名查看运行结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090504128.png\" alt=\"运行结果\"></p>\n<p>通过<strong> dmesg</strong> 命令查看系统调用的结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115090725356.png\" alt=\"dmesg命令\"></p>\n<p>可见输出 &quot;20192121026_邓智超&quot;，说明添加系统调用成功</p>\n<h2 id=\"进程通信\"><a class=\"markdownIt-Anchor\" href=\"#进程通信\">#</a> 进程通信</h2>\n<h3 id=\"代码实践1\"><a class=\"markdownIt-Anchor\" href=\"#代码实践1\">#</a> 代码实践 1</h3>\n<h4 id=\"信号-signal\"><a class=\"markdownIt-Anchor\" href=\"#信号-signal\">#</a> 信号 - SIGNAL</h4>\n<p>创建 signal.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;signal.h&gt;</span></span><br><span class=\"hljs-type\">int</span> k;<br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">int_func</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> sig)</span><br>&#123;<br>    k = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;int_func\\n&quot;</span>);<br>&#125;<br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    signal(SIGINT, int_func);<br>    k = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">while</span>(k == <span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Hello!\\n&quot;</span>);<br>    &#125;<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK!\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc signal.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114172111407.png\" alt=\"signal运行结果\"></p>\n<h4 id=\"管道-pipe\"><a class=\"markdownIt-Anchor\" href=\"#管道-pipe\">#</a> 管道 - PIPE</h4>\n<p>创建 pipe.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-type\">int</span> p1,fd[<span class=\"hljs-number\">2</span>];<br>    <span class=\"hljs-comment\">//定义读缓冲区</span><br>    <span class=\"hljs-type\">char</span> outpipe[<span class=\"hljs-number\">50</span>];<br>    <span class=\"hljs-comment\">//定义写缓冲区</span><br>    <span class=\"hljs-type\">char</span> inpipe[<span class=\"hljs-number\">50</span>];<br>    <span class=\"hljs-comment\">//创建无名管道fd</span><br>    pipe(fd);<br>    <span class=\"hljs-keyword\">while</span>((p1 = fork()) == <span class=\"hljs-number\">-1</span>);<br>    <span class=\"hljs-comment\">//子进程返回</span><br>    <span class=\"hljs-keyword\">if</span>(p1 == <span class=\"hljs-number\">0</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">strcpy</span>(inpipe, <span class=\"hljs-string\">&quot;This is a message!&quot;</span>);<br>        <span class=\"hljs-comment\">//写信息到管道</span><br>        write(fd[<span class=\"hljs-number\">1</span>], inpipe, <span class=\"hljs-number\">50</span>);<br>        <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>    &#125;<br>    <span class=\"hljs-keyword\">else</span><span class=\"hljs-comment\">//父进程返回</span><br>    &#123;<br>        <span class=\"hljs-comment\">//等待子进程终止</span><br>        wait(<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//从管道读信息到缓冲区</span><br>        read(fd[<span class=\"hljs-number\">0</span>], outpipe, <span class=\"hljs-number\">50</span>);<br>        <span class=\"hljs-comment\">//显示读到的信息</span><br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%s\\n&quot;</span>,outpipe);<br>        <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc pipe.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114173812416.png\" alt=\"pipe运行结果\"></p>\n<h4 id=\"消息传递\"><a class=\"markdownIt-Anchor\" href=\"#消息传递\">#</a> 消息传递</h4>\n<p>创建 Sndfile.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;linux/msg.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> MAXMSG 512</span><br><span class=\"hljs-comment\">//定义消息缓冲区数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">my_msg</span></span><br><span class=\"hljs-class\">&#123;</span><br>\t<span class=\"hljs-type\">long</span> <span class=\"hljs-type\">int</span> my_msg_type;<br>\t<span class=\"hljs-type\">int</span> i;<br>\t<span class=\"hljs-type\">char</span> some_text[MAXMSG];<br>&#125;msg;<br><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-comment\">//定义消息换冲突内部标识</span><br>\t<span class=\"hljs-type\">int</span> msgid;<br>    <span class=\"hljs-comment\">//定义用户缓冲区\t</span><br>\t<span class=\"hljs-type\">char</span> buffer[BUFSIZ];<br>    <span class=\"hljs-comment\">//创建消息队列，key为12</span><br>\tmsgid = msgget(<span class=\"hljs-number\">12</span>,<span class=\"hljs-number\">0666</span>|IPC_CREAT);<br>    <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//提示键入消息内容</span><br>    \t<span class=\"hljs-built_in\">puts</span> ( <span class=\"hljs-string\">&quot;Enter some text:&quot;</span>);<br>        <span class=\"hljs-comment\">//标准输入送buffer</span><br>        fgets (buffer,BUFSIZ,<span class=\"hljs-built_in\">stdin</span>);<br>        msg.i++;<br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;i=%d\\n&quot;</span> , msg.i);<br>        msg.my_msg_type=<span class=\"hljs-number\">3</span>;<br>        <span class=\"hljs-comment\">//buffer中的内容送信息缓冲</span><br>        <span class=\"hljs-built_in\">strcpy</span>(msg.some_text,buffer); <br>        <span class=\"hljs-comment\">//发送消息到消息队列</span><br>        msgsnd(msgid, &amp;msg,MAXMSG,<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//消息为end结束</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(msg.some_text, <span class=\"hljs-string\">&quot;end&quot;</span>,<span class=\"hljs-number\">3</span>)==<span class=\"hljs-number\">0</span>)<br>        \t<span class=\"hljs-keyword\">break</span>;<br>\t&#125;<br>\t<span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Sndfile.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114175040124.png\" alt=\"Sndfile运行结果\"></p>\n<p>创建 Recfile.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;linux/msg.h&gt;</span></span><br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> MAXMSG 512</span><br><span class=\"hljs-comment\">//定义消息换冲突数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">my_msg</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-type\">long</span> <span class=\"hljs-type\">int</span> my_msg_type;<br>    <span class=\"hljs-type\">int</span> i;<br>    <span class=\"hljs-type\">char</span> some_text[MAXMSG];<br>&#125;msg;<br><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-type\">int</span> msgid;<br>   \tmsg.my_msg_type=<span class=\"hljs-number\">3</span>;<br>    <span class=\"hljs-comment\">//获取消息队列，key为1234</span><br>    msgid=msgget(<span class=\"hljs-number\">12</span>,<span class=\"hljs-number\">0666</span>|IPC_CREAT);<br>    <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//接收消息</span><br>        msgrcv(msgid,&amp;msg,BUFSIZ,msg.my_msg_type,<span class=\"hljs-number\">0</span>);<br>        <span class=\"hljs-comment\">//显示消息</span><br>        <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;You wrote:%s and i=%d\\n&quot;</span>,msg.some_text,msg.i);<br>        <span class=\"hljs-comment\">//消息为end则结束</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(msg.some_text, <span class=\"hljs-string\">&quot;end&quot;</span> ,<span class=\"hljs-number\">3</span>)==<span class=\"hljs-number\">0</span>)<br>        \t<span class=\"hljs-keyword\">break</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//删除消息队列</span><br>    msgctl(msgid,IPC_RMID,<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">exit</span> (<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Recfile.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114175351513.png\" alt=\"Recfile运行结果\"></p>\n<h4 id=\"共享内存\"><a class=\"markdownIt-Anchor\" href=\"#共享内存\">#</a> 共享内存</h4>\n<p>创建 Sndshm.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;linux/shm.h&gt;</span></span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-type\">int</span> shmid;<br>    <span class=\"hljs-type\">char</span> *viraddr;<br>    <span class=\"hljs-type\">char</span> buffer[BUFSIZ];<br>    <span class=\"hljs-comment\">//创建共享内存</span><br>    shmid = shmget(<span class=\"hljs-number\">1234</span>, BUFSIZ, <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    <span class=\"hljs-comment\">//附接到共享内存</span><br>    viraddr = (<span class=\"hljs-type\">char</span>*)shmat(shmid, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-number\">1</span>)<br>    &#123;<br>        <span class=\"hljs-comment\">//提示用户输入信息</span><br>        <span class=\"hljs-built_in\">puts</span>(<span class=\"hljs-string\">&quot;Enter some text:\\n&quot;</span>);<br>        <span class=\"hljs-comment\">//将标准输入送入到缓冲区中</span><br>        fgets(buffer, BUFSIZ, <span class=\"hljs-built_in\">stdin</span>);<br>        <span class=\"hljs-comment\">//采用追加方式写到共享内存</span><br>        <span class=\"hljs-built_in\">strcat</span>(viraddr, buffer);<br>        <span class=\"hljs-comment\">//当输入的字符串为&quot;end&quot;时，终止循环</span><br>        <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">strncmp</span>(buffer, <span class=\"hljs-string\">&quot;end&quot;</span>, <span class=\"hljs-number\">3</span>) == <span class=\"hljs-number\">0</span>)<br>            <span class=\"hljs-keyword\">break</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//切断与共享内存的链接</span><br>    shmdt(viraddr);<br>    <span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Sndshm.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114182155111.png\" alt=\"Sndshm运行结果\"></p>\n<p>创建 Revshm.c 文件，并在其中添加以下代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;sys/shm.h&gt;</span></span><br><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span><br>&#123;<br>\t<span class=\"hljs-type\">int</span> shmid;<br>\t<span class=\"hljs-type\">char</span> *viraddr;<br>\t<span class=\"hljs-comment\">//创建共享内存</span><br>\tshmid=shmget(<span class=\"hljs-number\">1234</span>, BUFSIZ, <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    <span class=\"hljs-comment\">//附接到共享内存</span><br>\tviraddr=(<span class=\"hljs-type\">char</span>*)shmat(shmid, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>);<br>\t<span class=\"hljs-comment\">//输出共享内存的内容</span><br>\t<span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Your message is :\\n%s&quot;</span>, viraddr);<br>    <span class=\"hljs-comment\">//切断与共享内存的链接</span><br>\tshmdt(viraddr);<br>    <span class=\"hljs-comment\">//释放共享内存</span><br>\tshmctl(shmid,IPC_RMID, <span class=\"hljs-number\">0</span>);<br>\t<span class=\"hljs-built_in\">exit</span>(<span class=\"hljs-number\">0</span>);\t<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<p>通过<strong> gcc Revshm.c</strong> 和 **./a.out** 命令运行得到以下结果：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211114184820214.png\" alt=\"Revshm运行结果\"></p>\n<h3 id=\"代码实践2\"><a class=\"markdownIt-Anchor\" href=\"#代码实践2\">#</a> 代码实践 2</h3>\n<h4 id=\"思路\"><a class=\"markdownIt-Anchor\" href=\"#思路\">#</a> 思路</h4>\n<ul>\n<li>为 M1，M2 分别建立两个共享空间，创建三个进程，父进程，A 进程，B 进程，将共享内存连接到当前进程的地址空间，使得三个进程都能访问 M1,M2。</li>\n<li>设置两个信号量<strong> A_ENABLE，B_ENABLE</strong>，分别表示允许 A 执行和允许 B 执行。程序开始的时候，A_ENABLE = 1，B_ENABLE = 0。每次 A 执行时，对 A_ENABLE 执行<strong> P 操作</strong>，A 结束时，对 B_ENABLE 执行<strong> V 操作</strong>；每次 B 执行时，对 B_ENABLE 执行<strong> P 操作</strong>，B 结束时，对 A_ENABLE 执行<strong> V 操作</strong>，这样就可以达到 A 和 B 轮流执行的效果。</li>\n<li>为了使程序能够有较好的效果且能够停止，这里设置 A 和 B<strong> 分别执行 4 次</strong>操作</li>\n<li>此代码参考<a href=\"https://www.cnblogs.com/harrypotterjackson/p/11997774.html\">生产者消费者问题 多进程共享内存 - LightningStar - 博客园 (cnblogs.com)</a> 并按照题目要求做了修改以符合作业要求</li>\n</ul>\n<h4 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h4>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;string.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;unistd.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/stat.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;fcntl.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/types.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/shm.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;time.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/ipc.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/sem.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;sys/wait.h&gt;</span></span><br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> MAX_NUM 4096</span><br><br><span class=\"hljs-comment\">//共享内存缓冲区资源的循环队列</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-type\">int</span> message[MAX_NUM];<br>    <span class=\"hljs-type\">int</span> front;<br>    <span class=\"hljs-type\">int</span> rear;<br>&#125;;<br><br><span class=\"hljs-comment\">//M1 M2</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span> <span class=\"hljs-title\">M</span>[2];</span><br><br><span class=\"hljs-comment\">//信号量数据结构</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">union</span> <span class=\"hljs-title\">semun</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-type\">int</span> value;<br>&#125;;<br><br><span class=\"hljs-comment\">//用于映射信号量编号与对应意义的映射</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">MUTEX</span></span><br><span class=\"hljs-class\">&#123;</span><br>    <span class=\"hljs-comment\">//是否允许A操作</span><br>    A_ENABLE,<br>    <span class=\"hljs-comment\">//是否允许B操作</span><br>    B_ENABLE,<br>    <span class=\"hljs-comment\">//信号量相关</span><br>    NUM_MUX<br>&#125;;<br><br><span class=\"hljs-comment\">//信号量集合描述符</span><br><span class=\"hljs-type\">int</span> semid;<br><br><span class=\"hljs-comment\">//共享空间描述符，M1,M2各占一个空间</span><br><span class=\"hljs-type\">int</span> shmid[<span class=\"hljs-number\">2</span>];<br><br><span class=\"hljs-comment\">//共享空间首地址</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">Resource</span> *<span class=\"hljs-title\">shm</span>[2];</span><br><br><span class=\"hljs-comment\">//绑定共享内存</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">attach_shm</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-comment\">//将共享内存连接到当前进程的地址空间</span><br>    shm[<span class=\"hljs-number\">0</span>] = (<span class=\"hljs-keyword\">struct</span> Resource *)shmat(shmid[<span class=\"hljs-number\">0</span>], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>    shm[<span class=\"hljs-number\">1</span>] = (<span class=\"hljs-keyword\">struct</span> Resource *)shmat(shmid[<span class=\"hljs-number\">1</span>], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-keyword\">if</span> (shm[<span class=\"hljs-number\">0</span>] == (<span class=\"hljs-keyword\">struct</span> Resource *)<span class=\"hljs-number\">-1</span> || shm[<span class=\"hljs-number\">1</span>] == (<span class=\"hljs-keyword\">struct</span> Resource *)<span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmat failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//解绑共享内存</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">detach_shm</span><span class=\"hljs-params\">()</span><br>&#123;<br>    <span class=\"hljs-comment\">//把共享内存从当前进程中分离</span><br>    <span class=\"hljs-keyword\">if</span> (shmdt((<span class=\"hljs-type\">void</span> *)shm[<span class=\"hljs-number\">0</span>]) == <span class=\"hljs-number\">-1</span> || shmdt((<span class=\"hljs-type\">void</span> *)shm[<span class=\"hljs-number\">1</span>]) == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmdt failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//获取资源，对应信号量实施P操作</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">P</span><span class=\"hljs-params\">(<span class=\"hljs-type\">short</span> <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">int</span> num)</span><br>&#123;<br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">sembuf</span> <span class=\"hljs-title\">sb</span> =</span><br>        &#123;<br>            num, <span class=\"hljs-number\">-1</span>, <span class=\"hljs-number\">0</span> <span class=\"hljs-comment\">//0表示信号量编号,-1表示P操作,SEM_UNDO表示进程退出后，该进程对sem进行的操作将被撤销</span><br>        &#125;;<br>    <span class=\"hljs-comment\">//修改集合中，一个或多个信号量值</span><br>    semop(semid, &amp;sb, <span class=\"hljs-number\">1</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//释放资源，对应信号量实施V操作</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">V</span><span class=\"hljs-params\">(<span class=\"hljs-type\">short</span> <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">int</span> num)</span><br>&#123;<br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title\">sembuf</span> <span class=\"hljs-title\">sb</span> =</span> &#123;<br>        num, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span> <span class=\"hljs-comment\">//</span><br>    &#125;;<br>    semop(semid, &amp;sb, <span class=\"hljs-number\">1</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//读取数据，id为0，表示A在操作，id为2，表示B在操作</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">readMessage</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span><br>&#123;<br>    <span class=\"hljs-comment\">// id = 0，读取M[1]，id = 1，读取M[0]</span><br>    <span class=\"hljs-type\">int</span> message = <span class=\"hljs-number\">0</span>;<br>    message = shm[-id + <span class=\"hljs-number\">1</span>]-&gt;message[shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front];<br>    shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front = (shm[-id + <span class=\"hljs-number\">1</span>]-&gt;front + <span class=\"hljs-number\">1</span>) % MAX_NUM;<br>    <span class=\"hljs-comment\">// printf(&quot;M%d -&gt; front = %d\\n&quot;, -id + 2, shm[-id + 1]-&gt;front);</span><br>    <span class=\"hljs-keyword\">return</span> message;<br>&#125;<br><br><span class=\"hljs-comment\">//写入数据，id为0，表示A在操作，id为2，表示B在操作</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">writeMessage</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span><br>&#123;<br>    <span class=\"hljs-comment\">//随机生成一个范围在[1,4096]的message</span><br>    <span class=\"hljs-type\">int</span> message = rand() % <span class=\"hljs-number\">4096</span> + <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-comment\">//id为0，向M[0]写入，id为1，向M[1]写入</span><br>    shm[id]-&gt;message[shm[id]-&gt;rear] = message;<br>    shm[id]-&gt;rear = (shm[id]-&gt;rear + <span class=\"hljs-number\">1</span>) % MAX_NUM;<br>    <span class=\"hljs-comment\">// printf(&quot;M%d -&gt; rear = %d\\n&quot;, id + 1, shm[id]-&gt;rear);</span><br>    <span class=\"hljs-keyword\">return</span> message;<br>&#125;<br><br><span class=\"hljs-comment\">//进程A的工作</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">processA</span><span class=\"hljs-params\">()</span><br>&#123;<br>    attach_shm();<br>\t<span class=\"hljs-comment\">//这里让A执行4次</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> m = <span class=\"hljs-number\">0</span>; m &lt; <span class=\"hljs-number\">4</span>; m++)<br>    &#123;<br>        P(A_ENABLE);<br>        <span class=\"hljs-comment\">//当前M1中元素个数</span><br>        <span class=\"hljs-type\">int</span> ele1Number = (shm[<span class=\"hljs-number\">0</span>]-&gt;rear - shm[<span class=\"hljs-number\">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>        <span class=\"hljs-comment\">//最多写入个数</span><br>        <span class=\"hljs-type\">int</span> maxNum = MAX_NUM - ele1Number;<br>        <span class=\"hljs-type\">int</span> randInt = rand() % <span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">//选一个小的数作为写入的信息数</span><br>        <span class=\"hljs-type\">int</span> times = maxNum &lt; randInt ? maxNum : randInt;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;A write message %d to M1\\n&quot;</span>, writeMessage(<span class=\"hljs-number\">0</span>));<br>        &#125;<br>        <span class=\"hljs-comment\">//如果M2队列为空，也就是刚刚开始A向B，B还没向A发送过信息</span><br>        <span class=\"hljs-comment\">//所以只在M2有消息的时候才读取</span><br>        <span class=\"hljs-keyword\">if</span> (shm[<span class=\"hljs-number\">1</span>]-&gt;front != shm[<span class=\"hljs-number\">1</span>]-&gt;rear)<br>        &#123;<br>            <span class=\"hljs-comment\">//当前M2中元素个数</span><br>            <span class=\"hljs-type\">int</span> eleNumber = (shm[<span class=\"hljs-number\">1</span>]-&gt;rear - shm[<span class=\"hljs-number\">1</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>            <span class=\"hljs-comment\">//随机读取[1, eleNumber]次</span><br>            <span class=\"hljs-type\">int</span> times = rand() % eleNumber + <span class=\"hljs-number\">1</span>;<br><br>            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>            &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;A read message %d from M2\\n&quot;</span>, readMessage(<span class=\"hljs-number\">0</span>));<br>            &#125;<br>        &#125;<br>        V(B_ENABLE);<br>    &#125;<br>    detach_shm();<br>&#125;<br><br><span class=\"hljs-comment\">//进程B的工作</span><br><span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">processB</span><span class=\"hljs-params\">()</span><br>&#123;<br>    attach_shm();<br>    <span class=\"hljs-comment\">//这里让B执行4次</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> m = <span class=\"hljs-number\">0</span>; m &lt; <span class=\"hljs-number\">4</span>; m++)<br>    &#123;<br>        P(B_ENABLE);<br>        <span class=\"hljs-comment\">//当前M1中元素个数</span><br>        <span class=\"hljs-type\">int</span> eleNumber = (shm[<span class=\"hljs-number\">0</span>]-&gt;rear - shm[<span class=\"hljs-number\">0</span>]-&gt;front + MAX_NUM) % MAX_NUM;<br>        <span class=\"hljs-type\">int</span> randInt = rand() % <span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-comment\">//选一个小的数作为读取的信息数</span><br>        <span class=\"hljs-type\">int</span> times = eleNumber &lt; randInt ? eleNumber : randInt;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;B read message %d from M1\\n&quot;</span>, readMessage(<span class=\"hljs-number\">1</span>));<br>        &#125;<br>        <span class=\"hljs-comment\">//向M2写times个信息</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; times; i++)<br>        &#123;<br>            <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;B write message %d to M2\\n&quot;</span>, writeMessage(<span class=\"hljs-number\">1</span>));<br>        &#125;<br>        V(A_ENABLE);<br>    &#125;<br>    detach_shm();<br>&#125;<br><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> argc, <span class=\"hljs-type\">char</span> <span class=\"hljs-type\">const</span> *argv[])</span><br>&#123;<br>    <span class=\"hljs-comment\">//记录父进程pid</span><br>    <span class=\"hljs-type\">pid_t</span> ppid = getpid();<br>    <span class=\"hljs-comment\">//信号集名字，信号集中信号量的个数，信号量集合的权限</span><br>    semid = semget((<span class=\"hljs-type\">key_t</span>)<span class=\"hljs-number\">1234</span>, NUM_MUX, IPC_CREAT | <span class=\"hljs-number\">0600</span>); <span class=\"hljs-comment\">//创建信号量</span><br>    <span class=\"hljs-keyword\">if</span> (semid == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        perror(<span class=\"hljs-string\">&quot;semget&quot;</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">// 初始化信号量</span><br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">union</span> <span class=\"hljs-title\">semun</span> <span class=\"hljs-title\">s</span>;</span><br>    <span class=\"hljs-comment\">//初始时，允许A执行</span><br>    s.value = <span class=\"hljs-number\">1</span>;<br>    semctl(semid, A_ENABLE, SETVAL, s);<br>    <span class=\"hljs-comment\">//初始时，不允许B执行</span><br>    s.value = <span class=\"hljs-number\">0</span>;<br>    semctl(semid, B_ENABLE, SETVAL, s);<br><br>    <span class=\"hljs-comment\">//创建共享内存</span><br>    shmid[<span class=\"hljs-number\">0</span>] = shmget((<span class=\"hljs-type\">key_t</span>)<span class=\"hljs-number\">1234</span>, <span class=\"hljs-keyword\">sizeof</span>(M[<span class=\"hljs-number\">0</span>]), <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br>    shmid[<span class=\"hljs-number\">1</span>] = shmget((<span class=\"hljs-type\">key_t</span>)<span class=\"hljs-number\">5678</span>, <span class=\"hljs-keyword\">sizeof</span>(M[<span class=\"hljs-number\">1</span>]), <span class=\"hljs-number\">0666</span> | IPC_CREAT);<br><br>    <span class=\"hljs-keyword\">if</span> (shmid[<span class=\"hljs-number\">0</span>] == <span class=\"hljs-number\">-1</span> || shmid[<span class=\"hljs-number\">1</span>] == <span class=\"hljs-number\">-1</span>)<br>    &#123;<br>        <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmget failed\\n&quot;</span>);<br>        <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>    &#125;<br>    attach_shm();<br>    <span class=\"hljs-comment\">//初始化共享内存</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>    &#123;<br>        <span class=\"hljs-built_in\">memset</span>(shm[i]-&gt;message, <span class=\"hljs-number\">0</span>, <span class=\"hljs-keyword\">sizeof</span>(shm[i]-&gt;message));<br>        shm[i]-&gt;front = <span class=\"hljs-number\">0</span>;<br>        shm[i]-&gt;rear = <span class=\"hljs-number\">0</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">//创建3个进程：1个父进程 + 1个A + 1个B</span><br>    <span class=\"hljs-type\">pid_t</span> child_pid[<span class=\"hljs-number\">2</span>];<br>    <span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++)<br>    &#123;<br>        child_pid[i] = fork();<br>        <span class=\"hljs-comment\">//子进程</span><br>        <span class=\"hljs-keyword\">if</span> (child_pid[i] == <span class=\"hljs-number\">0</span>) <br>        &#123;<br>            <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>    &#125;<br>\t<span class=\"hljs-comment\">//A</span><br>    <span class=\"hljs-keyword\">if</span> (i == <span class=\"hljs-number\">0</span>) <br>    &#123;<br>        processA();<br>    &#125;<br>    <span class=\"hljs-comment\">//B</span><br>    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (i == <span class=\"hljs-number\">1</span>) <br>    &#123;<br>        processB();<br>    &#125;<br>\t<span class=\"hljs-comment\">//父进程</span><br>    <span class=\"hljs-keyword\">if</span> (getpid() == ppid) <br>    &#123;<br>        <span class=\"hljs-comment\">//等待子进程结束</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">2</span>; i++) <br>        &#123;<br>            waitpid(child_pid[i], <span class=\"hljs-literal\">NULL</span>, <span class=\"hljs-number\">0</span>);<br>        &#125;<br>        detach_shm();<br>        <span class=\"hljs-comment\">//删除共享内存</span><br>        <span class=\"hljs-keyword\">if</span> (shmctl(shmid[<span class=\"hljs-number\">0</span>], IPC_RMID, <span class=\"hljs-number\">0</span>) == <span class=\"hljs-number\">-1</span> || shmctl(shmid[<span class=\"hljs-number\">1</span>], IPC_RMID, <span class=\"hljs-number\">0</span>) == <span class=\"hljs-number\">-1</span>)<br>        &#123;<br>            <span class=\"hljs-built_in\">fprintf</span>(<span class=\"hljs-built_in\">stderr</span>, <span class=\"hljs-string\">&quot;shmctl(IPC_RMID) failed\\n&quot;</span>);<br>            <span class=\"hljs-built_in\">exit</span>(EXIT_FAILURE);<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"运行截图\"><a class=\"markdownIt-Anchor\" href=\"#运行截图\">#</a> 运行截图</h4>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013818473.png\" alt=\"M1M2运行截图1\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013923471.png\" alt=\"M1M2运行截图2\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211115013953657.png\" alt=\"M1M2运行截图3\"></p>\n",
            "tags": [
                "学习笔记",
                "Linux"
            ]
        },
        {
            "id": "http://example.com/2021/11/06/MySQL/",
            "url": "http://example.com/2021/11/06/MySQL/",
            "title": "MySQL基础",
            "date_published": "2021-11-05T16:09:32.000Z",
            "content_html": "<h1 id=\"mysql学习记录\"><a class=\"markdownIt-Anchor\" href=\"#mysql学习记录\">#</a> MySQL 学习记录</h1>\n<h2 id=\"服务的启动与关闭\"><a class=\"markdownIt-Anchor\" href=\"#服务的启动与关闭\">#</a> 服务的启动与关闭</h2>\n<ul>\n<li>\n<p>启动：net start 服务名</p>\n</li>\n<li>\n<p>关闭：net stop 服务名</p>\n</li>\n</ul>\n<h2 id=\"服务端的登录和退出\"><a class=\"markdownIt-Anchor\" href=\"#服务端的登录和退出\">#</a> 服务端的登录和退出</h2>\n<ul>\n<li>\n<p>方法一：</p>\n<p><strong>登录</strong>：打开 MySQL 8.0 Command Line Client，输入密码即可。这种方式只能是 root 用户使用，不推荐</p>\n<p><strong>退出</strong>：exit</p>\n</li>\n<li>\n<p>方法二：</p>\n<p><strong>登录</strong>：通过 windows cmd 输入指令 mysql -h 服务器 ip -P 端口号 -u 用户 -p 密码</p>\n<p><strong>例如</strong>： mysql -h localhost -P 3306 -u root -p 123456</p>\n<p><strong>注意</strong>：-p 和空格之间<strong>不能有空格</strong> 如果是本机登录，则 - h，-P 可以省略</p>\n<p><strong>退出</strong>：exit</p>\n</li>\n</ul>\n<h2 id=\"常见命令\"><a class=\"markdownIt-Anchor\" href=\"#常见命令\">#</a> 常见命令</h2>\n<ul>\n<li>\n<p>查看当前所有数据库：<mark><em>show databases;</em></mark></p>\n</li>\n<li>\n<p>打开指定的库：<mark><em>use 库名；</em></mark></p>\n</li>\n<li>\n<p>查看当前库所有表：<mark><em>show tables;</em></mark></p>\n</li>\n<li>\n<p>查看其他库所有表：<mark><em>show tables from 库名；</em></mark></p>\n</li>\n<li>\n<p>创建表：<em>create table 表名 (</em></p>\n<p>​\t\t\t\t<em>列名 列类型，</em></p>\n<p>​\t\t\t\t<em>列名 列类型，</em></p>\n<p>​\t\t\t\t<em>…</em></p>\n<p>​\t\t\t<em>);</em></p>\n</li>\n<li>\n<p>查看表结构：<mark><em>desc 表名；</em></mark></p>\n</li>\n<li>\n<p>查看服务器版本</p>\n<ul>\n<li>\n<p>方式一：</p>\n<p>登录到 mysql 服务端后，select version ();</p>\n</li>\n<li>\n<p>方式二：</p>\n<p>windows cmd 输入 ==<em>mysql --version</em><mark> 或</mark><em> mysql -V</em>==</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"mysql的语法规范\"><a class=\"markdownIt-Anchor\" href=\"#mysql的语法规范\">#</a> MySQL 的语法规范</h2>\n<ul>\n<li>\n<p><em><strong>不区分</strong></em>大小写，但建议关键字大写，表名和列名小写</p>\n</li>\n<li>\n<p>每条命令最好用分号结尾</p>\n</li>\n<li>\n<p>每条命令根据需要，可以进行<em><strong>缩进或换行</strong></em></p>\n</li>\n<li>\n<p>注释</p>\n<p>单行注释：# 注释文字</p>\n<p>单行注释：-- 注释文字（注意‘–’后必须有空格）</p>\n<p>多行注释：/* 注释文字 */</p>\n</li>\n</ul>\n<h2 id=\"dql语言\"><a class=\"markdownIt-Anchor\" href=\"#dql语言\">#</a> DQL 语言</h2>\n<h3 id=\"基础查询\"><a class=\"markdownIt-Anchor\" href=\"#基础查询\">#</a> 基础查询</h3>\n<ul>\n<li>语法：SELECT 查询列表 FROM 表名；</li>\n<li>查询列表可以是：表中的字段</li>\n<li>查询的结果是一个虚拟的表格</li>\n<li><strong>字符型</strong>和<strong>日期型</strong>的常量值必须用<strong>引号</strong>引起来</li>\n</ul>\n<h4 id=\"举例\"><a class=\"markdownIt-Anchor\" href=\"#举例\">#</a> 举例</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 查询单个字段<br><span class=\"hljs-keyword\">SELECT</span> last_name <br><span class=\"hljs-keyword\">FROM</span> employees;<br># 查询多个字段<br><span class=\"hljs-keyword\">SELECT</span> last_name, salary, email <br><span class=\"hljs-keyword\">FROM</span> employees;<br># 查询所有字段<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees;<br># 查询常量<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">100</span>;<br># 查询表达式<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-number\">100</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">98</span>;<br># 查询函数<br><span class=\"hljs-keyword\">SELECT</span> VERSION();<br># 为字段起别名<br><span class=\"hljs-keyword\">SELECT</span> last_name <span class=\"hljs-keyword\">AS</span> 姓, first_name <span class=\"hljs-keyword\">AS</span> 名 <br><span class=\"hljs-keyword\">FROM</span> employees; # 方式一<br><span class=\"hljs-keyword\">SELECT</span> last_name 姓, first_name 名 <br><span class=\"hljs-keyword\">FROM</span> employees; # 方式二<br># 特殊情况：查询salary，显示结果为<span class=\"hljs-keyword\">out</span> put<br># 有特殊符号的，建议加上双引号<br><span class=\"hljs-keyword\">SELECT</span> salary <span class=\"hljs-keyword\">AS</span> &quot;out put&quot; <br><span class=\"hljs-keyword\">FROM</span> employees;<br># 去重<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> department_id <br><span class=\"hljs-keyword\">FROM</span> employees;<br><span class=\"hljs-comment\">/* </span><br><span class=\"hljs-comment\">\t&#x27;+&#x27;号的作用，在MySQL中，&#x27;+&#x27;只有加法运算的作用</span><br><span class=\"hljs-comment\">\tSELECT &#x27;123&#x27; + 90:如果出现字符型，试图转换成数值型，转换成功则继续做加法；转换失败，就会把字符型看成0</span><br><span class=\"hljs-comment\">\tSELECT &#x27;John&#x27; + 90 结果是90</span><br><span class=\"hljs-comment\">\tSELECT NULL + 90 只要出现NULL，结果一定是NULL</span><br><span class=\"hljs-comment\">*/</span><br># CONCAT()函数<br># 案例：查询员工姓名连接成一个字段，并显示为&quot;姓名&quot;<br><span class=\"hljs-keyword\">SELECT</span> CONCAT(last_name, first_name) <span class=\"hljs-keyword\">AS</span> 姓名 <br><span class=\"hljs-keyword\">FROM</span> employees;<br># IFNULL函数<br><span class=\"hljs-keyword\">SELECT</span> IFNULL(exp1, exp2) # 如果exp1为空，就返回exp2；否则返回exp1<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"条件查询\"><a class=\"markdownIt-Anchor\" href=\"#条件查询\">#</a> 条件查询</h3>\n<ul>\n<li>\n<p>语法：SELECT 查询列表 FROM 表名 WHERE 筛选条件；</p>\n</li>\n<li>\n<p>筛选条件包括：</p>\n<ul>\n<li>条件表达式： &gt;  &lt;=  !=  &lt;&gt;  &gt;=  &lt;=</li>\n<li>逻辑表达式：&amp;&amp;，||，!，and，or，not</li>\n<li>模糊查询：like，between and，not between and，in，is null,，is not null</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"举例-2\"><a class=\"markdownIt-Anchor\" href=\"#举例-2\">#</a> 举例</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">********************************************</span><br><span class=\"hljs-comment\">\t\t\t\t条件表达式</span><br><span class=\"hljs-comment\">********************************************\t\t\t</span><br><span class=\"hljs-comment\">*/</span><br># 查询员工工资大于<span class=\"hljs-number\">10000</span>的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10000</span>;<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">********************************************</span><br><span class=\"hljs-comment\">\t\t\t\t逻辑表达式</span><br><span class=\"hljs-comment\">********************************************\t\t\t</span><br><span class=\"hljs-comment\">*/</span><br># 查询工资在<span class=\"hljs-number\">10000</span>到<span class=\"hljs-number\">20000</span>之间的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">10000</span> <br><span class=\"hljs-keyword\">AND</span> salary <span class=\"hljs-operator\">&lt;=</span> <span class=\"hljs-number\">20000</span>;<br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">********************************************</span><br><span class=\"hljs-comment\">\t\t\t\t模糊查询</span><br><span class=\"hljs-comment\">********************************************\t\t\t</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\t模糊查询：LIKE，一般和通配符配合使用。不但可以查字符型，也可以查数值型</span><br><span class=\"hljs-comment\">\t&#x27;%&#x27;代表0或n个字符</span><br><span class=\"hljs-comment\">\t&#x27;_&#x27;代表一个字符</span><br><span class=\"hljs-comment\">\t\\_代表转义字符&#x27;_&#x27;</span><br><span class=\"hljs-comment\">*/</span><br># 查询员工名中包含<span class=\"hljs-string\">&#x27;a&#x27;</span>的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> first_name <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%a%&#x27;</span>;<br># 查询员工名第三个字符为<span class=\"hljs-string\">&#x27;a&#x27;</span>，第五个字符为<span class=\"hljs-string\">&#x27;e&#x27;</span>的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> first_name <span class=\"hljs-keyword\">like</span> <span class=\"hljs-string\">&#x27;__a_e%&#x27;</span><br># 查询员工名第三个字符为<span class=\"hljs-string\">&#x27;_&#x27;</span>的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> first_name <span class=\"hljs-keyword\">like</span> <span class=\"hljs-string\">&#x27;_\\_%&#x27;</span>;<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> first_name <span class=\"hljs-keyword\">like</span> <span class=\"hljs-string\">&#x27;_$_%&#x27;</span> <span class=\"hljs-keyword\">ESCAPE</span> <span class=\"hljs-string\">&#x27;$&#x27;</span>; # 这里表示<span class=\"hljs-string\">&#x27;$&#x27;</span>是转义字符，推荐使用这种<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tBETWEEN a AND b 的区间是闭区间[a,b]</span><br><span class=\"hljs-comment\">\tb必须&gt;=a，否则筛选出来的结果是0条</span><br><span class=\"hljs-comment\">*/</span><br># 查询工资在<span class=\"hljs-number\">10000</span>到<span class=\"hljs-number\">20000</span>之间的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-keyword\">BETWEEN</span> <span class=\"hljs-number\">10000</span> <span class=\"hljs-keyword\">AND</span> <span class=\"hljs-number\">20000</span>;<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tIN列表的值类型必须一致或兼容</span><br><span class=\"hljs-comment\">\t不支持通配符</span><br><span class=\"hljs-comment\">*/</span><br># 查询员工的工种编号是IT_PROG, AD_VP, AD_PRES中的一个的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> job_id <span class=\"hljs-keyword\">IN</span> (<span class=\"hljs-string\">&#x27;IT_PROG&#x27;</span>, <span class=\"hljs-string\">&#x27;AD_VP&#x27;</span>, <span class=\"hljs-string\">&#x27;AD_PRES&#x27;</span>);<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\t&#x27;=&#x27;不能用于判断NULL值，要使用IS NULL或IS NOT NULL</span><br><span class=\"hljs-comment\">*/</span><br># 查询没有奖金的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> commission_pac <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NULL</span>;# 必须写成<span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">null</span>，不能写成 <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">null</span><br># 查询有奖金的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> commission_pac <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span>;# 必须写成<span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">not null</span>，不能写成 <span class=\"hljs-operator\">!=</span> <span class=\"hljs-keyword\">null</span><br># 安全等于<span class=\"hljs-string\">&#x27;&lt;=&gt;&#x27;</span><br># <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NULL</span> 可以写成<span class=\"hljs-operator\">&lt;=&gt;</span> <span class=\"hljs-keyword\">NULL</span><br># 查询工资为<span class=\"hljs-number\">12000</span>的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">&lt;=&gt;</span> <span class=\"hljs-number\">12000</span>;<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tIS NULL只能判断NULL值</span><br><span class=\"hljs-comment\">\t&lt;=&gt; 既可以判断NULL值，也可以判断普通的数值，但可读性较低</span><br><span class=\"hljs-comment\">*/</span><br># ISNULL(expr)如果expr是<span class=\"hljs-keyword\">NULL</span>，就返回<span class=\"hljs-number\">1</span>，否则返回<span class=\"hljs-number\">0</span><br><span class=\"hljs-keyword\">SELECT</span> ISNULL(commission_pac) <br><span class=\"hljs-keyword\">FROM</span> employees;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"一个坑\"><a class=\"markdownIt-Anchor\" href=\"#一个坑\">#</a> 一个坑</h4>\n<blockquote>\n<p><strong>问</strong>：SELECT * FROM employees 和 SELECT * FROM employees WHERE first_name LIKE ‘%%’ AND last_name LIKE '%%' 效果一样吗？</p>\n<p><strong>答</strong>：不一样，如果 first_name 或 last_name 中包含 NULL 值，则不一样。因为 NULL LIKE ’%%‘是错的。</p>\n</blockquote>\n<h3 id=\"排序查询\"><a class=\"markdownIt-Anchor\" href=\"#排序查询\">#</a> 排序查询</h3>\n<ul>\n<li>语法：SELECT 查询列表 FROM 表名 [WHERE 子句] ORDER BY 排序列表 [asc | desc]；</li>\n<li>默认是从小到大排序</li>\n<li>如果排序列表有多个，则优先按写在前面的排序列表排序。对每个排序列表，可以分别指定是升序或者降序</li>\n</ul>\n<h4 id=\"举例-3\"><a class=\"markdownIt-Anchor\" href=\"#举例-3\">#</a> 举例</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 查询员工信息，要求工资从高到低排序<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-keyword\">ASC</span>;<br># 查询员工信息，要求工资从低到高排序<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-keyword\">DESC</span>;<br># 查询部门编号大于等于<span class=\"hljs-number\">90</span>的员工信息，要求按入职时间从小到大排序<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">90</span> <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> hire_date <span class=\"hljs-keyword\">ASC</span>;<br># 按年薪的高低显示员工信息（按表达式排序）<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">12</span> <span class=\"hljs-operator\">*</span> (<span class=\"hljs-number\">1</span> <span class=\"hljs-operator\">+</span> IFNULL(commision_pac, <span class=\"hljs-number\">0</span>)) <span class=\"hljs-keyword\">ASC</span>;<br># 按姓的长度显示员工信息（按函数排序）<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> LENGTH(last_name) <span class=\"hljs-keyword\">ASC</span>;<br># 查询员工信息，按照工资排序，若工资相同，则按员工编号排序（多个字段排序）<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-keyword\">ASC</span>, employee_id <span class=\"hljs-keyword\">DESC</span>;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"常见函数\"><a class=\"markdownIt-Anchor\" href=\"#常见函数\">#</a> 常见函数</h3>\n<p>语法：SELECT 函数名 () [FROM 表]；</p>\n<p>分类：</p>\n<ul>\n<li>单行函数</li>\n<li>分组函数：用作统计用，输入多个数据，输出一个数据</li>\n</ul>\n<h4 id=\"字符函数\"><a class=\"markdownIt-Anchor\" href=\"#字符函数\">#</a> 字符函数</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\">#<span class=\"hljs-number\">1</span>、LENGTH()：用于获取参数值的字节个数<br><span class=\"hljs-keyword\">SELECT</span> LENGTH(<span class=\"hljs-string\">&#x27;john&#x27;</span>);<br><span class=\"hljs-keyword\">SELECT</span> LENGTH(<span class=\"hljs-string\">&#x27;张三丰hahaha&#x27;</span>); # utf<span class=\"hljs-number\">-8</span>中一个汉字占<span class=\"hljs-number\">3</span>个字节<br># <span class=\"hljs-number\">2</span>、CONCAT（）：拼接字符串<br><span class=\"hljs-keyword\">SELECT</span> CONCAT(first_name, <span class=\"hljs-string\">&#x27;_&#x27;</span>, last_name) <span class=\"hljs-keyword\">AS</span> 姓名 <span class=\"hljs-keyword\">FROM</span> employees;<br>#<span class=\"hljs-number\">3</span>、<span class=\"hljs-built_in\">UPPER</span>(),<span class=\"hljs-built_in\">LOWER</span>():将字符转成大写、小写<br><span class=\"hljs-keyword\">SELECT</span> CONCAT(<span class=\"hljs-built_in\">UPPER</span>(first_name), <span class=\"hljs-built_in\">LOWER</span>(last_name)) <span class=\"hljs-keyword\">AS</span> 姓名 <span class=\"hljs-keyword\">FROM</span> employees;<br># <span class=\"hljs-number\">4</span>、SUBSTR,SUBSTRING<br># 注意：<span class=\"hljs-keyword\">SQL</span>语言中，索引从<span class=\"hljs-number\">1</span>开始！！！！！！<br><span class=\"hljs-keyword\">SELECT</span> SUBSTR(<span class=\"hljs-string\">&#x27;12345678&#x27;</span>, <span class=\"hljs-number\">6</span>) # 截取从索引位置为<span class=\"hljs-number\">6</span>开始的字串<br><span class=\"hljs-keyword\">SELECT</span> SUBSTR(<span class=\"hljs-string\">&#x27;12345678&#x27;</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>) # 截取从索引位置为<span class=\"hljs-number\">1</span>，字符长度为<span class=\"hljs-number\">3</span>的字串<br># <span class=\"hljs-number\">5</span>、INSTR(expr1, expr2)：判断expr2在expr1首次出现的起始索引位置，若不存在，则返回<span class=\"hljs-number\">0</span><br><span class=\"hljs-keyword\">SELECT</span> INSTR(<span class=\"hljs-string\">&#x27;12341234&#x27;</span>,<span class=\"hljs-string\">&#x27;123&#x27;</span>); # 输出是<span class=\"hljs-number\">1</span><br># <span class=\"hljs-number\">6</span>、<span class=\"hljs-built_in\">TRIM</span>()<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">TRIM</span>(<span class=\"hljs-string\">&#x27;   1234   &#x27;</span>); # 去除字符前后的空格<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">TRIM</span>(<span class=\"hljs-string\">&#x27;a&#x27;</span> <span class=\"hljs-keyword\">FROM</span> <span class=\"hljs-string\">&#x27;aaaa1234aaaaaaa&#x27;</span>); # 去除字符前后的<span class=\"hljs-string\">&#x27;a&#x27;</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">TRIM</span>(<span class=\"hljs-string\">&#x27;aa&#x27;</span> <span class=\"hljs-keyword\">FROM</span> <span class=\"hljs-string\">&#x27;aaaaa1234aaaaaaa&#x27;</span>); # 以<span class=\"hljs-string\">&#x27;aa&#x27;</span>为单位去除字符前后的<span class=\"hljs-string\">&#x27;aa&#x27;</span>，这里的输出是<span class=\"hljs-string\">&#x27;a1234a&#x27;</span><br># <span class=\"hljs-number\">7</span>、LPAD()：用指定的字符实现左填充到指定长度<br><span class=\"hljs-keyword\">SELECT</span> LPAD(<span class=\"hljs-string\">&#x27;ABC&#x27;</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-string\">&#x27;*&#x27;</span>); # 输出是<span class=\"hljs-string\">&#x27;*******ABC&#x27;</span><br><span class=\"hljs-keyword\">SELECT</span> LPAD(<span class=\"hljs-string\">&#x27;ABC&#x27;</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&#x27;*&#x27;</span>); # 输出是<span class=\"hljs-string\">&#x27;AB&#x27;</span><br># <span class=\"hljs-number\">8</span>、RPAD()：用指定的字符实现左填充到指定长度<br># <span class=\"hljs-number\">9</span>、REPLACE():替换<br><span class=\"hljs-keyword\">SELECT</span> REPLACE(<span class=\"hljs-string\">&#x27;ABC&#x27;</span>, <span class=\"hljs-string\">&#x27;A&#x27;</span>, <span class=\"hljs-string\">&#x27;B&#x27;</span>) # 把<span class=\"hljs-string\">&#x27;ABC&#x27;</span>中的所有<span class=\"hljs-string\">&#x27;A&#x27;</span>换成<span class=\"hljs-string\">&#x27;C&#x27;</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"数学函数\"><a class=\"markdownIt-Anchor\" href=\"#数学函数\">#</a> 数学函数</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># <span class=\"hljs-number\">1</span>、round(x)：四舍五入<br><span class=\"hljs-keyword\">SELECT</span> ROUND(<span class=\"hljs-number\">1.65</span>); # <span class=\"hljs-number\">2</span><br><span class=\"hljs-keyword\">SELECT</span> ROUND(<span class=\"hljs-number\">-1.65</span>); # <span class=\"hljs-number\">-2</span><br><span class=\"hljs-keyword\">SELECT</span> ROUND(<span class=\"hljs-number\">-1.45</span>); # <span class=\"hljs-number\">-1</span><br># <span class=\"hljs-number\">2</span>、ROUND(x, y)：照第y位小数四舍五入<br># <span class=\"hljs-number\">3</span>、<span class=\"hljs-built_in\">CEIL</span>(X)：返回大于等于x的最小整数<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">1.01</span>); # <span class=\"hljs-number\">2</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">1.00</span>); # <span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">-1.01</span>); # <span class=\"hljs-number\">-1</span><br># <span class=\"hljs-number\">4</span>、<span class=\"hljs-built_in\">FLOOR</span>(x)：返回小于等于x的最大整数<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">1.01</span>); # <span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">1.00</span>); # <span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">CEIL</span>(<span class=\"hljs-number\">-1.01</span>); # <span class=\"hljs-number\">-2</span><br># <span class=\"hljs-number\">5</span>、<span class=\"hljs-keyword\">TRUNCATE</span>(x, y)：让x保留y位小数<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">TRUNCATE</span>(<span class=\"hljs-number\">1.6999</span>, <span class=\"hljs-number\">1</span>); # <span class=\"hljs-number\">1.6</span><br># <span class=\"hljs-number\">6</span>、<span class=\"hljs-built_in\">MOD</span>(a,b)：取余  <span class=\"hljs-operator\">=</span> a <span class=\"hljs-operator\">-</span> a <span class=\"hljs-operator\">/</span> b <span class=\"hljs-operator\">*</span> b<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MOD</span>(<span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">3</span>); # <span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MOD</span>(<span class=\"hljs-number\">-10</span>, <span class=\"hljs-number\">-3</span>); # <span class=\"hljs-number\">-1</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"日期函数\"><a class=\"markdownIt-Anchor\" href=\"#日期函数\">#</a> 日期函数</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># <span class=\"hljs-number\">1</span>、NOW():返回当前系统日期 <span class=\"hljs-operator\">+</span> 时间<br><span class=\"hljs-keyword\">SELECT</span> NOW();<br># <span class=\"hljs-number\">2</span>、CURDATE()：返回当年系统日期，不包含时间<br><span class=\"hljs-keyword\">SELECT</span> CURDATE(); # <span class=\"hljs-number\">2021</span><span class=\"hljs-number\">-11</span><span class=\"hljs-number\">-08</span><br># <span class=\"hljs-number\">3</span>、CURTIME()：获取当前时间，不包含日期<br><span class=\"hljs-keyword\">SELECT</span> CURTIME(); # <span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">17</span>:<span class=\"hljs-number\">43</span><br># <span class=\"hljs-number\">4</span>、获取指定部分：年，月，日，时，分，秒<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">YEAR</span>(NOW());<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">YEAR</span>(<span class=\"hljs-string\">&#x27;2021-11-08&#x27;</span>); # <span class=\"hljs-number\">2021</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">MONTH</span>(NOW());<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DAY</span>(NOW());<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">HOUR</span>(NOW());<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">MINUTE</span>(NOW());<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">SECOND</span>(NOW());<br># <span class=\"hljs-number\">5</span>、STR_TO_DATE():将日期格式的字符串转换成指定格式的日期<br><span class=\"hljs-keyword\">SELECT</span> STR_TO_DATE(<span class=\"hljs-string\">&#x27;1998-3-02&#x27;</span>,<span class=\"hljs-string\">&#x27;%Y-%c-%d&#x27;</span>) <br># <span class=\"hljs-number\">6</span>、DATA_FORMATE()：将日期转换成字符<br><span class=\"hljs-keyword\">SELECT</span> DATE_FORMAT(NOW(),<span class=\"hljs-string\">&#x27;%y-%m-%d&#x27;</span>);<br># DATEDIFF(exp1, exp2)：求两个日期时间之差<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"流程控制函数\"><a class=\"markdownIt-Anchor\" href=\"#流程控制函数\">#</a> 流程控制函数</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># IF()：实现if<span class=\"hljs-operator\">-</span><span class=\"hljs-keyword\">else</span>的效果<br><span class=\"hljs-keyword\">SELECT</span> IF(expr1, expr2, expr3); # 若expr1为真，返回expr2，否则expr3<br># <span class=\"hljs-keyword\">CASE</span>函数，使用一：类似于Java中switch <span class=\"hljs-keyword\">case</span>的效果<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\t格式： case 要判断的字段或表达式</span><br><span class=\"hljs-comment\">\twhen 常量1 then 要显示的值或语句1;（值的时候不加&#x27;;&#x27;，语句的时候加&#x27;;&#x27;）</span><br><span class=\"hljs-comment\">\twhen 常量2 then 要显示的值或语句2;</span><br><span class=\"hljs-comment\">\t...</span><br><span class=\"hljs-comment\">\telse 要显示的值或语句2;</span><br><span class=\"hljs-comment\">\tend [as new_name]</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">SELECT</span> salary, department_id,<br><span class=\"hljs-keyword\">CASE</span> department_id <br><span class=\"hljs-keyword\">WHEN</span> <span class=\"hljs-number\">30</span> <span class=\"hljs-keyword\">THEN</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.1</span><br><span class=\"hljs-keyword\">WHEN</span> <span class=\"hljs-number\">40</span> <span class=\"hljs-keyword\">THEN</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.2</span><br><span class=\"hljs-keyword\">ELSE</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.2</span><br><span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;新工资&#x27;</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br># <span class=\"hljs-keyword\">CASE</span>函数，使用二：类似于Java中的多重if<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tCASE</span><br><span class=\"hljs-comment\">\tWHEN 条件1 THEN 要显示的值或语句1;（值的时候不加&#x27;;&#x27;，语句的时候加&#x27;;&#x27;）</span><br><span class=\"hljs-comment\">\tWHEN 条件2 THEN 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\t...</span><br><span class=\"hljs-comment\">\tELSE 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\tEND</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">SELECT</span> salary,<br><span class=\"hljs-keyword\">CASE</span><br><span class=\"hljs-keyword\">WHEN</span> salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">12000</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-string\">&#x27;A&#x27;</span><br><span class=\"hljs-keyword\">WHEN</span> salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10000</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-string\">&#x27;B&#x27;</span><br><span class=\"hljs-keyword\">ELSE</span> <span class=\"hljs-string\">&#x27;C&#x27;</span><br><span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">AS</span> rank<br><span class=\"hljs-keyword\">FROM</span> employees<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"其他函数\"><a class=\"markdownIt-Anchor\" href=\"#其他函数\">#</a> 其他函数</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># VERSION()：版本号<br># DATABASE()：查看当前数据库<br># <span class=\"hljs-keyword\">USER</span>()：当前用户<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"聚合函数\"><a class=\"markdownIt-Anchor\" href=\"#聚合函数\">#</a> 聚合函数</h4>\n<p>SUM、AVG、MAX、MIN、COUNT</p>\n<ul>\n<li>sum，avg 一般用于处理数值型</li>\n<li>max、min、count 可以处理任何类型</li>\n<li>以上聚合函数都会忽略 NULL 值，求平均时，分母也是忽略 NULL 的</li>\n<li>可以和 distinct 搭配</li>\n<li>和聚集函数一同查询的字段<strong>只能是 GROUP BY 之后</strong>的字段</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># SUM<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">SUM</span>(salary) <br><span class=\"hljs-keyword\">FROM</span> employees; # 求工资之和<br># 配合使用<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">SUM</span>(salary), <span class=\"hljs-built_in\">MAX</span>(salary) <br><span class=\"hljs-keyword\">FROM</span> employees; # 求总和以及最大值<br># <span class=\"hljs-built_in\">COUNT</span>() 计算不为<span class=\"hljs-keyword\">NULL</span>的数量 <br># 和<span class=\"hljs-keyword\">DISTINCT</span>搭配使用，去重<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">SUM</span>(<span class=\"hljs-keyword\">DISTINCT</span> salary), <span class=\"hljs-built_in\">SUM</span>(salary) <br><span class=\"hljs-keyword\">FROM</span> employees;<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-keyword\">DISTINCT</span> salary) <br><span class=\"hljs-keyword\">FROM</span> employees;<br># <span class=\"hljs-built_in\">COUNT</span>()的详细介绍<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span> (<span class=\"hljs-operator\">*</span>) <br><span class=\"hljs-keyword\">FROM</span> employees; # 统计总行数（对于每一行，只要有一个字段不为<span class=\"hljs-keyword\">NULL</span>，就加<span class=\"hljs-number\">1</span>）<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(常量值) <br><span class=\"hljs-keyword\">FROM</span> employees; # 统计总行数 <br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\t效率对比：</span><br><span class=\"hljs-comment\">\tMYISAM存储引擎下，COUNT(*)效率高</span><br><span class=\"hljs-comment\">\tINNODB存储引擎下，COUNT(*)和COUNT(1)效率差不多，比COUNT(常量值)要高一些</span><br><span class=\"hljs-comment\">\t推荐使用COUNT(*)</span><br><span class=\"hljs-comment\">*/</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"分组查询\"><a class=\"markdownIt-Anchor\" href=\"#分组查询\">#</a> 分组查询</h3>\n<ul>\n<li>\n<p>语法</p>\n<blockquote>\n<p>SELECT 查询列表 FROM 查询列表 [WHERE 字句]  [ GROUP BY 子句  [ HAVING 子句 ] ]  [ ORDER BY 子句 ]</p>\n</blockquote>\n</li>\n<li>\n<p>要求查询列表是分组函数和<em> GROUP BY</em> 后出现的字段</p>\n</li>\n<li>\n<p><em>WHERE 子句</em>的执行顺序先于<em> GROUP BY</em>，<em>HAVING 子句</em>的执行顺序后于<em> GROUP BY</em></p>\n</li>\n<li>\n<p>WHERE 子句的数据源是原始表，而 HAVING 子句的数据源是 GROUP BY 的筛选结果，所以在 WHERE 子句不能直接使用聚合函数</p>\n</li>\n<li>\n<p>GROUP BY 子句支持单字段分组，也支持多字段分组（多个字段之间用逗号隔开，和顺序无关），也支持函数或表达式。</p>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 查询每个工种的平均工资<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">AVG</span>(salary), job_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> job_id;<br># 查询每个领导手下员工中有奖金的员工的最高工工资<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MAX</span>(salary), manager_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> commission_pac <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span> <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> manager_id;<br># 复杂的分组查询，分组后的筛选<br># 查询那个部门的员工人数 <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">2</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>), department_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> department_id <br><span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">2</span>;<br># 查询每个工种有奖金的员工的最高工资大于<span class=\"hljs-number\">12000</span>的工种编号和最高工资<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MAX</span>(salary), job_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> commission_pac <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span><br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> job_id <span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">MAX</span>(salary) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">12000</span>;<br># 查询领导编号 <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">102</span>的每个领导手下的最低工资大于<span class=\"hljs-number\">5000</span>的领导编号是哪个，以及最低工资<br><span class=\"hljs-keyword\">SELECT</span> manager_id, <span class=\"hljs-built_in\">MIN</span>(salary) <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> manager_id <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">102</span> <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> manager_id <br><span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">MIN</span>(salary) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">5000</span><br># 按表达式或函数分组<br># 例：按照员工姓名分组，查询每组员工的人数，筛选出员工个数 <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">5</span>的有哪些<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>), LENGTH(last_name) <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> LENGTH(last_name) <br><span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">COUNT</span>(last_name) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">5</span>;<br># 按多个字段分组<br># 例：查询每个部门每个工种的员工的平均工资<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">AVG</span>(salary), department_id, job_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> job_id, department_id;<br># 添加排序<br># 查询每个部门每个工种的员工的平均工资，并按平均工资从小到大排序<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">AVG</span>(salary), department_id, job_id <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> job_id, department_id <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> <span class=\"hljs-built_in\">AVG</span>(salary) <span class=\"hljs-keyword\">ASC</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"连接查询\"><a class=\"markdownIt-Anchor\" href=\"#连接查询\">#</a> 连接查询</h3>\n<ul>\n<li>\n<p>语法</p>\n<blockquote>\n<p>SELECT 查询列表 FROM A, B [WHERE 子句] [ 其他子句 ]</p>\n</blockquote>\n</li>\n<li>\n<p>查询的数据源是 A 和 B 的笛卡尔积，若 A 有 m 行，B 有 n 行，则 A 和 B 的笛卡尔积有 mn 行。</p>\n</li>\n<li>\n<p>通常需要使用 WHERE 子句进行筛选</p>\n</li>\n<li>\n<p>MySQL 不支持全外连接</p>\n</li>\n</ul>\n<h4 id=\"等值连接\"><a class=\"markdownIt-Anchor\" href=\"#等值连接\">#</a> 等值连接</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 等值连接<br># 例：查询女生对应的男生<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-string\">&#x27;name&#x27;</span>, boy_name <br><span class=\"hljs-keyword\">FROM</span> girls, boys <br><span class=\"hljs-keyword\">WHERE</span> girls.boyfriend_id <span class=\"hljs-operator\">=</span> boys.id;<br># 例：查询员工名和对应的部门名<br><span class=\"hljs-keyword\">SELECT</span> last_name, department_name <br><span class=\"hljs-keyword\">FROM</span> employees, departments <br><span class=\"hljs-keyword\">WHERE</span> employees.department_id <span class=\"hljs-operator\">=</span> departmens.departmen_id;<br># 为表起别名，起了别名后，就不能使用原来的表名了<br># 查询员工名、工种号、工种名<br><span class=\"hljs-keyword\">SELECT</span> last_name, e.job_id <span class=\"hljs-comment\">/*因为两个表都有job_id字段，所以要指明*/</span>, job_title <br><span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">AS</span> e, jobs <span class=\"hljs-keyword\">AS</span> j <br><span class=\"hljs-keyword\">WHERE</span> e.job_id <span class=\"hljs-operator\">=</span> j.job_id;<br># 配合筛选<br># 查询有奖金的员工名、部门名<br><span class=\"hljs-keyword\">SELECT</span> last_name, department_name <br><span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">AS</span> e, dempartments <span class=\"hljs-keyword\">AS</span> d<br><span class=\"hljs-keyword\">WHERE</span> e.<span class=\"hljs-string\">&#x27;deparrment_id&#x27;</span> <span class=\"hljs-operator\">=</span> d.<span class=\"hljs-string\">&#x27;departmen_id&#x27;</span> <br><span class=\"hljs-keyword\">AND</span> e.commission_id <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span>;<br># 配合分组<br># 查询每个城市的部门个数<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>), city <br><span class=\"hljs-keyword\">FROM</span> departments, locations <br><span class=\"hljs-keyword\">WHERE</span> departments.location_id <span class=\"hljs-operator\">=</span> locations.id <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> city;<br># 查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资<br><span class=\"hljs-keyword\">SELECT</span> department_name, manager_id, <span class=\"hljs-built_in\">MIN</span>(salary) <br><span class=\"hljs-keyword\">FROM</span> departments, employees<br><span class=\"hljs-keyword\">WHERE</span> departments.manager_id <span class=\"hljs-operator\">=</span> employees.manager_id <br><span class=\"hljs-keyword\">AND</span> commissioin_id <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span><br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> department_name;<br># 配合排序<br># 查询每个工种的工种名和员工个数，按员工个数降序<br><span class=\"hljs-keyword\">SELECT</span> job_title, <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <br><span class=\"hljs-keyword\">FROM</span> employees, jobs <br><span class=\"hljs-keyword\">WHERE</span> emoloyees.job_id <span class=\"hljs-operator\">=</span> jobs.job_id <br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> job_title <span class=\"hljs-keyword\">DESC</span>;<br># 多表连接<br># 例：查询员工名，部门名和所在城市，按员工名降序排序<br><span class=\"hljs-keyword\">SELECT</span> last_name, department_name, city<br><span class=\"hljs-keyword\">FROM</span> employees e, departments d, locations l<br><span class=\"hljs-keyword\">WHERE</span> e.department_id <span class=\"hljs-operator\">=</span> d.department_id <span class=\"hljs-keyword\">AND</span> d.location_id <span class=\"hljs-operator\">=</span> l.location_id <br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> last_name <span class=\"hljs-keyword\">DESC</span>;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"非等值连接\"><a class=\"markdownIt-Anchor\" href=\"#非等值连接\">#</a> 非等值连接</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 非等值连接<br># 例：查询员工的工资和工资等级<br><span class=\"hljs-keyword\">SELECT</span> salary, grade_level <br><span class=\"hljs-keyword\">FROM</span> employees, job_grades <br><span class=\"hljs-keyword\">WHERE</span> employees.salary <span class=\"hljs-keyword\">BETWEEN</span> job_grades.lowest_salary <span class=\"hljs-keyword\">AND</span> job_grades.highest_salary;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"自连接\"><a class=\"markdownIt-Anchor\" href=\"#自连接\">#</a> 自连接</h4>\n<ul>\n<li>使用自连接<strong>必须起别名</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例：查询员工名和其上级的名字<br><span class=\"hljs-keyword\">SELECT</span> A.last_name, B.last_name <br><span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">AS</span> A, employees <span class=\"hljs-keyword\">AS</span> B<br><span class=\"hljs-keyword\">WHERE</span> A.manager_id <span class=\"hljs-operator\">=</span> B.id;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"sql99语法\"><a class=\"markdownIt-Anchor\" href=\"#sql99语法\">#</a> SQL99 语法</h4>\n<ul>\n<li>\n<p>语法：</p>\n<blockquote>\n<p>SELECT 查询列表</p>\n<p>FROM 表 1 别名 [连接类型] JOIN 表 2 别名</p>\n<p>ON 连接条件</p>\n<p>[WHERE 子句]</p>\n<p>[ GROUP BY 子句</p>\n<p>[HAVING 子句] ]</p>\n<p>[ORDER BY 子句]</p>\n</blockquote>\n</li>\n<li>\n<p>分类</p>\n<ul>\n<li>\n<p>内连接：INNER</p>\n</li>\n<li>\n<p>外连接</p>\n<ul>\n<li>左外连接：LEFT [OUTER]</li>\n<li>右外连接：RIGHT [OUTER]</li>\n<li>全外连接：FULL [OUTER]</li>\n</ul>\n</li>\n<li>\n<p>交叉连接：CROSS</p>\n</li>\n</ul>\n</li>\n<li>\n<p>注意：如果有多个连接，则必须每个连接后面跟一个 ON 子句，不能写在一起</p>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 内连接 -- </span><br># 等值连接<br># 例：查询员工名、部门名<br><span class=\"hljs-keyword\">SELECT</span> last_name, department_name <br><span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">AS</span> e <br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> departmens <span class=\"hljs-keyword\">AS</span> d<br><span class=\"hljs-keyword\">ON</span> e.department_id <span class=\"hljs-operator\">=</span> d.department_id;<br># 非等值连接<br># 例：查询员工的工资级别，按工资从小到大排序<br><span class=\"hljs-keyword\">SELECT</span> salary,grade_level<br><span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">AS</span> e<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> job_grades <span class=\"hljs-keyword\">AS</span> g<br><span class=\"hljs-keyword\">ON</span> e.salary <span class=\"hljs-keyword\">BETWEEN</span> g.lowest_sal <span class=\"hljs-keyword\">AND</span> g.highest_sal<br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-keyword\">ASC</span>;<br># 自连接<br># 例：查询员工名和他领导的名字<br><span class=\"hljs-keyword\">SELECT</span> e.last_name, m.last_name<br><span class=\"hljs-keyword\">FROM</span> employees e<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> employees m<br><span class=\"hljs-keyword\">ON</span> e.manager_id <span class=\"hljs-operator\">=</span> m.employee_id;<br></code></pre></div></td></tr></table></figure>\n<h5 id=\"外连接\"><a class=\"markdownIt-Anchor\" href=\"#外连接\">#</a> 外连接</h5>\n<ul>\n<li>\n<p>外连接查询结果 = 内连接结果 + 主表中有而从表中没有的记录（以 NULL 值显示）</p>\n</li>\n<li>\n<p>左外连接，LEFT JOIN 左边的是主表</p>\n</li>\n<li>\n<p>右外连接，RIGHT JOIN 右边的是主表</p>\n</li>\n<li>\n<p>MySQL<strong> 不支持</strong>全外连接</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211111143515166.png\" alt=\"外连接对比\"></p>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 外连接：用于查询一个表中有，另一个表中没有的情况<br># 例：查询男朋友不在男神表中的女神名<br><span class=\"hljs-keyword\">SELECT</span> grils.name, boys.name<br><span class=\"hljs-keyword\">FROM</span> grils<br><span class=\"hljs-keyword\">LEFT</span> <span class=\"hljs-keyword\">OUTER</span> <span class=\"hljs-keyword\">JOIN</span> boys<br><span class=\"hljs-keyword\">ON</span> girls.boyfriend_id <span class=\"hljs-operator\">=</span> boys.id<br><span class=\"hljs-keyword\">WHERE</span> boys.id <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NULL</span>;<br># 例：查询哪个部门没有员工<br><span class=\"hljs-keyword\">SELECT</span> department_name, employee_id<br><span class=\"hljs-keyword\">FROM</span> departments<br><span class=\"hljs-keyword\">LEFT</span> <span class=\"hljs-keyword\">OUTER</span> <span class=\"hljs-keyword\">JOIN</span> employees<br><span class=\"hljs-keyword\">ON</span> departments.department_id <span class=\"hljs-operator\">=</span> employees.department_id<br><span class=\"hljs-keyword\">WHERE</span> employee_id <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NULL</span>;<br># 全外连接 <span class=\"hljs-operator\">=</span> 内连接 <span class=\"hljs-operator\">+</span> 表<span class=\"hljs-number\">1</span>中有表<span class=\"hljs-number\">2</span>中没有 <span class=\"hljs-operator\">+</span> 表<span class=\"hljs-number\">1</span>中没有表<span class=\"hljs-number\">2</span>有<br># 交叉连接：其实就是笛卡尔积<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">CROSS</span> <span class=\"hljs-keyword\">JOIN</span> departments;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"子查询\"><a class=\"markdownIt-Anchor\" href=\"#子查询\">#</a> 子查询</h3>\n<ul>\n<li>\n<p>含义：出现在其他语句中的 SELECT 语句。主查询可以是 UPDATE, INSERT, DELETE, SELECT</p>\n</li>\n<li>\n<p>按照子查询出现的位置分类</p>\n<ul>\n<li>SELECT 后面</li>\n<li>FROM 后面</li>\n<li>WHERE 或 HAVING 后面</li>\n<li>EXISTS 后面（相关子查询）</li>\n</ul>\n</li>\n<li>\n<p>多行子查询的操作符：IN, NOT IN, ANY, SOME, ALL（ANY 和 SOME 是一样的）</p>\n</li>\n</ul>\n<h4 id=\"放在where或having后面\"><a class=\"markdownIt-Anchor\" href=\"#放在where或having后面\">#</a> 放在 WHERE 或 HAVING 后面</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 放在<span class=\"hljs-keyword\">WHERE</span>或<span class=\"hljs-keyword\">HAVING</span>后面<br># 例<span class=\"hljs-number\">1</span>：谁的工资比Abel高<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees <br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">&gt;</span> (<br>    <span class=\"hljs-keyword\">SELECT</span> salary <br>    <span class=\"hljs-keyword\">FROM</span> employees <br>    <span class=\"hljs-keyword\">WHERE</span> last_name <span class=\"hljs-operator\">=</span> &quot;Abel&quot;<br>);<br># 例<span class=\"hljs-number\">2</span>：查询job_id与<span class=\"hljs-number\">141</span>号员工相同，salary比<span class=\"hljs-number\">143</span>号员工多的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> job_id <span class=\"hljs-operator\">=</span> (<br>    <span class=\"hljs-keyword\">SELECT</span> job_id <br>    <span class=\"hljs-keyword\">FROM</span> employees <br>    <span class=\"hljs-keyword\">WHERE</span> employee_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">141</span><br>) <span class=\"hljs-keyword\">AND</span> salary <span class=\"hljs-operator\">&gt;</span> (<br>    <span class=\"hljs-keyword\">SELECT</span> salary <br>    <span class=\"hljs-keyword\">FROM</span> employees <br>    <span class=\"hljs-keyword\">WHERE</span> employee_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">143</span><br>);<br># 例<span class=\"hljs-number\">3</span>：查询工资最少的员工的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">=</span> （<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MIN</span>(salary)<br>\t<span class=\"hljs-keyword\">FROM</span> employees<br>);<br># 例<span class=\"hljs-number\">4</span>：查询最低工资大于<span class=\"hljs-number\">50</span>号部门的最低工资的部门信息<br><span class=\"hljs-keyword\">SELECT</span> department_id, <span class=\"hljs-built_in\">MIN</span>(salary)<br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> department_id<br><span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">MIN</span>(salary) <span class=\"hljs-operator\">&gt;</span> (<br>    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MIN</span>(salary) <br>    <span class=\"hljs-keyword\">FROM</span> employees <br>    <span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">50</span><br>);<br># 非法使用标量子查询<br><span class=\"hljs-keyword\">SELECT</span> department_id, <span class=\"hljs-built_in\">MIN</span>(salary)<br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> department_id<br><span class=\"hljs-keyword\">HAVING</span> <span class=\"hljs-built_in\">MIN</span>(salary) <span class=\"hljs-operator\">&gt;</span> ( # 这里的结果是一个数salary <span class=\"hljs-operator\">&gt;</span> 一个列。 应该改成 salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-keyword\">all</span> (..) <br>    <span class=\"hljs-keyword\">SELECT</span> salary <br>    <span class=\"hljs-keyword\">FROM</span> employees <br>    <span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">50</span><br>);<br># 例<span class=\"hljs-number\">5</span>：返回location_id是<span class=\"hljs-number\">1400</span>或<span class=\"hljs-number\">1700</span>的部门中所有员工姓名<br><span class=\"hljs-keyword\">SELECT</span> last_name<br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-keyword\">in</span> ( # 或 <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">ANY</span>(...)<br>    <span class=\"hljs-keyword\">SELECT</span> department_id <br>    <span class=\"hljs-keyword\">FROM</span> departments<br>    <span class=\"hljs-keyword\">WHERE</span> location_id <span class=\"hljs-keyword\">in</span> (<span class=\"hljs-number\">1400</span>, <span class=\"hljs-number\">1700</span>)<br>);<br># 例<span class=\"hljs-number\">6</span>：返回其他工种中比job_id为<span class=\"hljs-string\">&#x27;IT_PROG&#x27;</span>工种任意工资低的员工的信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span><br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> salary <span class=\"hljs-operator\">&lt;</span> <span class=\"hljs-keyword\">all</span>(<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> salary<br>\t<span class=\"hljs-keyword\">FROM</span> employees<br>\t<span class=\"hljs-keyword\">WHERE</span> job_id <span class=\"hljs-operator\">=</span> &quot;IT_PROG&quot;<br>) <span class=\"hljs-keyword\">AND</span> job_id <span class=\"hljs-operator\">&lt;&gt;</span> &quot;IT_PROG&quot;;<br># 例<span class=\"hljs-number\">7</span>：查询员工编号最小并且工资最高的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> (employee_id, salary) <span class=\"hljs-operator\">=</span> ( ####### 这种写法不常用<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">MIN</span>(employee_id), <span class=\"hljs-built_in\">MAX</span>(salary)<br>\t<span class=\"hljs-keyword\">FROM</span> employees<br>);<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"放在select后面\"><a class=\"markdownIt-Anchor\" href=\"#放在select后面\">#</a> 放在 SELECT 后面</h4>\n<ul>\n<li>只支持标量子查询</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例<span class=\"hljs-number\">1</span>：查询每个部门的员工个数<br><span class=\"hljs-keyword\">SELECT</span> departments.<span class=\"hljs-operator\">*</span>, (<br>    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <br>    <span class=\"hljs-keyword\">FROM</span> employees<br>    <span class=\"hljs-keyword\">WHERE</span> employee_id <span class=\"hljs-operator\">=</span> departments.department_id <span class=\"hljs-operator\">=</span> employees.department_id<br>) <br><span class=\"hljs-keyword\">FROM</span> departments;<br># 例<span class=\"hljs-number\">2</span>：查询员工号为<span class=\"hljs-number\">102</span>的部门名<br><span class=\"hljs-keyword\">SELECT</span> department_name<br><span class=\"hljs-keyword\">FROM</span> departments <span class=\"hljs-keyword\">AS</span> d<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> employees <span class=\"hljs-keyword\">AS</span> e<br><span class=\"hljs-keyword\">ON</span> d.department_id <span class=\"hljs-operator\">=</span> e.department_id<br><span class=\"hljs-keyword\">WHERE</span> e.employee_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">102</span>;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"放在from后面\"><a class=\"markdownIt-Anchor\" href=\"#放在from后面\">#</a> 放在 FROM 后面</h4>\n<ul>\n<li>FROM 后面的子查询必须起别名</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例<span class=\"hljs-number\">1</span>：查询每个部门的平均工资的工资等级<br><span class=\"hljs-keyword\">SELECT</span> avg_dep.ag, avg_dep.department_id, g.grade_level<br><span class=\"hljs-keyword\">FROM</span> (<br>    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">AVG</span>(salary) <span class=\"hljs-keyword\">AS</span> ag, department_id<br>\t<span class=\"hljs-keyword\">FROM</span> employees<br>\t<span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> department_id<br>) <span class=\"hljs-keyword\">AS</span> avg_dep<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> job_grades <span class=\"hljs-keyword\">AS</span> g<br><span class=\"hljs-keyword\">ON</span> avg_dep.ag <span class=\"hljs-keyword\">BETWEEN</span> g.lowest_sal <span class=\"hljs-keyword\">AND</span> g.highest_sal;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"放在exists后面\"><a class=\"markdownIt-Anchor\" href=\"#放在exists后面\">#</a> 放在 EXISTS 后面</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">EXISTS</span>(完整的查询语句)：若括号中查询语句不为空，则返回<span class=\"hljs-number\">1</span>，否则返回<span class=\"hljs-number\">0</span><br># 例<span class=\"hljs-number\">1</span>：查询有员工的部门名<br><span class=\"hljs-keyword\">SELECT</span> department_name<br><span class=\"hljs-keyword\">FROM</span> departments<br><span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">EXISTS</span>(<br>    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span><br>    <span class=\"hljs-keyword\">FROM</span> employees<br>    <span class=\"hljs-keyword\">WHERE</span> employees.department_id <span class=\"hljs-operator\">=</span> departments.department_id<br>);<br># 可以用<span class=\"hljs-keyword\">IN</span>代替<br><span class=\"hljs-keyword\">SELECT</span> department_name<br><span class=\"hljs-keyword\">FROM</span> departments<br><span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-keyword\">IN</span>(<br>    <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> department_id <br>    <span class=\"hljs-keyword\">FROM</span> employees<br>);<br># 例<span class=\"hljs-number\">2</span>：查询没有女朋友的男生信息<br># 可以用<span class=\"hljs-keyword\">IN</span>实现<br><span class=\"hljs-keyword\">SELECT</span> b.<span class=\"hljs-operator\">*</span><br><span class=\"hljs-keyword\">FROM</span> boys<br><span class=\"hljs-keyword\">WHERE</span> b.id <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">IN</span>(<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> boyfriend_id<br>\t<span class=\"hljs-keyword\">FROM</span> girls<br>);<br># 也可以用<span class=\"hljs-keyword\">EXISTS</span>代替<span class=\"hljs-keyword\">IN</span><br><span class=\"hljs-keyword\">SELECT</span> b.<span class=\"hljs-operator\">*</span><br><span class=\"hljs-keyword\">FROM</span> boys<br><span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">EXISTS</span>(<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> boyfriend_id<br>\t<span class=\"hljs-keyword\">FROM</span> girls<br>    <span class=\"hljs-keyword\">WHERE</span> b.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br>);<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"分页查询\"><a class=\"markdownIt-Anchor\" href=\"#分页查询\">#</a> 分页查询</h3>\n<ul>\n<li>\n<p>使用情景：如果要查询的数据过多，可以分多页显示（比如淘宝商品不是一次显示完的，这样可以提高速度）</p>\n</li>\n<li>\n<p>语法：</p>\n<p>​\t\tSELECT 查询列表</p>\n<p>​\t    FROM 表</p>\n<p>​        [JOIN TYPE] JOIN 表</p>\n<p>​\t\tON 连接条件</p>\n<p>​\t\tWHERE 筛选条件</p>\n<p>​\t\tGROUP BY</p>\n<p>​\t\tHAVING</p>\n<p>​\t\tORDER BY</p>\n<p>​\t\tLIMIT offset，size</p>\n</li>\n<li>\n<p>offset 表示要显示条目的起始索引（索引位置从 0 开始），size 表示要显示的条目个数</p>\n</li>\n<li>\n<p>LIMIT 语句在语法上和执行顺序上都是最后一步</p>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例：查询前五条员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> employees LIMIT <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>; # 等价于 <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> employees LIMIT <span class=\"hljs-number\">5</span>;(默认从第一条数据开始)<br># 显示有奖金的工资最高的<span class=\"hljs-number\">10</span>名员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span><br><span class=\"hljs-keyword\">FROM</span> employees<br><span class=\"hljs-keyword\">WHERE</span> commission_pct <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NOT NULL</span><br><span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> salary <span class=\"hljs-keyword\">DESC</span><br>LIMIT <span class=\"hljs-number\">10</span>;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"联合查询\"><a class=\"markdownIt-Anchor\" href=\"#联合查询\">#</a> 联合查询</h3>\n<ul>\n<li>UNION：将多个查询语句的结果合并成一个结果</li>\n<li>语法：查询语句 1 UNION 查询语句 2 UNION 查询语句 3 …</li>\n<li>应用场景：要查询的结果来自于多个表，且多个表之间没有直接的连接关系，但<strong>查询的信息一致</strong>（查询的字段值必须相同）</li>\n<li>注意\n<ul>\n<li>要求多条查询语句要查询的列数一致</li>\n<li>要求多条查询语句查询的每一列的类型和顺序最好要一致（不报错，但没意义）</li>\n<li>UNION 关键字<strong>默认是去重的</strong>，如果想要包含重复项，可以使用<strong> UNION ALL</strong></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例：查询部门编号<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">90</span>或邮箱包含a的员工信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">WHERE</span> email <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%a%&#x27;</span> <br><span class=\"hljs-keyword\">UNION</span> <span class=\"hljs-keyword\">ALL</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> employees <span class=\"hljs-keyword\">WHERE</span> department_id <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">90</span>;<br># 查询中国用户表中的男性用户信息和外国用户表中的女性用户信息<br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> t_ca <span class=\"hljs-keyword\">WHERE</span> gender <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;male&#x27;</span><br><span class=\"hljs-keyword\">UNION</span> <span class=\"hljs-keyword\">ALL</span><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> t_ua <span class=\"hljs-keyword\">WHERE</span> gender <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;female&#x27;</span>;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"dml语言\"><a class=\"markdownIt-Anchor\" href=\"#dml语言\">#</a> DML 语言</h2>\n<h3 id=\"插入语句\"><a class=\"markdownIt-Anchor\" href=\"#插入语句\">#</a> 插入语句</h3>\n<ul>\n<li>\n<p>语法：</p>\n<ul>\n<li>方式一：INSERT INTO 表名 (字段名 1, 字段名 2, …) VALUES (值 1，值 2，……);</li>\n<li>方式二：INSERT INTO 表名 SET 列名 = 值，列名 = 值，……</li>\n</ul>\n</li>\n<li>\n<p>注意</p>\n<ul>\n<li>插入的值的类型必须与列的类型一致或兼容（顺序、个数必须相同，如果某字段值为空，那就写 NULL）</li>\n<li>可以为 NULL 的字段值，插入的时候可以为 NULL</li>\n<li>不可以为 NULL 的列，必须有值</li>\n<li>可以省略列名，但默认是所有插入所有列，且顺序和表中一致</li>\n</ul>\n</li>\n<li>\n<p>方式一支持一次插入多行</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">INSERT INTO</span> girls(id, name, gender, birthday, phone, photo, boyfriend_id)<br><span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-number\">13</span>,<span class=\"hljs-string\">&#x27;Angela&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-02-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000000&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">2</span>),<br>\t(<span class=\"hljs-number\">14</span>,<span class=\"hljs-string\">&#x27;Angela1&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-03-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000020&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">4</span>),<br>\t(<span class=\"hljs-number\">15</span>,<span class=\"hljs-string\">&#x27;Angela1&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-04-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000400&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">6</span>);<br></code></pre></div></td></tr></table></figure>\n</li>\n<li>\n<p>方式一支持子查询</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">INSERT INTO</span> girls(id, name, phone)<br><span class=\"hljs-keyword\">SELECT</span> id, boy_name, phone_number # 这里指把子查询的结果插入到表中，这样可以实现一次性插入多行<br><span class=\"hljs-keyword\">FROM</span> boys<br><span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">&lt;</span> <span class=\"hljs-number\">3</span>;<br></code></pre></div></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"举例-4\"><a class=\"markdownIt-Anchor\" href=\"#举例-4\">#</a> 举例</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 若photo值可以为<span class=\"hljs-keyword\">NULL</span>，则以下<span class=\"hljs-number\">4</span>种方式等价<br># ①<br><span class=\"hljs-keyword\">INSERT INTO</span> girls(id, name, gender, birthday, phone, photo, boyfriend_id)<br><span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-number\">13</span>,<span class=\"hljs-string\">&#x27;Angela&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-02-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000000&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">2</span>);<br># ②<br><span class=\"hljs-keyword\">INSERT INTO</span> girls<br><span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-number\">13</span>,<span class=\"hljs-string\">&#x27;Angela&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-02-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000000&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">2</span>);<br><span class=\"hljs-keyword\">INSERT INTO</span> girls(id, name, gender, birthday, phone, boyfriend_id)<br># ③<br><span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-number\">13</span>,<span class=\"hljs-string\">&#x27;Angela&#x27;</span>, <span class=\"hljs-string\">&#x27;girl&#x27;</span>, <span class=\"hljs-string\">&#x27;2001-02-12&#x27;</span>, <span class=\"hljs-string\">&#x27;13100000000&#x27;</span>, <span class=\"hljs-number\">2</span>);<br># ④<br><span class=\"hljs-keyword\">INSERT INTO</span> girls<br><span class=\"hljs-keyword\">SET</span> name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;Angela&#x27;</span>,<br>\tid <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">13</span>,<br>\tgender <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;girl&#x27;</span><br>\tbirthday <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;2001-02-12&#x27;</span><br>\tphone <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;13100000000&#x27;</span><br>\tboyfriend_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2</span>;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"修改语句\"><a class=\"markdownIt-Anchor\" href=\"#修改语句\">#</a> 修改语句</h3>\n<h4 id=\"修改单表记录\"><a class=\"markdownIt-Anchor\" href=\"#修改单表记录\">#</a> 修改单表记录</h4>\n<ul>\n<li>语法：UPDATE 表名 SET 字段名 1 = 新值 1，字段名 2 = 新值 2，…… WHERE 筛选条件</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例<span class=\"hljs-number\">1</span>：修改girls表中姓唐的女生的电话为<span class=\"hljs-number\">13899999999</span><br><span class=\"hljs-keyword\">UPDATE</span> girls<br><span class=\"hljs-keyword\">SET</span> phone <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;13899999999&#x27;</span><br><span class=\"hljs-keyword\">WHERE</span> name <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;唐%&#x27;</span>;<br># 例<span class=\"hljs-number\">2</span>：修改boys表中id为<span class=\"hljs-number\">2</span>的人名称为张飞，魅力值<span class=\"hljs-number\">10</span><br><span class=\"hljs-keyword\">UPDATE</span> boys<br><span class=\"hljs-keyword\">SET</span> boy_name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;张飞&#x27;</span>,<br>\tusercp <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">10</span><br><span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2</span>;\t<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"修改多表记录\"><a class=\"markdownIt-Anchor\" href=\"#修改多表记录\">#</a> 修改多表记录</h4>\n<ul>\n<li>语法：\n<ul>\n<li>sql92：UPDATE 表 1 别名，表 2 别名 SET 列 = 值，… WHERE 连接条件 AND 筛选条件；</li>\n<li>sql99：UPDATE 表 1 别名 连接类型 表 2 别名 ON 连接条件 SET 列 = 值，… WHERE 连接条件 AND 筛选条件；</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 例<span class=\"hljs-number\">1</span>：修改张无忌的女朋友们的手机号为<span class=\"hljs-number\">114</span><br><span class=\"hljs-keyword\">UPDATE</span> boys b<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> girls g<br><span class=\"hljs-keyword\">ON</span> b.id <span class=\"hljs-operator\">=</span> g.boyfriend_id<br><span class=\"hljs-keyword\">SET</span> g.phone <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;114&#x27;</span><br><span class=\"hljs-keyword\">WHERE</span> b.name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;张无忌&#x27;</span>;<br># 例<span class=\"hljs-number\">2</span>：修改没有男朋友的女生的男朋友编号为<span class=\"hljs-number\">2</span><br><span class=\"hljs-keyword\">UPDATE</span> girls g<br><span class=\"hljs-keyword\">LEFT</span> <span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> boys b<br><span class=\"hljs-keyword\">ON</span> g.boyfriend_id <span class=\"hljs-operator\">=</span> b.id<br><span class=\"hljs-keyword\">SET</span> g.boyfriend_id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2</span><br><span class=\"hljs-keyword\">WHERE</span> g.boyfriend_id <span class=\"hljs-keyword\">IS</span> <span class=\"hljs-keyword\">NULL</span>;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"删除语句\"><a class=\"markdownIt-Anchor\" href=\"#删除语句\">#</a> 删除语句</h3>\n<ul>\n<li>\n<p>语法</p>\n<ul>\n<li>方式一：DELETE 要删的表名 FROM 表名 WHERE 筛选条件 [LIMIT 子句]</li>\n<li>方式二：TRUNCATE TABLE 表名 **（删除整张表）**</li>\n</ul>\n</li>\n<li>\n<p>假如要删除的表中有自增长列，用 delete 删除后，再插入数据，自增长的列从断点开始，而 TRUNCATE 删除后，再插入数据，自增长的列从 1 开始</p>\n</li>\n<li>\n<p>DELETE 有返回值（比如：共 3 行受影响）；TRUNCATE 没有返回值（会显示：共 0 行受影响）</p>\n</li>\n<li>\n<p>TRUNCATE 删除<strong>不能回滚</strong>，DELETE 删除可以回滚</p>\n</li>\n</ul>\n<h4 id=\"单表删除\"><a class=\"markdownIt-Anchor\" href=\"#单表删除\">#</a> 单表删除</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 删除手机号以<span class=\"hljs-number\">9</span>结尾的女生信息<br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> girls<br><span class=\"hljs-keyword\">WHERE</span> phone <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%9&#x27;</span>;<br># LIMIT配合删除语句<br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> girls LIMIT <span class=\"hljs-number\">1</span>; # 删除第一条数据<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"多表删除\"><a class=\"markdownIt-Anchor\" href=\"#多表删除\">#</a> 多表删除</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 删除张无忌的女朋友的信息<br><span class=\"hljs-keyword\">DELETE</span> girls # 这里只会删除girls表中的数据<br># <span class=\"hljs-keyword\">DELETE</span> girls， boys # 这样就会删除girls和boys两个表中的信息<br><span class=\"hljs-keyword\">FROM</span> girls <br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> boys<br><span class=\"hljs-keyword\">ON</span> boys.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br><span class=\"hljs-keyword\">WHERE</span> boys.name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;张无忌&#x27;</span><br><br># 删除黄晓明的信息和他女朋友的信息<br><span class=\"hljs-keyword\">DELETE</span> girls, boys # 两个表中的信息都会被删除<br><span class=\"hljs-keyword\">FROM</span> boys<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> girls<br><span class=\"hljs-keyword\">ON</span> boys.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br><span class=\"hljs-keyword\">WHERE</span> boys.name <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;黄晓明&#x27;</span><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"ddl语言\"><a class=\"markdownIt-Anchor\" href=\"#ddl语言\">#</a> DDL 语言</h2>\n<h3 id=\"库管理\"><a class=\"markdownIt-Anchor\" href=\"#库管理\">#</a> 库管理</h3>\n<ul>\n<li>\n<p>库的创建</p>\n<ul>\n<li>语法：CREATE DATABASE [IF NOT EXISTS] 库名；</li>\n</ul>\n</li>\n<li>\n<p>更改库的字符集</p>\n<ul>\n<li>语法：ALTER DATABASE 库名 CHARACTER SET 字符集名</li>\n</ul>\n</li>\n<li>\n<p>库的删除</p>\n<ul>\n<li>语法：DROP DATABASE [IF EXISTS] 库名</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"表管理\"><a class=\"markdownIt-Anchor\" href=\"#表管理\">#</a> 表管理</h3>\n<h4 id=\"创建create\"><a class=\"markdownIt-Anchor\" href=\"#创建create\">#</a> 创建：CREATE</h4>\n<ul>\n<li>\n<p>语法：</p>\n<ul>\n<li>\n<p>CREATE TABLE [IF NOT EXISTS] 表名 (</p>\n<p>​\t字段名 字段类型 [长度 约束])，</p>\n<p>​\t字段名 字段类型 [长度 约束])，</p>\n<p>​\t字段名 字段类型 [长度 约束])，</p>\n<p>​\t……</p>\n<p>);</p>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 创建表book<br><span class=\"hljs-keyword\">CREATE TABLE</span> book(<br>\tid <span class=\"hljs-type\">INT</span>, # 书的编号<br>    `name` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), # 书名<br>    price <span class=\"hljs-keyword\">DOUBLE</span>, # 价格<br>    author_id <span class=\"hljs-type\">INT</span> # 作者编号<br>);<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"修改alter\"><a class=\"markdownIt-Anchor\" href=\"#修改alter\">#</a> 修改：ALTER</h4>\n<ul>\n<li>\n<p>修改列名</p>\n<ul>\n<li>\n<p>ALTER TABLE 表名 CHANGE COLUMN 原名 新名 类型；</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> books CHANGE <span class=\"token keyword\">COLUMN</span> author_id author <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼29--></span></pre></div></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>添加新列</p>\n<ul>\n<li>\n<p>ALTER TABLE 表名 ADD COLUMN 列名 类型 [FIRST | AFTER 字段名]</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token comment\"># 添加在第一列</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> books <span class=\"token keyword\">ADD</span> <span class=\"token keyword\">COLUMN</span> publish_time <span class=\"token keyword\">DATETIME</span> <span class=\"token keyword\">FIRST</span><span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token comment\"># 添加在 author 列后面</span></pre></div></td></tr><tr><td data-num=\"4\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> books <span class=\"token keyword\">ADD</span> <span class=\"token keyword\">COLUMN</span> publish_time <span class=\"token keyword\">DATETIME</span> <span class=\"token keyword\">AFTER</span> author<span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"5\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼30--></span></pre></div></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>修改表名</p>\n<ul>\n<li>\n<p>ALTER TABLE 表名 RENAME TO 新名字；</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> books <span class=\"token keyword\">RENAME</span> <span class=\"token keyword\">TO</span> my_books<span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼31--></span></pre></div></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"复制表\"><a class=\"markdownIt-Anchor\" href=\"#复制表\">#</a> 复制表</h4>\n<ul>\n<li>\n<p>仅仅复制表的结构</p>\n<ul>\n<li>\n<p>CREATE TABLE 表名 LIKE 源表名；</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> book_copy <span class=\"token operator\">LIKE</span> books<span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼32--></span></pre></div></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>仅仅复制表的部分字段</p>\n<ul>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> books_copy</pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">SELECT</span> id<span class=\"token punctuation\">,</span> author_id</pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">FROM</span> books</pre></div></td></tr><tr><td data-num=\"4\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">WHERE</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 筛选条件永远为 false，所以最后复制过去的只有 id 和 author_id 两个字段</span></pre></div></td></tr><tr><td data-num=\"5\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼33--></span></pre></div></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"浮点数\"><a class=\"markdownIt-Anchor\" href=\"#浮点数\">#</a> 浮点数</h4>\n<ul>\n<li>包括两种：float（4 字节），double（8 字节）</li>\n<li>写法：FLOAT (M, D), DOUBLE (M, D)</li>\n<li>M 代表整数部分和小数部分的长度总和，D 代表精确到小数点后几位，超过范围，则插入临界值</li>\n<li>M 和 D 都可以省略，会根据插入的数值的精度来决定精度</li>\n</ul>\n<h4 id=\"定点数\"><a class=\"markdownIt-Anchor\" href=\"#定点数\">#</a> 定点数</h4>\n<ul>\n<li>写法：DEC (M, D) 或 DECIMAL (M, D)</li>\n<li>M 代表整数部分和小数部分的长度总和，D 代表精确到小数点后几位，超过范围，则插入临界值</li>\n<li>M 和 D 都可以省略，默认 M = 10，D = 0</li>\n<li>精度相比浮点数较高，对精度要求较高的情况下可以选择定点数</li>\n</ul>\n<h4 id=\"字符型\"><a class=\"markdownIt-Anchor\" href=\"#字符型\">#</a> 字符型</h4>\n<ul>\n<li>\n<p>保存较短的文本</p>\n<ul>\n<li>\n<p>char (M)：固定长度的字符，M 可省略，默认为 1，效率较高，但耗费空间</p>\n</li>\n<li>\n<p>varchar (M)：可变长度的字符，M 不可省略，效率较低，但节省空间</p>\n</li>\n<li>\n<p>enum：枚举</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> enum_table<span class=\"token punctuation\">(</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre>\ta <span class=\"token keyword\">enum</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span></pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"4\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> enum_table <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 插入成功</span></pre></div></td></tr><tr><td data-num=\"5\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> enum_table <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 插入成功</span></pre></div></td></tr><tr><td data-num=\"6\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> enum_table <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 插入成功</span></pre></div></td></tr><tr><td data-num=\"7\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> enum_table <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 插入成功，但实际插入的是 'a'</span></pre></div></td></tr><tr><td data-num=\"8\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> enum_table <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token string\">'m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\"># 插入失败</span></pre></div></td></tr><tr><td data-num=\"9\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼34--></span></pre></div></td></tr></table></figure></li>\n<li>\n<p>binary，varbinary：用于保存较小的二进制数</p>\n</li>\n</ul>\n</li>\n<li>\n<p>保存较长的文本</p>\n<ul>\n<li>text</li>\n<li>blob（较长的二进制数据）</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"日期型\"><a class=\"markdownIt-Anchor\" href=\"#日期型\">#</a> 日期型</h4>\n<ul>\n<li><strong>DATE</strong>：只保存日期</li>\n<li><strong>TIME</strong>：只保存时间</li>\n<li><strong>DATETIME</strong>：可以保存日期和时间，与时区无关</li>\n<li><strong>YEAR</strong>：只保存年份</li>\n<li><strong>TIMESTAMP</strong>：时间戳，和实际时区有关，范围是 1970 年到 2038 年</li>\n<li>查询当前程序时区：SHOW VARIABLES LIKE ‘time_zone’</li>\n<li>设置程序时区：SET time_zone 时区</li>\n</ul>\n<h3 id=\"约束\"><a class=\"markdownIt-Anchor\" href=\"#约束\">#</a> 约束</h3>\n<p>含义：用于限制表中的数据，以保证表中数据的准确和可靠性</p>\n<h4 id=\"分类\"><a class=\"markdownIt-Anchor\" href=\"#分类\">#</a> 分类</h4>\n<ul>\n<li><strong>NOT NULL</strong>：非空约束，用于保证该字段的值不能为空</li>\n<li><strong>DEFAULT</strong>：默认约束，保证该字段有默认值</li>\n<li><strong>PRIMARY KEY</strong>：主键约束，保证该字段具有唯一性、非空性，一张表最多有一个主键，可以多个列共同组成一个主键</li>\n<li><strong>UNIQUE</strong>：唯一约束，保证该字段具有唯一性，但可以为 NULL</li>\n<li><strong>CHECK</strong>：检查约束（MySQL8 开始支持）</li>\n<li><strong>FOREIGN KEY</strong>：外键约束，保证该字段值必须来自于主表的关联列的值</li>\n</ul>\n<p>主键约束和唯一约束的对比：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">保证唯一性</th>\n<th style=\"text-align:center\">是否允许为空</th>\n<th style=\"text-align:center\">一张表是否可以有多个</th>\n<th style=\"text-align:center\">是否允许组合</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">主键约束</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">√，但不推荐</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">唯一约束</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√，但不推荐</td>\n</tr>\n</tbody>\n</table>\n<p>外键的特点：</p>\n<ul>\n<li>要求在从表中设置外键关系</li>\n<li>从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</li>\n<li>主表的关联列必须是一个 key（一般是主键或唯一键）</li>\n<li>插入数据时，应该先插入主表，再插入从表</li>\n<li>删除数据时，应该先删除从表，在删除主表</li>\n</ul>\n<p>主键删除数据时，外键数据的处理方法：</p>\n<ul>\n<li>\n<p>==CASCADE：== 级联删除</p>\n</li>\n<li>\n<p>==SET NULL：== 置空删除</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> my_table <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">SET</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 置空删除</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> my_table <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">SET</span> <span class=\"token keyword\">CASCADE</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 级联删除</span></pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼35--></span></pre></div></td></tr></table></figure></li>\n</ul>\n<h4 id=\"修改表时添加约束\"><a class=\"markdownIt-Anchor\" href=\"#修改表时添加约束\">#</a> 修改表时添加约束</h4>\n<ul>\n<li>添加列级约束：ALTER TABLE 表名 MODIFY COLUMN 字段名 字段类型 新约束；</li>\n<li>添加表级别约束：ALTER TABLE 表名 ADD [CONSTRAINT 约束名] 约束类型 (字段名) [ 外键的引用 ]</li>\n</ul>\n<p>列级约束和表级约束对比：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">位置</th>\n<th style=\"text-align:center\">支持的约束类型</th>\n<th style=\"text-align:center\">是否可以起约束名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">列级约束</td>\n<td style=\"text-align:center\">列的后面</td>\n<td style=\"text-align:center\">除了外键</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">表级约束</td>\n<td style=\"text-align:center\">所有列的下面</td>\n<td style=\"text-align:center\">除了 DEFAULT 和 NOT NULL</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">CREATE TABLE</span> student(<br>\tid <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">PRIMARY</span>,<br>    stu_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>)L,<br>    gender <span class=\"hljs-type\">char</span>,<br>    seat <span class=\"hljs-type\">INT</span>,<br>    majorID <span class=\"hljs-type\">INT</span>,<br>);<br># 添加非空约束<br><span class=\"hljs-keyword\">ALTER TABLE</span> student MODIFY <span class=\"hljs-keyword\">COLUMN</span> stu_name <span class=\"hljs-keyword\">NOT NULL</span>;<br># 添加主键约束，，<span class=\"hljs-keyword\">CONSTRAINT</span>可选<br><span class=\"hljs-keyword\">ALTER TABLE</span> student MODIFY <span class=\"hljs-keyword\">COLUMN</span> stu_name <span class=\"hljs-keyword\">PRIMARY KEY</span>;<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">ADD</span> <span class=\"hljs-keyword\">PRIMARY KEY</span>(stu_name);<br># 添加唯一约束，，<span class=\"hljs-keyword\">CONSTRAINT</span>可选<br><span class=\"hljs-keyword\">ALTER TABLE</span> student MODIFY <span class=\"hljs-keyword\">COLUMN</span> stu_name <span class=\"hljs-keyword\">UNIQUE</span>;<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">ADD</span> <span class=\"hljs-keyword\">UNIQUE</span>(stu_name);<br># 添加外键约束，<span class=\"hljs-keyword\">CONSTRAINT</span>可选<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">ADD CONSTRAINT</span> fk_student_major <span class=\"hljs-keyword\">FOREIGN KEY</span>(major_id) <span class=\"hljs-keyword\">REFERENCES</span> major(id);<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"删除约束\"><a class=\"markdownIt-Anchor\" href=\"#删除约束\">#</a> 删除约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 删除非空约束<br><span class=\"hljs-keyword\">ALTER TABLE</span> student MODIFY <span class=\"hljs-keyword\">COLUMN</span> stu_name;<br># 删除主键约束<br><span class=\"hljs-keyword\">ALTER TABLE</span> student MODIFY <span class=\"hljs-keyword\">COLUMN</span> stu_name;<br># 或<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">PRIMARY KEY</span>;<br># 删除唯一约束<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">DROP</span> INDEX 约束名;<br># 删除外键约束<br><span class=\"hljs-keyword\">ALTER TABLE</span> student <span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">FOREIGN KEY</span> 约束名;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"标识列\"><a class=\"markdownIt-Anchor\" href=\"#标识列\">#</a> 标识列</h3>\n<p>含义：又成为自增长列，可以不用手动插入值，系统提供默认的序列值</p>\n<p>语法：列名 类型 [约束] AUTO_INCREMENT</p>\n<p>设置标识列:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 在创建表时设置标识列<br><span class=\"hljs-keyword\">CREATE TABLE</span> tab_identity(<br>    id <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">PRIMARY KEY</span> AUTO_INCREMENT,<br>    name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>)<br>)<br><br># 这样，在插入时，就不需要插入id这个字段<br><span class=\"hljs-keyword\">INSERT INTO</span> tab_identity <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;john&#x27;</span>);<br># 或<br><span class=\"hljs-keyword\">INSERT INTO</span> tab_identity(name) <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-string\">&#x27;john&#x27;</span>);<br># 实际上还是可以自己插入id这个值的<br><span class=\"hljs-keyword\">INSERT INTO</span> tab_identity <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-number\">10</span>, <span class=\"hljs-string\">&#x27;john&#x27;</span>); # 这样会插入一条数据(<span class=\"hljs-number\">10</span>, <span class=\"hljs-string\">&#x27;john&#x27;</span>)<br><br><br><span class=\"hljs-comment\">-- 也可以在修改表的时候设置标识列</span><br><span class=\"hljs-keyword\">ALTER TABLE</span> tab_identity <span class=\"hljs-keyword\">ALTER</span> <span class=\"hljs-keyword\">COLUMN</span> id <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">PRIMARY KEY</span> AUTO_INCREMENT;<br># 删除标识列<br><span class=\"hljs-keyword\">ALTER TABLE</span> tab_identity <span class=\"hljs-keyword\">ALTER</span> <span class=\"hljs-keyword\">COLUMN</span> id <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">PRIMARY KEY</span>;<br></code></pre></div></td></tr></table></figure>\n<p>特点：</p>\n<ul>\n<li>一张表<strong>只能有一个</strong>标识列，且标识列<strong>必须是一个键</strong></li>\n<li>标识列的类型<strong>必须是数值型</strong></li>\n<li>可以修改每次增加的数值：<strong>SET AOTU_INCREMENT_INCREMENT = 步长；</strong></li>\n<li>可以通过手动插入，设置起始值</li>\n</ul>\n<h2 id=\"tcl语言\"><a class=\"markdownIt-Anchor\" href=\"#tcl语言\">#</a> TCL 语言</h2>\n<h3 id=\"事务\"><a class=\"markdownIt-Anchor\" href=\"#事务\">#</a> 事务</h3>\n<p>含义：一个或一组 SQL 语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p>\n<p>查看数据库支持的存储引擎：==SHOW ENGINES；== 可以看到，默认的存储引擎是 InnoDB。</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211116224930803.png\" alt=\"数据库存储引擎\"></p>\n<p>InnoDB 支持事务，MyISAM 和 MEMORY 不支持事务。</p>\n<h4 id=\"事务的属性\"><a class=\"markdownIt-Anchor\" href=\"#事务的属性\">#</a> 事务的属性</h4>\n<ul>\n<li><strong>原子性</strong>：指事物是一个不可分割的工作单位，<mark>事物中的操作要么都发生，要么都不发生。</mark></li>\n<li><strong>一致性</strong>：事务必须使数据库从一个一致性状态变换到另一个一致性状态</li>\n<li><strong>隔离性</strong>：一个事务的执行不能被其他事物干扰（这取决于隔离级别）</li>\n<li><strong>持久性</strong>：一个事务一旦被提交，其对数据库的改变就是永久性的</li>\n</ul>\n<h4 id=\"事务的创建\"><a class=\"markdownIt-Anchor\" href=\"#事务的创建\">#</a> 事务的创建</h4>\n<p>隐式事务：事务没有明显的开启和结束的标记，如 INSERT, UPDATE, DELETE 语句</p>\n<p>显式事务：事务具有明显的开启和结束的标记。前提：<mark>必须通过 SET AUTOCOMMIT = 0; 设置自动提交功能为禁用</mark></p>\n<p>显示事务的创建：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 开启事务<br><span class=\"hljs-keyword\">SET</span> AUTOCOMMIT <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;<br><span class=\"hljs-keyword\">START</span> TRANSACTION;# 这句话可选，只要写了<span class=\"hljs-keyword\">SET</span> AUTOCOMMIT <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> 即可<br># 步骤二：编写事务中的<span class=\"hljs-keyword\">SQL</span>语句（<span class=\"hljs-keyword\">SELECT</span>, <span class=\"hljs-keyword\">INSERT</span>, <span class=\"hljs-keyword\">UPDATE</span>, <span class=\"hljs-keyword\">DELETE</span>，其他的写了也没用）<br># 结束事务，以下两个语句二选一<br><span class=\"hljs-keyword\">COMMIT</span>; # 提交事务<br><span class=\"hljs-keyword\">ROLLBACK</span>; # 回滚事务<br></code></pre></div></td></tr></table></figure>\n<p>DELETE 和 TRUNCATE 在事务使用时的区别：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">能否回滚</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">DELETE</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">TRUNCATE</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"事务的隔离级别\"><a class=\"markdownIt-Anchor\" href=\"#事务的隔离级别\">#</a> 事务的隔离级别</h4>\n<p>查看当前隔离级别：<mark>SELECT @@TRANSACTION_ISOLATION</mark>(MySQL8)</p>\n<p>修改隔离级别：<mark>SET SESSION / GLOBAL TRANSACTION ISOLATION LEVEL 隔离级别</mark>，SESSION 对当前连接有效，GLOBAL 对全局有效，修改的时候要写成<mark>中间的’-' 要换成空格！</mark></p>\n<p>事务隔离级别（从低到高）</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">隔离级别</th>\n<th style=\"text-align:center\">脏读</th>\n<th style=\"text-align:center\">不可重复读</th>\n<th style=\"text-align:center\">幻读</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">READ-UNCOMMITTED</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">READ-COMMITTED</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">REPEATABLE-READ</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SERIALIZABLE</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"savepoint的使用\"><a class=\"markdownIt-Anchor\" href=\"#savepoint的使用\">#</a> SAVEPOINT 的使用</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># <span class=\"hljs-keyword\">savepoint</span>的使用<br><span class=\"hljs-keyword\">SET</span> AUTOCOMMIT <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;<br><span class=\"hljs-keyword\">START</span> TRANSACTION;<br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> account <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">25</span>;<br><span class=\"hljs-keyword\">SAVEPOINT</span> a; # 设置保存点A<br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> account <span class=\"hljs-keyword\">WHERE</span> id <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">19</span>;<br><span class=\"hljs-keyword\">ROLLBACK</span> <span class=\"hljs-keyword\">TO</span> a; # 回滚到存档点a<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"视图\"><a class=\"markdownIt-Anchor\" href=\"#视图\">#</a> 视图</h2>\n<p>含义：虚拟表，和普通表一样使用，是通过表动态生成的数据，其中只保存了 SQL 逻辑，<strong>不保存查询结果</strong>。</p>\n<p>创建视图：<mark>CREATE VIEW 视图名 AS 查询语句</mark></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 创建视图，查询员工中包含字符a的员工名、部门名和工种信息<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">VIEW</span> my_view <span class=\"hljs-keyword\">AS</span><br><span class=\"hljs-keyword\">SELECT</span> e.last_name, department_name, e.job_id<br><span class=\"hljs-keyword\">FROM</span> employee e<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> departments d <span class=\"hljs-keyword\">ON</span> e.departmen_id <span class=\"hljs-operator\">=</span> d.department_id<br><span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> jobs j <span class=\"hljs-keyword\">ON</span> e.job_id <span class=\"hljs-operator\">=</span> j.job_id<br><span class=\"hljs-keyword\">WHERE</span> e.last_name <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%a%&#x27;</span><br></code></pre></div></td></tr></table></figure>\n<p><strong>修改视图：</strong></p>\n<ul>\n<li><mark>CREATE OR REPLACE VIEW 视图名 AS 查询语句</mark></li>\n<li><mark>ALTER VIEW 视图名 AS 查询语句</mark></li>\n</ul>\n<p><strong>删除视图：</strong><mark>DROP VIEW 视图名，视图名，……</mark></p>\n<p><strong>查看视图信息：</strong><mark>DESC 视图名</mark> 或 <mark>SHOW CREATE VIEW 视图名</mark></p>\n<p><strong>具备以下特点的视图不允许更新：</strong></p>\n<ul>\n<li>\n<p>包含以下关键字的 SQL 语句：分组函数、DISTINCT、GROUP BY、HAVING、UNION、UNION ALL</p>\n</li>\n<li>\n<p>常量视图</p>\n</li>\n<li>\n<p>SELECT 中包含子查询</p>\n</li>\n<li>\n<p>用上了连接语句（能 UPDATE，不能 INSERT、DELETE）</p>\n</li>\n<li>\n<p>视图的创建过程中用到了不能更新的另一个视图</p>\n</li>\n<li>\n<p>WHERE 子句的子查询引用了 FROM 子句中的表</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token comment\"># WHERE 子句的子查询引用了 FROM 子句中的表</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">VIEW</span> my_view <span class=\"token keyword\">AS</span></pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> </pre></div></td></tr><tr><td data-num=\"4\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">FROM</span> employees</pre></div></td></tr><tr><td data-num=\"5\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">WHERE</span> employee_id <span class=\"token operator\">in</span><span class=\"token punctuation\">(</span></pre></div></td></tr><tr><td data-num=\"6\"></td><td><div class=\"hljs code-wrapper\"><pre>\t<span class=\"token keyword\">SELECT</span> manager_id</pre></div></td></tr><tr><td data-num=\"7\"></td><td><div class=\"hljs code-wrapper\"><pre>\t<span class=\"token keyword\">FROM</span> employees</pre></div></td></tr><tr><td data-num=\"8\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"9\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼42--></span></pre></div></td></tr></table></figure></li>\n</ul>\n<h4 id=\"会话变量\"><a class=\"markdownIt-Anchor\" href=\"#会话变量\">#</a> 会话变量</h4>\n<p>作用域：仅仅针对于<mark>当前会话</mark>连接有效</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 查看所有会话变量<br><span class=\"hljs-keyword\">SHOW</span> SESSION VARIABLES; # <span class=\"hljs-keyword\">SHOW</span> VARIBALES效果是一样的 <br># 查看部分会话变量<br><span class=\"hljs-keyword\">SHOW</span> SESSION VARIABLES <span class=\"hljs-keyword\">LIKE</span> <span class=\"hljs-string\">&#x27;%char%&#x27;</span>;<br># 查看指定的某个会话变量<br><span class=\"hljs-keyword\">SELECT</span> @<span class=\"hljs-variable\">@SESSION</span>.TRANSACTION_ISOLATION;<br># 修改某个会话变量<br><span class=\"hljs-keyword\">SET</span> @<span class=\"hljs-variable\">@SESSION</span>.TRANSACTION_ISOLATION <span class=\"hljs-operator\">=</span> SERIALIZABLE;<br># 或<br><span class=\"hljs-keyword\">SET</span> SESSION TRANSACTION_ISOLATION <span class=\"hljs-operator\">=</span> SERIALIZABLE;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"自定义变量\"><a class=\"markdownIt-Anchor\" href=\"#自定义变量\">#</a> 自定义变量</h3>\n<h4 id=\"用户变量\"><a class=\"markdownIt-Anchor\" href=\"#用户变量\">#</a> 用户变量</h4>\n<p>作用域：针对于当前会话连接有效，可以在任何地方使用，即可以放在 begin end 里面或外面</p>\n<p>声明并初始化（<mark>在声明时必须初始化</mark>）：</p>\n<ul>\n<li><mark>SET @用户变量名 = 值</mark></li>\n<li><mark>SET @用户变量名 := 值</mark></li>\n<li><mark>SELECT @用户变量名 := 值</mark></li>\n</ul>\n<p>赋值：</p>\n<p>方式一：</p>\n<ul>\n<li><mark>SET @用户变量名 = 值</mark></li>\n<li><mark>SET @用户变量名 := 值</mark></li>\n<li><mark>SELECT @用户变量名 := 值</mark></li>\n</ul>\n<p>方式二：</p>\n<ul>\n<li>\n<p>SELECT 字段 INTO 变量名 FROM 表；</p>\n</li>\n<li>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token comment\"># 例子，将变量名 @count 赋值为 employees 表的数据条数</span></pre></div></td></tr><tr><td data-num=\"2\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">SELECT</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">INTO</span> <span class=\"token variable\">@count</span> <span class=\"token keyword\">FROM</span> employees<span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"3\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token comment\"># 查看</span></pre></div></td></tr><tr><td data-num=\"4\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token keyword\">SELECT</span> <span class=\"token variable\">@count</span><span class=\"token punctuation\">;</span></pre></div></td></tr><tr><td data-num=\"5\"></td><td><div class=\"hljs code-wrapper\"><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token comment\">--code￼44--></span></pre></div></td></tr></table></figure></li>\n</ul>\n<h2 id=\"存储过程和函数\"><a class=\"markdownIt-Anchor\" href=\"#存储过程和函数\">#</a> 存储过程和函数</h2>\n<p><strong>含义</strong>：类似于 Java 中的方法</p>\n<h3 id=\"存储过程\"><a class=\"markdownIt-Anchor\" href=\"#存储过程\">#</a> 存储过程</h3>\n<p><strong>含义</strong>：一组预先编译号的 SQL 语句的集合，可以理解成批处理语句</p>\n<p><strong>优点</strong>：</p>\n<ul>\n<li>提高代码的重用性</li>\n<li>简化操作</li>\n<li>减少编译次数并且减少了和数据库服务器的连接次数，提高了效率</li>\n</ul>\n<h4 id=\"创建语法\"><a class=\"markdownIt-Anchor\" href=\"#创建语法\">#</a> 创建语法</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> 存储过程名(参数列表)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t存储过程体(一组合法的<span class=\"hljs-keyword\">SQL</span>语句)<br><span class=\"hljs-keyword\">END</span><br></code></pre></div></td></tr></table></figure>\n<p><strong>注意</strong>：</p>\n<ul>\n<li>\n<p>参数列表包含三部分：<mark>参数模式 参数名 参数类型</mark>，如：IN stuname VARCHAR (20)</p>\n</li>\n<li>\n<p>参数模式：</p>\n<ul>\n<li><mark>IN</mark>：该参数可以作为输入，也就是说该参数需要调用方传入值</li>\n<li><mark>OUT</mark>：该参数可以作为输出，也就是说该参数可以作为返回值</li>\n<li><mark>INOUT</mark>：该参数既可以作为输入，又可以作为输出；既需要传入值，又可以返回值</li>\n</ul>\n</li>\n<li>\n<p>如果存储函数体只有一句话，BEGIN END 可以省略</p>\n</li>\n<li>\n<p>存储过程体的每条 SQL 语句的结尾要求必须加分号，存储过程的结尾可以使用<mark> DELIMITER</mark> 重新设置</p>\n<ul>\n<li>语法：<mark>DELIMITER 结束标记</mark>，如 DELIMITER $</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"调用语法\"><a class=\"markdownIt-Anchor\" href=\"#调用语法\">#</a> 调用语法</h4>\n<p>语法：<mark>CALL 存储过程名 (实参列表)；</mark></p>\n<h5 id=\"空参\"><a class=\"markdownIt-Anchor\" href=\"#空参\">#</a> 空参</h5>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 空参列表<br><span class=\"hljs-comment\">-- 案例：插入2条数据到admin表中</span><br><span class=\"hljs-comment\">-- 定义存储过程</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test()<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">INSERT INTO</span> admin <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-string\">&#x27;john1&#x27;</span>, <span class=\"hljs-number\">0000</span>),(<span class=\"hljs-string\">&#x27;john2&#x27;</span>, <span class=\"hljs-number\">0001</span>); # 这里必须加分号<br><span class=\"hljs-keyword\">END</span> $<br><br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">CALL</span> test();<br><br></code></pre></div></td></tr></table></figure>\n<h5 id=\"in\"><a class=\"markdownIt-Anchor\" href=\"#in\">#</a> IN</h5>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 带<span class=\"hljs-keyword\">in</span>模式参数的存储过程<br><span class=\"hljs-comment\">-- 根据女生名，查询对应的男生信息</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test2(<span class=\"hljs-keyword\">IN</span> name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>))<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">SELECT</span> boys.<span class=\"hljs-operator\">*</span><br>\t<span class=\"hljs-keyword\">FROM</span> boys<br>\t<span class=\"hljs-keyword\">RIGHT</span> <span class=\"hljs-keyword\">JOIN</span> girls <span class=\"hljs-keyword\">ON</span> boys.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br>\t<span class=\"hljs-keyword\">WHERE</span> girls.name <span class=\"hljs-operator\">=</span> name<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">CALL</span> test2(<span class=\"hljs-string\">&#x27;my_girl_name&#x27;</span>);<br><br><span class=\"hljs-comment\">-- 案例2：创建存储过程实现用户是否登录成功</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test3(<span class=\"hljs-keyword\">IN</span> username <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), <span class=\"hljs-keyword\">IN</span> `password` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>))<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">DECLARE</span> <span class=\"hljs-keyword\">result</span> <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">0</span>; # 声明并初始化<br>\t<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">INTO</span> <span class=\"hljs-keyword\">result</span> # 将查询结果赋值给<span class=\"hljs-keyword\">result</span><br>\t<span class=\"hljs-keyword\">FROM</span> admin<br>\t<span class=\"hljs-keyword\">WHERE</span> admin.username <span class=\"hljs-operator\">=</span> username <br>\t<span class=\"hljs-keyword\">AND</span> admin.password <span class=\"hljs-operator\">=</span> `password`;<br>\t<br>\t<span class=\"hljs-keyword\">SELECT</span> IF(<span class=\"hljs-keyword\">result</span> <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;成功&#x27;</span>, <span class=\"hljs-string\">&#x27;失败&#x27;</span>); # 打印结果<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">CALL</span> test2(<span class=\"hljs-string\">&#x27;my_name&#x27;</span>, <span class=\"hljs-string\">&#x27;my_password&#x27;</span>);<br></code></pre></div></td></tr></table></figure>\n<h5 id=\"out\"><a class=\"markdownIt-Anchor\" href=\"#out\">#</a> OUT</h5>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 根据女生名，返回对应的男生名</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test3(<span class=\"hljs-keyword\">IN</span> girl_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), <span class=\"hljs-keyword\">OUT</span> boy_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>))<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">SELECT</span> boys.boy_name <span class=\"hljs-keyword\">INTO</span> boy_name<br>\t<span class=\"hljs-keyword\">FROM</span> boys<br>\t<span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> girls <span class=\"hljs-keyword\">ON</span> boys.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br>\t<span class=\"hljs-keyword\">WHERE</span> girls.name <span class=\"hljs-operator\">=</span> girl_name;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@boy_name</span>;<br><span class=\"hljs-keyword\">CALL</span> test3(<span class=\"hljs-string\">&#x27;girl_name&#x27;</span>, <span class=\"hljs-variable\">@boy_name</span>);<br><br><span class=\"hljs-comment\">-- 根据女生名，查询男生名和其对应的魅力值</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test4(<span class=\"hljs-keyword\">IN</span> girl_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), <span class=\"hljs-keyword\">OUT</span> boy_name <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>), <span class=\"hljs-keyword\">OUT</span> user_cp <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">SELECT</span> boys.boy_name, boys.user_cp <span class=\"hljs-keyword\">INTO</span> boy_name, user_cp<br>\t<span class=\"hljs-keyword\">FROM</span> boys<br>\t<span class=\"hljs-keyword\">INNER</span> <span class=\"hljs-keyword\">JOIN</span> girls <span class=\"hljs-keyword\">ON</span> boys.id <span class=\"hljs-operator\">=</span> girls.boyfriend_id<br>\t<span class=\"hljs-keyword\">WHERE</span> girls.name <span class=\"hljs-operator\">=</span> girl_name;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@boy_name</span>;<br><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@user_cp</span>;<br><span class=\"hljs-keyword\">CALL</span> test4(<span class=\"hljs-string\">&#x27;girl_name&#x27;</span>, <span class=\"hljs-variable\">@boy_name</span>, <span class=\"hljs-variable\">@user_cp</span>);<br></code></pre></div></td></tr></table></figure>\n<h5 id=\"inout\"><a class=\"markdownIt-Anchor\" href=\"#inout\">#</a> INOUT</h5>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 传入a和b两个值，最终a和b翻倍并返回<br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test5(<span class=\"hljs-keyword\">INOUT</span> a <span class=\"hljs-type\">INT</span>, <span class=\"hljs-keyword\">INOUT</span> b <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">SET</span> a <span class=\"hljs-operator\">=</span> a <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">2</span>;<br>\t<span class=\"hljs-keyword\">SET</span> b <span class=\"hljs-operator\">=</span> b <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">2</span>;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@m</span> :<span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>;<br><span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@n</span> :<span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2</span>;<br><span class=\"hljs-keyword\">CALL</span> test5(<span class=\"hljs-variable\">@m</span>, <span class=\"hljs-variable\">@n</span>);<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"删除存储过程\"><a class=\"markdownIt-Anchor\" href=\"#删除存储过程\">#</a> 删除存储过程</h4>\n<p>语法：<mark>DROP PROCEDURE 存储过程名</mark></p>\n<h4 id=\"查看存储过程的信息\"><a class=\"markdownIt-Anchor\" href=\"#查看存储过程的信息\">#</a> 查看存储过程的信息</h4>\n<p>语法：<mark>SHOW CREATE PROCEDURE 存储过程名；</mark></p>\n<h3 id=\"函数\"><a class=\"markdownIt-Anchor\" href=\"#函数\">#</a> 函数</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">函数</th>\n<th style=\"text-align:center\">有且只有一个返回</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><strong>存储过程</strong></td>\n<td style=\"text-align:center\"><strong>0 个返回或多个返回</strong></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"创建函数\"><a class=\"markdownIt-Anchor\" href=\"#创建函数\">#</a> 创建函数</h4>\n<p><strong>语法：</strong><mark>CREATE FUNCTION 函数名 (参数列表) RETURNS 返回类型</mark></p>\n<p>​\t\t\t<mark>创建类型</mark></p>\n<p>​\t\t\t<mark>BEGIN</mark></p>\n<p>​\t\t\t\t\t\t<mark>函数体</mark></p>\n<p>​\t\t\t<mark>END</mark></p>\n<p><strong>注意：</strong></p>\n<ul>\n<li>参数列表包含两部分：参数名 参数类型</li>\n<li>函数体一定要有 RETURN 语句，如果没有，会报错</li>\n<li>若函数体只有一句话，则可以省略 BEGIN END</li>\n<li>要使用 MELIMITER 语句设置结束标记</li>\n<li>8.0 版本 MySQL 创建函数需要在 RETURNS TYPE 后面，BEGIN 前面加上创建类型，一般有下面这几种类型：\n<ul>\n<li>==DETERMINISTIC：== 不确定的</li>\n<li>==NO SQL：== 没有 SQL 语句</li>\n<li>==READS SQL DATA：== 读取数据，不涉及修改数据</li>\n<li>==MODIFIES SQL DATA：== 涉及到修改数据</li>\n<li>==CONTAINS SQL：== 包含了 SQL 语句</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"调用函数\"><a class=\"markdownIt-Anchor\" href=\"#调用函数\">#</a> 调用函数</h4>\n<p><strong>语法</strong>：<mark>SELECT 函数名 (参数列表)；</mark></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 返回公司的员工人数<br><span class=\"hljs-comment\">-- 定义函数</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> test1() <span class=\"hljs-keyword\">RETURNS</span> <span class=\"hljs-type\">INT</span><br><span class=\"hljs-keyword\">READS</span> <span class=\"hljs-keyword\">SQL</span> DATA # MySQL8，要加上创建类型<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">DECLARE</span> number <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">0</span>; #定义变量<br>\t<span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">count</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">INTO</span> number<br>\t<span class=\"hljs-keyword\">FROM</span> employees;<br>\t<span class=\"hljs-keyword\">RETURNS</span> number;<br><span class=\"hljs-keyword\">END</span>$<br><span class=\"hljs-comment\">-- 调用函数</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SELECT</span> test1();<br><br># 根据员工名，返回工资<br><span class=\"hljs-comment\">-- 定义函数</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> test2(`name` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">20</span>)) <span class=\"hljs-keyword\">RETURNS</span> <span class=\"hljs-type\">INT</span><br><span class=\"hljs-keyword\">READS</span> <span class=\"hljs-keyword\">SQL</span> DATA<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">SET</span> <span class=\"hljs-variable\">@salary</span> :<span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; # 设置用户变量，设置局部变量也可以<br>\t<span class=\"hljs-keyword\">SELECT</span> employees.salary <span class=\"hljs-keyword\">INTO</span> <span class=\"hljs-variable\">@salary</span> # 赋值<br>\t<span class=\"hljs-keyword\">FROM</span> employees<br>\t<span class=\"hljs-keyword\">WHERE</span> last_name <span class=\"hljs-operator\">=</span> `name`;<br>\t<span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-variable\">@salary</span>;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SELECT</span> test2(<span class=\"hljs-string\">&#x27;K_ing&#x27;</span>);<br><br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"查看函数\"><a class=\"markdownIt-Anchor\" href=\"#查看函数\">#</a> 查看函数</h4>\n<p>语法：<mark>SHOW CREATE FUNCTION 函数名；</mark></p>\n<h4 id=\"删除函数\"><a class=\"markdownIt-Anchor\" href=\"#删除函数\">#</a> 删除函数</h4>\n<p>语法：<mark>DROP FUNCTION 函数名；</mark></p>\n<h2 id=\"流程控制结构\"><a class=\"markdownIt-Anchor\" href=\"#流程控制结构\">#</a> 流程控制结构</h2>\n<h3 id=\"分支结构\"><a class=\"markdownIt-Anchor\" href=\"#分支结构\">#</a> 分支结构</h3>\n<h4 id=\"if函数\"><a class=\"markdownIt-Anchor\" href=\"#if函数\">#</a> IF 函数</h4>\n<p>语法：<mark>SELECT IF(expr1, expr2, expr3)</mark></p>\n<p>功能：实现简单的双分支，若 expr1 为 true，则返回 expr2，否则返回 expr3</p>\n<h4 id=\"case结构\"><a class=\"markdownIt-Anchor\" href=\"#case结构\">#</a> CASE 结构</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># <span class=\"hljs-keyword\">CASE</span>函数，使用一：类似于Java中switch <span class=\"hljs-keyword\">case</span>的效果<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\t格式： case 要判断的字段或表达式</span><br><span class=\"hljs-comment\">\twhen 常量1 then 要显示的值或语句1;（值的时候不加&#x27;;&#x27;，语句的时候加&#x27;;&#x27;）</span><br><span class=\"hljs-comment\">\twhen 常量2 then 要显示的值或语句2;</span><br><span class=\"hljs-comment\">\t...</span><br><span class=\"hljs-comment\">\telse 要显示的值或语句2;</span><br><span class=\"hljs-comment\">\tend [as new_name]</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">SELECT</span> salary, department_id,<br><span class=\"hljs-keyword\">CASE</span> department_id <br><span class=\"hljs-keyword\">WHEN</span> <span class=\"hljs-number\">30</span> <span class=\"hljs-keyword\">THEN</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.1</span><br><span class=\"hljs-keyword\">WHEN</span> <span class=\"hljs-number\">40</span> <span class=\"hljs-keyword\">THEN</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.2</span><br><span class=\"hljs-keyword\">ELSE</span> salary <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">1.2</span><br><span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;新工资&#x27;</span> <br><span class=\"hljs-keyword\">FROM</span> employees<br># <span class=\"hljs-keyword\">CASE</span>函数，使用二：类似于Java中的多重if<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tCASE</span><br><span class=\"hljs-comment\">\tWHEN 条件1 THEN 要显示的值或语句1;（值的时候不加&#x27;;&#x27;，语句的时候加&#x27;;&#x27;）</span><br><span class=\"hljs-comment\">\tWHEN 条件2 THEN 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\t...</span><br><span class=\"hljs-comment\">\tELSE 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\tEND</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">SELECT</span> salary,<br><span class=\"hljs-keyword\">CASE</span><br><span class=\"hljs-keyword\">WHEN</span> salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">12000</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-string\">&#x27;A&#x27;</span><br><span class=\"hljs-keyword\">WHEN</span> salary <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10000</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-string\">&#x27;B&#x27;</span><br><span class=\"hljs-keyword\">ELSE</span> <span class=\"hljs-string\">&#x27;C&#x27;</span><br><span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">AS</span> rank<br><span class=\"hljs-keyword\">FROM</span> employees<br><br>## 以上是作为表达式的，也可以作为语句单独出现<br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">\tCASE [表达式]</span><br><span class=\"hljs-comment\">\tWHEN 条件1 THEN 要显示的值或语句1;（值的时候不加&#x27;;&#x27;，语句的时候加&#x27;;&#x27;）</span><br><span class=\"hljs-comment\">\tWHEN 条件2 THEN 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\t...</span><br><span class=\"hljs-comment\">\tELSE 要显示的值1或语句2;</span><br><span class=\"hljs-comment\">\tEND CASE;</span><br><span class=\"hljs-comment\">*/</span><br># 案例：创建存储过程，根据传入的成绩，显示等级<br><span class=\"hljs-comment\">-- 创建</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test(<span class=\"hljs-keyword\">IN</span> grade <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">CASE</span> <br>\t<span class=\"hljs-keyword\">WHEN</span> grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">90</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-string\">&#x27;A&#x27;</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;等级&#x27;</span>;<br>\t<span class=\"hljs-keyword\">WHEN</span> grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">80</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-string\">&#x27;B&#x27;</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;等级&#x27;</span>;<br>\t<span class=\"hljs-keyword\">WHEN</span> grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">60</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-string\">&#x27;C&#x27;</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;等级&#x27;</span>;<br>\t<span class=\"hljs-keyword\">ELSE</span> <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-string\">&#x27;D&#x27;</span> <span class=\"hljs-keyword\">AS</span> <span class=\"hljs-string\">&#x27;等级&#x27;</span>;<br>\t<span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">CASE</span>; # 作为独立语句的时候，必须写成<span class=\"hljs-keyword\">END</span> <span class=\"hljs-keyword\">CASE</span><br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 执行</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">CALL</span> test(<span class=\"hljs-number\">90</span>);<br></code></pre></div></td></tr></table></figure>\n<p><strong>特点</strong>：</p>\n<ul>\n<li>可以<mark>作为表达式</mark>，嵌套在其他语句中使用，可以<mark>放在任何地方</mark>，BEGIN END 中或 BEGIN END 的外面</li>\n<li>可以<mark>作为独立的语句</mark>去使用，但只能<mark>放在 BEGIN END 中</mark></li>\n<li>如果 WHEN 中的条件成立，则执行对应的 THEN 后面的语句，并且结束 CASE，之后的语句不会执行。如果都不满足，则执行 ELSE 中的语句</li>\n<li>ELSE 可以省略，如果 ELSE 省略了，并且所有的 WHEN 条件都不满足，则返回 NULL</li>\n</ul>\n<h4 id=\"if结构\"><a class=\"markdownIt-Anchor\" href=\"#if结构\">#</a> IF 结构</h4>\n<p>功能：实现多重分支</p>\n<p>语法：<mark>IF 条件 1 THEN 语句 1; ELSEIF 条件 2 THEN 语句 2； ELSEIF 条件 3 THEN 语句 3…… END IF；</mark></p>\n<p>注意：<mark>只能用在 BEGIN END 中</mark></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 案例：创建存储过程，根据传入的成绩，返回等级<br><span class=\"hljs-comment\">-- 创建</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">FUNCTION</span> test(grade <span class=\"hljs-type\">INT</span>) <span class=\"hljs-keyword\">RETURNS</span> <span class=\"hljs-type\">CHAR</span><br><span class=\"hljs-keyword\">NO</span> <span class=\"hljs-keyword\">SQL</span><br><span class=\"hljs-keyword\">BEGIN</span>\t<br>\tIF grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">90</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;A&#x27;</span>;<br>\tELSEIF grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">80</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;B&#x27;</span>;<br>\tELSEIF grade <span class=\"hljs-operator\">&gt;=</span> <span class=\"hljs-number\">60</span> <span class=\"hljs-keyword\">THEN</span> <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;C&#x27;</span>;<br>\t<span class=\"hljs-keyword\">ELSE</span> <span class=\"hljs-keyword\">RETURN</span> <span class=\"hljs-string\">&#x27;D&#x27;</span>;<br>\t<span class=\"hljs-keyword\">END</span> IF;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 执行</span><br>DELIMITER ;<br><span class=\"hljs-keyword\">SELECT</span> test(<span class=\"hljs-number\">90</span>);<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"循环结构\"><a class=\"markdownIt-Anchor\" href=\"#循环结构\">#</a> 循环结构</h3>\n<h4 id=\"while\"><a class=\"markdownIt-Anchor\" href=\"#while\">#</a> WHILE</h4>\n<p>语法：<mark>[标签：] WHILE 循环条件 DO</mark></p>\n<p>​\t\t\t\t<mark>循环体；</mark></p>\n<p>​\t\t\t<mark>END WHILE [标签]</mark></p>\n<h4 id=\"loop\"><a class=\"markdownIt-Anchor\" href=\"#loop\">#</a> LOOP</h4>\n<p>语法：<mark>[标签：] LOOP</mark></p>\n<p>​\t\t\t\t<mark>循环体；</mark></p>\n<p>​\t\t\t<mark>END LOOP [标签]</mark></p>\n<p>可以用来模拟简单的死循环</p>\n<h4 id=\"repeat\"><a class=\"markdownIt-Anchor\" href=\"#repeat\">#</a> REPEAT</h4>\n<p>语法：<mark>[标签：] REPEAT</mark></p>\n<p>​\t\t\t\t<mark>循环体</mark></p>\n<p>​\t\t\t<mark>UNTIL 结束循环的条件</mark></p>\n<p>​\t\t\t<mark>END REPEAT [标签：]</mark></p>\n<h4 id=\"循环控制\"><a class=\"markdownIt-Anchor\" href=\"#循环控制\">#</a> 循环控制</h4>\n<ul>\n<li><mark>ITERATE</mark>：结束本次循环，继续下一次</li>\n<li><mark>LEAVE</mark>：结束当前循环</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 批量插入<br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test(<span class=\"hljs-keyword\">IN</span> times <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">DECLARE</span> i <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\tWHILE i <span class=\"hljs-operator\">&lt;=</span> times DO<br>\t\t<span class=\"hljs-keyword\">INSERT INTO</span> admin(`user_name`, `password`)<br>\t\t<span class=\"hljs-keyword\">VALUES</span>(CONCAT(<span class=\"hljs-string\">&#x27;rose&#x27;</span>, i), <span class=\"hljs-string\">&#x27;666&#x27;</span>);<br>\t\t<span class=\"hljs-keyword\">SET</span> i <span class=\"hljs-operator\">=</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;<br>\t<span class=\"hljs-keyword\">END</span> WHILE;<br><span class=\"hljs-keyword\">END</span> $<br><br># 批量插入，如果次数超过<span class=\"hljs-number\">30</span>，就退出<br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test1(<span class=\"hljs-keyword\">IN</span> times <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">DECLARE</span> i <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\ttag1: WHILE i <span class=\"hljs-operator\">&lt;=</span> times DO<br>\t\t\t<span class=\"hljs-keyword\">SET</span> i <span class=\"hljs-operator\">=</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;<br>\t\t\tIF I <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">30</span> <span class=\"hljs-keyword\">THEN</span> LEAVE tag1; <span class=\"hljs-keyword\">END</span> IF; # 配合标签跳出循环<br>\t\t\t<span class=\"hljs-keyword\">INSERT INTO</span> admin(`user_name`, `password`)<br>\t\t\t<span class=\"hljs-keyword\">VALUES</span>(CONCAT(<span class=\"hljs-string\">&#x27;JACK&#x27;</span>, i), <span class=\"hljs-string\">&#x27;777&#x27;</span>);<br>\t\t  <span class=\"hljs-keyword\">END</span> WHILE tag1;<br><span class=\"hljs-keyword\">END</span> $<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"三种结构对比\"><a class=\"markdownIt-Anchor\" href=\"#三种结构对比\">#</a> 三种结构对比</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">特点</th>\n<th style=\"text-align:center\">位置</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">WHILE</td>\n<td style=\"text-align:center\">先判断后执行</td>\n<td style=\"text-align:center\">BEGIN END 之间</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">LOOP</td>\n<td style=\"text-align:center\">没有条件的死循环</td>\n<td style=\"text-align:center\">BEGIN END 之间</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">REPEAT</td>\n<td style=\"text-align:center\">先执行后判断</td>\n<td style=\"text-align:center\">BEGIN END 之间</td>\n</tr>\n</tbody>\n</table>\n<p>举例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs sql\"># 已知表stringcontent，其中字段:id 自增长，content <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">20</span>)<br># 向该表插入指定个数的，随机的字符串<br><span class=\"hljs-comment\">-- 定义存储结构</span><br>DELIMITER $<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">PROCEDURE</span> test(<span class=\"hljs-keyword\">IN</span> num <span class=\"hljs-type\">INT</span>)<br><span class=\"hljs-keyword\">BEGIN</span><br>\t<span class=\"hljs-keyword\">DECLARE</span> i <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\t<span class=\"hljs-keyword\">DECLARE</span> str <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">26</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span>;<br>\t<span class=\"hljs-keyword\">DECLARE</span> startIndex <span class=\"hljs-type\">INT</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">1</span>;<br>\tWHILE i <span class=\"hljs-operator\">&lt;=</span> num DO<br>\t\t# 产生一个随机整数，代表起始索引，范围是<span class=\"hljs-number\">1</span><span class=\"hljs-number\">-26</span><br>\t\t<span class=\"hljs-keyword\">SET</span> startIndex <span class=\"hljs-operator\">=</span> <span class=\"hljs-built_in\">FLOOR</span>(RAND() <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">26</span> <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;)<br>\t\t<span class=\"hljs-keyword\">INSERT INTO</span> stringcontent(content) <br>\t\t<span class=\"hljs-keyword\">VALUES</span>(SUBSTR(str, startIndex));# 这样其实没用做到随机，举个例子，将就下<br>\t\t<span class=\"hljs-keyword\">SET</span> i <span class=\"hljs-operator\">=</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">END</span> WHILE;<br><span class=\"hljs-keyword\">END</span> $<br><span class=\"hljs-comment\">-- 调用</span><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"完结撒花\"><a class=\"markdownIt-Anchor\" href=\"#完结撒花\">#</a> 完结撒花</h2>\n<p>本大三菜鸡终于学完 MySQL 基础了。。。。。。溜</p>\n",
            "tags": [
                "学习笔记",
                "MySQL"
            ]
        },
        {
            "id": "http://example.com/2021/11/04/JavaSE/",
            "url": "http://example.com/2021/11/04/JavaSE/",
            "title": "JavaSE",
            "date_published": "2021-11-04T14:21:51.000Z",
            "content_html": "<h1 id=\"java\"><a class=\"markdownIt-Anchor\" href=\"#java\">#</a> Java</h1>\n<h2 id=\"多线程\"><a class=\"markdownIt-Anchor\" href=\"#多线程\">#</a> 多线程</h2>\n<h3 id=\"线程同步\"><a class=\"markdownIt-Anchor\" href=\"#线程同步\">#</a> 线程同步</h3>\n<ol>\n<li>实现进程同步的三种方法</li>\n</ol>\n<ul>\n<li><strong>同步方法</strong></li>\n<li><strong>同步代码块</strong></li>\n<li><strong>ReentrantLock</strong>（JDK5.0 新增）</li>\n</ul>\n<ol start=\"2\">\n<li>三种方法的推荐优先顺序（从性能考虑）</li>\n</ol>\n<ul>\n<li><strong>ReentrantLock</strong>   &gt;   ** 同步代码块 **  &gt;   <strong>同步方法</strong></li>\n</ul>\n<h2 id=\"java常用类的概述\"><a class=\"markdownIt-Anchor\" href=\"#java常用类的概述\">#</a> Java 常用类的概述</h2>\n<h3 id=\"字符串相关的类\"><a class=\"markdownIt-Anchor\" href=\"#字符串相关的类\">#</a> 字符串相关的类</h3>\n<h4 id=\"string\"><a class=\"markdownIt-Anchor\" href=\"#string\">#</a> String</h4>\n<h5 id=\"string类的基本概念\"><a class=\"markdownIt-Anchor\" href=\"#string类的基本概念\">#</a> String 类的基本概念</h5>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20210828233332312.png\" alt=\"\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/8/28 - 23:03</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* String类的使用</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StringTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 1、String：字符串，用一对&quot;&quot;引起来表示</span><br><span class=\"hljs-comment\">    * 2、String是声明为final的，不可被继承</span><br><span class=\"hljs-comment\">    * 3、String实现了Serializable接口：表示字符串是支持序列化的</span><br><span class=\"hljs-comment\">    *    String实现了Comparable接口，表示String可以比较大小</span><br><span class=\"hljs-comment\">    * 4、String内部定义了final char value[]用于存储字符串数据</span><br><span class=\"hljs-comment\">    * 5、String代表一个不可变的字符序列。简称：不可变性</span><br><span class=\"hljs-comment\">    *   体现：当对字符串重新赋值时，需要重新指定内存区域赋值，不能使用原有的value[]进行赋值</span><br><span class=\"hljs-comment\">    *        当对现有字符串进行连接操作时，也不能在原有value[]上进行拼接</span><br><span class=\"hljs-comment\">    *        当调用String的replace方法修改指定的字符或字符串时，也必须重新指定内存地址赋值</span><br><span class=\"hljs-comment\">    * 6、通过字面量的方式给字符串赋值（区别于new Sting的方式），此时的字符串值声明在字符串常量池中，</span><br><span class=\"hljs-comment\">    *    字符串常量池是不会存储相同的内容的</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc&quot;</span>;<span class=\"hljs-comment\">//字面量的定义方式</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc&quot;</span>;<br>        System.out.println(s1 == s2);<span class=\"hljs-comment\">//true, &quot;abc&quot;保存在方法区的常量池中</span><br>        s1 = <span class=\"hljs-string\">&quot;hello&quot;</span>;<br>        System.out.println(s1);<span class=\"hljs-comment\">//hello</span><br>        System.out.println(s2);<span class=\"hljs-comment\">//abc</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc&quot;</span>;<br>        s3 += <span class=\"hljs-string\">&quot;def&quot;</span>;<br>        System.out.println(s3);<span class=\"hljs-comment\">//abcdef</span><br>        System.out.println(s2);<span class=\"hljs-comment\">//abc</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s5</span> <span class=\"hljs-operator\">=</span> s4.replace(<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;m&#x27;</span>);<br>        System.out.println(s4);<span class=\"hljs-comment\">//abc</span><br>        System.out.println(s5);<span class=\"hljs-comment\">//mbc</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * String的实例化方式</span><br><span class=\"hljs-comment\">    * 1、通过字面量的方式</span><br><span class=\"hljs-comment\">    * 2、通过new + 构造器的方式</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//通过字面量的方式，此时的s1和s2的数据hello声明在方法区的字符串常量池中</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello&quot;</span>;<br>        <span class=\"hljs-comment\">//通过new + 构造器的方式，此时的s3和s4是保存的地址值，是数据在堆空间中开辟的对象的地址值</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        System.out.println(s1 == s2);<span class=\"hljs-comment\">//true</span><br>        System.out.println(s1 == s3);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s1 == s4);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s3 == s4);<span class=\"hljs-comment\">//false</span><br>        <span class=\"hljs-comment\">//**************************************</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        System.out.println(p1.name.equals(p2.name));<span class=\"hljs-comment\">//true</span><br>        System.out.println(p1.name == p2.name);<span class=\"hljs-comment\">//true，因为是使用字面量的方式声明的字符串</span><br>        <span class=\"hljs-comment\">//**************************************</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>), <span class=\"hljs-number\">12</span>);<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>), <span class=\"hljs-number\">12</span>);<br>        System.out.println(p3.name == p4.name);<span class=\"hljs-comment\">//false，因为是使用new + 构造器的方式声明的字符串</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 结论：</span><br><span class=\"hljs-comment\">    * 1、常量与常量的拼接结果在常量池，且常量池不会存在相同内容的常量</span><br><span class=\"hljs-comment\">    * 2、只要其中有一个是变量，结果就在堆中</span><br><span class=\"hljs-comment\">    * 3、如果拼接的结果调用intern()方法，返回值就在常量池中</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;javaEE&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hadoop&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;javaEEhadoop&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;javaEE&quot;</span> + <span class=\"hljs-string\">&quot;hadoop&quot;</span>;<span class=\"hljs-comment\">//常量 + 常量，结果在常量池</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s5</span> <span class=\"hljs-operator\">=</span> s1 + <span class=\"hljs-string\">&quot;hadoop&quot;</span>;<span class=\"hljs-comment\">//变量 + 常量，结果在堆</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s6</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;javaEE&quot;</span> + s2;<span class=\"hljs-comment\">//常量 + 变量，结果在堆</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s7</span> <span class=\"hljs-operator\">=</span> s1 + s2;<span class=\"hljs-comment\">//变量 + 变量，结果在堆</span><br>        System.out.println(s3 == s4);<span class=\"hljs-comment\">//true</span><br>        System.out.println(s3 == s5);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s3 == s6);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s5 == s6);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s3 == s7);<span class=\"hljs-comment\">//false</span><br>        System.out.println(s6 == s7);<span class=\"hljs-comment\">//false</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s8</span> <span class=\"hljs-operator\">=</span> s5.intern();<span class=\"hljs-comment\">//返回值得到的s8使用的是常量池中已经存在的&quot;javaEEhadoop&quot;</span><br>        System.out.println(s3 == s8);<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello world&quot;</span>;<br>        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello &quot;</span>;<span class=\"hljs-comment\">//str1是常量</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str2</span> <span class=\"hljs-operator\">=</span> str1 + <span class=\"hljs-string\">&quot;world&quot;</span>;<br>        System.out.println(str == str2);<span class=\"hljs-comment\">//true,因为str1加了final，所以是常量！！</span><br>    &#125;<br><br><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">change</span><span class=\"hljs-params\">(String str, <span class=\"hljs-type\">char</span>[] ch)</span>&#123;<br>        str = <span class=\"hljs-string\">&quot;test ok&quot;</span>;<br>        ch[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-string\">&#x27;b&#x27;</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 一道恶心的面试题</span><br><span class=\"hljs-comment\">    * 考察String的不可变性</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;good&quot;</span>);<br>        <span class=\"hljs-type\">char</span>[] ch = &#123; <span class=\"hljs-string\">&#x27;t&#x27;</span>, <span class=\"hljs-string\">&#x27;e&#x27;</span>, <span class=\"hljs-string\">&#x27;s&#x27;</span>, <span class=\"hljs-string\">&#x27;t&#x27;</span>&#125;;<br>        change(str, ch);<br>        System.out.print(str);<span class=\"hljs-comment\">//good</span><br>        System.out.println(ch);<span class=\"hljs-comment\">//best</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h5 id=\"string类的常用api\"><a class=\"markdownIt-Anchor\" href=\"#string类的常用api\">#</a> String 类的常用 API</h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.UnsupportedEncodingException;<br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.Locale;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/8 - 11:17</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* String类常用API</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StringMethodTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 较高频率的方法</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;Hello World&quot;</span>;<br>        System.out.println(s1.length());<span class=\"hljs-comment\">//length()</span><br>        System.out.println(s1.charAt(<span class=\"hljs-number\">0</span>));<span class=\"hljs-comment\">//charAt()</span><br>        System.out.println(s1.isEmpty());<span class=\"hljs-comment\">//isEmpty()，返回str.length() == 0</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> s1.toLowerCase();<span class=\"hljs-comment\">//toLowerCase()，返回新建的小写值</span><br>        System.out.println(s1);<span class=\"hljs-comment\">//s1的值没有改变（不可变性）</span><br>        System.out.println(s2);<span class=\"hljs-comment\">//hello world</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> s1.toUpperCase();<span class=\"hljs-comment\">//toUpperCase(),返回新建的大写值</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;   he  llo   world    &quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s5</span> <span class=\"hljs-operator\">=</span> s3.trim();<span class=\"hljs-comment\">//trim(),返回去除首尾空格后的字符串值（中间的空格不去除）</span><br>        System.out.println(s3);<span class=\"hljs-comment\">//s3本身不改变</span><br>        System.out.println(s4);<br>        System.out.println(s1.equals(s2));<span class=\"hljs-comment\">//equals()，判断字符串是否相等</span><br>        System.out.println(s1.equalsIgnoreCase(s2));<span class=\"hljs-comment\">//equalsIgnoreCase()，判断字符串是否相等，忽略大小写</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s6</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s7</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;def&quot;</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s8</span> <span class=\"hljs-operator\">=</span> s6.concat(s7);<span class=\"hljs-comment\">//concat()，效果和 + 一样</span><br>        System.out.println(s8);<span class=\"hljs-comment\">//abcdef</span><br>        System.out.println(s6.compareTo(s7));<span class=\"hljs-comment\">//compareTo()，字符串比大小</span><br>        System.out.println(s1.substring(<span class=\"hljs-number\">0</span>)) ;<span class=\"hljs-comment\">//substring(int index),取从index开始的子符串</span><br>        System.out.println(s1.substring(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>)) ;<span class=\"hljs-comment\">//substring(int start, int end),取 [start, end) 的子符串</span><br><br>    &#125;<br><br>    <span class=\"hljs-comment\">//</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello world&quot;</span>;<br>        System.out.println(s1.endsWith(<span class=\"hljs-string\">&quot;world&quot;</span>));<span class=\"hljs-comment\">//endsWith(String str),判断字符串是否以str结尾</span><br>        System.out.println(s1.startsWith(<span class=\"hljs-string\">&quot;he&quot;</span>));<span class=\"hljs-comment\">//startsWith(String str),判断字符串是否以str开头</span><br>        System.out.println(s1.startsWith(<span class=\"hljs-string\">&quot;He&quot;</span>));<span class=\"hljs-comment\">//false，区分大小写</span><br>        s1.startsWith(<span class=\"hljs-string\">&quot;ll&quot;</span>,<span class=\"hljs-number\">2</span>);<span class=\"hljs-comment\">//startsWith(String str, int index)，判断字符串从index开始是否以str开头</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;wo&quot;</span>;<br>        System.out.println(s1.contains(s2));<span class=\"hljs-comment\">//contains(String str),判断字符串是否包含str</span><br>        System.out.println(s1.indexOf(<span class=\"hljs-string\">&quot;lo&quot;</span>));<span class=\"hljs-comment\">//indexOf(String str),返回字符串第一次出现str的索引，没有则返回-1</span><br>        System.out.println(s1.indexOf(<span class=\"hljs-string\">&quot;ll&quot;</span>, <span class=\"hljs-number\">1</span>));<span class=\"hljs-comment\">//indexOf(String str, int startIndex)</span><br>                                                <span class=\"hljs-comment\">// 返回从startIndex开始的str的索引，没有则返回-1</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hellorworld&quot;</span>;<br>        System.out.println(s3.lastIndexOf(<span class=\"hljs-string\">&quot;or&quot;</span>));<span class=\"hljs-comment\">//lastIndexOf(String str)，返回从后往前找的第一个str的索引位置</span><br>        System.out.println(s3.lastIndexOf(<span class=\"hljs-string\">&quot;or&quot;</span>, <span class=\"hljs-number\">6</span>));<span class=\"hljs-comment\">//lastIndexOf(String str, int fromIndex)，</span><br>                                                    <span class=\"hljs-comment\">//从fromIndex从右往前找，返回第一个str的索引位置</span><br><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 有关替换的方法</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;hello world ll&quot;</span>;<br>        System.out.println(s1.replace(<span class=\"hljs-string\">&#x27;l&#x27;</span>, <span class=\"hljs-string\">&#x27;g&#x27;</span>));<span class=\"hljs-comment\">//将所有oldChar替换成newChar</span><br>        System.out.println(s1);<span class=\"hljs-comment\">//s1没有被改变</span><br>        System.out.println(s1.replace(<span class=\"hljs-string\">&quot;ll&quot;</span>, <span class=\"hljs-string\">&quot;hh&quot;</span>));<span class=\"hljs-comment\">//也可以替换字符串（全部替换）</span><br>        <span class=\"hljs-comment\">//replaceAll()，正则表达式的地方再讲</span><br>        <span class=\"hljs-comment\">//replaceFirst()，正则表达式的地方再讲</span><br>        <span class=\"hljs-comment\">//matches()，判断str是否和正则表达式符合</span><br>        <span class=\"hljs-comment\">//split()，以正则表达式切割，返回String[]</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * String与基本数据类型、包装类之间的转换</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//String --&gt; 基本数据类型</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;123&quot;</span>;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">n1</span> <span class=\"hljs-operator\">=</span> Integer.parseInt(s1);<br>        <span class=\"hljs-comment\">//基本数据类型 --&gt; String</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">12356</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> String.valueOf(num);<span class=\"hljs-comment\">//调用valueOf()方法</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s3</span> <span class=\"hljs-operator\">=</span> num + <span class=\"hljs-string\">&quot;&quot;</span>;<span class=\"hljs-comment\">//使用 + 运算符连接</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * String与char[]之间的转换</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//String --&gt; char[]</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc123&quot;</span>;<br>        <span class=\"hljs-type\">char</span>[] ch = str.toCharArray();<span class=\"hljs-comment\">//调用String的toCharArray()方法</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; ch.length; i++) &#123;<br>            System.out.println(ch[i]);<br>        &#125;<br>        <span class=\"hljs-comment\">//char[] --&gt; String：调用String的构造器</span><br>        <span class=\"hljs-type\">char</span>[] ch2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[]&#123;<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;g&#x27;</span>&#125;;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(ch2);<span class=\"hljs-comment\">//构造器</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * String与byte[]之间的转换</span><br><span class=\"hljs-comment\">    *</span><br><span class=\"hljs-comment\">    * 编码：字符串 --&gt; 字节</span><br><span class=\"hljs-comment\">    * 解码：字节 --&gt; 字符串</span><br><span class=\"hljs-comment\">    * UTF-8字符集中，一个汉字对应三个字节</span><br><span class=\"hljs-comment\">    * GBK字符集中，一个汉字对应两个字节</span><br><span class=\"hljs-comment\">    * 说明：解码时，要求解码使用的字符集必须与编码时使用的字符集一致，否则会出现乱码</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//编码：String --&gt; byte[]</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc123中国&quot;</span>;<br>        <span class=\"hljs-type\">byte</span>[] bytes = str1.getBytes();<span class=\"hljs-comment\">//使用默认字符集进行编码（默认utf-8）</span><br>        System.out.println(Arrays.toString(bytes));<br>        <span class=\"hljs-type\">byte</span>[] bytes1 = <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            bytes1 = str1.getBytes(<span class=\"hljs-string\">&quot;gbk&quot;</span>);<span class=\"hljs-comment\">//使用指定字符集进行转换</span><br>            System.out.println(Arrays.toString(bytes1));<br>        &#125; <span class=\"hljs-keyword\">catch</span> (UnsupportedEncodingException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">//解码：byte[]  --&gt; String：调用String构造器</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes);<span class=\"hljs-comment\">//使用默认字符集进行解码（默认utf-8）</span><br>        System.out.println(s);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes1);<br>        System.out.println(s1);<span class=\"hljs-comment\">//使用gbk编码，却使用utf-8解码，会乱码</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">gbk</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes1, <span class=\"hljs-string\">&quot;gbk&quot;</span>);<span class=\"hljs-comment\">//使用对应解码方法解码</span><br>            System.out.println(gbk);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (UnsupportedEncodingException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h5 id=\"关于string的算法练习\"><a class=\"markdownIt-Anchor\" href=\"#关于string的算法练习\">#</a> 关于 String 的算法练习</h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/10 - 16:03</span><br><span class=\"hljs-comment\"> */</span><br><br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StringExer</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 习题一：获取一个字符串在另一个字符串中出现的次数</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">getCount</span><span class=\"hljs-params\">(String mainStr, String subStr)</span>&#123;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">mainLen</span> <span class=\"hljs-operator\">=</span> mainStr.length();<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">subLen</span> <span class=\"hljs-operator\">=</span> subStr.length();<br>        <span class=\"hljs-keyword\">if</span>(mainLen &lt; subLen)&#123;<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>        &#125;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">count</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">index</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 使用indexOf方法，若上一次目标字符串出现的位置为index，则</span><br><span class=\"hljs-comment\">        * 下一次从index + subLen开始找，直到indexOf返回-1为止</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-keyword\">while</span>((index = mainStr.indexOf(subStr, index)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            count++;<br>            index +=subLen;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> count;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 习题二：获取两个字符串中的最大相同字串</span><br><span class=\"hljs-comment\">    * 目前假设只有一个最大相同子串，之后讲到集合的时候，可以改进</span><br><span class=\"hljs-comment\">    * 思路：将短的字符串进行长度依次递减的字串与较长的字串比较</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getMaxSameString</span><span class=\"hljs-params\">(String str1, String str2)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(str1 == <span class=\"hljs-literal\">null</span> || str2 == <span class=\"hljs-literal\">null</span>)&#123;<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>        &#125;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">maxStr</span> <span class=\"hljs-operator\">=</span> (str1.length() &gt;= str2.length()) ? str1 : str2;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">minStr</span> <span class=\"hljs-operator\">=</span> (str1.length() &lt; str2.length()) ? str1 : str2;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">len</span> <span class=\"hljs-operator\">=</span> minStr.length();<br>        <span class=\"hljs-comment\">//滑动窗口法</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; len ; i++) &#123;<br>            <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">start</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>, end = len - i; end &lt;= len; start++, end++)&#123;<span class=\"hljs-comment\">//关键点</span><br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">subStr</span> <span class=\"hljs-operator\">=</span> minStr.substring(start, end);<br>                <span class=\"hljs-keyword\">if</span>(maxStr.contains(subStr))&#123;<br>                    <span class=\"hljs-keyword\">return</span> subStr;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"stringbuffer-stringbuilder\"><a class=\"markdownIt-Anchor\" href=\"#stringbuffer-stringbuilder\">#</a> StringBuffer、StringBuilder</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/9 - 11:05</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 关于StringBuffer和StringBuilder类的使用</span><br><span class=\"hljs-comment\">* 对比StringBuffer，StringBuilder，String的效率</span><br><span class=\"hljs-comment\">*       答：StringBuilder &gt; StringBuffer &gt; String</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StringBuffer_StringBuilderTest</span> &#123;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * String,StringBuffer,StringBuilder之间的区别？</span><br><span class=\"hljs-comment\">    * String:不可变；底层使用final char[]存储</span><br><span class=\"hljs-comment\">    * StringBuffer：可变，效率有点低，线程安全；底层使用char[]存储</span><br><span class=\"hljs-comment\">    * StringBuilder：可变，jdk5.0新增效率比StringBuffer高，线程不安全；底层使用char[]存储</span><br><span class=\"hljs-comment\">    *</span><br><span class=\"hljs-comment\">    * 源码分析：</span><br><span class=\"hljs-comment\">    * String str1 = new String();//底层：new char[0];</span><br><span class=\"hljs-comment\">    * String str2 = new String(&quot;abc&quot;);//底层：new char[]&#123;&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;&#125;;</span><br><span class=\"hljs-comment\">    * StringBuffer str3 = new StringBuffer();//char[] value = new char[16];底层创建了一个长度是16的数组</span><br><span class=\"hljs-comment\">    * str3.append(&#x27;a&#x27;);//value[0] = &#x27;a&#x27;;</span><br><span class=\"hljs-comment\">    * str3.append(&#x27;b&#x27;);//value[1] = &#x27;b&#x27;;</span><br><span class=\"hljs-comment\">    * StringBuffer sb2 = new StringBuffer(&quot;abc&quot;);//char[] value1 = new char[3 + 16];</span><br><span class=\"hljs-comment\">    *                                               底层创建了长度是”abc“.length()+16的数组</span><br><span class=\"hljs-comment\">    * 问题1：sb2.length()的输出是3</span><br><span class=\"hljs-comment\">    * 问题2：扩容问题：如果要添加的数据底层数组盛不下了，就需要扩容低层的数组</span><br><span class=\"hljs-comment\">    *                默认情况下扩容位原来容量的2倍 + 2，同时将原有数组中的元素复制到新的数组中</span><br><span class=\"hljs-comment\">    *       指导意义：开发中建议使用StringBuffer(int capacity)或StringBuilder(int capacity)指定数组容量，</span><br><span class=\"hljs-comment\">    *                避免多次扩容，导致效率降低</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">StringBuffer</span> <span class=\"hljs-variable\">sb1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuffer</span>(<span class=\"hljs-string\">&quot;abc&quot;</span>);<br>        sb1.setCharAt(<span class=\"hljs-number\">0</span>,<span class=\"hljs-string\">&#x27;m&#x27;</span>);<span class=\"hljs-comment\">//sb1本身被改变</span><br>        System.out.println(sb1);<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * StringBuffer,StringBuilder中新增的方法，以StringBuffer为例</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">StringBuffer</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuffer</span>(<span class=\"hljs-string\">&quot;abc&quot;</span>);<br>        s1.append(<span class=\"hljs-number\">1</span>);<span class=\"hljs-comment\">//append()</span><br>        s1.append(<span class=\"hljs-string\">&#x27;1&#x27;</span>);<br>        s1.append(<span class=\"hljs-string\">&quot;1&quot;</span>);<span class=\"hljs-comment\">//结果都是在末尾加上字符1</span><br>        System.out.println(s1);<br>        s1.delete(<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">4</span>);<span class=\"hljs-comment\">//delete(int start, int end),删除[start, end)之间的字符串</span><br>        s1.replace(<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-string\">&quot;hello&quot;</span>);<span class=\"hljs-comment\">//replace(start, end, str)，将[start, end)之间的字符串换成str</span><br>        s1.insert(<span class=\"hljs-number\">0</span>,<span class=\"hljs-string\">&quot;world&quot;</span>);<span class=\"hljs-comment\">//insert(int index,str)，在指定位置插入</span><br>        System.out.println(s1);<br>        s1.reverse();<span class=\"hljs-comment\">//reverse()，字符串逆序</span><br>        <span class=\"hljs-comment\">//substring()，取字串</span><br>        <span class=\"hljs-comment\">//length()</span><br>        <span class=\"hljs-comment\">//charAt()</span><br>        <span class=\"hljs-comment\">//setCharAt(int index, char ch)修改指定位置字符</span><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 总结：关注以下几个方法</span><br><span class=\"hljs-comment\">        * 增：append</span><br><span class=\"hljs-comment\">        * 删：delete</span><br><span class=\"hljs-comment\">        * 改：replace, setCharAt</span><br><span class=\"hljs-comment\">        * 查：substring, charAt</span><br><span class=\"hljs-comment\">        * 长度：length</span><br><span class=\"hljs-comment\">        * 遍历：toString, for + charAt</span><br><span class=\"hljs-comment\">        * */</span><br>    &#125;<br>    <br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 面试题</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">StringBuffer</span> <span class=\"hljs-variable\">sb</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuffer</span>();<br>        sb.append(str);<span class=\"hljs-comment\">//不报错</span><br>        System.out.println(sb.length());<span class=\"hljs-comment\">//4</span><br>        System.out.println(sb);<span class=\"hljs-comment\">//&quot;null&quot;，实际上是把str当成字符串”null“加入了sb</span><br>        <span class=\"hljs-type\">StringBuffer</span> <span class=\"hljs-variable\">sb1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuffer</span>(str);<span class=\"hljs-comment\">//报错，空指针异常</span><br>        \t\t\t\t\t\t\t\t\t\t <span class=\"hljs-comment\">//因为构造器会调用str.length()方法，这里导致空指针</span><br>        System.out.println(sb1);<span class=\"hljs-comment\">//执行不到此处，上方异常未处理</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"jdk8之前的时间api\"><a class=\"markdownIt-Anchor\" href=\"#jdk8之前的时间api\">#</a> JDK8 之前的时间 API</h3>\n<h4 id=\"system静态方法\"><a class=\"markdownIt-Anchor\" href=\"#system静态方法\">#</a> System 静态方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//1、System类中的currentTimeMillis()</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>        <span class=\"hljs-comment\">//返回当前时间与1970年1月1日0时0分0秒之间以毫秒为单位的时间差</span><br>        <span class=\"hljs-comment\">//成为时间戳</span><br>        System.out.println(time);<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"date类\"><a class=\"markdownIt-Anchor\" href=\"#date类\">#</a> Date 类</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Date;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/9 - 17:16</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* JDK 8之前日期和时间的API测试</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DateTimeTest</span> &#123;<br>    <span class=\"hljs-comment\">//1、System类中的currentTimeMillis()</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">time</span> <span class=\"hljs-operator\">=</span> System.currentTimeMillis();<br>        <span class=\"hljs-comment\">//返回当前时间与1970年1月1日0时0分0秒之间以毫秒为单位的时间差</span><br>        <span class=\"hljs-comment\">//成为时间戳</span><br>        System.out.println(time);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*+</span><br><span class=\"hljs-comment\">    * java.util.Date类</span><br><span class=\"hljs-comment\">    *       | --- java.sql.Date类</span><br><span class=\"hljs-comment\">    * 1、两个构造器的使用</span><br><span class=\"hljs-comment\">    * 2、两个方法的使用</span><br><span class=\"hljs-comment\">    *      &gt; toString():显示当前的年月日时分秒</span><br><span class=\"hljs-comment\">    *      &gt; getTime()：获取当前Date对象对应的时间戳</span><br><span class=\"hljs-comment\">    * 3、java.sql.Date对应数据库中的日期变量，和数据库交互时才会用到</span><br><span class=\"hljs-comment\">    *      &gt; 如何实例化</span><br><span class=\"hljs-comment\">    *           &gt; java.sql.Date date = new java.sql.Date(long date);</span><br><span class=\"hljs-comment\">    *      &gt; 如何将java.util.Date转换成java.sql.Date对象？</span><br><span class=\"hljs-comment\">    *           &gt;方法一：强转（会报错）</span><br><span class=\"hljs-comment\">    *           &gt;方法二：java.sql.Date date = new java.sql.Date(new java.util.Date().getTime());通过时间戳</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//构造器一，Date()，创建一个对应当前时间的Date对象</span><br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();<br>        System.out.println(date1);<span class=\"hljs-comment\">//Thu Sep 09 17:23:49 CST 2021</span><br>        System.out.println(date1.getTime());<span class=\"hljs-comment\">//获取当前Date对象对应的时间戳</span><br>        <span class=\"hljs-comment\">//构造器二，Date(long date)，创建指定毫秒数的Date对象</span><br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-number\">1631179672631L</span>);<br>        System.out.println(date1);<br>        System.out.println(date1.getTime());<br>        <span class=\"hljs-comment\">//创建java.sql.Date类对象</span><br>        java.sql.<span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">java</span>.sql.Date(<span class=\"hljs-number\">1631179672631L</span>);<br>        System.out.println(date2);<span class=\"hljs-comment\">//2021-09-09</span><br>        System.out.println(date2.getTime());<span class=\"hljs-comment\">//1631179672631</span><br><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"calendar类\"><a class=\"markdownIt-Anchor\" href=\"#calendar类\">#</a> Calendar 类</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs JAVA\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * java.util.Calendar类（日历类，抽象类）的使用</span><br><span class=\"hljs-comment\">    * 注意：获取月份时，1月是0，二月是1，以此类推，12月是11</span><br><span class=\"hljs-comment\">    * \t   获取星期时，周日是1，周一是2，以此类推，周六是7</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span>  <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//实例化</span><br>        <span class=\"hljs-comment\">//方式一：创建其子类的对象</span><br>        <span class=\"hljs-comment\">//方式二：调用其静态方法getInstance()方法</span><br>        <span class=\"hljs-type\">Calendar</span> <span class=\"hljs-variable\">calendar</span> <span class=\"hljs-operator\">=</span> Calendar.getInstance();<span class=\"hljs-comment\">//返回的是java.util.GregorianCalendar类对象</span><br>                                                <span class=\"hljs-comment\">//对应当前时间</span><br><br>        <span class=\"hljs-comment\">//常用方法：</span><br>        <span class=\"hljs-comment\">//get()</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">days</span> <span class=\"hljs-operator\">=</span> calendar.get(Calendar.DAY_OF_MONTH);<span class=\"hljs-comment\">//今天是这个月的第几天</span><br>        System.out.println(days);<span class=\"hljs-comment\">//13</span><br>        System.out.println(calendar.get(Calendar.DAY_OF_YEAR));<span class=\"hljs-comment\">//今天是今年的第几天,256</span><br>        <span class=\"hljs-comment\">//set()</span><br>        calendar.set(Calendar.DAY_OF_MONTH, <span class=\"hljs-number\">22</span>);<span class=\"hljs-comment\">//calendar类对象本身的信息被修改（类信息改成当前是这个月的第22天）</span><br>        <span class=\"hljs-comment\">//add()</span><br>        calendar.add(Calendar.DAY_OF_MONTH,<span class=\"hljs-number\">3</span>);<span class=\"hljs-comment\">//在现有这个月的第几天上，加了三天，变成第25天</span><br>        <span class=\"hljs-comment\">//getTime()，用于日历类 --&gt; Date类</span><br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> calendar.getTime();<br>        System.out.println(date);<br>        <span class=\"hljs-comment\">//setTime()，用于Date --&gt; 日历类</span><br>        calendar.setTime(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>());<br>        System.out.println(calendar.get(Calendar.DAY_OF_MONTH));<br><br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"simpledateformat类\"><a class=\"markdownIt-Anchor\" href=\"#simpledateformat类\">#</a> SimpleDateFormat 类</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.text.ParseException;<br><span class=\"hljs-keyword\">import</span> java.text.SimpleDateFormat;<br><span class=\"hljs-keyword\">import</span> java.util.Date;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/10 - 17:36</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* JDK8之前的时间API测试</span><br><span class=\"hljs-comment\">* 1、System类中currentTimeMillis();</span><br><span class=\"hljs-comment\">* 2、java.util.Date和其子类java.sql.Date</span><br><span class=\"hljs-comment\">* 3、SimpleDateFormat</span><br><span class=\"hljs-comment\">* 4、Calendar</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DateTimeTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * SimpleDateFormat的使用：SimpleDateFormat对日期Date类的格式化和解析</span><br><span class=\"hljs-comment\">    * 1、两个操作</span><br><span class=\"hljs-comment\">    *   1.1 格式化：日期 --&gt; 字符串</span><br><span class=\"hljs-comment\">    *   1.2 解析：字符串 --&gt; 日期</span><br><span class=\"hljs-comment\">    * 2、SimpleDateFormat的实例化</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//实例化SimpleDateFormat：使用默认构造器</span><br>        <span class=\"hljs-type\">SimpleDateFormat</span> <span class=\"hljs-variable\">sdf</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SimpleDateFormat</span>();<br>        <span class=\"hljs-comment\">//格式化：日期 --&gt; 字符串</span><br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();<br>        System.out.println(date);<span class=\"hljs-comment\">//Fri Sep 10 17:42:39 CST 2021</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format</span> <span class=\"hljs-operator\">=</span> sdf.format(date);<span class=\"hljs-comment\">//格式化返回的是字符串</span><br>        System.out.println(format);<span class=\"hljs-comment\">//21-9-10 下午5:42</span><br>        <span class=\"hljs-comment\">//解析：字符串 --&gt; 日期</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;21-9-12 上午1:00&quot;</span>;<br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            date1 = sdf.parse(str);<span class=\"hljs-comment\">//parse方法会抛出异常，需要try-catch</span><br>            System.out.println(date1);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ParseException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">            实例化SimpleDateFormat：使用带参数的构造器（可以去API里面找）</span><br><span class=\"hljs-comment\">            指定的构造器可以使用指定的格式进行格式化和解析</span><br><span class=\"hljs-comment\">        */</span><br>        <span class=\"hljs-type\">SimpleDateFormat</span> <span class=\"hljs-variable\">sdf1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SimpleDateFormat</span>(<span class=\"hljs-string\">&quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format1</span> <span class=\"hljs-operator\">=</span> sdf1.format(date);<br>        System.out.println(format1);<span class=\"hljs-comment\">//02021.九月.12 公元 01:07 上午</span><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        *   几个常用的格式:</span><br><span class=\"hljs-comment\">        *   y：年</span><br><span class=\"hljs-comment\">        *   M：月</span><br><span class=\"hljs-comment\">        *   d：日</span><br><span class=\"hljs-comment\">        *   h：时</span><br><span class=\"hljs-comment\">        *   m：分</span><br><span class=\"hljs-comment\">        *   s：秒</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">SimpleDateFormat</span> <span class=\"hljs-variable\">sdf2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SimpleDateFormat</span>(<span class=\"hljs-string\">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);<span class=\"hljs-comment\">//开发中喜欢用这种</span><br>        System.out.println(sdf2.format(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>()));<span class=\"hljs-comment\">//2021-09-12 01:11:25</span><br>        <span class=\"hljs-comment\">//解析，必须使用创建该对象时指定的格式</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//sdf2只能识别&quot;yyyy-MM-dd hh:mm:ss&quot;格式的时间</span><br>            <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date2</span> <span class=\"hljs-operator\">=</span> sdf2.parse(<span class=\"hljs-string\">&quot;2020-01-02 23:32:11&quot;</span>);<br>            System.out.println(date2);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ParseException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 练习一：字符串”2020-09-08“转换成java.sql.Date类</span><br><span class=\"hljs-comment\">    * 练习二：从1990-01-01开始，”三天打鱼，两天晒网“。问之后的某年某月某日，渔夫是在打鱼，还是在晒网</span><br><span class=\"hljs-comment\">    *        思路：先求得题目日期距离1990-01-01年有多少天，然后取模5运算</span><br><span class=\"hljs-comment\">    *             总天数求法：利用天数求得时间戳，二者相减。</span><br><span class=\"hljs-comment\">    *             总天数 = (date1.getTime() - date2.getTime()) / (1000 * 60 *60 *24) + 1</span><br><span class=\"hljs-comment\">    *             总天数 % 5 == 0，4 在晒网</span><br><span class=\"hljs-comment\">    *             总天数 % 5 == 1，2，3 在打鱼</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">SimpleDateFormat</span> <span class=\"hljs-variable\">sdf</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SimpleDateFormat</span>(<span class=\"hljs-string\">&quot;yyyy-MM-dd&quot;</span>);<br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>           date = sdf.parse(<span class=\"hljs-string\">&quot;2020-09-08&quot;</span>);<br>            System.out.println(date);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ParseException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        java.sql.<span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">birthDate</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">java</span>.sql.Date(date.getTime());<span class=\"hljs-comment\">//java.sql.Date类的带参构造器</span><br>        System.out.println(birthDate);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"jdk8中新日期时间api\"><a class=\"markdownIt-Anchor\" href=\"#jdk8中新日期时间api\">#</a> JDK8 中新日期时间 API</h3>\n<h5 id=\"jdk8时间api出现的原因\"><a class=\"markdownIt-Anchor\" href=\"#jdk8时间api出现的原因\">#</a> JDK8 时间 API 出现的原因</h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JDK8DateTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * java.util.Date类的缺点（JDK8时间API出现的原因）:</span><br><span class=\"hljs-comment\">    * 1、偏移性：时间是从1900年开始的，月份是从0开始的</span><br><span class=\"hljs-comment\">    * 2、格式化(SimpleDateFormat)只对Date有用，Calendar则不行</span><br><span class=\"hljs-comment\">    * 3、不是线程安全的</span><br><span class=\"hljs-comment\">    * 4、不能处理闰秒</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//按照偏移性，表示2021年9月13日应该这样表示</span><br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-number\">2021</span> - <span class=\"hljs-number\">1900</span>, <span class=\"hljs-number\">9</span> - <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">13</span>);<span class=\"hljs-comment\">//此方法已过时</span><br>        System.out.println(date);<span class=\"hljs-comment\">//Mon Sep 13 00:00:00 CST 2021</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"localdate-localtime-localdatetime\"><a class=\"markdownIt-Anchor\" href=\"#localdate-localtime-localdatetime\">#</a> LocalDate、LocalTime、LocalDateTime</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * LocalDate、LocalTime、LocalDateTime类的使用</span><br><span class=\"hljs-comment\">    * 说明：</span><br><span class=\"hljs-comment\">    *   1、LocalDateTime类使用比其他两个类较多</span><br><span class=\"hljs-comment\">    *   2、类似于Calendar</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 实例化</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-comment\">//now()：获取当前的日期、时间、日期时间</span><br>        <span class=\"hljs-type\">LocalDate</span> <span class=\"hljs-variable\">localDate</span> <span class=\"hljs-operator\">=</span> LocalDate.now();<span class=\"hljs-comment\">//静态方法</span><br>        <span class=\"hljs-type\">LocalTime</span> <span class=\"hljs-variable\">localTime</span> <span class=\"hljs-operator\">=</span> LocalTime.now();<br>        <span class=\"hljs-type\">LocalDateTime</span> <span class=\"hljs-variable\">localDateTime</span> <span class=\"hljs-operator\">=</span> LocalDateTime.now();<br>        System.out.println(localDate);<span class=\"hljs-comment\">//2021-09-20</span><br>        System.out.println(localTime);<span class=\"hljs-comment\">//22:17:04.923</span><br>        System.out.println(localDateTime);<span class=\"hljs-comment\">//2021-09-20T22:17:04.923</span><br>        <span class=\"hljs-comment\">//of():不用考虑偏移量</span><br>        <span class=\"hljs-type\">LocalDateTime</span> <span class=\"hljs-variable\">localDateTime1</span> <span class=\"hljs-operator\">=</span> LocalDateTime.of(<span class=\"hljs-number\">2021</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">20</span>);<br>        <span class=\"hljs-comment\">//2021年9月20日22时20分</span><br>        System.out.println(localDateTime1);<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * getXxx()：以LocalDateTime类为例（三各类都有共同方法），获取相关的属性</span><br><span class=\"hljs-comment\">        * */</span><br>        System.out.println(localDateTime.getDayOfMonth());<span class=\"hljs-comment\">//20</span><br>        System.out.println(localDateTime.getDayOfWeek());<span class=\"hljs-comment\">//MONDAY</span><br>        System.out.println(localDateTime.getDayOfYear());<span class=\"hljs-comment\">//263</span><br>        System.out.println(localDateTime.getMonth());<span class=\"hljs-comment\">//SEPTEMBER</span><br>        System.out.println(localDateTime.getMonthValue());<span class=\"hljs-comment\">//9</span><br>        System.out.println(localDateTime.getMinute());<span class=\"hljs-comment\">//23</span><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * withXxx()：类似于set方法，设置相关的属性</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">LocalDateTime</span> <span class=\"hljs-variable\">localDateTime2</span> <span class=\"hljs-operator\">=</span> localDateTime.withDayOfMonth(<span class=\"hljs-number\">22</span>);<span class=\"hljs-comment\">//此方法设置日期</span><br>        System.out.println(localDateTime);<span class=\"hljs-comment\">//不可变性，localDateTime未改变</span><br>        System.out.println(localDateTime2);<br><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 加减操作</span><br><span class=\"hljs-comment\">        * 加：plusXxx()</span><br><span class=\"hljs-comment\">        * 减：minusXxx()</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">LocalDateTime</span> <span class=\"hljs-variable\">localDateTime3</span> <span class=\"hljs-operator\">=</span> localDateTime.plusDays(<span class=\"hljs-number\">1</span>);<span class=\"hljs-comment\">//不可变性</span><br>        System.out.println(localDateTime);<br>        System.out.println(localDateTime3);<br><span class=\"hljs-comment\">//        localDateTime.minusXxx()</span><br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"instant\"><a class=\"markdownIt-Anchor\" href=\"#instant\">#</a> Instant</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.time.Instant;<br><span class=\"hljs-keyword\">import</span> java.time.OffsetDateTime;<br><span class=\"hljs-keyword\">import</span> java.time.ZoneOffset;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/20 - 22:41</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">InstantTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * Instant类的使用</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//now()：获取本初子午线对应的标准时间</span><br>        <span class=\"hljs-type\">Instant</span> <span class=\"hljs-variable\">instant</span> <span class=\"hljs-operator\">=</span> Instant.now();<span class=\"hljs-comment\">//静态方法</span><br>        System.out.println(instant);<span class=\"hljs-comment\">//2021-09-20T14:46:15.739Z，对应的是UTC时间，比北京时间晚八个小时</span><br>        <span class=\"hljs-comment\">//添加时间的偏移量</span><br>        <span class=\"hljs-type\">OffsetDateTime</span> <span class=\"hljs-variable\">offsetDateTime</span> <span class=\"hljs-operator\">=</span> instant.atOffset(ZoneOffset.ofHours(<span class=\"hljs-number\">8</span>));<br>        System.out.println(offsetDateTime);<span class=\"hljs-comment\">//2021-09-20T22:46:15.739+08:00</span><br>        <span class=\"hljs-comment\">//toEpochMilli():获取瞬时点对应自1970年1月1日0时0分的毫秒数,类似于Date类的getTime()</span><br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">l</span> <span class=\"hljs-operator\">=</span> instant.toEpochMilli();<br>        System.out.println(l);<span class=\"hljs-comment\">//1632149304356</span><br>        <span class=\"hljs-comment\">//ofEpochMilli():通过给定的毫秒数，获取Instant实例。 类似于Date(long milli)</span><br>        <span class=\"hljs-type\">Instant</span> <span class=\"hljs-variable\">instant1</span> <span class=\"hljs-operator\">=</span> Instant.ofEpochMilli(<span class=\"hljs-number\">1632149304356L</span>);<br>        System.out.println(instant1);<br>    &#125;<br><br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"datetimeformatter\"><a class=\"markdownIt-Anchor\" href=\"#datetimeformatter\">#</a> DateTimeFormatter</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.time.LocalDate;<br><span class=\"hljs-keyword\">import</span> java.time.LocalDateTime;<br><span class=\"hljs-keyword\">import</span> java.time.format.DateTimeFormatter;<br><span class=\"hljs-keyword\">import</span> java.time.format.FormatStyle;<br><span class=\"hljs-keyword\">import</span> java.time.temporal.TemporalAccessor;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/23 - 16:10</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* DateTimeFormatter类的使用</span><br><span class=\"hljs-comment\">* 1、类似于SimpleDateFormatter</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DateTimeFormatterTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//实例化方式</span><br>        <span class=\"hljs-comment\">//方式1：预定义的格式（ISO_LOCAL_DATE_TIME, ISO_LOCAL_DATE, ISO_LOCAL_TIME）</span><br>        <span class=\"hljs-type\">DateTimeFormatter</span> <span class=\"hljs-variable\">formatter</span> <span class=\"hljs-operator\">=</span> DateTimeFormatter.ISO_LOCAL_DATE_TIME;<br>        <span class=\"hljs-comment\">//格式化:日期 --&gt; 字符串</span><br>        <span class=\"hljs-type\">LocalDateTime</span> <span class=\"hljs-variable\">localDateTime</span> <span class=\"hljs-operator\">=</span> LocalDateTime.now();<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format</span> <span class=\"hljs-operator\">=</span> formatter.format(localDateTime);<br>        System.out.println(localDateTime);<span class=\"hljs-comment\">//2021-09-23T16:14:51.195</span><br>        System.out.println(format);<span class=\"hljs-comment\">//2021-09-23T16:14:51.195</span><br>        <span class=\"hljs-comment\">//解析：字符串 --&gt; 日期</span><br>        <span class=\"hljs-type\">TemporalAccessor</span> <span class=\"hljs-variable\">parse</span> <span class=\"hljs-operator\">=</span> formatter.parse(<span class=\"hljs-string\">&quot;2021-09-23T16:14:51.195&quot;</span>);<br>        System.out.println(parse);<span class=\"hljs-comment\">//&#123;&#125;,ISO resolved to 2021-09-23T16:14:51.195</span><br>        <span class=\"hljs-comment\">//实例化方式二:本地化相关的格式，如ofLocalizedDateTime(FormatStyle.LONG)</span><br>        <span class=\"hljs-comment\">//FormatStyle.LONG, FormatStyle.MEDIUM, FormatStyle.SHORT: 适用于LocalDateTime</span><br>        <span class=\"hljs-comment\">//形参不同，格式化后的格式不同</span><br>        <span class=\"hljs-type\">DateTimeFormatter</span> <span class=\"hljs-variable\">dateTimeFormatter</span> <span class=\"hljs-operator\">=</span> DateTimeFormatter.ofLocalizedDateTime(FormatStyle.SHORT);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format1</span> <span class=\"hljs-operator\">=</span> dateTimeFormatter.format(localDateTime);<br>        System.out.println(format1);<span class=\"hljs-comment\">//21-9-23 下午4:24</span><br>        <span class=\"hljs-comment\">//本地化相关的格式，ofLocalizedDate()</span><br>        <span class=\"hljs-comment\">//FormatStyle.FULL, FormatStyle.LONG, FormatStyle.MEDIUM, FormatStyle.SHORT: 适用于LocalDate</span><br>        <span class=\"hljs-type\">DateTimeFormatter</span> <span class=\"hljs-variable\">dateTimeFormatter1</span> <span class=\"hljs-operator\">=</span> DateTimeFormatter.ofLocalizedDate(FormatStyle.FULL);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format2</span> <span class=\"hljs-operator\">=</span> dateTimeFormatter1.format(LocalDate.now());<br>        System.out.println(format2);<span class=\"hljs-comment\">//2021年9月23日 星期四</span><br>        <span class=\"hljs-comment\">//重点： 实例化方式三，自定义的格式，如ofPattern(&quot;yyyy-MM-dd hh:mm:ss E &quot;)</span><br>        <span class=\"hljs-type\">DateTimeFormatter</span> <span class=\"hljs-variable\">dateTimeFormatter2</span> <span class=\"hljs-operator\">=</span> DateTimeFormatter.ofPattern(<span class=\"hljs-string\">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">format3</span> <span class=\"hljs-operator\">=</span> dateTimeFormatter2.format(LocalDateTime.now());<br>        System.out.println(format3);<span class=\"hljs-comment\">//2021-09-23 04:45:20 (十二小时制)</span><br>        <span class=\"hljs-type\">TemporalAccessor</span> <span class=\"hljs-variable\">parse1</span> <span class=\"hljs-operator\">=</span> dateTimeFormatter2.parse(<span class=\"hljs-string\">&quot;2021-09-23 04:45:20&quot;</span>);<br>        <span class=\"hljs-comment\">//&#123;SecondOfMinute=20, MinuteOfHour=45, MicroOfSecond=0, NanoOfSecond=0, HourOfAmPm=4, MilliOfSecond=0&#125;,ISO resolved to 2021-09-23</span><br>        System.out.println(parse1);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"java比较器\"><a class=\"markdownIt-Anchor\" href=\"#java比较器\">#</a> Java 比较器</h3>\n<h4 id=\"comparable接口自然排序\"><a class=\"markdownIt-Anchor\" href=\"#comparable接口自然排序\">#</a> Comparable 接口：自然排序</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/23 - 17:04</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* Java比较器</span><br><span class=\"hljs-comment\">* 一、说明：Java中的对象，正常情况下，只能进行比较 == 或 != 。 不能使用 &gt; 或 &lt; 的，但是在开发场景中，我们需要对多个对象进行</span><br><span class=\"hljs-comment\">*           排序，言外之意，就需要比较对象的大小。</span><br><span class=\"hljs-comment\">*           如何实现？使用两个接口中的任何一个：Comparable, Comparator</span><br><span class=\"hljs-comment\">* 二、Comparable接口的使用</span><br><span class=\"hljs-comment\">*</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CompareTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * Comparable使用的举例：自然排序</span><br><span class=\"hljs-comment\">    * 1、String, 包装类等实现了Comparable接口，重写了compareTo()方法，给出了比较两个对象大小的方法</span><br><span class=\"hljs-comment\">    * 2、重写compareTo()接口的规则：</span><br><span class=\"hljs-comment\">    *   如果当前对象this大于形参对象obj，则返回正整数；</span><br><span class=\"hljs-comment\">    *   如果当前对象this小于形参对象obj，则返回负整数；</span><br><span class=\"hljs-comment\">    *   如果当前对象this等于形参对象obj，则返回0。</span><br><span class=\"hljs-comment\">    * 3、 对于自定义类来说，如果需要排序，我们可以让自定义类实现Comparable接口，重写compareTo()方法</span><br><span class=\"hljs-comment\">    *   在compareTo()方法中指明如何排序</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        String[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>[]&#123;<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-string\">&quot;DD&quot;</span>, <span class=\"hljs-string\">&quot;BB&quot;</span>&#125;;<br>        Arrays.sort(arr);<span class=\"hljs-comment\">//默认从小到大排序</span><br>        System.out.println(Arrays.toString(arr));<span class=\"hljs-comment\">//[AA, BB, DD]</span><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        Goods[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>[<span class=\"hljs-number\">4</span>];<br>        arr[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;lenoveMouse&quot;</span>, <span class=\"hljs-number\">34</span>);<br>        arr[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;dellMouse&quot;</span>, <span class=\"hljs-number\">43</span>);<br>        arr[<span class=\"hljs-number\">2</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;xiaomiMouse&quot;</span>, <span class=\"hljs-number\">312</span>);<br>        arr[<span class=\"hljs-number\">3</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;huaweiMouse&quot;</span>, <span class=\"hljs-number\">65</span>);<br>        Arrays.sort(arr);<br>        System.out.println(Arrays.toString(arr));<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Goods</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Comparable</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> String name;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">double</span> price;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Goods</span><span class=\"hljs-params\">(String name, <span class=\"hljs-type\">double</span> price)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-built_in\">this</span>.price = price;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Goods</span><span class=\"hljs-params\">()</span> &#123;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getName</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> name;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setName</span><span class=\"hljs-params\">(String name)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">double</span> <span class=\"hljs-title function_\">getPrice</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> price;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setPrice</span><span class=\"hljs-params\">(<span class=\"hljs-type\">double</span> price)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.price = price;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Goods&#123;&quot;</span> +<br>                <span class=\"hljs-string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"hljs-string\">&#x27;\\&#x27;&#x27;</span> +<br>                <span class=\"hljs-string\">&quot;, price=&quot;</span> + price +<br>                <span class=\"hljs-string\">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//指明商品比较大小的方式：先按照价格从低到高排序，价格一样的按照商品名称进行排序</span><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compareTo</span><span class=\"hljs-params\">(Object o)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(o <span class=\"hljs-keyword\">instanceof</span> Goods)&#123;<br>            <span class=\"hljs-type\">Goods</span> <span class=\"hljs-variable\">goods</span> <span class=\"hljs-operator\">=</span> (Goods)o;<br>            <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">this</span>.price &gt; goods.price)&#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;<br>            &#125;<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">this</span>.price &lt; goods.price)&#123;<br>                <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>;<br>            &#125;<span class=\"hljs-keyword\">else</span>&#123;<br><span class=\"hljs-comment\">//                return 0;</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">this</span>.name.compareTo(goods.name);<span class=\"hljs-comment\">//价格一样的按照名称排序</span><br>            &#125;<br>        &#125;<br>        <span class=\"hljs-comment\">//方式二</span><br><span class=\"hljs-comment\">//        return Double.compare(this.price, goods.price);</span><br>        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;传入的数据类型不一致！&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"comparator接口定制排序\"><a class=\"markdownIt-Anchor\" href=\"#comparator接口定制排序\">#</a> Comparator 接口：定制排序</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.Comparator;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/23 - 17:46</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* java.util.Comparator接口的使用</span><br><span class=\"hljs-comment\">* 一、</span><br><span class=\"hljs-comment\">* 1、背景：</span><br><span class=\"hljs-comment\">*   当元素的类型没有实现java.lang.Comparable接口而又不方便修改代码</span><br><span class=\"hljs-comment\">*   或者实现了java.lang.Comparable接口的排序规则不适合当前的操作，</span><br><span class=\"hljs-comment\">*   那么就可以考虑使用Comparator的对象来排序</span><br><span class=\"hljs-comment\">* 2、重写compare(Object o1, Object o2)方法，比较o1和o2的大小</span><br><span class=\"hljs-comment\">*   如果方法返回正整数，则表示o1大于o2</span><br><span class=\"hljs-comment\">*   如果方法返回负整数，则表示o1小于o2</span><br><span class=\"hljs-comment\">*   如果方法返回0，则表示o1等于o2</span><br><span class=\"hljs-comment\">* 二、Comparable与Comparator的对比</span><br><span class=\"hljs-comment\">*   1、Comparable接口的方式一旦指定，保证Comparable接口实现类的对象在任何位置都可以比较大小</span><br><span class=\"hljs-comment\">*   2、Comparator接口属于临时性的比较</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CompareToTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><span class=\"hljs-comment\">//Comparator用于String类</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        String[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>[]&#123;<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-string\">&quot;DD&quot;</span>, <span class=\"hljs-string\">&quot;BB&quot;</span>&#125;;<br>        Arrays.sort(arr, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>()&#123;<br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Object o1, Object o2)</span>&#123;<br>                <span class=\"hljs-keyword\">if</span>(o1 <span class=\"hljs-keyword\">instanceof</span> String &amp;&amp; o2 <span class=\"hljs-keyword\">instanceof</span> String)&#123;<br>                    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> (String)o1;<br>                    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> (String)o2;<br>                    <span class=\"hljs-keyword\">return</span> -s1.compareTo(s2);<span class=\"hljs-comment\">//按照从大到小排</span><br>                &#125;<br>                <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;输入的数据类型不一致&quot;</span>);<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(arr));<span class=\"hljs-comment\">//[DD, BB, AA]</span><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><span class=\"hljs-comment\">//Comparator用于自定义类</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        Goods[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>[<span class=\"hljs-number\">4</span>];<br>        arr[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;lenoveMouse&quot;</span>, <span class=\"hljs-number\">34</span>);<br>        arr[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;dellMouse&quot;</span>, <span class=\"hljs-number\">43</span>);<br>        arr[<span class=\"hljs-number\">2</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;xiaomiMouse&quot;</span>, <span class=\"hljs-number\">312</span>);<br>        arr[<span class=\"hljs-number\">3</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;huaweiMouse&quot;</span>, <span class=\"hljs-number\">65</span>);<br>        Arrays.sort(arr, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;Goods&gt;() &#123;<br>            <span class=\"hljs-comment\">//按照名称从大大小排序。名称相同的按价格从大到小排序</span><br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Goods o1, Goods o2)</span> &#123;<br>                <span class=\"hljs-keyword\">if</span>(o1.getName().equals(o2.getName()))&#123;<br>                    <span class=\"hljs-keyword\">return</span> -Double.compare(o1.getPrice(), o2.getPrice());<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    <span class=\"hljs-keyword\">return</span> -o1.getName().compareTo(o2.getName());<br>                &#125;<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(arr));<br>    &#125;<br>&#125;<br><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.Comparator;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/9/23 - 17:46</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* java.util.Comparator接口的使用</span><br><span class=\"hljs-comment\">* 一、</span><br><span class=\"hljs-comment\">* 1、背景：</span><br><span class=\"hljs-comment\">*   当元素的类型没有实现java.lang.Comparable接口而又不方便修改代码</span><br><span class=\"hljs-comment\">*   或者实现了java.lang.Comparable接口的排序规则不适合当前的操作，</span><br><span class=\"hljs-comment\">*   那么就可以考虑使用Comparator的对象来排序</span><br><span class=\"hljs-comment\">* 2、重写compare(Object o1, Object o2)方法，比较o1和o2的大小</span><br><span class=\"hljs-comment\">*   如果方法返回正整数，则表示o1大于o2</span><br><span class=\"hljs-comment\">*   如果方法返回负整数，则表示o1小于o2</span><br><span class=\"hljs-comment\">*   如果方法返回0，则表示o1等于o2</span><br><span class=\"hljs-comment\">* 二、Comparable与Comparator的对比</span><br><span class=\"hljs-comment\">*   1、Comparable接口的方式一旦指定，保证Comparable接口实现类的对象在任何位置都可以比较大小</span><br><span class=\"hljs-comment\">*   2、Comparator接口属于临时性的比较</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CompareToTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><span class=\"hljs-comment\">//Comparator用于String类</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        String[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>[]&#123;<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-string\">&quot;DD&quot;</span>, <span class=\"hljs-string\">&quot;BB&quot;</span>&#125;;<br>        Arrays.sort(arr, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>()&#123;<br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Object o1, Object o2)</span>&#123;<br>                <span class=\"hljs-keyword\">if</span>(o1 <span class=\"hljs-keyword\">instanceof</span> String &amp;&amp; o2 <span class=\"hljs-keyword\">instanceof</span> String)&#123;<br>                    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s1</span> <span class=\"hljs-operator\">=</span> (String)o1;<br>                    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s2</span> <span class=\"hljs-operator\">=</span> (String)o2;<br>                    <span class=\"hljs-keyword\">return</span> -s1.compareTo(s2);<span class=\"hljs-comment\">//按照从大到小排</span><br>                &#125;<br>                <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;输入的数据类型不一致&quot;</span>);<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(arr));<span class=\"hljs-comment\">//[DD, BB, AA]</span><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><span class=\"hljs-comment\">//Comparator用于自定义类</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        Goods[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>[<span class=\"hljs-number\">4</span>];<br>        arr[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;lenoveMouse&quot;</span>, <span class=\"hljs-number\">34</span>);<br>        arr[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;dellMouse&quot;</span>, <span class=\"hljs-number\">43</span>);<br>        arr[<span class=\"hljs-number\">2</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;xiaomiMouse&quot;</span>, <span class=\"hljs-number\">312</span>);<br>        arr[<span class=\"hljs-number\">3</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Goods</span>(<span class=\"hljs-string\">&quot;huaweiMouse&quot;</span>, <span class=\"hljs-number\">65</span>);<br>        Arrays.sort(arr, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;Goods&gt;() &#123;<br>            <span class=\"hljs-comment\">//按照名称从大大小排序。名称相同的按价格从大到小排序</span><br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Goods o1, Goods o2)</span> &#123;<br>                <span class=\"hljs-keyword\">if</span>(o1.getName().equals(o2.getName()))&#123;<br>                    <span class=\"hljs-keyword\">return</span> -Double.compare(o1.getPrice(), o2.getPrice());<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    <span class=\"hljs-keyword\">return</span> -o1.getName().compareTo(o2.getName());<br>                &#125;<br>            &#125;<br>        &#125;);<br>        System.out.println(Arrays.toString(arr));<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"system类\"><a class=\"markdownIt-Anchor\" href=\"#system类\">#</a> System 类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//System类</span><br>   <span class=\"hljs-meta\">@Test</span><br>   <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>       <span class=\"hljs-comment\">//getProperty(),参数有java.version, java.home, os.name, os.version, user.name, user.dir</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;java.version&quot;</span>);<span class=\"hljs-comment\">//java版本</span><br>       System.out.println(property);<span class=\"hljs-comment\">//1.8.0_291</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property1</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;java.home&quot;</span>);<span class=\"hljs-comment\">//javahome的路径</span><br>       System.out.println(property1);<span class=\"hljs-comment\">//C:\\Program Files\\Java\\jdk1.8.0_291\\jre</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property2</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;os.name&quot;</span>);<span class=\"hljs-comment\">//系统名</span><br>       System.out.println(property2);<span class=\"hljs-comment\">//Windows 10</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property3</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;os.version&quot;</span>);<span class=\"hljs-comment\">//系统版本</span><br>       System.out.println(property3);<span class=\"hljs-comment\">//10.0</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property4</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;user.name&quot;</span>);<span class=\"hljs-comment\">//系统用户名</span><br>       System.out.println(property4);<span class=\"hljs-comment\">//邓智超</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property5</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;user.home&quot;</span>);<span class=\"hljs-comment\">//用户路径</span><br>       System.out.println(property5);<span class=\"hljs-comment\">//C:\\Users\\DzcGood</span><br>       <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">property6</span> <span class=\"hljs-operator\">=</span> System.getProperty(<span class=\"hljs-string\">&quot;user.dir&quot;</span>);<span class=\"hljs-comment\">//当前工作路径</span><br>       System.out.println(property6);<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day19</span><br>   &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"math类\"><a class=\"markdownIt-Anchor\" href=\"#math类\">#</a> Math 类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\">/Math类<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 常用方法：</span><br><span class=\"hljs-comment\">        * abs 绝对值</span><br><span class=\"hljs-comment\">        * acos, asin, atan, sin, cos, tan 三角函数</span><br><span class=\"hljs-comment\">        * sqrt 平方根</span><br><span class=\"hljs-comment\">        * pow(double a, double b) a的b次幂</span><br><span class=\"hljs-comment\">        * log 自然对数</span><br><span class=\"hljs-comment\">        * exp e为低指数</span><br><span class=\"hljs-comment\">        * max(double a, double b)</span><br><span class=\"hljs-comment\">        * min(double a, double b)</span><br><span class=\"hljs-comment\">        * random() 返回[0.0, 1.0)的随机数</span><br><span class=\"hljs-comment\">        * long round(double a) double型数据a转换为long型(四舍五入)</span><br><span class=\"hljs-comment\">        * toDegrees(double angrad) 弧度 -&gt; 角度</span><br><span class=\"hljs-comment\">        * toRadians(double angdeg) 角度 -&gt; 弧度 </span><br><span class=\"hljs-comment\">        * */</span><br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"biginteger和bigdecimal\"><a class=\"markdownIt-Anchor\" href=\"#biginteger和bigdecimal\">#</a> BigInteger 和 BigDecimal</h3>\n<blockquote>\n<p>BigInteger 和 BigDecimal 可以用来表示 long 和 double 表示不了的大数，可以任意大小，任意精度。商业计算中，要求数字精度比较高，故用到 java.math.BigDecimal。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//BigInteger和BigDecimal</span><br>  <span class=\"hljs-meta\">@Test</span><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>      <span class=\"hljs-type\">BigInteger</span> <span class=\"hljs-variable\">bi</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigInteger</span>(<span class=\"hljs-string\">&quot;12435678765432456789876543234565434567890987654345654&quot;</span>);<br>      <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">bd</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-string\">&quot;1345.54232&quot;</span>);<br>      <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">bd2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-string\">&quot;11&quot;</span>);<br>      System.out.println(bi);<br>      System.out.println(bd.divide(bd2, BigDecimal.ROUND_HALF_UP));<span class=\"hljs-comment\">//四舍五入的方式</span><br>      System.out.println(bd.divide(bd2, <span class=\"hljs-number\">25</span>, BigDecimal.ROUND_HALF_UP));<span class=\"hljs-comment\">//四舍五入的方式，保留25位小数</span><br>  &#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"枚举类\"><a class=\"markdownIt-Anchor\" href=\"#枚举类\">#</a> 枚举类</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 一、枚举类的使用</span><br><span class=\"hljs-comment\">*   1、枚举类的理解：类的对象只有有限个，确定的，我们称此类位枚举类</span><br><span class=\"hljs-comment\">*   2、当需要定义一组常量时，强烈建议使用枚举类</span><br><span class=\"hljs-comment\">*   3、如果枚举类中只有一个对象，则可以作为单例模式的实现方式</span><br><span class=\"hljs-comment\">* 二、如何定义枚举类</span><br><span class=\"hljs-comment\">*   方式一：JDK5.0之前，自定义枚举类</span><br><span class=\"hljs-comment\">*   方式二：JDK5.0之后，可以使用enum关键字定义枚举类</span><br><span class=\"hljs-comment\">* 三、Enum类的常用方法</span><br><span class=\"hljs-comment\">*   1、values()</span><br><span class=\"hljs-comment\">*   2、valueOf()</span><br><span class=\"hljs-comment\">*   3、toString()</span><br><span class=\"hljs-comment\">* 四、使用enum关键字定义的枚举类实现接口的情况</span><br><span class=\"hljs-comment\">*   1、情况一：实现接口，在enum类中实现抽象方法</span><br><span class=\"hljs-comment\">*   2、情况二:让枚举类的对象，分别去实现接口中的抽象方法</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"jdk50之前声明枚举类\"><a class=\"markdownIt-Anchor\" href=\"#jdk50之前声明枚举类\">#</a> JDK5.0 之前声明枚举类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\">/自定义枚举类<br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Season</span>&#123;<br>    <span class=\"hljs-comment\">//1、声明Season对象的属性:用private final修饰</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> String seasonName;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> String seasonDesc;<br>    <span class=\"hljs-comment\">//2、私有化类的构造器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">Season</span><span class=\"hljs-params\">(String seasonName, String seasonDesc)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.seasonName = seasonName;<br>        <span class=\"hljs-built_in\">this</span>.seasonDesc = seasonDesc;<br>    &#125;<br>    <span class=\"hljs-comment\">//3、提供当前枚举类的多个对象，声明为public static final</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">Season</span> <span class=\"hljs-variable\">SPRING</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Season</span>(<span class=\"hljs-string\">&quot;春天&quot;</span>, <span class=\"hljs-string\">&quot;春暖花开&quot;</span>);<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">Season</span> <span class=\"hljs-variable\">SUMMER</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Season</span>(<span class=\"hljs-string\">&quot;夏天&quot;</span>, <span class=\"hljs-string\">&quot;夏日炎炎&quot;</span>);<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">Season</span> <span class=\"hljs-variable\">AUTUMN</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Season</span>(<span class=\"hljs-string\">&quot;秋天&quot;</span>, <span class=\"hljs-string\">&quot;秋高气爽&quot;</span>);<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">Season</span> <span class=\"hljs-variable\">WINTER</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Season</span>(<span class=\"hljs-string\">&quot;冬天&quot;</span>, <span class=\"hljs-string\">&quot;冰天雪地&quot;</span>);<br>    <span class=\"hljs-comment\">//其他诉求：获取枚举类对象的属性</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getSeasonName</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> seasonName;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getSeasonDesc</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> seasonDesc;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Season&#123;&quot;</span> +<br>                <span class=\"hljs-string\">&quot;seasonName=&#x27;&quot;</span> + seasonName + <span class=\"hljs-string\">&#x27;\\&#x27;&#x27;</span> +<br>                <span class=\"hljs-string\">&quot;, seasonDesc=&#x27;&quot;</span> + seasonDesc + <span class=\"hljs-string\">&#x27;\\&#x27;&#x27;</span> +<br>                <span class=\"hljs-string\">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"用enum关键字声明枚举类\"><a class=\"markdownIt-Anchor\" href=\"#用enum关键字声明枚举类\">#</a> 用 enum 关键字声明枚举类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">Info</span>&#123;<br>    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span>;<br>&#125;<br><br><span class=\"hljs-comment\">//使用enum定义枚举类</span><br><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">Season1</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Info</span>&#123;<br>    <span class=\"hljs-comment\">//1、提供当前枚举类的多个对象，对象之间用&quot;,隔开&quot;，最后一个对象以&quot;;&quot;结束</span><br>    SPRING(<span class=\"hljs-string\">&quot;春天&quot;</span>, <span class=\"hljs-string\">&quot;春暖花开&quot;</span>)&#123;<span class=\"hljs-comment\">//鸽子实现接口中的方法</span><br>        <span class=\"hljs-meta\">@Override</span><br>        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span>&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;春天在哪里&quot;</span>);<br>        &#125;<br>    &#125;,<br>    SUMMER(<span class=\"hljs-string\">&quot;夏天&quot;</span>, <span class=\"hljs-string\">&quot;夏日炎炎&quot;</span>)&#123;<br>        <span class=\"hljs-meta\">@Override</span><br>        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span>&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;宁静的夏天&quot;</span>);<br>        &#125;<br>    &#125;,<br>    AUTUMN(<span class=\"hljs-string\">&quot;秋天&quot;</span>, <span class=\"hljs-string\">&quot;秋高气爽&quot;</span>)&#123;<br>        <span class=\"hljs-meta\">@Override</span><br>        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span>&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;秋天是分手的季节&quot;</span>);<br>        &#125;<br>    &#125;,<br>    WINTER(<span class=\"hljs-string\">&quot;冬天&quot;</span>, <span class=\"hljs-string\">&quot;冰天雪地&quot;</span>)&#123;<br>        <span class=\"hljs-meta\">@Override</span><br>        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span>&#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;大雪纷飞&quot;</span>);<br>        &#125;<br>    &#125;;<br>    <span class=\"hljs-comment\">//2、声明Season对象的属性:用private final修饰</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> String seasonName;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> String seasonDesc;<br>    <span class=\"hljs-comment\">//2、私有化类的构造器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">Season1</span><span class=\"hljs-params\">(String seasonName, String seasonDesc)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.seasonName = seasonName;<br>        <span class=\"hljs-built_in\">this</span>.seasonDesc = seasonDesc;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//其他诉求：获取枚举类对象的属性</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getSeasonName</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> seasonName;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getSeasonDesc</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> seasonDesc;<br>    &#125;<br><br><span class=\"hljs-comment\">//    @Override</span><br><span class=\"hljs-comment\">//    public void show()&#123;</span><br><span class=\"hljs-comment\">//        System.out.println(&quot;这是一个季节&quot;);</span><br><span class=\"hljs-comment\">//    &#125;</span><br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"注解\"><a class=\"markdownIt-Anchor\" href=\"#注解\">#</a> 注解</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">*  注解的使用</span><br><span class=\"hljs-comment\">* 1、理解注解</span><br><span class=\"hljs-comment\">*   Annotation是代码里的特殊标记，这些标记可以在编译、类加载、运行时被读取，并执行相应的处理。通过使用Annotation，</span><br><span class=\"hljs-comment\">*   程序员可以在不改变原有逻辑的情况下，在源文件中嵌入一些补充信息。</span><br><span class=\"hljs-comment\">* 2、在某种意义上，框架 = 注解 + 映射 + 设计模式</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"注解的使用\"><a class=\"markdownIt-Anchor\" href=\"#注解的使用\">#</a> 注解的使用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* Annotation的实例</span><br><span class=\"hljs-comment\">*   &gt; 示例一：生成文档相关的注解</span><br><span class=\"hljs-comment\">*   &gt; 示例二：在编译时进行格式检查（JDK内置的三个注解）</span><br><span class=\"hljs-comment\">*       @Override：限定重写父类方法，该注解只能用于方法</span><br><span class=\"hljs-comment\">*       @Deprecated：用于表示所修饰的元素（类、方法等）已过时。通常是因为所修饰的结构危险或存在更好的选择</span><br><span class=\"hljs-comment\">*       @SuppressWarnings：抑制编译器警告</span><br><span class=\"hljs-comment\">*   &gt; 示例三：跟踪代码依赖性，实现替代配置文件功能</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AnnotationTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-meta\">@SuppressWarnings(&quot;unused&quot;)</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">10</span>;<span class=\"hljs-comment\">//抑制编译器对于”定义的变量未使用”的警告</span><br>        <span class=\"hljs-meta\">@SuppressWarnings(&#123;&quot;unused&quot;, &quot;rawtypes&quot;&#125;)</span><span class=\"hljs-comment\">//抑制编译器对于”定义的变量未使用”和&quot;未使用泛型&quot;的警告</span><br>        <span class=\"hljs-type\">ArrayList</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>    &#125;<br>&#125;<br><br><span class=\"hljs-meta\">@MyAnnotation(value = &quot;hi&quot;)</span><span class=\"hljs-comment\">//使用自定义的注解</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> String name;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> age;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">()</span> &#123;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">(String name, <span class=\"hljs-type\">int</span> age)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-built_in\">this</span>.age = age;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">walk</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;人走路&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">eat</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;人吃饭&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Person</span>&#123;<br>    <span class=\"hljs-meta\">@Override</span><span class=\"hljs-comment\">//重写父类方法的注释，会在编译的时候强制要求重写方法（可用作检查校验）</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">walk</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;学生走路&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"自定义注解\"><a class=\"markdownIt-Anchor\" href=\"#自定义注解\">#</a> 自定义注解</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 如何自定义注解：参照SuppressWarnings定义</span><br><span class=\"hljs-comment\">*   ① 注解定义格式为 @interface</span><br><span class=\"hljs-comment\">*   ② 内部定义成员，通常使用value表示</span><br><span class=\"hljs-comment\">*   ③ 可以指定成员的默认值，使用default定义</span><br><span class=\"hljs-comment\">*   ④ 如果自定义注解没有成员，表明是一个“标识”作用</span><br><span class=\"hljs-comment\">*   如果注解用成员，在使用注解时，需要指明成员的值</span><br><span class=\"hljs-comment\">*   自定义注解必须配上注解的信息处理流程（使用反射）才有意义</span><br><span class=\"hljs-comment\">* */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 自定义注解</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-meta\">@interface</span> MyAnnotation &#123;<br>    String <span class=\"hljs-title function_\">value</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-string\">&quot;hello&quot;</span>;<span class=\"hljs-comment\">//这个是成员，不是方法。默认值是hello</span><br>&#125;<br><br><span class=\"hljs-meta\">@MyAnnotation(value = &quot;hi&quot;)</span><span class=\"hljs-comment\">//使用自定义的注解</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> String name;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> age;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"元注解修饰其他注解的注解\"><a class=\"markdownIt-Anchor\" href=\"#元注解修饰其他注解的注解\">#</a> 元注解：修饰其他注解的注解</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* JDK提供的四种元注解</span><br><span class=\"hljs-comment\">*   1、元注解：对现有的注解进行解释说明的注解</span><br><span class=\"hljs-comment\">*   2、说明：</span><br><span class=\"hljs-comment\">*       ① Retention：指明所修饰的Annotation的生命周期</span><br><span class=\"hljs-comment\">*          其包括一个RetentionPolicy类型的成员变量，使用@Retention时必须为该value成员变量指定值</span><br><span class=\"hljs-comment\">*           &#123;RetentionPolicy.SOURCE, RetentionPolicy.CLASS, RetentionPolicy.RUNTIME&#125;，</span><br><span class=\"hljs-comment\">*           分别代表：</span><br><span class=\"hljs-comment\">*                   源文件中有效：该注解会被编译器抛弃；</span><br><span class=\"hljs-comment\">*                   class文件中有效：该注解在程序运行时会被抛弃（默认状态）；</span><br><span class=\"hljs-comment\">*                    运行时有效：该注解在程序运行时有效</span><br><span class=\"hljs-comment\">*       ② Target：指明所修饰的注解能够修饰什么程序元素，包括TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR,</span><br><span class=\"hljs-comment\">*                   LOCAL_VARIABLE, ANNOTATION_TYPE, PACKAGE, TYPE_PARAMETER,TYPE_USE</span><br><span class=\"hljs-comment\">*       ③ Documented：表示所修饰的注解在被javadoc解析时，被提取成文档，</span><br><span class=\"hljs-comment\">*                      定义为Documented的注解必须设置Retention值为RUNTIME</span><br><span class=\"hljs-comment\">*       ④ Inherited:被修饰的注解将具有继承性</span><br><span class=\"hljs-comment\">*          例如MyAnnotation被Inherited修饰，且被用于修饰Person类，那么Person类的子类也自动被MyAnnotation修饰</span><br><span class=\"hljs-comment\">*   3、自定义注解通常都会指明两个元注解：Retention和Target</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"通过反射获取注解\"><a class=\"markdownIt-Anchor\" href=\"#通过反射获取注解\">#</a> 通过反射获取注解</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//通过反射获取注解</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Class</span> <span class=\"hljs-variable\">student</span> <span class=\"hljs-operator\">=</span> Student.class;<br>        Annotation[] annotations = student.getAnnotations();<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; annotations.length; i++) &#123;<br>            System.out.println(annotations[i]);<span class=\"hljs-comment\">//@MyAnnotation(value=hi)</span><br>        &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"jdk8中注解的新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk8中注解的新特性\">#</a> JDK8 中注解的新特性</h3>\n<h4 id=\"可重复注解\"><a class=\"markdownIt-Anchor\" href=\"#可重复注解\">#</a> 可重复注解</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 实现可重复注解：</span><br><span class=\"hljs-comment\">* 1、JDK8之前的写法：</span><br><span class=\"hljs-comment\">*     public @interface MyAnnotations &#123;</span><br><span class=\"hljs-comment\">*       MyAnnotation[] value;</span><br><span class=\"hljs-comment\">*    &#125;</span><br><span class=\"hljs-comment\">*    @MyAnnotations(&#123;@MyAnnotation(value = &quot;hi&quot;), @MyAnnotation(value = &quot;hello&quot;)&#125;)</span><br><span class=\"hljs-comment\">* 2、JDK8之后的写法：</span><br><span class=\"hljs-comment\">*   @Repeatable(MyAnnotations.class)</span><br><span class=\"hljs-comment\">*   public @interface MyAnnotation &#123;</span><br><span class=\"hljs-comment\">*    String value() default &quot;hello&quot;;//这个是成员，不是方法。默认值是hello</span><br><span class=\"hljs-comment\">*   &#125;</span><br><span class=\"hljs-comment\">*   ①在MyAnnotation上声明@Repeatable，成员值为MyAnnotations.class</span><br><span class=\"hljs-comment\">*   ②MyAnnotation的Target和Retention必须和MyAnnotations相同</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"类型注解\"><a class=\"markdownIt-Anchor\" href=\"#类型注解\">#</a> 类型注解</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 类型注解</span><br><span class=\"hljs-comment\">* 1、TYPE_PARAMETER：表示该注解能写在类型变量的声明语句中，如泛型声明</span><br><span class=\"hljs-comment\">* 2、TYPE_USE：表示该注解能写在使用类型的任何语句中</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-comment\">//TYPE_PARAMETER</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Generic</span>&lt;<span class=\"hljs-meta\">@MyAnnotation</span> T&gt;&#123;<span class=\"hljs-comment\">//声明为TYPE_USE后，注解可以出现在任何类型前</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">()</span><span class=\"hljs-keyword\">throws</span> <span class=\"hljs-meta\">@MyAnnotation</span> RuntimeException&#123;<br>        ArrayList&lt;<span class=\"hljs-meta\">@MyAnnotation</span> String&gt; list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-meta\">@MyAnnotation</span> <span class=\"hljs-type\">int</span>)<span class=\"hljs-number\">10L</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"集合\"><a class=\"markdownIt-Anchor\" href=\"#集合\">#</a> 集合</h2>\n<h3 id=\"概述\"><a class=\"markdownIt-Anchor\" href=\"#概述\">#</a> 概述</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 一、集合框架的概述</span><br><span class=\"hljs-comment\">* 1、集合、数组都是对多个数据进行存储操作的结构，简称Java容器</span><br><span class=\"hljs-comment\">*   说明：此时的存储，主要指的是内存层面的存储，不涉及到持久化的存储（.txt, .jpg, .avi, 数据库中是持久化层面的）</span><br><span class=\"hljs-comment\">* 2.1、数组在存储多个数据方面的特点：</span><br><span class=\"hljs-comment\">*   &gt; 一旦初始化以后，其长度就确定了。</span><br><span class=\"hljs-comment\">*   &gt; 一旦定义好，其元素的类型也就确定了。我们只能操作指定类型的数据。比如 String[] arr; int[] arr1;</span><br><span class=\"hljs-comment\">* 2.2 数组在存储多个数据的缺点：</span><br><span class=\"hljs-comment\">*   &gt; 一旦初始化以后，其长度不可修改</span><br><span class=\"hljs-comment\">*   &gt;  数组中提供的方法非常有限，对于添加、删除、插入数据等操作，非常不便，同时效率也不高</span><br><span class=\"hljs-comment\">*   &gt; 获取数组中实际元素的个数的需求，数组没有线程的属性或方法可用</span><br><span class=\"hljs-comment\">*   &gt; 数组存储数据的特点：有序、可重复。对于无序、不可重复</span><br><span class=\"hljs-comment\">z* 3、集合可分为Collection和Map两种体系</span><br><span class=\"hljs-comment\">*   3.1 Collection接口：单列数据，定义了存取一组对象的方法的集合</span><br><span class=\"hljs-comment\">*       &gt; List:元素有序、可重复的集合</span><br><span class=\"hljs-comment\">*       &gt; Set:元素无序、不可重复的集合</span><br><span class=\"hljs-comment\">*   3.2 Map接口：双列数据，保存具有映射关系“key-value对”的集合</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"集合框架\"><a class=\"markdownIt-Anchor\" href=\"#集合框架\">#</a> 集合框架</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 二、集合框架</span><br><span class=\"hljs-comment\">*   |---- Collection接口：单列集合，用来存储一个一个的对象</span><br><span class=\"hljs-comment\">*       |---- List接口：存储有序的、可重复的数据。  --&gt; 类似于&quot;动态&quot;数组</span><br><span class=\"hljs-comment\">*           |---- ArrayList、LinkedList、Vector</span><br><span class=\"hljs-comment\">*       |---- Set接口：存储无序的、不可重复的数据   --&gt; 类似于高中讲的“集合”</span><br><span class=\"hljs-comment\">*           |---- HashSet、 LinkedHashSet、TreeSet</span><br><span class=\"hljs-comment\">*   |---- Map接口：双列集合，用来存储一对一对(key, value)的数据    --&gt; 类似于高中函数 y = f(x)，</span><br><span class=\"hljs-comment\">*                                                              一个key对应一个value，一个value可以对应多个key</span><br><span class=\"hljs-comment\">*       |---- HashMap、LinkedHashMap、TreeMap、HashTable、Properties</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"collection接口\"><a class=\"markdownIt-Anchor\" href=\"#collection接口\">#</a> Collection 接口</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//add(Object e)：将元素e添加到集合中</span><br>\t\t\t<span class=\"hljs-comment\">//向Collection接口的实现类的对象中添加数据obj时，要求重写obj所在类的equals()方法</span><br><span class=\"hljs-comment\">//size()：获取添加的元素的个数</span><br><span class=\"hljs-comment\">//addAll(Collection c)：将集合c中的元素添加到当前的集合中</span><br><span class=\"hljs-comment\">//isEmpty()：判断当前集合是否为空(是否有元素)</span><br><span class=\"hljs-comment\">//clear()：清空集合中的所有元素</span><br><span class=\"hljs-comment\">//contains(Object e)：判断当前集合中是否包含对象e。对于对象，判断的是equals()方法而不是==运算符。</span><br>\t\t\t\t\t<span class=\"hljs-comment\">//所以实现相关功能需要考虑是否重写equals()方法</span><br><span class=\"hljs-comment\">//containsAll(Collection coll1):判断形参coll1中的所有元素是否都存在于当前集合中</span><br><span class=\"hljs-comment\">//remove(Object o)：删, 返回值是boolean，表示是否删除成功</span><br>        <span class=\"hljs-comment\">//仍然需要重写equals()方法，因为是逐个判断是否和目标相同的</span><br><span class=\"hljs-comment\">//removeAll(Collection coll1)：从当前集合中移除coll1中所有的元素</span><br>        <span class=\"hljs-comment\">//仍然需要重写equals()方法，因为是逐个判断是否和目标相同的</span><br><span class=\"hljs-comment\">//retrainAll(Collection coll1)：求与coll1的交集（次操作会修改原有集合）。返回值是boolean</span><br><span class=\"hljs-comment\">//equals(Object obj)：判断两个集合是否相等。</span><br><span class=\"hljs-comment\">//hashCode()：返回当前对象的hash值</span><br><span class=\"hljs-comment\">//Arrays.asList()：数组转换成集合</span><br><span class=\"hljs-comment\">//iterator()：返回一个迭代器接口的实例，用于遍历集合元素</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CollectionTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">collection</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        <span class=\"hljs-comment\">//add(Object e)：将元素e添加到集合中</span><br>        <span class=\"hljs-comment\">//向Collection接口的实现类的对象中添加数据obj时，要求重写obj所在类的equals()方法</span><br>        collection.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        collection.add(<span class=\"hljs-string\">&quot;BB&quot;</span>);<br>        collection.add(<span class=\"hljs-number\">123</span>);<span class=\"hljs-comment\">//自动装箱</span><br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>());<br>        <span class=\"hljs-comment\">//size()：获取添加的元素的个数</span><br>        System.out.println(collection.size());<span class=\"hljs-comment\">//4</span><br>        <span class=\"hljs-comment\">//addAll(Collection c)：将集合c中的元素添加到当前的集合中</span><br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">collection1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        collection.add(<span class=\"hljs-string\">&quot;CC&quot;</span>);<br>        collection.add(<span class=\"hljs-number\">456</span>);<span class=\"hljs-comment\">//自动装箱</span><br>        collection.addAll(collection1);<br>        System.out.println(collection);<span class=\"hljs-comment\">//[AA, BB, 123, Wed Sep 29 00:49:29 CST 2021, CC, 456]</span><br>        <span class=\"hljs-comment\">//isEmpty()：判断当前集合是否为空(是否有元素)</span><br>        System.out.println(collection.isEmpty());<span class=\"hljs-comment\">//false</span><br>        <span class=\"hljs-comment\">//clear()：清空集合中的所有元素</span><br>        collection.clear();<br>        System.out.println(collection.isEmpty());<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//contains(Object e)：判断当前集合中是否包含对象e。对于对象，判断的是equals()方法而不是==运算符。</span><br>        <span class=\"hljs-comment\">//所以实现相关功能需要考虑是否重写equals()方法</span><br>        System.out.println(collection.contains(<span class=\"hljs-string\">&quot;AA&quot;</span>));<span class=\"hljs-comment\">//false</span><br>        collection.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        System.out.println(collection.contains(<span class=\"hljs-string\">&quot;AA&quot;</span>));<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//containsAll(Collection coll1):判断形参coll1中的所有元素是否都存在于当前集合中</span><br>        collection.add(<span class=\"hljs-number\">123</span>);<br>        collection.add(<span class=\"hljs-number\">456</span>);<br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">coll1</span> <span class=\"hljs-operator\">=</span> Arrays.asList(<span class=\"hljs-number\">123</span>,<span class=\"hljs-number\">456</span>);<span class=\"hljs-comment\">//返回的是含有123和456的list</span><br>        collection.containsAll(coll1);<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//remove(Object o)：删, 返回值是boolean，表示是否删除成功</span><br>        <span class=\"hljs-comment\">//仍然需要重写equals()方法，因为是逐个判断是否和目标相同的</span><br>        collection.remove(<span class=\"hljs-number\">123</span>);<br>        System.out.println(collection);<br>        <span class=\"hljs-comment\">//removeAll(Collection coll1)：从当前集合中移除coll1中所有的元素</span><br>        <span class=\"hljs-comment\">//仍然需要重写equals()方法，因为是逐个判断是否和目标相同的</span><br>        collection.removeAll(Arrays.asList(<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-number\">456</span>));<br>        System.out.println(collection);<span class=\"hljs-comment\">//[]   (空)</span><br>        <span class=\"hljs-comment\">//retrainAll(Collection coll1)：求与coll1的交集（次操作会修改原有集合）。返回值是boolean</span><br>        collection.add(<span class=\"hljs-number\">123</span>);<br>        collection.retainAll(Arrays.asList(<span class=\"hljs-number\">123</span>,<span class=\"hljs-number\">456</span>));<br>        System.out.println(collection);<span class=\"hljs-comment\">//[123]</span><br>        <span class=\"hljs-comment\">//equals(Object obj)：判断两个集合是否相等。</span><br>        System.out.println(collection.equals(Arrays.asList(<span class=\"hljs-number\">123</span>)));<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//hashCode()：返回当前对象的hash值</span><br>        System.out.println(collection.hashCode());<br>        <span class=\"hljs-comment\">//toArray()： 集合转换成数组（返回值是Object[]类型）</span><br>        Object[] objects = collection.toArray();<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; objects.length; i++) &#123;<br>            System.out.println(objects[i]);<br>        &#125;<br>        <span class=\"hljs-comment\">//Arrays.asList()：数组转换成成集合</span><br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-string\">&quot;BB&quot;</span>);<br>        <span class=\"hljs-comment\">//注意:new int[]&#123;123, 456&#125;被当成是一个元素装入List；new Integer[]&#123;123, 456&#125;则是两个元素被装入list</span><br>        <span class=\"hljs-type\">List</span> <span class=\"hljs-variable\">arr1</span> <span class=\"hljs-operator\">=</span> Arrays.asList(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[]&#123;<span class=\"hljs-number\">123</span>, <span class=\"hljs-number\">456</span>&#125;);<br>        System.out.println(arr1.size());<span class=\"hljs-comment\">//1</span><br>        <span class=\"hljs-type\">List</span> <span class=\"hljs-variable\">arr2</span> <span class=\"hljs-operator\">=</span> Arrays.asList(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]&#123;<span class=\"hljs-number\">123</span>, <span class=\"hljs-number\">456</span>&#125;);<br>        System.out.println(arr2.size());<span class=\"hljs-comment\">//2</span><br>        <span class=\"hljs-comment\">//iterator()：返回一个迭代器接口的实例，用于遍历集合元素，见“Iterator接口”</span><br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"iterator接口\"><a class=\"markdownIt-Anchor\" href=\"#iterator接口\">#</a> Iterator 接口</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 集合元素的遍历操作，使用Iterator接口</span><br><span class=\"hljs-comment\">* 1、内部的方法：hasNext(), next()</span><br><span class=\"hljs-comment\">* 2、内部定义了remove()方法，此处的方法不同于Collection中的remove方法。</span><br><span class=\"hljs-comment\">*    如果还没调用next()或在上一次调用next方法之后已经调用了remove()方法，再调用remove都会报IllegalStateException</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IteratorTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">collection</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        collection.add(<span class=\"hljs-number\">123</span>);<br>        collection.add(<span class=\"hljs-number\">456</span>);<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-number\">20</span>));<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>((<span class=\"hljs-string\">&quot;Tom&quot;</span>)));<br>        collection.add(<span class=\"hljs-literal\">false</span>);<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> collection.iterator();<span class=\"hljs-comment\">//迭代器</span><br>        <span class=\"hljs-comment\">//迭代器越界后会报错：NoSuchElementException</span><br>        <span class=\"hljs-comment\">//正确的迭代方法</span><br>        <span class=\"hljs-keyword\">while</span> (iterator.hasNext())&#123;<br>            System.out.println(iterator.next());<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">collection</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        collection.add(<span class=\"hljs-number\">123</span>);<br>        collection.add(<span class=\"hljs-number\">456</span>);<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-number\">20</span>));<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>((<span class=\"hljs-string\">&quot;Tom&quot;</span>)));<br>        collection.add(<span class=\"hljs-literal\">false</span>);<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> collection.iterator();<span class=\"hljs-comment\">//迭代器</span><br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">obj</span> <span class=\"hljs-operator\">=</span> iterator.next();<br>            <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>.equals(obj))&#123;<br>                <span class=\"hljs-comment\">//删除集合中的&quot;Tom&quot;，如果还没调用next()或在上一次调用next方法之后已经调用了remove()方法，</span><br>                <span class=\"hljs-comment\">//再调用remove都会报IllegalStateException</span><br>                iterator.remove();<br>            &#125;<br>        &#125;<br>        iterator = collection.iterator();<span class=\"hljs-comment\">//迭代器,因为前面iterator已经指向末尾，所以此处要重新生成</span><br>        <span class=\"hljs-keyword\">while</span> (iterator.hasNext())&#123;<br>            System.out.println(iterator.next());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<p>迭代器的执行原理：</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211001161557658.png\" alt=\"迭代器的执行原理\"></p>\n<h3 id=\"使用for-each遍历集合和数组\"><a class=\"markdownIt-Anchor\" href=\"#使用for-each遍历集合和数组\">#</a> 使用 For - each 遍历集合和数组</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 使用for - each遍历集合、数组(JDK5.0新增)</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ForEachTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">collection</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        collection.add(<span class=\"hljs-number\">123</span>);<br>        collection.add(<span class=\"hljs-number\">456</span>);<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-number\">20</span>));<br>        collection.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>((<span class=\"hljs-string\">&quot;Tom&quot;</span>)));<br>        collection.add(<span class=\"hljs-literal\">false</span>);<br>        <span class=\"hljs-comment\">//for(集合/数组元素类型 : 局部变量, 集合/数组对象)&#123;&#125;</span><br>        <span class=\"hljs-keyword\">for</span>(Object obj : collection)&#123;<br>            System.out.println(obj);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"list接口\"><a class=\"markdownIt-Anchor\" href=\"#list接口\">#</a> List 接口</h3>\n<h4 id=\"arraylist源码分析\"><a class=\"markdownIt-Anchor\" href=\"#arraylist源码分析\">#</a> ArrayList 源码分析</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 3、ArrayList源码分析：</span><br><span class=\"hljs-comment\">*       JDK7情况下：</span><br><span class=\"hljs-comment\">*           ArrayList list = new ArrayList();//底层创建了初始长度为10的数组</span><br><span class=\"hljs-comment\">*           list.add(123);//element[0] = new Integer(123);</span><br><span class=\"hljs-comment\">*           ...</span><br><span class=\"hljs-comment\">*           list.add(11);//如果此次的添加导致底层数组容量不构，则扩容；</span><br><span class=\"hljs-comment\">*                       //默认扩容为原先长度的1.5倍，并将原有数组数据复制到新数组中</span><br><span class=\"hljs-comment\">*           建议：开发中使用带参的构造器：ArrayList(int initialCapacity)，尽量避免扩容</span><br><span class=\"hljs-comment\">*       JDK8情况下：</span><br><span class=\"hljs-comment\">*           ArrayList list = new ArrayList();//底层Object[] element初始化为&#123;&#125;，并没有创建长度为10的数组</span><br><span class=\"hljs-comment\">*           list.add(123);//第一次调用add()时，底层才创建了长度10的数组，并将123添加到element[]</span><br><span class=\"hljs-comment\">*           ...</span><br><span class=\"hljs-comment\">*           后续的添加和扩容操作与JDK7无异</span><br><span class=\"hljs-comment\">*       小结：JDK7中的ArrayList对象创建类似于单例模式中的饿汉式，而JDK8中的ArrayList对象的创建类似于懒汉式，</span><br><span class=\"hljs-comment\">*            延迟了数组的创建，节约了内存</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"linkedlist源码分析\"><a class=\"markdownIt-Anchor\" href=\"#linkedlist源码分析\">#</a> LinkedList 源码分析</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 4、LinkedList源码分析：</span><br><span class=\"hljs-comment\">*   LinkedList list = new LinkedList();//内部声明了类型的first和last属性（头指针和尾指针），默认值为null</span><br><span class=\"hljs-comment\">*   list.add(123);//将123封装到Node中，创建了Node对象，并插入到双向链表的末尾</span><br><span class=\"hljs-comment\">*   其中，链表结点Node的定义为：</span><br><span class=\"hljs-comment\">*   private static class Node&lt;E&gt; &#123;</span><br><span class=\"hljs-comment\">*        E item;</span><br><span class=\"hljs-comment\">*        Node&lt;E&gt; next;</span><br><span class=\"hljs-comment\">*       Node&lt;E&gt; prev;</span><br><span class=\"hljs-comment\">*</span><br><span class=\"hljs-comment\">*        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class=\"hljs-comment\">*            this.item = element;</span><br><span class=\"hljs-comment\">*            this.next = next;</span><br><span class=\"hljs-comment\">*            this.prev = prev;</span><br><span class=\"hljs-comment\">*        &#125;</span><br><span class=\"hljs-comment\">*    &#125;</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"vector源码分析\"><a class=\"markdownIt-Anchor\" href=\"#vector源码分析\">#</a> Vector 源码分析</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 4、Vector源码分析：</span><br><span class=\"hljs-comment\">*   JDK7和JDK8中通过Vector()构造器创建对象时，底层都创建了长度为10的数组，在扩容方面，默认扩容为原来数组长度的2倍</span><br><span class=\"hljs-comment\">**/</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"list接口中的常用方法\"><a class=\"markdownIt-Anchor\" href=\"#list接口中的常用方法\">#</a> List 接口中的常用方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//void add(int index, Object obj)：在index位置插入元素</span><br><span class=\"hljs-comment\">//boolean addAll(int index, Collection c):在index位置开始将集合c的所有元素插入</span><br><span class=\"hljs-comment\">//Object get(int index)：获取索引值为index的元素</span><br><span class=\"hljs-comment\">//int indexOf(Object o)：返回o第一次出现的位置，若没有，则返回-1</span><br><span class=\"hljs-comment\">//int lastIndexOf(Object o)：返回o最后一次出现的位置，若没有，则返回-1</span><br><span class=\"hljs-comment\">//Object remove(int index):按索引删除元素，并返回该元素</span><br><span class=\"hljs-comment\">//Object set(int index, Object o):将index位置的元素设置成o，并返回该索引位置修改前的值</span><br><span class=\"hljs-comment\">//说明：remove(Object o)和remove(int index)，index和o一样的时候，默认是当成索引，如果想作为Object，可使用自动装箱</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * 总结：常用方法有</span><br><span class=\"hljs-comment\"> * 增：add(Object o)</span><br><span class=\"hljs-comment\"> * 删: remove(int index) / remove(Object o)</span><br><span class=\"hljs-comment\"> * 改: set(int index, Object o)</span><br><span class=\"hljs-comment\"> * 查: get(int index) / indexOf(Object o) / lastIndexOf(Object o) </span><br><span class=\"hljs-comment\"> * 插: add(int index, Object o)</span><br><span class=\"hljs-comment\"> * 长度: size()</span><br><span class=\"hljs-comment\"> * 遍历: ①iterator迭代器 ②for - each ③普通for循环，按照索引访问</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">ArrayList</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        list.add(<span class=\"hljs-number\">123</span>);<br>        list.add(<span class=\"hljs-number\">456</span>);<br>        list.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        list.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<br>        list.add(<span class=\"hljs-number\">456</span>);<br>        System.out.println(list);<span class=\"hljs-comment\">//[123, 456, AA, Person@4dcbadb4, 456]</span><br>        <span class=\"hljs-comment\">//void add(int index, Object obj)：在index位置插入元素</span><br>        list.add(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;BB&quot;</span>);<br>        System.out.println(list);<span class=\"hljs-comment\">//[123, BB, 456, AA, Person@4dcbadb4, 456]</span><br>        <span class=\"hljs-comment\">//boolean addAll(int index, Collection c):在index位置开始将集合c的所有元素插入</span><br>        list.addAll(<span class=\"hljs-number\">1</span>, Arrays.asList(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>));<br><span class=\"hljs-comment\">//        list.add(Arrays.asList(1,2,3));//注意区分</span><br>        System.out.println(list.size());<span class=\"hljs-comment\">//6 + 3 = 9</span><br>        <span class=\"hljs-comment\">//Object get(int index)：获取索引值为index的元素</span><br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">o</span> <span class=\"hljs-operator\">=</span> list.get(<span class=\"hljs-number\">1</span>);<br>        System.out.println(o);<br>        <span class=\"hljs-comment\">//int indexOf(Object o)：返回o第一次出现的位置，若没有，则返回-1</span><br>        <span class=\"hljs-comment\">//int lastIndexOf(Object o)：返回o最后一次出现的位置，若没有，则返回-1</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> list.indexOf(<span class=\"hljs-number\">456</span>);<br>        System.out.println(i);<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i1</span> <span class=\"hljs-operator\">=</span> list.lastIndexOf(<span class=\"hljs-number\">456</span>);<br>        System.out.println(i1);<br>        <span class=\"hljs-comment\">//Object remove(int index):按索引删除元素，并返回该元素</span><br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">obj</span> <span class=\"hljs-operator\">=</span> list.remove(<span class=\"hljs-number\">1</span>);<br>        System.out.println(obj);<br>        <span class=\"hljs-comment\">//Object set(int index, Object o):将index位置的元素设置成o，并返回该索引位置修改前的值</span><br>        System.out.println(list);<br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">obj1</span> <span class=\"hljs-operator\">=</span> list.set(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">111</span>);<br>        System.out.println(obj1);<br>        System.out.println(list);<br>        <span class=\"hljs-comment\">//List subList(int fromIndex, int endIndex)：返回子列表,[fromIndex, endIndex)</span><br>        System.out.println(list.subList(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>));<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"set接口\"><a class=\"markdownIt-Anchor\" href=\"#set接口\">#</a> Set 接口</h3>\n<h4 id=\"添加元素的过程\"><a class=\"markdownIt-Anchor\" href=\"#添加元素的过程\">#</a> 添加元素的过程</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * 添加元素的过程：以HashSet为例</span><br><span class=\"hljs-comment\"> *  我们向HashSet中添加元素a，首先调用元素a所在类的hashCode()方法，计算元素a的哈希值，此哈希值接着通过某种算法计算出</span><br><span class=\"hljs-comment\"> *  HashSet底层数组中的存放位置（即：索引位置），判断数组此位置上是否已经铀元素：如果此位置上没有其他元素，则元素a添加成功。</span><br><span class=\"hljs-comment\"> *  如果此位置上有其他元素b（或以链表形式存在的多个元素），则比较元素a与元素b的hash值，如果hash值不相同，则元素a添加成功，</span><br><span class=\"hljs-comment\"> *  如果hash值相同，进而调用元素a所在类的equals()方法。若返回true，则元素a添加失败。若返回false，则元素a添加成功。</span><br><span class=\"hljs-comment\"> *  JDK7中，链表是头插入；JDK8中，链表是尾插入</span><br><span class=\"hljs-comment\"> * */</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"hashset\"><a class=\"markdownIt-Anchor\" href=\"#hashset\">#</a> HashSet</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.HashSet;<br><span class=\"hljs-keyword\">import</span> java.util.Set;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/2 - 0:09</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 1、Set接口的框架</span><br><span class=\"hljs-comment\">*   |---- Collection接口：单列集合，用来存储一个一个的对象</span><br><span class=\"hljs-comment\">*       |---- Set接口：存储无序的、不可重复的数据   --&gt; 类似于高中讲的“集合”</span><br><span class=\"hljs-comment\">*           |---- HashSet：Set接口的主要实现类；线程不安全的；可以存储null值</span><br><span class=\"hljs-comment\">*               |---- LinkedHashSet：是HashSet的子类；遍历其内部数据时，可以按照添加的顺序遍历</span><br><span class=\"hljs-comment\">*           |---- TreeSet：使用红黑树存储的，要求元素必须是同一类型，可按照某种属性进行排序</span><br><span class=\"hljs-comment\">* 2、Set接口中没有额外定义的方法，使用的都是Collection中的方法</span><br><span class=\"hljs-comment\">* 3、要求：向Set中添加的数据，其所在类一定要重写hashCode()和equals()</span><br><span class=\"hljs-comment\">*         重写的hashCode()和equals()尽可能保持一致性：相等的对象必须具有相等的散列码</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SetTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 一、Set:无序存储的、不可重复的数据</span><br><span class=\"hljs-comment\">    *   以HashSet为例说明：</span><br><span class=\"hljs-comment\">    *   1、无序性：不等于随机性。存储的数据在底层数组中并非按照数组索引的顺序添加。而是根据数据的Hash值决定的。</span><br><span class=\"hljs-comment\">    *   2、不可重复性：保证添加的元素按照equals()方法判断时，不能返回true。即，相同的元素只能添加一个。</span><br><span class=\"hljs-comment\">    * 二、添加元素的过程：以HashSet为例</span><br><span class=\"hljs-comment\">    *   我们向HashSet中添加元素a，首先调用元素a所在类的hashCode()方法，计算元素a的哈希值，此哈希值接着通过某种算法计算出</span><br><span class=\"hljs-comment\">    *   HashSet底层数组中的存放位置（即：索引位置），判断数组此位置上是否已经铀元素：如果此位置上没有其他元素，则a添加成功</span><br><span class=\"hljs-comment\">    *   如果此位置上有其他元素b（或以链表形式存在的多个元素），则比较元素a与元素b的hash值，如果hash值不相同，则a添加成功</span><br><span class=\"hljs-comment\">    *   如果hash值相同，进而调用元素a所在类的equals()方法。若返回true，则元素a添加失败。若返回false，则元素a添加成功。</span><br><span class=\"hljs-comment\">    *   JDK7中，链表是头插入；JDK8中，链表是尾插入</span><br><span class=\"hljs-comment\">    *   HashSet底层存储原理：数组 + 链表 + 红黑树</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashSet</span>();<br>        set.add(<span class=\"hljs-number\">456</span>);<br>        set.add(<span class=\"hljs-number\">123</span>);<br>        set.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        set.add(<span class=\"hljs-string\">&quot;CC&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"linkedhashset\"><a class=\"markdownIt-Anchor\" href=\"#linkedhashset\">#</a> LinkedHashSet</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * LinkedHashSet的使用</span><br><span class=\"hljs-comment\">    * 1、LinkedHashSet中的元素被封装成一个结点e，这些结点按照元素的添加顺序以双向链表的方式互相连接，这样，就可以按照元素添加</span><br><span class=\"hljs-comment\">    *   顺序来遍历LinkedHashSet。</span><br><span class=\"hljs-comment\">    * 2、优点：对于频繁的遍历操作，LinkedHashSet的效率高于HashSet</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkedHashSet</span>();<br>        set.add(<span class=\"hljs-number\">456</span>);<br>        set.add(<span class=\"hljs-number\">123</span>);<br>        set.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        set.add(<span class=\"hljs-string\">&quot;CC&quot;</span>);<br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"treeset\"><a class=\"markdownIt-Anchor\" href=\"#treeset\">#</a> TreeSet</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/2 - 14:26</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* TreeSet类的使用</span><br><span class=\"hljs-comment\">* 1、向TreeSet中添加的数据，要求是相同类的对象</span><br><span class=\"hljs-comment\">* 2、两种排序方式：自然排序（实现CompareTo接口）和定制排序（Comparator）</span><br><span class=\"hljs-comment\">* 3、自然排序中，比较两个元素是否相同的标准为compareTo()方法，不再是equals()方法</span><br><span class=\"hljs-comment\">* 4、自定义排序中，比较两个元素是否相同的标准为compareTo()方法，不再是equals()方法</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TreeSetTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeSet</span>();<br>        set.add(<span class=\"hljs-number\">456</span>);<br>        set.add(<span class=\"hljs-number\">123</span>);<br><span class=\"hljs-comment\">//        set.add(&quot;AA&quot;);//错误添加方式，“AA”与整型数据类型不一样</span><br><span class=\"hljs-comment\">//        set.add(&quot;CC&quot;);</span><br><span class=\"hljs-comment\">//        set.add(new Person(&quot;Tom&quot;, 12));</span><br><span class=\"hljs-comment\">//        set.add(new Person(&quot;Tom&quot;, 12));</span><br>        set.add(<span class=\"hljs-number\">24</span>);<br>        <span class=\"hljs-keyword\">for</span> (Object o : set) &#123;<br>            System.out.println(o);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeSet</span>();<br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<span class=\"hljs-comment\">//Person类已重写compareTo()方法，按照年龄大小排序</span><br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">14</span>));<br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">13</span>));<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> set.iterator();<br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            System.out.println(iterator.next());<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Comparator</span> <span class=\"hljs-variable\">comparator</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>()&#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Object o1, Object o2)</span>&#123;<br>                <span class=\"hljs-keyword\">if</span>(o1 <span class=\"hljs-keyword\">instanceof</span> Person &amp;&amp; o2 <span class=\"hljs-keyword\">instanceof</span> Person)&#123;<br>                    <span class=\"hljs-keyword\">return</span> Integer.compare(((Person) o1).getAge(), ((Person) o2).getAge());<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;类型不匹配&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeSet</span>(comparator);<span class=\"hljs-comment\">//使用自定义的排序方式</span><br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<span class=\"hljs-comment\">//虽然Person类已重写compareTo()方法，但TreeSet的构造器使用了定制排序</span><br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">14</span>));<br>        set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">13</span>));<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> set.iterator();<br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            System.out.println(iterator.next());<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"面试题\"><a class=\"markdownIt-Anchor\" href=\"#面试题\">#</a> 面试题</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">   * 一道面试题</span><br><span class=\"hljs-comment\">   * */</span><br>   <span class=\"hljs-meta\">@Test</span><br>   <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>       <span class=\"hljs-type\">HashSet</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashSet</span>();<br>       <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;AA&quot;</span>, <span class=\"hljs-number\">1001</span>);<br>       <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;BB&quot;</span>, <span class=\"hljs-number\">1001</span>);<br>       set.add(person1);<br>       set.add(person2);<br>       person1.setName(<span class=\"hljs-string\">&quot;CC&quot;</span>);<br>       <span class=\"hljs-comment\">//这里会删除失败，因为person1中的属性被修改，导致hashCode值改变。用新的hashCode值去索引，会找不到目标</span><br>       set.remove(person1);<br>       <span class=\"hljs-comment\">//输出还是有两个person</span><br>       System.out.println(set);<br>       <span class=\"hljs-comment\">//会添加成功，虽然元素重复，但新的hashCode对应的位置是空的，可以添加</span><br>       set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;CC&quot;</span>,<span class=\"hljs-number\">1001</span>));<br>       System.out.println(set);<span class=\"hljs-comment\">//输出三个person</span><br>       <span class=\"hljs-comment\">//还是能添加成功，虽然hashCode相同，但equals()返回不相同</span><br>       set.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;AA&quot;</span>,<span class=\"hljs-number\">1001</span>));<br>       System.out.println(set);<span class=\"hljs-comment\">//会输出四个person</span><br>   &#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"map接口\"><a class=\"markdownIt-Anchor\" href=\"#map接口\">#</a> Map 接口</h3>\n<h4 id=\"map接口框架\"><a class=\"markdownIt-Anchor\" href=\"#map接口框架\">#</a> Map 接口框架</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 一、Map接口框架</span><br><span class=\"hljs-comment\">*   |---- Map：双列数据，存储key-value对的数据 --&gt; 类似于高中的函数y = f(x)</span><br><span class=\"hljs-comment\">*       |---- HashMap：作为Map的主要实现类，线程不安全的，效率高。存储存储key或value时，可以是null值。</span><br><span class=\"hljs-comment\">*           |---- LinkedHashMap：保证在遍历map元素时，可以按照添加的顺序实验遍历。原理和LinkedHashSet类似。对于频繁 *\t\t\t\t\t\t\t\t   的遍历操作，效率要高于HashMap</span><br><span class=\"hljs-comment\">*       |---- TreeMap：保证按照添加的key-value对（排序依据是key）进行排序，实现排序遍历。底层使用红黑树</span><br><span class=\"hljs-comment\">*       |---- Hashtable：作为古老的实现类，线程安全的，效率低。存储存储key或value时，不可以是null值</span><br><span class=\"hljs-comment\">*           |---- Properties：常用来处理配置文件。key和value都是String类型</span><br><span class=\"hljs-comment\">*   HashMao的底层：数组 + 链表（JDK7及以前）</span><br><span class=\"hljs-comment\">*                 数组 + 链表 + 红黑树 （JDK8之后）</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"map结构理解\"><a class=\"markdownIt-Anchor\" href=\"#map结构理解\">#</a> Map 结构理解</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 三、结构的理解（以HashMap为例，不适用于TreeMap）</span><br><span class=\"hljs-comment\">*   key是不可重复的、无序的，使用Set存储所有的key   ---&gt; key所在类要重写equals()和hashCode()方法                  </span><br><span class=\"hljs-comment\">*   value是可重复的、无序的，使用Collection存储所有的value  ---&gt; value所在类要重写equals()</span><br><span class=\"hljs-comment\">*   key和value是被封装成一个entry对象，key和value是entry的两个属性。</span><br><span class=\"hljs-comment\">*   entry是无序的、不可重复的，使用set存储所有的entry</span><br><span class=\"hljs-comment\">**/</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"hashmap底层实现原理\"><a class=\"markdownIt-Anchor\" href=\"#hashmap底层实现原理\">#</a> HashMap 底层实现原理</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">四、HashMap底层实现原理，以JDK7为例</span><br><span class=\"hljs-comment\">*   HashMap map = new HashMap();</span><br><span class=\"hljs-comment\">*   在实例化以后，底层创建了长度是16的一维数组Entry[] table</span><br><span class=\"hljs-comment\">*   ..执行多次put..</span><br><span class=\"hljs-comment\">*   map.put(key1, value1);</span><br><span class=\"hljs-comment\">*   首先，调用key1所在类的hashCode()方法计算key1的hash值，此hash值经过某种算法计算后，得到在Entry数组中的存放位置</span><br><span class=\"hljs-comment\">*   如果此位置上的数据为空，此时key1-value1添加成功。如果此位置上的数据不为空（即此位置存在一个或多个数据（以链表存在）），</span><br><span class=\"hljs-comment\">*   比较当前key1和已存在的一个或多个数据key的hash值：</span><br><span class=\"hljs-comment\">*       如果key1的hash值与已存在数据的hash都不相同，此时key1-value1添加成功。 ---&gt; 情况2</span><br><span class=\"hljs-comment\">*       若和某一个数据(key2, value2)的hash值相同，则调用key1所在类的equals()方法：</span><br><span class=\"hljs-comment\">*           若相同，则添加失败   ----&gt; 情况3</span><br><span class=\"hljs-comment\">*           若不相同，使用value1替换value2</span><br><span class=\"hljs-comment\">*   补充：关于情况2和情况3，此时key1-value1和原来的数据以链表方式存储</span><br><span class=\"hljs-comment\">*   在不断的添加过程中，会涉及到扩容的问题，当超出临界值并且要存放的位置非空时，扩容。</span><br><span class=\"hljs-comment\">*   默认的扩容方式：扩容为原来容量的2倍，并将原有的数据复制过来。</span><br><span class=\"hljs-comment\">*   JDK8相较于JDK7底层实现方面的不同：</span><br><span class=\"hljs-comment\">*   1、new HashMap()：底层没有创建一个底层为16的数组</span><br><span class=\"hljs-comment\">*   2、JDK8底层的数组是：Node[]，而非Entry[]</span><br><span class=\"hljs-comment\">*   3、首次调用put()方法时，底层会创建长度为16的数组</span><br><span class=\"hljs-comment\">*   4、JDK7底层结构只有：数组 + 链表；JDK8底层结构：数组 + 链表 + 红黑树。</span><br><span class=\"hljs-comment\">*      当数组的某一个索引位置上的元素超过8个时且当前数组的长度超过64时，此时此索引位置上的数据改为使用红黑树存储</span><br><span class=\"hljs-comment\">* 五、几个概念</span><br><span class=\"hljs-comment\">*   DEFAULT_INITIAL_CAPACITY:HashMap的默认容量：16</span><br><span class=\"hljs-comment\">*   DEFAULT_LOAD_FACTOR:HashMap的默认加载因子：0.75</span><br><span class=\"hljs-comment\">*   threshold：扩容的临界值，= 容量 * 加载因子 = 16 * 0.75 = 12</span><br><span class=\"hljs-comment\">*   TREEIFY_THRESHOLD:Bucket中链表长度大于该默认值，转化为红黑树：8</span><br><span class=\"hljs-comment\">*   MIN_TREEIFY_CAPACITY：Bucket中的Node倍树化时最小的hash表容量：64</span><br><span class=\"hljs-comment\">**/</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"linkedhashmap实现原理\"><a class=\"markdownIt-Anchor\" href=\"#linkedhashmap实现原理\">#</a> LinkedHashMap 实现原理</h4>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs crmsh\">源码中LinkedHashMap底层链表上的结点Entry继承了HashMap中的结点<span class=\"hljs-keyword\">Node</span><span class=\"hljs-title\">，将其改成了双向链表</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"常用方法\"><a class=\"markdownIt-Anchor\" href=\"#常用方法\">#</a> 常用方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//常用方法</span><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 添加：put()</span><br><span class=\"hljs-comment\">    * 删除：remove()</span><br><span class=\"hljs-comment\">    * 修改：put()</span><br><span class=\"hljs-comment\">    * 查询：get()</span><br><span class=\"hljs-comment\">    * 长度：size()</span><br><span class=\"hljs-comment\">    * 遍历：keySet(), values(), entrySet()</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Map</span> <span class=\"hljs-variable\">map</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>();<br>        <span class=\"hljs-comment\">//Object put(Object key, Object value)</span><br>        map.put(<span class=\"hljs-string\">&quot;AA&quot;</span>,<span class=\"hljs-number\">123</span>);<br>        map.put(<span class=\"hljs-number\">45</span>,<span class=\"hljs-number\">123</span>);<br>        <span class=\"hljs-comment\">//修改操作</span><br>        map.put(<span class=\"hljs-string\">&quot;AA&quot;</span>,<span class=\"hljs-number\">456</span>);<br>        System.out.println(map);<span class=\"hljs-comment\">//&#123;AA=456, 45=123&#125;</span><br>        <span class=\"hljs-type\">Map</span> <span class=\"hljs-variable\">map1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>();<br>        map1.put(<span class=\"hljs-string\">&quot;CC&quot;</span>,<span class=\"hljs-number\">123</span>);<br>        map1.put(<span class=\"hljs-string\">&quot;DD&quot;</span>,<span class=\"hljs-number\">123</span>);<br>        <span class=\"hljs-comment\">//void putAll(Map m)</span><br>        map.putAll(map1);<br>        System.out.println(map);<span class=\"hljs-comment\">//&#123;AA=456, CC=123, DD=123, 45=123&#125;</span><br>        <span class=\"hljs-comment\">//Object value = remove(Object key)</span><br>        map.remove(<span class=\"hljs-string\">&quot;CC&quot;</span>);<br>        System.out.println(map);<span class=\"hljs-comment\">//&#123;AA=456, DD=123, 45=123&#125;</span><br>        <span class=\"hljs-comment\">//clear()</span><br>        map.clear();<br>        System.out.println(map);<span class=\"hljs-comment\">//&#123;&#125;</span><br>        System.out.println(map.size());<span class=\"hljs-comment\">//0</span><br>        map.put(<span class=\"hljs-string\">&quot;AA&quot;</span>,<span class=\"hljs-number\">123</span>);<br>        map.put(<span class=\"hljs-number\">45</span>,<span class=\"hljs-number\">123</span>);<br>        <span class=\"hljs-comment\">//Object value = get(Object key)</span><br>        System.out.println(map.get(<span class=\"hljs-string\">&quot;AA&quot;</span>));<span class=\"hljs-comment\">//123</span><br>        <span class=\"hljs-comment\">//boolean containsKey(Object key)</span><br>        System.out.println(map.containsKey(<span class=\"hljs-string\">&quot;AA&quot;</span>));<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//boolean containsValue(Object value)</span><br>        System.out.println(map.containsValue(<span class=\"hljs-number\">123</span>));<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//size()</span><br>        System.out.println(map.size());<span class=\"hljs-comment\">//2</span><br>        <span class=\"hljs-comment\">//isEmpty()</span><br>        System.out.println(map.isEmpty());<span class=\"hljs-comment\">//false</span><br>        <span class=\"hljs-comment\">//boolean equals(Object obj):判断当前map和参数对象obj是否相等</span><br>        <span class=\"hljs-comment\">//Map没有迭代器</span><br>        <span class=\"hljs-comment\">//Set keySet()：返回所有key组成的Set</span><br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> map.keySet();<br>        <span class=\"hljs-keyword\">for</span> (Object o : set) &#123;<br>            System.out.println(o);<br>        &#125;<br>        <span class=\"hljs-comment\">//Collection values()：返回所有value值构成的集合</span><br>        <span class=\"hljs-type\">Collection</span> <span class=\"hljs-variable\">values</span> <span class=\"hljs-operator\">=</span> map.values();<br>        <span class=\"hljs-keyword\">for</span> (Object value : values) &#123;<br>            System.out.println(value);<br>        &#125;<br>        <span class=\"hljs-comment\">//遍历所有的key-value</span><br>        <span class=\"hljs-comment\">//方式一：Set entrySet()</span><br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set1</span> <span class=\"hljs-operator\">=</span> map.entrySet();<br>        <span class=\"hljs-keyword\">for</span> (Object o : set1) &#123;<br><span class=\"hljs-comment\">//            System.out.println(o);//可以直接输出</span><br>            Map.<span class=\"hljs-type\">Entry</span> <span class=\"hljs-variable\">entry</span> <span class=\"hljs-operator\">=</span> (Map.Entry)o;<br>            System.out.println(entry.getKey() + <span class=\"hljs-string\">&quot;, &quot;</span> + entry.getValue());<span class=\"hljs-comment\">//entry有getKey()和getValue()</span><br>        &#125;<br>        <span class=\"hljs-comment\">//方式二</span><br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">keySet</span> <span class=\"hljs-operator\">=</span> map.keySet();<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> keySet.iterator();<br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> iterator.next();<br>            <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> map.get(key);<br>            System.out.println(<span class=\"hljs-string\">&quot;key = &quot;</span> + key + <span class=\"hljs-string\">&quot;, value = &quot;</span> + value);<br>        &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"treemap使用举例\"><a class=\"markdownIt-Anchor\" href=\"#treemap使用举例\">#</a> TreeMap 使用举例</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/3 - 16:33</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TreeMapTest</span> &#123;<br>    <span class=\"hljs-comment\">//向TreeMap中添加key-value，要求key必须是由同一个类创建的对象</span><br>    <span class=\"hljs-comment\">//因为要按照key进行排序：自然排序，定制排序</span><br>    <span class=\"hljs-comment\">//自然排序</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">TreeMap</span> <span class=\"hljs-variable\">map</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeMap</span>();<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>,<span class=\"hljs-number\">13</span>), <span class=\"hljs-number\">98</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jack&quot;</span>,<span class=\"hljs-number\">15</span>), <span class=\"hljs-number\">89</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Mike&quot;</span>,<span class=\"hljs-number\">21</span>), <span class=\"hljs-number\">76</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jerry&quot;</span>,<span class=\"hljs-number\">9</span>), <span class=\"hljs-number\">100</span>);<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> map.entrySet();<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> set.iterator();<br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            Map.<span class=\"hljs-type\">Entry</span> <span class=\"hljs-variable\">entry</span> <span class=\"hljs-operator\">=</span> (Map.Entry)iterator.next();<br>            System.out.println(entry.getKey() + <span class=\"hljs-string\">&quot; &quot;</span> +entry.getValue());<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//定制排序：使用参数为Comparator的构造器</span><br>    <span class=\"hljs-comment\">//按照年龄从大到小排序</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Map</span> <span class=\"hljs-variable\">map</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeMap</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Object o1, Object o2)</span> &#123;<br>                <span class=\"hljs-keyword\">if</span>(o1 <span class=\"hljs-keyword\">instanceof</span> Person &amp;&amp; o2 <span class=\"hljs-keyword\">instanceof</span> Person)&#123;<br>                    <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p1</span> <span class=\"hljs-operator\">=</span> (Person) o1;<br>                    <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">p2</span> <span class=\"hljs-operator\">=</span> (Person) o2;<br>                    <span class=\"hljs-keyword\">return</span> -Integer.compare(p1.getAge(), p2.getAge());<br>                &#125;<br>                <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;参数不匹配&quot;</span>);<br>            &#125;<br>        &#125;);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>,<span class=\"hljs-number\">13</span>), <span class=\"hljs-number\">98</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jack&quot;</span>,<span class=\"hljs-number\">15</span>), <span class=\"hljs-number\">89</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Mike&quot;</span>,<span class=\"hljs-number\">21</span>), <span class=\"hljs-number\">76</span>);<br>        map.put(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Jerry&quot;</span>,<span class=\"hljs-number\">9</span>), <span class=\"hljs-number\">100</span>);<br>        <span class=\"hljs-type\">Set</span> <span class=\"hljs-variable\">set</span> <span class=\"hljs-operator\">=</span> map.entrySet();<br>        <span class=\"hljs-type\">Iterator</span> <span class=\"hljs-variable\">iterator</span> <span class=\"hljs-operator\">=</span> set.iterator();<br>        <span class=\"hljs-keyword\">while</span>(iterator.hasNext())&#123;<br>            Map.<span class=\"hljs-type\">Entry</span> <span class=\"hljs-variable\">entry</span> <span class=\"hljs-operator\">=</span> (Map.Entry)iterator.next();<br>            System.out.println(entry.getKey() + <span class=\"hljs-string\">&quot; &quot;</span> +entry.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"properties\"><a class=\"markdownIt-Anchor\" href=\"#properties\">#</a> Properties</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> java.io.FileInputStream;<br><span class=\"hljs-keyword\">import</span> java.io.FileNotFoundException;<br><span class=\"hljs-keyword\">import</span> java.util.Properties;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/3 - 16:49</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PropertiesTest</span> &#123;<br>    <span class=\"hljs-comment\">//Properties：常用来处理配置文件，key和value都是String类型</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        <span class=\"hljs-type\">Properties</span> <span class=\"hljs-variable\">properties</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Properties</span>();<br>        FileInputStream fis;<br>        fis = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;jdbc.properties&quot;</span>);<br>        properties.load(fis);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> properties.getProperty(<span class=\"hljs-string\">&quot;name&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">password</span> <span class=\"hljs-operator\">=</span> properties.getProperty(<span class=\"hljs-string\">&quot;password&quot;</span>);<br>        System.out.println(<span class=\"hljs-string\">&quot;name = &quot;</span> + name + <span class=\"hljs-string\">&quot;, password = &quot;</span> + password);<span class=\"hljs-comment\">//name = Tom, password = abc123</span><br>        fis.close();<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**********************</span><br><span class=\"hljs-comment\">//以下是jdbc.properties文件的内容</span><br><span class=\"hljs-comment\">name=Tom邓智超</span><br><span class=\"hljs-comment\">password=abc123\t</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"collections工具类\"><a class=\"markdownIt-Anchor\" href=\"#collections工具类\">#</a> Collections 工具类</h3>\n<p>Collecitons 是一个操作 Set、List、Map 等集合的工具类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.ArrayList;<br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.Collections;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/3 - 20:29</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* Collections:操作Collection和Map的工具类</span><br><span class=\"hljs-comment\">* 面试题：Collections和Collection的区别？</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CollectionsTest</span> &#123;<br>    <span class=\"hljs-comment\">//常用方法</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * Collections类中提供了多个synchronizedXxx()方法，该方法可使将指定集合包装成线程同步的集合，从而可以解决多线程并发集合</span><br><span class=\"hljs-comment\">        * 时的线程安全问题。如synchronizedCollection、synchronizedList、synchronizedMap等等。</span><br><span class=\"hljs-comment\">        * 比如List list1 = synchronizedList(list)返回的就是线程安全的list</span><br><span class=\"hljs-comment\">        *</span><br><span class=\"hljs-comment\">        * reverse(List)：反转List中元素的顺序</span><br><span class=\"hljs-comment\">        * shuffle(List)：使List的元素随机乱序</span><br><span class=\"hljs-comment\">        * sort(List)：从小到大自然排序</span><br><span class=\"hljs-comment\">        * sort(List, Comparator):定制排序</span><br><span class=\"hljs-comment\">        * swap(List, i ,j):交换List中索引位置为i和j的元素</span><br><span class=\"hljs-comment\">        * Object max(Collection)：自然排序最小值</span><br><span class=\"hljs-comment\">        * Object max(Collection, Comparator)：定制排序最大值</span><br><span class=\"hljs-comment\">        * Object min(Collection)：自然排序最小值</span><br><span class=\"hljs-comment\">        * Object min(Collection, Comparator)：定制排序最小值</span><br><span class=\"hljs-comment\">        * int frequency(Collection, Object)：返回出现次数</span><br><span class=\"hljs-comment\">        * void copy(List dest, List src)：将src的内容复制到dest</span><br><span class=\"hljs-comment\">        * boolean replaceAll(List list, Object oldValue, Object newVal)：将List中所有oldValue换成newValue</span><br><span class=\"hljs-comment\">        *</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">List</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        list.add(<span class=\"hljs-number\">123</span>);<br>        list.add(<span class=\"hljs-number\">523</span>);<br>        list.add(<span class=\"hljs-number\">13</span>);<br>        list.add(<span class=\"hljs-number\">153</span>);<br>        list.add(<span class=\"hljs-number\">3</span>);<br>        list.add(<span class=\"hljs-number\">17</span>);<br>        System.out.println(list);<span class=\"hljs-comment\">//[123, 523, 13, 153, 3, 17]</span><br>        Collections.reverse(list);<br>        System.out.println(list);<span class=\"hljs-comment\">//[17, 3, 153, 13, 523, 123]</span><br>        Collections.shuffle(list);<br>        System.out.println(list);;<span class=\"hljs-comment\">//[3, 523, 17, 123, 13, 153]</span><br>        Collections.sort(list);<br>        System.out.println(list);<span class=\"hljs-comment\">//[3, 13, 17, 123, 153, 523]</span><br>        Collections.swap(list, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>);<br>        System.out.println(list);<span class=\"hljs-comment\">//[13, 3, 17, 123, 153, 523]</span><br>        <span class=\"hljs-comment\">//一眼就知道是做什么的就不一一举例了。。。。。</span><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//copy方法可能会出错，举例说明一下</span><br>        <span class=\"hljs-type\">List</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        list.add(<span class=\"hljs-number\">123</span>);<br>        list.add(<span class=\"hljs-number\">523</span>);<br>        list.add(<span class=\"hljs-number\">13</span>);<br>        list.add(<span class=\"hljs-number\">153</span>);<br>        list.add(<span class=\"hljs-number\">3</span>);<br>        list.add(<span class=\"hljs-number\">17</span>);<br><span class=\"hljs-comment\">//        List desc = new ArrayList();</span><br><span class=\"hljs-comment\">//        Collections.copy(desc, list);//会报异常，desc的size比list小的就会报错</span><br>        <span class=\"hljs-type\">List</span> <span class=\"hljs-variable\">desc</span> <span class=\"hljs-operator\">=</span> Arrays.asList(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Object</span>[list.size()]);<span class=\"hljs-comment\">//应该这样写</span><br>        Collections.copy(desc, list);<br>        System.out.println(desc);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"泛型\"><a class=\"markdownIt-Anchor\" href=\"#泛型\">#</a> 泛型</h2>\n<h3 id=\"用与不用泛型的对比\"><a class=\"markdownIt-Anchor\" href=\"#用与不用泛型的对比\">#</a> 用与不用泛型的对比</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/4 - 17:17</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 泛型的使用</span><br><span class=\"hljs-comment\">* 1、JDK5.0新增的特性</span><br><span class=\"hljs-comment\">* 2、在集合中使用泛型：</span><br><span class=\"hljs-comment\">*   总结：</span><br><span class=\"hljs-comment\">*   ① 集合接口或集合类在JDK5.0时都修改为带泛型的结构</span><br><span class=\"hljs-comment\">*   ② 在实例化集合类时，可以指明具体的泛型类型</span><br><span class=\"hljs-comment\">*   ③ 指明完以后，在集合类或接口中凡是定义类或接口时，内部结构使用到泛型的位置，都指定为实例化时泛型的类型。</span><br><span class=\"hljs-comment\">*      如：add(E e) ---&gt; 实例化后： add(Integer e)</span><br><span class=\"hljs-comment\">*   ④ 注意点：泛型的类型必须是类，不能是基本数据类型，需要用到基本数据类型的地方，需要写成包装类</span><br><span class=\"hljs-comment\">*   ⑤ 如果实例化时没有指明泛型的类型，默认类型为java.lang.Object</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GenericTest</span> &#123;<br>    <span class=\"hljs-comment\">//再集合中使用泛型之前的情况</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">ArrayList</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        <span class=\"hljs-comment\">//需求：存放学生的成绩</span><br>        list.add(<span class=\"hljs-number\">78</span>);<br>        list.add(<span class=\"hljs-number\">76</span>);<br>        <span class=\"hljs-comment\">//问题一：类型不安全</span><br><span class=\"hljs-comment\">//        list.add(&quot;Tom&quot;);</span><br>        <span class=\"hljs-keyword\">for</span> (Object score : list) &#123;<br>            <span class=\"hljs-comment\">//问题二：强转时，可能出现ClassCastException</span><br>            <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">stuScore</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>)score;<br>            System.out.println(stuScore);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//使用泛型的情况</span><br>    <span class=\"hljs-comment\">//使用泛型的时候，基本数据类型必须写成包装类的形式</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br><span class=\"hljs-comment\">//        ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();//不能写int</span><br>        <span class=\"hljs-comment\">//JDK7新特性，类型推断】</span><br>        ArrayList&lt;Integer&gt; list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<span class=\"hljs-comment\">//不能写int</span><br>        list.add(<span class=\"hljs-number\">123</span>);<br>        list.add(<span class=\"hljs-number\">456</span>);<br>        <span class=\"hljs-comment\">//编译时，会进行类型检查，保证数据的安全</span><br><span class=\"hljs-comment\">//        list.add(&quot;Tom&quot;);//编译不通过</span><br>        <span class=\"hljs-keyword\">for</span> (Integer score : list) &#123;<br>            <span class=\"hljs-comment\">//避免了强转操作</span><br>            System.out.println(score);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//以HashMap举例</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        Map&lt;String, Integer&gt; map = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();<br>        map.put(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        map.put(<span class=\"hljs-string\">&quot;Jack&quot;</span>, <span class=\"hljs-number\">34</span>);<br>        <span class=\"hljs-comment\">//类型不符合要求</span><br><span class=\"hljs-comment\">//        map.put(123, &quot;Tom&quot;);</span><br>        <span class=\"hljs-comment\">//泛型的嵌套</span><br>        Set&lt;Map.Entry&lt;String, Integer&gt;&gt; set = map.entrySet();<br>        Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = set.iterator();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"自定义泛型\"><a class=\"markdownIt-Anchor\" href=\"#自定义泛型\">#</a> 自定义泛型</h3>\n<h4 id=\"泛型类-泛型接口\"><a class=\"markdownIt-Anchor\" href=\"#泛型类-泛型接口\">#</a> 泛型类、泛型接口</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/4 - 20:05</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 1、如何自定义泛型结构：泛型类、泛型接口、泛型方法</span><br><span class=\"hljs-comment\">* 2、关于自定义泛型类、泛型方法</span><br><span class=\"hljs-comment\">*   &gt; 如果定义了泛型类，实例化没有指明类的泛型，则认位此泛型类型为Object类型</span><br><span class=\"hljs-comment\">*   &gt; 建议实例化时指明类的泛型</span><br><span class=\"hljs-comment\">*   &gt; 若子类在继承带泛型的父类时，指明了泛型类型，则子类不再是泛型类。在实例化时，不需要指明泛型</span><br><span class=\"hljs-comment\">*</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Order</span>&lt;T&gt; &#123;<br>    String name;<br>    <span class=\"hljs-type\">int</span> orderId;<br>    <span class=\"hljs-comment\">//类的内部结构可以使用类的泛型</span><br>    T orderT;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Order</span><span class=\"hljs-params\">()</span>&#123;&#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Order</span><span class=\"hljs-params\">(String name, <span class=\"hljs-type\">int</span> orderId, T orderT)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-built_in\">this</span>.orderId = orderId;<br>        <span class=\"hljs-built_in\">this</span>.orderT = orderT;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> T <span class=\"hljs-title function_\">getOrderT</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> orderT;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setOrderT</span><span class=\"hljs-params\">(T orderT)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.orderT = orderT;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SubOrder</span>&lt;T, E&gt; <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Order</span>&lt;T&gt;&#123;<span class=\"hljs-comment\">//未指明泛型类型，SubOrder还是泛型类</span><br>    E name;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SubOrder1</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Order</span>&lt;Integer&gt;&#123;<span class=\"hljs-comment\">//指明了泛型类型，SubOrder1不再是泛型类</span><br><br>&#125;<br><br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"泛型方法\"><a class=\"markdownIt-Anchor\" href=\"#泛型方法\">#</a> 泛型方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.ArrayList;<br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/4 - 21:11</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 自定义泛型方法</span><br><span class=\"hljs-comment\">* 1、泛型方法可以出现在非泛型类中</span><br><span class=\"hljs-comment\">* 2、泛型方法：在方法中出现了泛型的结构，泛型参数与类的泛型参数没有任何关系</span><br><span class=\"hljs-comment\">*    换句话说，泛型方法所属的类是不是泛型都没有关系</span><br><span class=\"hljs-comment\">* 3、泛型方法可以声明为static，原因：泛型参数是在调用方法时确定的，并非在实例化类时确定</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GenericMethodTest</span>&lt;T&gt; &#123;<br>    T name;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">(T name)</span>&#123;<span class=\"hljs-comment\">//这不是泛型方法！！！！</span><br>        System.out.println(name);<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> &lt;E&gt; List&lt;E&gt; <span class=\"hljs-title function_\">copyFromArrayToList</span><span class=\"hljs-params\">(E[] arr)</span>&#123;<span class=\"hljs-comment\">//声明泛型方法：在返回类型前面加上&lt;&gt;</span><br>        ArrayList&lt;E&gt; list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-keyword\">for</span> (E e : arr) &#123;<br>            list.add(e);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> list;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//测试泛型方法</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        GenericMethodTest&lt;String&gt; order = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">GenericMethodTest</span>&lt;&gt;();<br>        Integer[] arr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]&#123;<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>&#125;;<br>        <span class=\"hljs-comment\">//泛型方法在调用时，指明泛型参数的类型</span><br>        List&lt;Integer&gt; list = order.copyFromArrayToList(arr);<br>        System.out.println(list);<br>    &#125;<br>&#125;<br><br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">A</span>&#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> &lt;E&gt; List&lt;E&gt; <span class=\"hljs-title function_\">copyFromArrayToList</span><span class=\"hljs-params\">(E[] arr)</span>&#123;<span class=\"hljs-comment\">//非泛型类也可以定义泛型方法，且可以声明为static</span><br>        ArrayList&lt;E&gt; list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-keyword\">for</span> (E e : arr) &#123;<br>            list.add(e);<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> list;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"泛型在继承上的表现\"><a class=\"markdownIt-Anchor\" href=\"#泛型在继承上的表现\">#</a> 泛型在继承上的表现</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Array;<br><span class=\"hljs-keyword\">import</span> java.util.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/4 - 17:17</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 泛型的使用</span><br><span class=\"hljs-comment\">* 1、JDK5.0新增的特性</span><br><span class=\"hljs-comment\">* 2、在集合中使用泛型：</span><br><span class=\"hljs-comment\">*   总结：</span><br><span class=\"hljs-comment\">*   ① 集合接口或集合类在JDK5.0时都修改为带泛型的结构</span><br><span class=\"hljs-comment\">*   ② 在实例化集合类时，可以指明具体的泛型类型</span><br><span class=\"hljs-comment\">*   ③ 指明完以后，在集合类或接口中凡是定义类或接口时，内部结构使用到泛型的位置，都指定为实例化时泛型的类型。</span><br><span class=\"hljs-comment\">*      如：add(E e) ---&gt; 实例化后： add(Integer e)</span><br><span class=\"hljs-comment\">*   ④ 注意点：泛型的类型必须是类，不能是基本数据类型，需要用到基本数据类型的地方，需要写成包装类</span><br><span class=\"hljs-comment\">*   ⑤ 如果实例化时没有指明泛型的类型，默认类型为java.lang.Object</span><br><span class=\"hljs-comment\">* 3、如何自定义泛型结构：泛型类、泛型接口、泛型方法</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GenericTest</span> &#123;<br>    <span class=\"hljs-comment\">//再集合中使用泛型之前的情况</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">ArrayList</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>();<br>        <span class=\"hljs-comment\">//需求：存放学生的成绩</span><br>        list.add(<span class=\"hljs-number\">78</span>);<br>        list.add(<span class=\"hljs-number\">76</span>);<br>        <span class=\"hljs-comment\">//问题一：类型不安全</span><br><span class=\"hljs-comment\">//        list.add(&quot;Tom&quot;);</span><br>        <span class=\"hljs-keyword\">for</span> (Object score : list) &#123;<br>            <span class=\"hljs-comment\">//问题二：强转时，可能出现ClassCastException</span><br>            <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">stuScore</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>)score;<br>            System.out.println(stuScore);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//使用泛型的情况</span><br>    <span class=\"hljs-comment\">//使用泛型的时候，基本数据类型必须写成包装类的形式</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br><span class=\"hljs-comment\">//        ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();//不能写int</span><br>        <span class=\"hljs-comment\">//JDK7新特性，类型推断】</span><br>        ArrayList&lt;Integer&gt; list = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<span class=\"hljs-comment\">//不能写int</span><br>        list.add(<span class=\"hljs-number\">123</span>);<br>        list.add(<span class=\"hljs-number\">456</span>);<br>        <span class=\"hljs-comment\">//编译时，会进行类型检查，保证数据的安全</span><br><span class=\"hljs-comment\">//        list.add(&quot;Tom&quot;);//编译不通过</span><br>        <span class=\"hljs-keyword\">for</span> (Integer score : list) &#123;<br>            <span class=\"hljs-comment\">//避免了强转操作</span><br>            System.out.println(score);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//以HashMap举例</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        Map&lt;String, Integer&gt; map = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();<br>        map.put(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        map.put(<span class=\"hljs-string\">&quot;Jack&quot;</span>, <span class=\"hljs-number\">34</span>);<br>        <span class=\"hljs-comment\">//类型不符合要求</span><br><span class=\"hljs-comment\">//        map.put(123, &quot;Tom&quot;);</span><br>        <span class=\"hljs-comment\">//泛型的嵌套</span><br>        Set&lt;Map.Entry&lt;String, Integer&gt;&gt; set = map.entrySet();<br>        Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = set.iterator();<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 泛型在继承方面的体现</span><br><span class=\"hljs-comment\">    * 类A是类B的父类，G&lt;A&gt; 和G&lt;B&gt;不具备子父类关系，二者是并列关系，不能相互赋值</span><br><span class=\"hljs-comment\">    * 类A是类B的父类，A&lt;G&gt; 和 B&lt;G&gt;具有子父类关系</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">obj</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        obj = str;<br><br>        Object[] arr1 = <span class=\"hljs-literal\">null</span>;<br>        String[] arr2 = <span class=\"hljs-literal\">null</span>;<br>        arr1 = arr2;<br><br>        List&lt;Object&gt; list1 = <span class=\"hljs-literal\">null</span>;<br>        List&lt;String&gt; list2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-comment\">//此时list1和list2的类型不具有子父类关系，编译不通过</span><br><span class=\"hljs-comment\">//        list1 = list2;//报错</span><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 原因：假设可以编译通过,则list1和list2指向同一个list对象，通过list1.add()可以添加非String类型的对象到list对象</span><br><span class=\"hljs-comment\">        * */</span><br>        <br>        <span class=\"hljs-type\">Date</span> <span class=\"hljs-variable\">date</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();<br><span class=\"hljs-comment\">//        str = date;//这两个报错信息的原理其实是一样的</span><br>        <br>        show(list1);<br><span class=\"hljs-comment\">//        show(list2);//报错，原理同上</span><br>        <br>        List&lt;String&gt; list3 = <span class=\"hljs-literal\">null</span>;<br>        ArrayList&lt;String&gt; list4 = <span class=\"hljs-literal\">null</span>;<br>        list3 = list4;<span class=\"hljs-comment\">//可以赋值，类A是类B的父类，A&lt;G&gt; 和 B&lt;G&gt;具有子父类关系</span><br>        <br>    &#125;<br>    <br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">show</span><span class=\"hljs-params\">(List&lt;Object&gt; list)</span>&#123;<br>        <br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"通配符的使用\"><a class=\"markdownIt-Anchor\" href=\"#通配符的使用\">#</a> 通配符的使用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\">\t<span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 通配符的使用</span><br><span class=\"hljs-comment\">        * 通配符： ?</span><br><span class=\"hljs-comment\">        * 类A是类B的父类，G&lt;A&gt;和G&lt;B&gt;是并列关系，二者共同的父类是G&lt;?&gt;</span><br><span class=\"hljs-comment\">        * 通配符的其他形式：</span><br><span class=\"hljs-comment\">        *   ? extends A表示A及A的子类，G&lt;? extends A&gt;可以是G&lt;A&gt;和G&lt;B&gt;的父类，其中B是A的子类</span><br><span class=\"hljs-comment\">        *   ? super A表示A及A的父类，G&lt;? extends A&gt;可以是G&lt;A&gt;和G&lt;B&gt;的父类，其中B是A的</span><br><span class=\"hljs-comment\">        * */</span><br><br>        List&lt;Object&gt; list1 = <span class=\"hljs-literal\">null</span>;<br>        List&lt;String&gt; list2 = <span class=\"hljs-literal\">null</span>;<br>        List&lt;?&gt; list3 = <span class=\"hljs-literal\">null</span>;<br>        list3 = list1;<span class=\"hljs-comment\">//可以赋值</span><br>        list3 = list2;<span class=\"hljs-comment\">//可以赋值</span><br><br>        List&lt;String&gt; list4 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        list4.add(<span class=\"hljs-string\">&quot;AA&quot;</span>);<br>        list3 = list4;<br>        <span class=\"hljs-comment\">//添加：对于List&lt;?&gt;就不能向其内部添加数据，</span><br>        <span class=\"hljs-comment\">//但是可以添加null</span><br><span class=\"hljs-comment\">//        list3.add(&quot;DD&quot;);//报错，类型不匹配</span><br>        list3.add(<span class=\"hljs-literal\">null</span>);<span class=\"hljs-comment\">//只能添加null</span><br>        <span class=\"hljs-comment\">//获取(读取)：允许读取数据</span><br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">o</span> <span class=\"hljs-operator\">=</span> list3.get(<span class=\"hljs-number\">0</span>);<span class=\"hljs-comment\">//读出来的是Object类型</span><br><br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">print</span><span class=\"hljs-params\">(List&lt;?&gt; list)</span>&#123;<br>        Iterator&lt;?&gt; iterator = list.iterator();<br>        <span class=\"hljs-keyword\">for</span> (Object o : list) &#123;<br>            System.out.println(o);<br>        &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"io流\"><a class=\"markdownIt-Anchor\" href=\"#io流\">#</a> IO 流</h2>\n<h3 id=\"file类的使用\"><a class=\"markdownIt-Anchor\" href=\"#file类的使用\">#</a> File 类的使用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.File;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/5 - 22:07</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* File类的使用</span><br><span class=\"hljs-comment\">* 1、File类的一个对象，代表一个文件或一个文件目录（俗称：文件夹）</span><br><span class=\"hljs-comment\">* 2、File类声明在java.io下</span><br><span class=\"hljs-comment\">* 3、File类中涉及到关机文件或文件目录的创建、删除、重命名、修改时间、文件大小等方法，并未涉及到写入或读取文件内容的操作，</span><br><span class=\"hljs-comment\">*   如果需要读取或写入文件内容，必须使用IO流来完成</span><br><span class=\"hljs-comment\">* 4、后续File类对象通常会作为参数传递到流的构造器中，指明读取或写入的“目标”</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FileTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 1、如何创建File类对象</span><br><span class=\"hljs-comment\">    * 2、</span><br><span class=\"hljs-comment\">    *   相对路径：相较于某个路径下，指明的路径</span><br><span class=\"hljs-comment\">    *   绝对路径：包含盘符在内的文件或文件目录的路径</span><br><span class=\"hljs-comment\">    * 3、路径分隔符和系统有关</span><br><span class=\"hljs-comment\">    *   windows和dos系统中，是&#x27;\\&#x27;</span><br><span class=\"hljs-comment\">    *   Unix和URL中，是&#x27;/&#x27;</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//构造器一：File(String pathName)</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<span class=\"hljs-comment\">//表示在当前路径下的hello.txt文件</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23&quot;</span>);<br><span class=\"hljs-comment\">//        File.separatorChar：如果不记得是&#x27;\\&#x27;还是&#x27;/&#x27;，可以使用File.separatorChar</span><br>        System.out.println(file1);<br>        System.out.println(file2);<span class=\"hljs-comment\">//尽管磁盘中没有这个文件/目录，也不会报错</span><br><br>        <span class=\"hljs-comment\">//构造器二：File(String parent, String child)：在parent路径下新建child路径/文件</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23&quot;</span>, <span class=\"hljs-string\">&quot;JavaSenior&quot;</span>);<br>        System.out.println(file3);<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\JavaSenior</span><br><br>        <span class=\"hljs-comment\">//构造器三：File(File parent, String child)：类似于构造器二</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file4</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(file3, <span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        System.out.println(file4);<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\JavaSenior\\hello.txt</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * File类常用方法</span><br><span class=\"hljs-comment\">    * 1、public String getAbsolutePath()：获取绝对路径</span><br><span class=\"hljs-comment\">    * 2、public String getPath()：获取路径</span><br><span class=\"hljs-comment\">    * 3、public String getName()：获取名称</span><br><span class=\"hljs-comment\">    * 4、public String getParent()：获取上层文件目录路径，若无，返回null</span><br><span class=\"hljs-comment\">    * 5、public long length()：获取文件长度（即：字节数）。不能获取目录的长度</span><br><span class=\"hljs-comment\">    * 6、public long lastModified()：获取最后一次的修改时间，毫秒值</span><br><span class=\"hljs-comment\">    * 如下的两个方法适用于文件目录</span><br><span class=\"hljs-comment\">    * 7、public String[] list()：获取指定目录下的所有文件或者文件目录的名称数组</span><br><span class=\"hljs-comment\">    * 8、public File[] listFiles()：获取指定目录下的所有文件或者文件目录的File数组</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23\\\\JavaSenior\\\\hello.txt&quot;</span>);<br>        System.out.println(file1.getAbsolutePath());<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\hello.txt</span><br>        System.out.println(file1.getPath());<span class=\"hljs-comment\">//hello.txt</span><br>        System.out.println(file1.getName());<span class=\"hljs-comment\">//hello.txt</span><br>        System.out.println(file1.getParent());<span class=\"hljs-comment\">//null，以相对路径创建的file不能获取parent</span><br>        System.out.println(file1.length());<span class=\"hljs-comment\">//0，因为文件不存在</span><br>        System.out.println(file1.lastModified());<span class=\"hljs-comment\">//0。因为文件不存在</span><br><br>        System.out.println();<br><br>        System.out.println(file2.getAbsolutePath());<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\JavaSenior\\hello.txt</span><br>        System.out.println(file2.getPath());<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\JavaSenior\\hello.txt</span><br>        System.out.println(file2.getName());<span class=\"hljs-comment\">//hello.txt</span><br>        System.out.println(file2.getParent());<span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\JavaSenior</span><br>        System.out.println(file2.length());<br>        System.out.println(file2.lastModified());<br><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23&quot;</span>);<br>        String[] list = file.list();<br>        <span class=\"hljs-keyword\">for</span> (String s : list) &#123;<br>            <span class=\"hljs-comment\">//day23.iml src test</span><br>            System.out.print(s + <span class=\"hljs-string\">&quot; &quot;</span>);<br>        &#125;<br>        System.out.println();<br>        File[] files = file.listFiles();<br>        <span class=\"hljs-keyword\">for</span> (File file3 : files) &#123;<br>            <span class=\"hljs-comment\">//G:\\JAVA\\learn\\day23\\day23.iml G:\\JAVA\\learn\\day23\\src G:\\JAVA\\learn\\day23\\test</span><br>            System.out.print(file3 + <span class=\"hljs-string\">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * public boolean renameTo(File desc)：把文件重命名喂指定的文件路径</span><br><span class=\"hljs-comment\">    * 比如：file1.renameTo(file2)</span><br><span class=\"hljs-comment\">    *       要想保证操作成功：必须保证file1必须存在于硬盘中，且file2不能在硬盘中存在</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;E:\\\\hi.txt&quot;</span>);<br>        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">renameTo</span> <span class=\"hljs-operator\">=</span> file1.renameTo(file2);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 判断相关</span><br><span class=\"hljs-comment\">    * public boolean isDirectory()：是否是文件目录</span><br><span class=\"hljs-comment\">    * public boolean isFile()：是否是文件</span><br><span class=\"hljs-comment\">    * public boolean exists()：是否存在</span><br><span class=\"hljs-comment\">    * public boolean canRead()：是否可读</span><br><span class=\"hljs-comment\">    * public boolean canWrite()：是否可写</span><br><span class=\"hljs-comment\">    * public boolean isHidden()：是否隐藏</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        System.out.println(file.isFile());<span class=\"hljs-comment\">//true</span><br>        System.out.println(file.isDirectory());<span class=\"hljs-comment\">//false</span><br>        System.out.println(file.exists());<span class=\"hljs-comment\">//true</span><br>        System.out.println(file.canRead());<span class=\"hljs-comment\">//true,目录也是可读可写的</span><br>        System.out.println(file.canWrite());<span class=\"hljs-comment\">//true</span><br>        System.out.println(file.isHidden());<span class=\"hljs-comment\">//false</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 增删相关</span><br><span class=\"hljs-comment\">    * public boolean createNewFile()：若文件不存在，则创建文件</span><br><span class=\"hljs-comment\">    * public boolean mkdir()：创建目录，若目录存在或上级目录不存在，则不创建</span><br><span class=\"hljs-comment\">    * public boolean mkdirs()：创建目录，若上级目录不存在，则一并创建</span><br><span class=\"hljs-comment\">    * public boolean delete()：删除文件或文件夹，若要删除一个目录，必须保证该目录下没有别的文件和目录</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//文件的创建与删除</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello1.txt&quot;</span>);<br>        <span class=\"hljs-keyword\">if</span>(!file.exists())&#123;<br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                file.createNewFile();<br>                System.out.println(<span class=\"hljs-string\">&quot;创建成功&quot;</span>);<br>            &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            file.delete();<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>        <span class=\"hljs-comment\">//目录的创建与删除</span><br>        <span class=\"hljs-comment\">//父目录存在的情况下</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23\\\\createDirectoryTest&quot;</span>);<br>        <span class=\"hljs-keyword\">if</span>(!file1.exists())&#123;<br>            file1.mkdir();<br>            System.out.println(<span class=\"hljs-string\">&quot;创建成功&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            file1.delete();<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br><br>        <span class=\"hljs-comment\">//父目录不存在的情况下，使用mkdirs()</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;G:\\\\JAVA\\\\learn\\\\day23\\\\createDirectoryTest1\\\\test&quot;</span>);<br>        <span class=\"hljs-keyword\">if</span>(!file2.exists())&#123;<br>            file2.mkdirs();<br>            System.out.println(<span class=\"hljs-string\">&quot;创建成功&quot;</span>);<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            file2.delete();<br>            System.out.println(<span class=\"hljs-string\">&quot;删除成功&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"流的体系结构\"><a class=\"markdownIt-Anchor\" href=\"#流的体系结构\">#</a> 流的体系结构</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 一、流的分类</span><br><span class=\"hljs-comment\">*   1、按照操作数据单位：字节流、字符流</span><br><span class=\"hljs-comment\">*   2、按照数据的流向：输入流、输出流</span><br><span class=\"hljs-comment\">*   3、流的角色：节点流、处理流</span><br><span class=\"hljs-comment\">* 二、流的体系结构</span><br><span class=\"hljs-comment\">*   抽象基类            节点流                     缓冲流（处理流中的一种）</span><br><span class=\"hljs-comment\">*   InputStream        FileInputStream           BufferedInputStream</span><br><span class=\"hljs-comment\">*   OutputStream       FileOutputStream          BufferedOutputStream</span><br><span class=\"hljs-comment\">*   Reader             FileReader                BufferedReader</span><br><span class=\"hljs-comment\">*   Writer             FileWriter                BufferedWriter</span><br><span class=\"hljs-comment\">* */</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"filereader与filewriter\"><a class=\"markdownIt-Anchor\" href=\"#filereader与filewriter\">#</a> FileReader 与 FileWriter</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FileReaderWriterTest</span> &#123;<span class=\"hljs-comment\">//字符流不能用于处理图片等字节流文件</span><br>    <span class=\"hljs-comment\">//FileReader的使用</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 将day23下的hello.txt文件内容读入程序中，并输出到控制台</span><br><span class=\"hljs-comment\">        * 说明：</span><br><span class=\"hljs-comment\">        *   &gt; 为了保证流资源一定可以执行关闭操作，需要使用try-catch-finally处理</span><br><span class=\"hljs-comment\">        *   &gt; 读入的文件一定要存在，否则就会报FileNotFoundException</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-comment\">//1、实例化File类的对象，指明要操作的文件</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<span class=\"hljs-comment\">//相较于当前Module</span><br>        <span class=\"hljs-type\">FileReader</span> <span class=\"hljs-variable\">fileReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//2、提供具体的流</span><br>            fileReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileReader</span>(file);<br>            <span class=\"hljs-comment\">//3、数据的读入</span><br>            <span class=\"hljs-comment\">//int read()：返回读入的一个字符，如果达到文件末尾，返回-1</span><br>            <span class=\"hljs-type\">int</span> data;<br>            <span class=\"hljs-keyword\">while</span>((data = fileReader.read()) != -<span class=\"hljs-number\">1</span>)&#123;<br>                System.out.print((<span class=\"hljs-type\">char</span>)data);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-comment\">//4、流的关闭操作</span><br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                <span class=\"hljs-keyword\">if</span>(fileReader != <span class=\"hljs-literal\">null</span>)<br>                    fileReader.close();<br>            &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//使用read()重载的方法</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        <span class=\"hljs-type\">FileReader</span> <span class=\"hljs-variable\">fileReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            fileReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileReader</span>(file);<br>            <span class=\"hljs-type\">char</span>[] cbuf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">5</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-comment\">//read(char[] cbuf)：返回每次读入cbuf数组中的字符的个数，如果达到文件末尾，返回-1</span><br>            <span class=\"hljs-keyword\">while</span>((len = fileReader.read(cbuf)) != -<span class=\"hljs-number\">1</span>)&#123;<span class=\"hljs-comment\">//难点，需要特别注意len的作用</span><br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; len; i++) &#123;<br>                    System.out.print(cbuf[i]);<br>                &#125;<br><span class=\"hljs-comment\">//                for (char c : cbuf) &#123;//错误的写法</span><br><span class=\"hljs-comment\">//                    System.out.print(c);</span><br><span class=\"hljs-comment\">//                &#125;</span><br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                <span class=\"hljs-keyword\">if</span> (fileReader != <span class=\"hljs-literal\">null</span>)<br>                    fileReader.close();<br>            &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//向写入写入数据</span><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 1、若要写入的文件不存在，则会自动创建文件</span><br><span class=\"hljs-comment\">    * 2、若要写入的文件存在，则取决于FileWriter构造器中的append参数取值，取值为true，则为追加方式，为false则为覆盖方式</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//1、提供File类的对象，指明写出到的文件</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello1.txt&quot;</span>);<br>        <span class=\"hljs-type\">FileWriter</span> <span class=\"hljs-variable\">fileWriter</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<span class=\"hljs-comment\">//以覆盖方式写入文件</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//2、提供FileWriter类的对象，用于数据的写出</span><br>            fileWriter = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileWriter</span>(file, <span class=\"hljs-literal\">false</span>);<br>            <span class=\"hljs-comment\">//3、写出的操作</span><br>            fileWriter.write(<span class=\"hljs-string\">&quot;I have a dream \\n&quot;</span>);<br>            fileWriter.write(<span class=\"hljs-string\">&quot;You need to have a dream \\n&quot;</span>);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span> (fileWriter != <span class=\"hljs-literal\">null</span>)<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    fileWriter.close();<span class=\"hljs-comment\">//4、流资源的关闭</span><br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"fileinputstream与fileoutputstream\"><a class=\"markdownIt-Anchor\" href=\"#fileinputstream与fileoutputstream\">#</a> FileInputStream 与 FileOutputStream</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.File;<br><span class=\"hljs-keyword\">import</span> java.io.FileInputStream;<br><span class=\"hljs-keyword\">import</span> java.io.FileOutputStream;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/6 - 20:52</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* FileInputStream与FileOutputStream的使用</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FileInputOutputStreamTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 字节流不能用来读取单个字符长度超过1字节的文本文件</span><br><span class=\"hljs-comment\">    * 结论：对于文本文件（.txt\\.java\\.cpp），使用字符流处理；</span><br><span class=\"hljs-comment\">    * 对于非文本文件(.jpg\\.mp3\\.avi\\.doc\\.ppt等)，使用字节流处理</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">file</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>);<br>        <span class=\"hljs-type\">FileInputStream</span> <span class=\"hljs-variable\">fileInputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            fileInputStream = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(file);<br>            <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">5</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">while</span>((len = fileInputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(buffer, <span class=\"hljs-number\">0</span> ,len);<br>                System.out.print(s);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span>(fileInputStream != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    fileInputStream.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 实现一张图片的复制操作</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//建File</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">src</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花.jpg&quot;</span>);<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">dest</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花_copy.jpg&quot;</span>);<br>        <span class=\"hljs-comment\">//建流类</span><br>        <span class=\"hljs-type\">FileInputStream</span> <span class=\"hljs-variable\">fileInputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">FileOutputStream</span> <span class=\"hljs-variable\">fileOutputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            fileInputStream = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(src);<br>            fileOutputStream = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(dest);<br>            <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">5</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-comment\">//复制的过程</span><br>            <span class=\"hljs-keyword\">while</span>((len = fileInputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>                fileOutputStream.write(buffer, <span class=\"hljs-number\">0</span> ,len);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-comment\">//关闭</span><br>            <span class=\"hljs-keyword\">if</span>(fileInputStream != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    fileInputStream.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class=\"hljs-keyword\">if</span>(fileOutputStream != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    fileOutputStream.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"缓冲流\"><a class=\"markdownIt-Anchor\" href=\"#缓冲流\">#</a> 缓冲流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/6 - 21:43</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 缓冲流的使用</span><br><span class=\"hljs-comment\">* 1、缓冲流：BufferedInputStream、BufferedOutputStream、BufferedReader、BufferedWriter</span><br><span class=\"hljs-comment\">* 2、作用：提升流读取、写入的速度</span><br><span class=\"hljs-comment\">* 3、处理流，就是”套接“在已有的流的基础上</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BufferedTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 实现非文本文件的复制</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//造文件</span><br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">src</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花.jpg&quot;</span>);<br>        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">dest</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花_copy2.jpg&quot;</span>);<br>        <span class=\"hljs-type\">BufferedInputStream</span> <span class=\"hljs-variable\">bufferedInputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">BufferedOutputStream</span> <span class=\"hljs-variable\">bufferedOutputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//造流：处理流作用在节点流之上</span><br>            bufferedInputStream = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(src));<br>            bufferedOutputStream = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedOutputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(dest));<br>            <span class=\"hljs-comment\">//复制的细节</span><br>            <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">10</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">while</span>((len = bufferedInputStream.read(buffer))!= -<span class=\"hljs-number\">1</span>)&#123;<br>                bufferedOutputStream.write(buffer, <span class=\"hljs-number\">0</span>, len);<br><span class=\"hljs-comment\">//                bufferedOutputStream.flush();//刷新缓冲区</span><br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-comment\">//关闭流</span><br>            <span class=\"hljs-comment\">// 原则上，四个都要关，先关闭处理流，再关闭节点流</span><br>            <span class=\"hljs-comment\">// 特性：在关闭外层流的同时，内层流也会自动关闭，所以只关闭处理流即可</span><br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                <span class=\"hljs-keyword\">if</span>(bufferedInputStream != <span class=\"hljs-literal\">null</span>)<br>                    bufferedInputStream.close();<br>            &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                <span class=\"hljs-keyword\">if</span> (bufferedOutputStream != <span class=\"hljs-literal\">null</span>) &#123;<br>                    bufferedOutputStream.close();<br>                &#125;<br>            &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//BufferedReader和BufferedWriter的使用</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">BufferedReader</span> <span class=\"hljs-variable\">bufferedReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">BufferedWriter</span> <span class=\"hljs-variable\">bufferedWriter</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//造对象</span><br>            bufferedReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedReader</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileReader</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>)));<br>            bufferedWriter = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedWriter</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileWriter</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello_copy.txt&quot;</span>)));<br>            <span class=\"hljs-type\">char</span>[] cbuf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">5</span>];<br>            <span class=\"hljs-comment\">//方法一</span><br>            <span class=\"hljs-comment\">/*int len;</span><br><span class=\"hljs-comment\">            //读写操作</span><br><span class=\"hljs-comment\">            while((len = bufferedReader.read(cbuf))!= -1)&#123;</span><br><span class=\"hljs-comment\">                bufferedWriter.write(cbuf,0,len);</span><br><span class=\"hljs-comment\">    //            bufferedWriter.flush();</span><br><span class=\"hljs-comment\">            &#125;*/</span><br>            <span class=\"hljs-comment\">//方法二：使用String</span><br>            String str;<br>            <span class=\"hljs-keyword\">while</span>((str = bufferedReader.readLine()) != <span class=\"hljs-literal\">null</span>)&#123;<span class=\"hljs-comment\">//这个方法读不出来换行符</span><br>                bufferedWriter.write(str + <span class=\"hljs-string\">&#x27;\\n&#x27;</span>);<span class=\"hljs-comment\">//手动添加换行符</span><br><span class=\"hljs-comment\">//                bufferedWriter.newLine();//添加换行符，和手动添加&#x27;\\n&#x27;效果相同</span><br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-comment\">//关闭资源</span><br>            <span class=\"hljs-keyword\">if</span> (bufferedReader != <span class=\"hljs-literal\">null</span>)<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    bufferedReader.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            <span class=\"hljs-keyword\">if</span> (bufferedWriter != <span class=\"hljs-literal\">null</span>)<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    bufferedWriter.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"转换流\"><a class=\"markdownIt-Anchor\" href=\"#转换流\">#</a> 转换流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/8 - 1:23</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 处理流二：转换流</span><br><span class=\"hljs-comment\">* 1、属于字符流</span><br><span class=\"hljs-comment\">* 2、包括</span><br><span class=\"hljs-comment\">*   &gt; InputStreamReader：将一个字节的输入流转换为字符的输入流</span><br><span class=\"hljs-comment\">*   &gt; OutputStreamWriter：将一个字符的输出流转换为字节的输出流</span><br><span class=\"hljs-comment\">* 3、作用：提供字节流与字符流之间的转换</span><br><span class=\"hljs-comment\">* 4、解码：字节、字节数组 ---&gt; 字符数组、字符串</span><br><span class=\"hljs-comment\">*    编码：字符数组、字符串---&gt; 字节、字节数组</span><br><span class=\"hljs-comment\">* 5、字符集：</span><br><span class=\"hljs-comment\">*   &gt; ASCII：美国标准信息交换码，用一个字节的7位表示</span><br><span class=\"hljs-comment\">*   &gt; ISO8859-1:拉丁码表，欧洲码表，用一个字节的8位表示</span><br><span class=\"hljs-comment\">*   &gt; GB2312：中国的中文编码表，最多两个字节编码所有字符</span><br><span class=\"hljs-comment\">*   &gt; GBK：中国的中文编码表升级，融合了更多的中文文字符号，最多两个字节编码</span><br><span class=\"hljs-comment\">*   &gt; Unicode：国际标准码，融合了目前人类使用的所有字符，为每一个字符分配唯一的字符码，每个字符使用2字节       </span><br><span class=\"hljs-comment\">*   &gt; UTF-8：变长的编码方式，可用1-4个字节来表示一个字符</span><br><span class=\"hljs-comment\">*   &gt; ANSI：系统默认字符集，英文系统是ISO8859-1,中文操作系统是GBK</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ChangeStreamTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * InputStreamReader的使用：实现字节输入流到字符流的转换</span><br><span class=\"hljs-comment\">    * 应该使用try-catch-finally处理异常，这里懒得写了，直接throws IOException</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-type\">FileInputStream</span> <span class=\"hljs-variable\">fis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>));<br><span class=\"hljs-comment\">//        InputStreamReader isr = new InputStreamReader(fis);//使用系统默认字符集</span><br>        <span class=\"hljs-comment\">//参数2指明了字符集，根据文件的编码字符集选择解码字符集</span><br>        <span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">isr1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(fis, <span class=\"hljs-string\">&quot;UTF-8&quot;</span>);<span class=\"hljs-comment\">//使用系统默认字符集</span><br>        <span class=\"hljs-type\">char</span>[] cbuf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">20</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = isr1.read(cbuf))!= -<span class=\"hljs-number\">1</span>)&#123;<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(cbuf, <span class=\"hljs-number\">0</span>, len);<br>            System.out.print(str);<br>        &#125;<br>        isr1.close();<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * InputStreamReader和OutputStreamWriter的综合使用：读取utf-8的文件，并以gbk编码存储</span><br><span class=\"hljs-comment\">    * 应该使用try-catch-finally处理异常，这里懒得写了，直接throws IOException</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<br>        <span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">isr</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello.txt&quot;</span>)));<br>        <span class=\"hljs-comment\">//以GBK字符集写入</span><br>        <span class=\"hljs-type\">OutputStreamWriter</span> <span class=\"hljs-variable\">osw</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">OutputStreamWriter</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-keyword\">new</span> \t\t\t\t      <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;hello_gbk.txt&quot;</span>)),<span class=\"hljs-string\">&quot;GBK&quot;</span>);<br>        <span class=\"hljs-type\">char</span>[] cbuf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">20</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span> ((len = isr.read(cbuf)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">s</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(cbuf, <span class=\"hljs-number\">0</span>, len);<br>            osw.write(s);<br>            System.out.print(s);<br>        &#125;<br>        isr.close();<br>        osw.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"标准输入输出流\"><a class=\"markdownIt-Anchor\" href=\"#标准输入输出流\">#</a> 标准输入输出流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.BufferedInputStream;<br><span class=\"hljs-keyword\">import</span> java.io.BufferedReader;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.io.InputStreamReader;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/8 - 23:32</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 其它流的使用</span><br><span class=\"hljs-comment\">* 1、标准输入、输出流</span><br><span class=\"hljs-comment\">* 2、打印流</span><br><span class=\"hljs-comment\">* 3、数据流</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OtherStreamTest</span> &#123;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 1、标准的输入、输出流</span><br><span class=\"hljs-comment\">    *   System.in：标准的输入流，默认从键盘输入</span><br><span class=\"hljs-comment\">    *   System.out:标准的输出流，默认从控制台输出</span><br><span class=\"hljs-comment\">    * 2、System类的setIn(InputStream)和setOut(PrintStream)可以使输入输出重定向</span><br><span class=\"hljs-comment\">    * 3、练习：从键盘输入字符串直到e或者exit时退出，将输入的字符串转成大写输出</span><br><span class=\"hljs-comment\">    *   &gt; 方法一：使用Scanner实现，调用next()返回字符串</span><br><span class=\"hljs-comment\">    *   &gt; 方法二：使用System.in实现：System.in ---&gt; 转换流 ---&gt; BufferedInputStream中的readLine()</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-comment\">//@Test中不能进行输入输出操作，所以放在main中</span><br>        <span class=\"hljs-type\">BufferedReader</span> <span class=\"hljs-variable\">br</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">isr</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(System.in);<br>            br = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedReader</span>(isr);<br>            <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-literal\">true</span>)&#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;请输入字符串&quot;</span>);<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">data</span> <span class=\"hljs-operator\">=</span> br.readLine();<br>                <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-string\">&quot;e&quot;</span>.equalsIgnoreCase(data) || <span class=\"hljs-string\">&quot;exit&quot;</span>.equalsIgnoreCase(data))&#123;<br>                    System.exit(<span class=\"hljs-number\">0</span>);<br>                    System.out.println(<span class=\"hljs-string\">&quot;程序结束&quot;</span>);<br>                &#125;<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">upperCase</span> <span class=\"hljs-operator\">=</span> data.toUpperCase();<br>                System.out.println(upperCase);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span> (br != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    br.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"打印流\"><a class=\"markdownIt-Anchor\" href=\"#打印流\">#</a> 打印流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.File;<br><span class=\"hljs-keyword\">import</span> java.io.FileOutputStream;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.io.PrintStream;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/9 - 16:32</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 打印流的使用</span><br><span class=\"hljs-comment\">* PrintStream和PrintWriter</span><br><span class=\"hljs-comment\">* 1、提供了一系列重载的print()和printLine()方法</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PrintStreamTest</span> &#123;<br>    <span class=\"hljs-comment\">//练习：重定向控制台的输出到test.txt</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-comment\">//创建打印流，autoFlush设置为true（写入换行符或字节&#x27;\\n&#x27;都会刷新缓冲区）</span><br>        <span class=\"hljs-type\">PrintStream</span> <span class=\"hljs-variable\">ps</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">PrintStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;test.txt&quot;</span>), <span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-keyword\">if</span>(ps != <span class=\"hljs-literal\">null</span>)&#123;<br>            System.setOut(ps);<br>        &#125;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt;= <span class=\"hljs-number\">255</span>; i++) &#123;<span class=\"hljs-comment\">//如果没有重定向，则是输出到控制台</span><br>            System.out.print((<span class=\"hljs-type\">char</span>)i);<span class=\"hljs-comment\">//调用重载的print(char)方法，如果不强转，调用的是print(int)</span><br>            <span class=\"hljs-keyword\">if</span> (i % <span class=\"hljs-number\">50</span> == <span class=\"hljs-number\">0</span>)&#123;<br>                System.out.println();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"数据流\"><a class=\"markdownIt-Anchor\" href=\"#数据流\">#</a> 数据流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/9 - 16:54</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 数据流的使用：用于读取或写出基本数据类型的变量或字符串</span><br><span class=\"hljs-comment\">* 1、DataInputStream和DataOutputStream</span><br><span class=\"hljs-comment\">* 2、DataInputStream中的方法</span><br><span class=\"hljs-comment\">*   &gt; readBoolean       &gt; readByte</span><br><span class=\"hljs-comment\">*   &gt; readChar          &gt; readFloat</span><br><span class=\"hljs-comment\">*   &gt; readDouble        &gt; readShort</span><br><span class=\"hljs-comment\">*   &gt; readLong          &gt; readInt</span><br><span class=\"hljs-comment\">*   &gt; readUTF           &gt; readFully(byte[] b)</span><br><span class=\"hljs-comment\">* 3、DataOutputStream中的方法</span><br><span class=\"hljs-comment\">*   把DataInputStream中的方法的read改成write即可</span><br><span class=\"hljs-comment\">* 4、注意点:</span><br><span class=\"hljs-comment\">* 5、缺点：无法存取对象，解决方法：使用对象流</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DataStreamTest</span> &#123;<br>    <span class=\"hljs-comment\">//将内存中的字符串、基本数据类型的变量写出到文件data.txt中</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-comment\">//造流类</span><br>        <span class=\"hljs-type\">DataOutputStream</span> <span class=\"hljs-variable\">dataOutputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DataOutputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;data.txt&quot;</span>)));<br>        <span class=\"hljs-comment\">//写数据</span><br>        dataOutputStream.writeUTF(<span class=\"hljs-string\">&quot;数据输出流测试&quot;</span>);<br>        dataOutputStream.flush();<span class=\"hljs-comment\">//刷新缓冲区，立刻写入</span><br>        dataOutputStream.writeInt(<span class=\"hljs-number\">123</span>);<br>        dataOutputStream.writeChar(<span class=\"hljs-string\">&#x27;a&#x27;</span>);<br>        <span class=\"hljs-comment\">//关闭</span><br>        dataOutputStream.close();<br>    &#125;<br><br>    <span class=\"hljs-comment\">//将文件中存储的基本数据类型变量和字符串读取到内存中</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<br>        <span class=\"hljs-comment\">//造流类</span><br>        <span class=\"hljs-type\">DataInputStream</span> <span class=\"hljs-variable\">dataInputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DataInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;data.txt&quot;</span>)));<br>        <span class=\"hljs-comment\">//读取:必须按照写入的顺序读取</span><br>        System.out.println(dataInputStream.readUTF());<br>        System.out.println(dataInputStream.readInt());<br>        System.out.println(dataInputStream.readChar());<br>        dataInputStream.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"对象流\"><a class=\"markdownIt-Anchor\" href=\"#对象流\">#</a> 对象流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/10 - 0:45</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 对象流的使用</span><br><span class=\"hljs-comment\">* 1、ObjectInputStream和ObjectOutputStream</span><br><span class=\"hljs-comment\">* 2、用于存储和读取基本数据类型诗句或对象的处理流。可以把Java中的对象写入到数据源中，也能把对象从数据源中还原回来</span><br><span class=\"hljs-comment\">* 3、自定义类实现序列化和反序列化的操作：需要实现Serializable接口，提供public static final long serialVersionUID</span><br><span class=\"hljs-comment\">*   &gt; 凡是标识为Serializable的类，就表示该类是可序列化的</span><br><span class=\"hljs-comment\">*   &gt; Serializable接口下没有具体要实现的方法</span><br><span class=\"hljs-comment\">*   &gt; 如果不提供serialVersionUID，java运行环境会根据类的内部细节自动生成一个，但是若当前的类发生了变化，serialVersionUID</span><br><span class=\"hljs-comment\">*     可能发生变化，导致在反序列化的时候出问题。所以建议显示声明</span><br><span class=\"hljs-comment\">*   &gt; 除了被序列化的类声明为serializable，其内部所有属性也必须是可序列化的（基本数据类型默认都是可视化的）</span><br><span class=\"hljs-comment\">*   &gt; 声明为static或transient的属性不能被序列化</span><br><span class=\"hljs-comment\">*</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ObjectStreamTest</span> &#123;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 序列化过程：将内存中的java对象保存到磁盘中或通过网络传输出去</span><br><span class=\"hljs-comment\">    * 使用ObjectOutputStream</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-type\">ObjectOutputStream</span> <span class=\"hljs-variable\">oos</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<span class=\"hljs-comment\">//序列化过程</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//造对象</span><br>            oos = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ObjectOutputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;Object.dat&quot;</span>));<br>            <span class=\"hljs-comment\">//写数据</span><br>            oos.writeObject(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(<span class=\"hljs-string\">&quot;我爱浙江&quot;</span>));<br>            oos.writeObject(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>));<span class=\"hljs-comment\">//自定义类的序列化</span><br>            oos.flush();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span> (oos != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    <span class=\"hljs-comment\">//关闭</span><br>                    oos.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 反序列化：将磁盘文件中的对象还原为内存中的一个java对象</span><br><span class=\"hljs-comment\">    * 使用ObjectInputStream来实现</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">ObjectInputStream</span> <span class=\"hljs-variable\">ois</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">//造对象</span><br>            ois = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ObjectInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;Object.dat&quot;</span>));<br>            <span class=\"hljs-comment\">//读数据，写的时候是什么顺序，读的时候就是什么顺序。</span><br>            <span class=\"hljs-comment\">//开发中，一般都是同一类数据</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> (String)ois.readObject();<br>            <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> (Person)ois.readObject();<span class=\"hljs-comment\">//自定义对象的反序列化</span><br>            System.out.println(str);<br>            System.out.println(person);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span>(ois != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    <span class=\"hljs-comment\">//关闭流</span><br>                    ois.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><br><span class=\"hljs-keyword\">import</span> java.io.Serializable;<br><span class=\"hljs-keyword\">import</span> java.util.Objects;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/10 - 1:19</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 自定义类实现序列化和反序列化的操作：需要实现Serializable接口</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Serializable</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">serialVersionUID</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">453897528957842985L</span>;<br>    String name;<br>    <span class=\"hljs-type\">int</span> age;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">()</span> &#123;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">(String name, <span class=\"hljs-type\">int</span> age)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-built_in\">this</span>.age = age;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">equals</span><span class=\"hljs-params\">(Object o)</span> &#123;<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">this</span> == o) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>        <span class=\"hljs-keyword\">if</span> (o == <span class=\"hljs-literal\">null</span> || getClass() != o.getClass()) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> (Person) o;<br>        <span class=\"hljs-keyword\">return</span> age == person.age &amp;&amp; Objects.equals(name, person.name);<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">hashCode</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> Objects.hash(name, age);<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getName</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> name;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setName</span><span class=\"hljs-params\">(String name)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">getAge</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> age;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setAge</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> age)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.age = age;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Person&#123;&quot;</span> +<br>                <span class=\"hljs-string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"hljs-string\">&#x27;\\&#x27;&#x27;</span> +<br>                <span class=\"hljs-string\">&quot;, age=&quot;</span> + age +<br>                <span class=\"hljs-string\">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"随机存取文件流\"><a class=\"markdownIt-Anchor\" href=\"#随机存取文件流\">#</a> 随机存取文件流</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.File;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.io.RandomAccessFile;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/10 - 2:33</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* RandomAccessFile类的使用</span><br><span class=\"hljs-comment\">* 1、既可以作为输入流，又可以作为输出流（建议造两个对象，一个表示输入，一个表示输出）</span><br><span class=\"hljs-comment\">* 2、mode</span><br><span class=\"hljs-comment\">*   &gt; r 以只读的方式打开</span><br><span class=\"hljs-comment\">*   &gt; rw 可以读也可以写</span><br><span class=\"hljs-comment\">*   &gt; rws 可读写，同步文件内容和元数据的更新</span><br><span class=\"hljs-comment\">*   &gt; rwd 可读写，同步文件内容的更新</span><br><span class=\"hljs-comment\">* 3、作为输出流时，如果写入的文件不存在，则会自动创建</span><br><span class=\"hljs-comment\">*    若写入的文件存在，则默认从头开始覆盖</span><br><span class=\"hljs-comment\">* 4、seek(int pos)方法可以定位指针位置</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RandomAccessFileTest</span>&#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-type\">RandomAccessFile</span> <span class=\"hljs-variable\">randomAccessFile</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-type\">RandomAccessFile</span> <span class=\"hljs-variable\">randomAccessFile1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            randomAccessFile = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RandomAccessFile</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花.jpg&quot;</span>), <span class=\"hljs-string\">&quot;r&quot;</span>);<br>            randomAccessFile1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RandomAccessFile</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;花_randomCopy.jpg&quot;</span>), <span class=\"hljs-string\">&quot;rw&quot;</span>);<br>            <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">while</span> ((len = randomAccessFile.read(buffer)) != -<span class=\"hljs-number\">1</span>) &#123;<br>                randomAccessFile1.write(buffer, <span class=\"hljs-number\">0</span>, len);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span> (randomAccessFile != <span class=\"hljs-literal\">null</span>) &#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    randomAccessFile.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class=\"hljs-keyword\">if</span> (randomAccessFile1 != <span class=\"hljs-literal\">null</span>) &#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    randomAccessFile1.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<br>        <span class=\"hljs-type\">RandomAccessFile</span> <span class=\"hljs-variable\">rw</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RandomAccessFile</span>(<span class=\"hljs-string\">&quot;randomTest.txt&quot;</span>, <span class=\"hljs-string\">&quot;rw&quot;</span>);<br>        rw.seek(<span class=\"hljs-number\">3</span>);<span class=\"hljs-comment\">//将指针调到角标为3的位置，角标是从0开始的</span><br>        <span class=\"hljs-comment\">//其实write执行的就是覆盖的操作</span><br><span class=\"hljs-comment\">//        rw.write(&quot;xyz&quot;.getBytes());//因为参数是byte[]，这里执行的是覆盖</span><br>        <span class=\"hljs-comment\">//下面实现插入（而不是覆盖），先复制后面部分，然后执行写入，最后把复制好的再写入到文件后面</span><br>        <span class=\"hljs-comment\">//1、保存指针3后面的数据到StringBuilder中</span><br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">20</span>];<br>        <span class=\"hljs-comment\">//使用StringBuilder，长度设置为文件长度</span><br>        <span class=\"hljs-type\">StringBuilder</span> <span class=\"hljs-variable\">builder</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StringBuilder</span>((<span class=\"hljs-type\">int</span>)<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(<span class=\"hljs-string\">&quot;randomTest.txt&quot;</span>).length());<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = rw.read(buffer))!= -<span class=\"hljs-number\">1</span>)&#123;<br>            builder.append(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(buffer, <span class=\"hljs-number\">0</span> , len));<br>        &#125;<br>        <span class=\"hljs-comment\">//读取完后，指针指向文件末尾，所以要重新定位</span><br>        rw.seek(<span class=\"hljs-number\">3</span>);<br>        <span class=\"hljs-comment\">//写入要插入的字符串</span><br>        rw.write(<span class=\"hljs-string\">&quot;xyz&quot;</span>.getBytes());<br>        <span class=\"hljs-comment\">//写入刚才复制的字符串</span><br>        rw.write(builder.toString().getBytes());<span class=\"hljs-comment\">//StringBuilder没有getBytes()方法，所以先转换成String再调用toString()</span><br>        <span class=\"hljs-comment\">//关闭流</span><br>        rw.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"nio2中path-paths-files类的使用\"><a class=\"markdownIt-Anchor\" href=\"#nio2中path-paths-files类的使用\">#</a> NIO.2 中 Path、Paths、Files 类的使用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/10 - 14:51</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* Path、Paths、Files类的使用</span><br><span class=\"hljs-comment\">* 1、Path类用于替换File类</span><br><span class=\"hljs-comment\">* 2、Paths.get(String path)用于获取Path类的实例</span><br><span class=\"hljs-comment\">* 3、Files是工具类，有一些操作文件目录的方法</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NIO2Test</span> &#123;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"网络编程\"><a class=\"markdownIt-Anchor\" href=\"#网络编程\">#</a> 网络编程</h2>\n<h3 id=\"inetaddress类的使用\"><a class=\"markdownIt-Anchor\" href=\"#inetaddress类的使用\">#</a> InetAddress 类的使用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> java.net.InetAddress;<br><span class=\"hljs-keyword\">import</span> java.net.UnknownHostException;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/10 - 15:29</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 一、网络编程中有两个主要的问题：</span><br><span class=\"hljs-comment\">*   1、如何准确地定位网络上一台或多态主机；定位主机上的特定的应用</span><br><span class=\"hljs-comment\">*   2、找到主机后如何可靠高效地进行数据传输</span><br><span class=\"hljs-comment\">* 二、网络编程中的两个要素：</span><br><span class=\"hljs-comment\">*   1、对应问题一：IP和端口号</span><br><span class=\"hljs-comment\">*   2、对应问题二：提供网络通信协议：TCP/IP参考模型</span><br><span class=\"hljs-comment\">* 三、通信要素一：IP和端口号</span><br><span class=\"hljs-comment\">*   1、IP：唯一标识Internet上的计算机（通信实体）</span><br><span class=\"hljs-comment\">*   2、在Java中使用InetAddress类代表IP</span><br><span class=\"hljs-comment\">*   3、IP分类：IPv4和IPv6；万维网和局域网</span><br><span class=\"hljs-comment\">*   4、本地回路地址：127.0.0.1，对应着localhost</span><br><span class=\"hljs-comment\">*   6、如何实例化InetAddress：两个方法①getByName() ②getLocalHost</span><br><span class=\"hljs-comment\">*       两个常用方法：①getHostName() ②getHostAddress()</span><br><span class=\"hljs-comment\">*   7、端口号：标实正在计算机上运行的进程，要求不同的进程有不同的端口号</span><br><span class=\"hljs-comment\">*      &gt; 系统端口号：0~1023，应用端口号：1023~49151，私有端口号：49152~65535</span><br><span class=\"hljs-comment\">*   8、端口号与IP地址的组合得出一个网络套接字：Socket</span><br><span class=\"hljs-comment\">*</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">InetAddressTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">inet1</span> <span class=\"hljs-operator\">=</span> InetAddress.getByName(<span class=\"hljs-string\">&quot;192.168.10.1&quot;</span>);<span class=\"hljs-comment\">//通过IP地址</span><br>            System.out.println(inet1);<br>            <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">inet2</span> <span class=\"hljs-operator\">=</span> InetAddress.getByName(<span class=\"hljs-string\">&quot;www.baidu.com&quot;</span>);<span class=\"hljs-comment\">//通过域名</span><br>            System.out.println(inet2);<br>            <span class=\"hljs-comment\">//getHostName()：获取主机名</span><br>            System.out.println(inet2.getHostName());<span class=\"hljs-comment\">//www.baidu.com</span><br>            <span class=\"hljs-comment\">//getHostAddress()：获取IP地址</span><br>            System.out.println(inet2.getHostAddress());<span class=\"hljs-comment\">//183.232.231.172</span><br>            <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">inet3</span> <span class=\"hljs-operator\">=</span> InetAddress.getByName(<span class=\"hljs-string\">&quot;127.0.0.1&quot;</span>);<span class=\"hljs-comment\">//本机地址</span><br>            System.out.println(inet3);<br>            <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">localHost</span> <span class=\"hljs-operator\">=</span> InetAddress.getLocalHost();<span class=\"hljs-comment\">//获取本机</span><br>            System.out.println(localHost);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (UnknownHostException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"建立tcp连接\"><a class=\"markdownIt-Anchor\" href=\"#建立tcp连接\">#</a> 建立 TCP 连接</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><span class=\"hljs-keyword\">import</span> java.net.InetAddress;<br><span class=\"hljs-keyword\">import</span> java.net.ServerSocket;<br><span class=\"hljs-keyword\">import</span> java.net.Socket;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/13 - 23:31</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 实现TCP的网络编程</span><br><span class=\"hljs-comment\">* 例子1：客户端发送信息给服务端，服务端将数据显示在控制台上</span><br><span class=\"hljs-comment\">* 例子2：客户端发送文件给服务端，服务端把文件存储在本地</span><br><span class=\"hljs-comment\">* 例子3：客户端发送文件给服务端，服务端把文件存储在本地，并返回“发送成功给客户端”</span><br><span class=\"hljs-comment\"> * */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TCPTest</span> &#123;<br>    <span class=\"hljs-comment\">//  例子1：客户端发送信息给服务端，服务端将数据显示在控制台上</span><br>    <span class=\"hljs-comment\">//客户端</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">client</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<span class=\"hljs-comment\">//记得用try-catch-finally,懒得写了。。。。</span><br>        <span class=\"hljs-comment\">//1、创建Socket对象，指明服务器端的ip和端口号</span><br>        <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">inet</span> <span class=\"hljs-operator\">=</span> InetAddress.getByName(<span class=\"hljs-string\">&quot;127.0.0.1&quot;</span>);<span class=\"hljs-comment\">//这里填写的是服务端的IP</span><br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Socket</span>(inet, <span class=\"hljs-number\">64323</span>);<br>        <span class=\"hljs-comment\">//2、获取一个输出流，用于输出数据</span><br>        <span class=\"hljs-type\">OutputStream</span> <span class=\"hljs-variable\">outputStream</span> <span class=\"hljs-operator\">=</span> socket.getOutputStream();<br>        <span class=\"hljs-comment\">//3、写出数据，相当于向客户端发送数据</span><br>        outputStream.write(<span class=\"hljs-string\">&quot;你好，我是客户端&quot;</span>.getBytes());<br>        <span class=\"hljs-comment\">//4、关闭资源</span><br>        outputStream.close();<span class=\"hljs-comment\">//记得关闭资源</span><br>        socket.close();<span class=\"hljs-comment\">//记得关闭资源</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">//服务端</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">server</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得用try-catch-finally,懒得写了。。。。</span><br>        <span class=\"hljs-comment\">//1、创建服务器端的ServerSocket，指明自己的端口号</span><br>        <span class=\"hljs-type\">ServerSocket</span> <span class=\"hljs-variable\">serverSocket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ServerSocket</span>(<span class=\"hljs-number\">64323</span>);<span class=\"hljs-comment\">//此处的端口号客户机连接的端口号</span><br>        <span class=\"hljs-comment\">//2、调用accept()方法，表示接受来自客户端的socket</span><br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> serverSocket.accept();<span class=\"hljs-comment\">//表示接受客户端连接</span><br>        <span class=\"hljs-comment\">//3、获取输入流</span><br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">inputStream</span> <span class=\"hljs-operator\">=</span> socket.getInputStream();<br><span class=\"hljs-comment\">//        byte[] buffer = new byte[20];</span><br><span class=\"hljs-comment\">//        int len;</span><br><span class=\"hljs-comment\">//        while((len = inputStream.read(buffer)) != -1)&#123;</span><br><span class=\"hljs-comment\">//            String s = new String(buffer, 0, len);</span><br><span class=\"hljs-comment\">//            System.out.print(s);</span><br><span class=\"hljs-comment\">//        &#125; //用于处理中文字符会出错</span><br>        <span class=\"hljs-comment\">//4、读取输入流的数据</span><br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">10</span>];<br>        <span class=\"hljs-type\">ByteArrayOutputStream</span> <span class=\"hljs-variable\">baos</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ByteArrayOutputStream</span>();<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = inputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            <span class=\"hljs-comment\">//这个流类的write方法会写入自身内部的byte数组</span><br>            <span class=\"hljs-comment\">//全部读取完后再toString()这样可以避免出现字节流读取中文字符的乱码问题</span><br>            baos.write(buffer, <span class=\"hljs-number\">0</span> , len);<br>        &#125;<br>        <span class=\"hljs-comment\">//这里调用baos的toString()方法，实际上是调用baos内部的数组的toString()方法</span><br>        System.out.println(baos.toString());<br>        <span class=\"hljs-comment\">//5、所有资源都需要关闭</span><br>        baos.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">//例子2：客户端发送文件给服务端，服务端把文件存储在本地</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">client1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得用try-catch-finally</span><br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Socket</span>(InetAddress.getByName(<span class=\"hljs-string\">&quot;127.0.0.1&quot;</span>),<span class=\"hljs-number\">9090</span>);<br>        <span class=\"hljs-type\">OutputStream</span> <span class=\"hljs-variable\">outputStream</span> <span class=\"hljs-operator\">=</span> socket.getOutputStream();<br>        <span class=\"hljs-type\">FileInputStream</span> <span class=\"hljs-variable\">fis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;flower.jpg&quot;</span>);<br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = fis.read(buffer))!= -<span class=\"hljs-number\">1</span>)&#123;<br>            outputStream.write(buffer, <span class=\"hljs-number\">0</span> , len);<br>        &#125;<br>        fis.close();<br>        outputStream.close();<br>        socket.close();<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">server1</span><span class=\"hljs-params\">()</span><span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得try-catch-finally</span><br>        <span class=\"hljs-type\">ServerSocket</span> <span class=\"hljs-variable\">serverSocket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ServerSocket</span>(<span class=\"hljs-number\">9090</span>);<br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> serverSocket.accept();<br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">inputStream</span> <span class=\"hljs-operator\">=</span> socket.getInputStream();<br>        <span class=\"hljs-type\">FileOutputStream</span> <span class=\"hljs-variable\">fos</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;flower_copy.jpg&quot;</span>);<br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = inputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            fos.write(buffer, <span class=\"hljs-number\">0</span>, len);<br>        &#125;<br>        fos.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<br>    &#125;<br><br><span class=\"hljs-comment\">//例子3：客户端发送文件给服务端，服务端把文件存储在本地，并返回“发送成功给客户端”</span><br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">client2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得用try-catch-finally</span><br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Socket</span>(InetAddress.getByName(<span class=\"hljs-string\">&quot;127.0.0.1&quot;</span>),<span class=\"hljs-number\">9090</span>);<br>        <span class=\"hljs-type\">OutputStream</span> <span class=\"hljs-variable\">outputStream</span> <span class=\"hljs-operator\">=</span> socket.getOutputStream();<br>        <span class=\"hljs-type\">FileInputStream</span> <span class=\"hljs-variable\">fis</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;flower.jpg&quot;</span>);<br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = fis.read(buffer))!= -<span class=\"hljs-number\">1</span>)&#123;<br>            outputStream.write(buffer, <span class=\"hljs-number\">0</span> , len);<br>        &#125;<br>        <span class=\"hljs-comment\">//关闭数据的输出</span><br>        socket.shutdownOutput();<span class=\"hljs-comment\">//********************没有此语句的话，会报错******************</span><br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">inputStream</span> <span class=\"hljs-operator\">=</span> socket.getInputStream();<br>        <span class=\"hljs-type\">ByteArrayOutputStream</span> <span class=\"hljs-variable\">baos</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ByteArrayOutputStream</span>();<br>        buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">5</span>];<br>        <span class=\"hljs-keyword\">while</span>((len = inputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            baos.write(buffer, <span class=\"hljs-number\">0</span> ,len);<br>        &#125;<br>        System.out.println(baos.toString());<br>        inputStream.close();<br>        baos.close();<br>        fis.close();<br>        outputStream.close();<br>        socket.close();<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">server2</span><span class=\"hljs-params\">()</span><span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得try-catch-finally</span><br>        <span class=\"hljs-type\">ServerSocket</span> <span class=\"hljs-variable\">serverSocket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ServerSocket</span>(<span class=\"hljs-number\">9090</span>);<br>        <span class=\"hljs-type\">Socket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> serverSocket.accept();<br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">inputStream</span> <span class=\"hljs-operator\">=</span> socket.getInputStream();<br>        <span class=\"hljs-type\">FileOutputStream</span> <span class=\"hljs-variable\">fos</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;flower_copy2.jpg&quot;</span>);<br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = inputStream.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            fos.write(buffer, <span class=\"hljs-number\">0</span>, len);<br>        &#125;<br>        <span class=\"hljs-comment\">//服务器向客户机发送数据</span><br>        <span class=\"hljs-type\">OutputStream</span> <span class=\"hljs-variable\">outputStream</span> <span class=\"hljs-operator\">=</span> socket.getOutputStream();<br>        outputStream.write(<span class=\"hljs-string\">&quot;照片已收到&quot;</span>.getBytes());<br>        outputStream.close();<br>        fos.close();<br>        inputStream.close();<br>        socket.close();<br>        serverSocket.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"udp连接\"><a class=\"markdownIt-Anchor\" href=\"#udp连接\">#</a> UDP 连接</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.net.DatagramPacket;<br><span class=\"hljs-keyword\">import</span> java.net.DatagramSocket;<br><span class=\"hljs-keyword\">import</span> java.net.InetAddress;<br><span class=\"hljs-keyword\">import</span> java.net.InetSocketAddress;<br><span class=\"hljs-keyword\">import</span> java.nio.charset.StandardCharsets;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/15 - 14:40</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* UDP协议的例子</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UDPTest</span> &#123;<br>    <span class=\"hljs-comment\">//发送端</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">sender</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException &#123;<br>        <span class=\"hljs-type\">DatagramSocket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DatagramSocket</span>();<span class=\"hljs-comment\">//不使用参数</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;我是UDP方式发送的数据&quot;</span>;<br>        <span class=\"hljs-type\">byte</span>[] data = str.getBytes();<br>        <span class=\"hljs-type\">InetAddress</span> <span class=\"hljs-variable\">inet</span> <span class=\"hljs-operator\">=</span> InetAddress.getLocalHost();<br>        <span class=\"hljs-comment\">//将需要发送的数据封装在datagramPacket</span><br>        <span class=\"hljs-type\">DatagramPacket</span> <span class=\"hljs-variable\">packet</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DatagramPacket</span>(data, <span class=\"hljs-number\">0</span> , data.length, inet, <span class=\"hljs-number\">9090</span>);<br>        socket.send(packet);<br>        socket.close();<br>    &#125;<br><br>    <span class=\"hljs-comment\">//接收端</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">receiver</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<br>        <span class=\"hljs-type\">DatagramSocket</span> <span class=\"hljs-variable\">socket</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DatagramSocket</span>(<span class=\"hljs-number\">9090</span>);<span class=\"hljs-comment\">//指明端口号</span><br>        <span class=\"hljs-type\">byte</span>[] data = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">100</span>];<br>        <span class=\"hljs-type\">DatagramPacket</span> <span class=\"hljs-variable\">packet</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DatagramPacket</span>(data, <span class=\"hljs-number\">0</span>, data.length);<br>        socket.receive(packet);<br>        <span class=\"hljs-comment\">//packet中的getLength()方法可以返回长度</span><br>        <span class=\"hljs-comment\">//getData()返回的其实就是byte[]</span><br>        System.out.println(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(packet.getData(), <span class=\"hljs-number\">0</span>, packet.getLength()));<br>        socket.close();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"url网络编程\"><a class=\"markdownIt-Anchor\" href=\"#url网络编程\">#</a> URL 网络编程</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.FileOutputStream;<br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.io.InputStream;<br><span class=\"hljs-keyword\">import</span> java.net.HttpURLConnection;<br><span class=\"hljs-keyword\">import</span> java.net.MalformedURLException;<br><span class=\"hljs-keyword\">import</span> java.net.URL;<br><span class=\"hljs-keyword\">import</span> java.net.URLConnection;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/15 - 14:59</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* URL网络编程</span><br><span class=\"hljs-comment\">* 1、URL：统一资源定位符，对应着互联网的某一资源地址</span><br><span class=\"hljs-comment\">* 2、格式：</span><br><span class=\"hljs-comment\">*   http://localhost:8080/examples/flower?uername=Tom&amp;id=1001</span><br><span class=\"hljs-comment\">*   协议      主机名  端口号      资源地址        参数列表</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">URLTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-type\">URL</span> <span class=\"hljs-variable\">url</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">URL</span>(<span class=\"hljs-string\">&quot;http://localhost:8080/examples/flower?uername=Tom&amp;id=1001&quot;</span>);<br>            <span class=\"hljs-comment\">//获取协议</span><br>            System.out.println(url.getProtocol());<span class=\"hljs-comment\">//http</span><br>            <span class=\"hljs-comment\">//获取主机名</span><br>            System.out.println(url.getHost());<span class=\"hljs-comment\">//localhost</span><br>            <span class=\"hljs-comment\">//获取端口号</span><br>            System.out.println(url.getPort());<span class=\"hljs-comment\">//8080</span><br>            <span class=\"hljs-comment\">//获取文件路径</span><br>            System.out.println(url.getPath());<span class=\"hljs-comment\">//    /examples/flower</span><br>            <span class=\"hljs-comment\">//获取URL文件名</span><br>            System.out.println(url.getFile());<span class=\"hljs-comment\">//    /examples/flower?uername=Tom&amp;id=1001</span><br>            <span class=\"hljs-comment\">//获取URL的查询名（即参数）</span><br>            System.out.println(url.getQuery());<span class=\"hljs-comment\">//uername=Tom&amp;id=1001</span><br>        &#125; <span class=\"hljs-keyword\">catch</span> (MalformedURLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//通过URL下载文件</span><br>    <span class=\"hljs-comment\">//因为未配置tomcat，此代码暂时无法运行</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">URLtest1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IOException&#123;<span class=\"hljs-comment\">//记得用try-catch-finally</span><br>        <span class=\"hljs-type\">URL</span> <span class=\"hljs-variable\">url</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">URL</span>(<span class=\"hljs-string\">&quot;http://localhost:8080/examples/flower.jpg?uername=Tom&amp;id=1001&quot;</span>);<br>        <span class=\"hljs-type\">HttpURLConnection</span> <span class=\"hljs-variable\">urlConnection</span> <span class=\"hljs-operator\">=</span> (HttpURLConnection) url.openConnection();<span class=\"hljs-comment\">//得到一个URL连接</span><br>        urlConnection.connect();<span class=\"hljs-comment\">//连接</span><br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">is</span> <span class=\"hljs-operator\">=</span> urlConnection.getInputStream();<span class=\"hljs-comment\">//获取输入流</span><br>        <span class=\"hljs-type\">FileOutputStream</span> <span class=\"hljs-variable\">fileOutputStream</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;flower_copy_3&quot;</span>);<br>        <span class=\"hljs-type\">byte</span>[] buffer = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">byte</span>[<span class=\"hljs-number\">1024</span>];<br>        <span class=\"hljs-type\">int</span> len;<br>        <span class=\"hljs-keyword\">while</span>((len = is.read(buffer)) != -<span class=\"hljs-number\">1</span>)&#123;<br>            fileOutputStream.write(buffer, <span class=\"hljs-number\">0</span> ,len);<br>        &#125;<br>        <span class=\"hljs-comment\">//关闭资源</span><br>        fileOutputStream.close();<br>        is.close();<br>        urlConnection.disconnect();<span class=\"hljs-comment\">//断开连接</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"反射\"><a class=\"markdownIt-Anchor\" href=\"#反射\">#</a> 反射</h2>\n<h3 id=\"反射能做什么\"><a class=\"markdownIt-Anchor\" href=\"#反射能做什么\">#</a> 反射能做什么</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Constructor;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Field;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Method;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/16 - 1:47</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * 1、反射机制与面向对象中的封装性是不是矛盾？如何看待两个技术？</span><br><span class=\"hljs-comment\"> *  &gt; 不矛盾。（面试的时候必须这么说hhh）</span><br><span class=\"hljs-comment\"> *  &gt; 封装性解决的是建议使用和不建议使用的问题，反射解决的是能不能调用的问题</span><br><span class=\"hljs-comment\"> * 2、通过直接new的方式或反射的方式都可以调用公共的结构，开发中用哪个？</span><br><span class=\"hljs-comment\"> *  &gt; 建议：直接new的方式</span><br><span class=\"hljs-comment\"> *  &gt; 什么时候使用反射：编译的时候不能确定需要造什么类的对象</span><br><span class=\"hljs-comment\"> * 3、关于java.lang.Class类的理解</span><br><span class=\"hljs-comment\"> *  &gt; 类的加载过程：</span><br><span class=\"hljs-comment\"> *      程序在经过javac.exe命令后，会生成一个或多个字节码文件(.class)，接着我们使用java.exe命令对某个字节码文件</span><br><span class=\"hljs-comment\"> *      解释运行，相当于将某个字节码文件加载到内存中，此过程就称为类的加载。加载到内存中的类称为运行时类，就作为Class</span><br><span class=\"hljs-comment\"> *      的一个实例。换句话说，Class的实例就对应着一个运行时类</span><br><span class=\"hljs-comment\"> *  &gt; 哪些类型可以有Class对象？</span><br><span class=\"hljs-comment\"> *      类，数组，接口，枚举，注解，基本数据类型，void</span><br><span class=\"hljs-comment\"> *      注意:对于数组，只要数组的类型和维度一致，那么Class就是相同的。比如 int[] a = new int[10]; int[] b = new int[100]</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ReflectionTest</span> &#123;<br>    <span class=\"hljs-comment\">//反射之前，对于Person的操作</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//1、创建Person类的对象</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        <span class=\"hljs-comment\">//2、通过对象，调用其内部的属性、方法</span><br>        person.age = <span class=\"hljs-number\">10</span>;<br>        System.out.println(person.toString());<br>        person.show();<br>        <span class=\"hljs-comment\">//在Person类外部，不可以通过Person类对象调用其内部私有结构</span><br>        <span class=\"hljs-comment\">//比如：name、showNation()以及私有构造器</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">//有了反射之后，对于Person的操作</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception &#123;<br>        <span class=\"hljs-comment\">//1、通过反射，创建类的对象</span><br>        Class&lt;Person&gt; personClass = Person.class;<br>        Constructor&lt;Person&gt; constructor = personClass.getConstructor(String.class, <span class=\"hljs-type\">int</span>.class);<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> constructor.newInstance(<span class=\"hljs-string\">&quot;Ton&quot;</span>, <span class=\"hljs-number\">12</span>);<br>        System.out.println(person.toString());<br>        <span class=\"hljs-comment\">//2、通过反射，调用对象指定的属性和方法</span><br>        <span class=\"hljs-comment\">//调用属性</span><br>        <span class=\"hljs-type\">Field</span> <span class=\"hljs-variable\">age</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredField(<span class=\"hljs-string\">&quot;age&quot;</span>);<br>        age.set(person, <span class=\"hljs-number\">10</span>);<br>        System.out.println(person);<br>        <span class=\"hljs-comment\">//调用方法</span><br>        <span class=\"hljs-type\">Method</span> <span class=\"hljs-variable\">show</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredMethod(<span class=\"hljs-string\">&quot;show&quot;</span>);<br>        show.invoke(person);<br>        <span class=\"hljs-comment\">//3、通过反射，调用类的私有结构，如私有属性、私有方法、私有构造器</span><br>        <span class=\"hljs-comment\">//调用私有构造器</span><br>        Constructor&lt;Person&gt; declaredConstructor = personClass.getDeclaredConstructor(String.class);<br>        declaredConstructor.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person1</span> <span class=\"hljs-operator\">=</span> declaredConstructor.newInstance(<span class=\"hljs-string\">&quot;Jerry&quot;</span>);<br>        System.out.println(person1);<br>        <span class=\"hljs-comment\">//调用私有属性</span><br>        <span class=\"hljs-type\">Field</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredField(<span class=\"hljs-string\">&quot;name&quot;</span>);<br>        name.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        name.set(person1, <span class=\"hljs-string\">&quot;Mike&quot;</span>);<br>        System.out.println(person1);<br>        <span class=\"hljs-comment\">//调用私有方法</span><br>        <span class=\"hljs-type\">Method</span> <span class=\"hljs-variable\">showNation</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredMethod(<span class=\"hljs-string\">&quot;showNation&quot;</span>, String.class);<br>        showNation.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-comment\">//相当于String nation = person1.showNation(&quot;中国&quot;)</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">nation</span> <span class=\"hljs-operator\">=</span> (String) showNation.invoke(person1, <span class=\"hljs-string\">&quot;中国&quot;</span>);<br>    &#125;<br><br><span class=\"hljs-comment\">//    注意:对于数组，只要数组的类型和维度一致，那么Class就是相同的</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">int</span>[] a = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[<span class=\"hljs-number\">100</span>];<br>        <span class=\"hljs-type\">int</span>[] b = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[<span class=\"hljs-number\">10</span>];<br>        System.out.println(a.getClass() == b.getClass());<span class=\"hljs-comment\">//true</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"获取class实例的四种方式\"><a class=\"markdownIt-Anchor\" href=\"#获取class实例的四种方式\">#</a> 获取 Class 实例的四种方式</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/16 - 2:44</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 获取Class实例的四种方式</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ToGetClass</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        <span class=\"hljs-comment\">//方式一：类名.class</span><br>        Class&lt;Person&gt; personClass1 = Person.class;<br>        System.out.println(personClass1);<span class=\"hljs-comment\">//class Person</span><br>        <span class=\"hljs-comment\">//方式二：通过运行时类的对象</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>();<br>        Class&lt;? <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Person</span>&gt; personClass2 = person.getClass();<br>        <span class=\"hljs-comment\">//方式三：调用Class的静态方法：forName(String classPath)，classPath需要带上包名</span><br>        Class&lt;?&gt; clazz = Class.forName(<span class=\"hljs-string\">&quot;Person&quot;</span>);<br>        <span class=\"hljs-comment\">//以下两行代码说明：加载到内存中的运行时类，会缓存一段时间，在此时间内，我们可以通过不同的方式来获取此运行时类</span><br>        System.out.println(personClass1 == personClass2);<span class=\"hljs-comment\">//true</span><br>        System.out.println(personClass1 == clazz);<span class=\"hljs-comment\">//true</span><br>        <span class=\"hljs-comment\">//方式四：使用类的加载器ClassLoader,所在类名.class.getClassLoader</span><br>        <span class=\"hljs-type\">ClassLoader</span> <span class=\"hljs-variable\">classLoader</span> <span class=\"hljs-operator\">=</span> ToGetClass.class.getClassLoader();<br>        Class&lt;?&gt; clazz1 = classLoader.loadClass(<span class=\"hljs-string\">&quot;Person&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"类加载器\"><a class=\"markdownIt-Anchor\" href=\"#类加载器\">#</a> 类加载器</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.FileInputStream;<br><span class=\"hljs-keyword\">import</span> java.io.InputStream;<br><span class=\"hljs-keyword\">import</span> java.util.Properties;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/16 - 17:11</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 了解类的加载器</span><br><span class=\"hljs-comment\">* 1、引导类加载器：加载Java核心库，该加载器无法直接获取</span><br><span class=\"hljs-comment\">* 2、扩展类加载器：加载jre/lib/ext里面的jar包</span><br><span class=\"hljs-comment\">* 3、系统类加载器：加载自己写的类，是最常用的加载器</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ClassLoaderTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//对于自定义类，使用系统类加载器进行加载</span><br>        <span class=\"hljs-type\">ClassLoader</span> <span class=\"hljs-variable\">classLoader</span> <span class=\"hljs-operator\">=</span> ClassLoaderTest.class.getClassLoader();<br>        System.out.println(classLoader);<span class=\"hljs-comment\">//sun.misc.Launcher$AppClassLoader@18b4aac2，是系统类加载器</span><br>        <span class=\"hljs-comment\">//调用系统加载器的getParent()，获取扩展类加载器</span><br>        System.out.println(classLoader.getParent());<span class=\"hljs-comment\">//sun.misc.Launcher$ExtClassLoader@2ff4acd0，是扩展类加载器</span><br>        <span class=\"hljs-comment\">//调用扩展类加载器的getParent()，无法获取引导类加载器</span><br>        <span class=\"hljs-comment\">//引导类加载器无法直接获取，无法加载自定义类</span><br>        System.out.println(classLoader.getParent().getParent());<span class=\"hljs-comment\">//null，因为引导类加载器无法加载</span><br>        <span class=\"hljs-comment\">//String是核心类，由引导类加载器加载，所以无法获取</span><br>        <span class=\"hljs-type\">ClassLoader</span> <span class=\"hljs-variable\">classLoader1</span> <span class=\"hljs-operator\">=</span> String.class.getClassLoader();<br>        System.out.println(classLoader1);<span class=\"hljs-comment\">//null</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 使用ClassLoader加载配置文件</span><br><span class=\"hljs-comment\">    * 注意方式一和方式二的文件默认位置</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        <span class=\"hljs-type\">Properties</span> <span class=\"hljs-variable\">properties</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Properties</span>();<br>        <span class=\"hljs-comment\">//此时的文件默认在当前的module下</span><br>        <span class=\"hljs-comment\">//读取配置文件的方向一：</span><br><span class=\"hljs-comment\">//        FileInputStream fis = new FileInputStream(&quot;jdbc.properties&quot;);</span><br><span class=\"hljs-comment\">//        properties.load(fis);</span><br>        <span class=\"hljs-comment\">//方法二：</span><br>        <span class=\"hljs-type\">ClassLoader</span> <span class=\"hljs-variable\">classLoader</span> <span class=\"hljs-operator\">=</span> ClassLoaderTest.class.getClassLoader();<br>        <span class=\"hljs-comment\">//此时的文件默认在当前module的src下</span><br>        <span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">is</span> <span class=\"hljs-operator\">=</span> classLoader.getResourceAsStream(<span class=\"hljs-string\">&quot;jdbc1.properties&quot;</span>);<br>        properties.load(is);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">user</span> <span class=\"hljs-operator\">=</span> properties.getProperty(<span class=\"hljs-string\">&quot;user&quot;</span>);<br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">password</span> <span class=\"hljs-operator\">=</span> properties.getProperty(<span class=\"hljs-string\">&quot;password&quot;</span>);<br>        System.out.println(user);<br>        System.out.println(password);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"创建运行时类的对象\"><a class=\"markdownIt-Anchor\" href=\"#创建运行时类的对象\">#</a> 创建运行时类的对象</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<span class=\"hljs-keyword\">import</span> java.util.Random;<span class=\"hljs-comment\">/** * <span class=\"hljs-doctag\">@author</span> DzcGood * <span class=\"hljs-doctag\">@date</span> 2021/10/16 - 18:51 */</span><span class=\"hljs-comment\">/** 通过反射创建运行时类的对象* */</span><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NewInstanceTest</span> &#123;    <span class=\"hljs-meta\">@Test</span>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<span class=\"hljs-comment\">//记得用try-catch-finally        Class&lt;Person&gt; personClass = Person.class;        /*        * newInstance()：调用此方法，创建运行时类的对象。不鼓励使用。内部调用了Person的空参构造器        * 要想此方法正常地创建运行时类的对象，要求：        * 1、运行时类必须提供空参的构造器        * 2、空参的构造器的访问权限得够，通常设置为public        * 在JavaBean中，要求提供一个public的空参构造器。原因“        * 1、便于通过反射创建运行时类的对象        * 2、便于子类继承此运行时类时，默认调用super()空时，保证父类有此构造器        * */        Person person = personClass.newInstance();        System.out.println(person);    &#125;    //体会反射的动态性    @Test    public void test2() throws Exception&#123;        for (int i=0;i &lt; 100; i++) &#123;            int j = new Random().nextInt(3);//0,1,2            String classPath = &quot;&quot;;            switch (j)&#123;                case 0:                    classPath = &quot;java.util.Date&quot;;                    break;                case 1:                    classPath = &quot;java.lang.Object&quot;;                    break;                case 2:                    classPath = &quot;Person&quot;;                    break;            &#125;            System.out.println(getInstance(classPath));        &#125;    &#125;    /*    * 创建一个指定类的对象    * classPath：指定类的全类名    * */    public Object getInstance(String classPath) throws Exception&#123;        Class&lt;?&gt; aClass = Class.forName(classPath);        return aClass.newInstance();    &#125;&#125;</span><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"获取运行时类的完整结构\"><a class=\"markdownIt-Anchor\" href=\"#获取运行时类的完整结构\">#</a> 获取运行时类的完整结构</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> src1.Person;<br><br><span class=\"hljs-keyword\">import</span> java.lang.annotation.Annotation;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/16 - 19:43</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 获取运行时类的所有结构</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GetAllElementsTest</span> &#123;<br>    <span class=\"hljs-comment\">//获取属性</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//获取属性结构</span><br>        <span class=\"hljs-comment\">//getFields()：获取当前运行时类及其所有父类中声明为public的属性</span><br>        Field[] fields = personClass.getFields();<span class=\"hljs-comment\">//只能获取权限为public的属性</span><br>        <span class=\"hljs-keyword\">for</span> (Field field : fields) &#123;<br>            System.out.println(field);<br>        &#125;<br>        System.out.println(<span class=\"hljs-string\">&quot;/////////////////////////////////////&quot;</span>);<br>        <span class=\"hljs-comment\">//getDeclaredFields()：获取当前运行时类中声明的所有属性（不包含父类）</span><br>        Field[] declaredFields = personClass.getDeclaredFields();<br>        <span class=\"hljs-keyword\">for</span> (Field declaredField : declaredFields) &#123;<br>            System.out.println(declaredField);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//权限修饰符，数据类型，变量名</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//getDeclaredFields()：获取当前运行时类中声明的所有属性（不包含父类）</span><br>        Field[] declaredFields = personClass.getDeclaredFields();<br>        <span class=\"hljs-keyword\">for</span> (Field declaredField : declaredFields) &#123;<br>            <span class=\"hljs-comment\">//1、权限修饰符，public对应1，private是2,protected是4，default是0</span><br>            <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">modifiers</span> <span class=\"hljs-operator\">=</span> declaredField.getModifiers();<br>            System.out.print(Modifier.toString(modifiers) + <span class=\"hljs-string\">&quot;\\t&quot;</span>);<span class=\"hljs-comment\">//可以转换为字符串</span><br>            <span class=\"hljs-comment\">//2、数据类型</span><br>            Class&lt;?&gt; type = declaredField.getType();<br>            System.out.print(type.getName() + <span class=\"hljs-string\">&quot;\\t&quot;</span>);<br>            <span class=\"hljs-comment\">//3、变量名</span><br>            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> declaredField.getName();<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">//获取方法</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//getMethods()：获取该运行类及其父类所有声明为public的方法</span><br>        Method[] methods = personClass.getMethods();<br>        <span class=\"hljs-keyword\">for</span> (Method method : methods) &#123;<br>            System.out.println(method);<br>        &#125;<br>        System.out.println(<span class=\"hljs-string\">&quot;////////////////////////////////&quot;</span>);<br>        <span class=\"hljs-comment\">//getDeclaredMethods()：获取当前类声明的所有方法（不包括父类）</span><br>        Method[] declaredMethods = personClass.getDeclaredMethods();<br>        <span class=\"hljs-keyword\">for</span> (Method declaredMethod : declaredMethods) &#123;<br>            System.out.println(declaredMethod);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    @Xxxx</span><br><span class=\"hljs-comment\">    权限修饰符 返回值类型 方法名(参数类型1 形参名1, ...) throws XxxException</span><br><span class=\"hljs-comment\">    */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        Method[] declaredMethods = personClass.getDeclaredMethods();<br>        <span class=\"hljs-keyword\">for</span> (Method declaredMethod : declaredMethods) &#123;<br>            <span class=\"hljs-comment\">//1、获取注解（只能获取Retention.RUNTIME的注解）</span><br>            Annotation[] annotations = declaredMethod.getAnnotations();<br>            <span class=\"hljs-keyword\">for</span> (Annotation annotation : annotations) &#123;<br>                System.out.println(annotation);<br>            &#125;<br>            <span class=\"hljs-comment\">//2、权限修饰符</span><br>            <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">modifiers</span> <span class=\"hljs-operator\">=</span> declaredMethod.getModifiers();<br>            System.out.print(Modifier.toString(modifiers) + <span class=\"hljs-string\">&quot;\\t&quot;</span>);<br>            <span class=\"hljs-comment\">//3、返回值</span><br>            System.out.print(declaredMethod.getReturnType().getName() + <span class=\"hljs-string\">&quot;\\t&quot;</span>);<br>            <span class=\"hljs-comment\">//4、方法名</span><br>            System.out.print(declaredMethod.getName());<br>            <span class=\"hljs-comment\">//5、形参列表</span><br>            System.out.print(<span class=\"hljs-string\">&quot;( &quot;</span>);<br>            Class&lt;?&gt;[] parameterTypes = declaredMethod.getParameterTypes();<br>            <span class=\"hljs-keyword\">if</span>(!(parameterTypes == <span class=\"hljs-literal\">null</span> || parameterTypes.length == <span class=\"hljs-number\">0</span>))&#123;<br>                <span class=\"hljs-comment\">//表示有参数</span><br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; parameterTypes.length; i++)&#123;<br>                    System.out.print(parameterTypes[i].getName() + <span class=\"hljs-string\">&quot; args_&quot;</span> + i);<br>                    <span class=\"hljs-keyword\">if</span>(i &lt; parameterTypes.length -<span class=\"hljs-number\">1</span>) System.out.print(<span class=\"hljs-string\">&quot;, &quot;</span>);<br>                &#125;<br>            &#125;<br>            System.out.print(<span class=\"hljs-string\">&quot; )&quot;</span>);<br>            <span class=\"hljs-comment\">//6、抛出的异常</span><br>            Class&lt;?&gt;[] exceptionTypes = declaredMethod.getExceptionTypes();<br>            <span class=\"hljs-keyword\">if</span>(!(exceptionTypes == <span class=\"hljs-literal\">null</span> || exceptionTypes.length == <span class=\"hljs-number\">0</span>))&#123;<br>                <span class=\"hljs-comment\">//有抛出异常</span><br>                System.out.print(<span class=\"hljs-string\">&quot;throws &quot;</span>);<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; exceptionTypes.length; i++) &#123;<br>                    System.out.print(exceptionTypes[i].getName());<br>                    <span class=\"hljs-keyword\">if</span>(i != exceptionTypes.length -<span class=\"hljs-number\">1</span>)&#123;<br>                        System.out.print(<span class=\"hljs-string\">&quot;, &quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    获取构造器结构</span><br><span class=\"hljs-comment\">    */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//getConstructors()：获取当前运行时类中声明为public的构造器（不包含父类）</span><br>        Constructor&lt;?&gt;[] constructors = personClass.getConstructors();<br>        <span class=\"hljs-keyword\">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123;<br>            System.out.println(constructor);<br>        &#125;<br>        <span class=\"hljs-comment\">//getDeclaredConstructors()：获取当前运行时类中声明的所有构造器（不包含父类）</span><br>        Constructor&lt;?&gt;[] declaredConstructors = personClass.getDeclaredConstructors();<br>        <span class=\"hljs-keyword\">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;<br>            System.out.println(declaredConstructor);<br>        &#125;<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 获取运行时类的父类</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        Class&lt;? <span class=\"hljs-built_in\">super</span> Person&gt; superclass = personClass.getSuperclass();<br>        System.out.println(superclass);<span class=\"hljs-comment\">//class src1.Creature</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">     * 获取运行时类的带泛型的父类</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-type\">Type</span> <span class=\"hljs-variable\">genericSuperclass</span> <span class=\"hljs-operator\">=</span> personClass.getGenericSuperclass();<br>        System.out.println(genericSuperclass);<span class=\"hljs-comment\">//src1.Creature&lt;java.lang.String&gt;</span><br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">     * 获取运行时类的带泛型的父类的泛型</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-type\">Type</span> <span class=\"hljs-variable\">genericSuperclass</span> <span class=\"hljs-operator\">=</span> personClass.getGenericSuperclass();<br>        <span class=\"hljs-comment\">//强转</span><br>        <span class=\"hljs-type\">ParameterizedType</span> <span class=\"hljs-variable\">parameterizedType</span> <span class=\"hljs-operator\">=</span> (ParameterizedType)genericSuperclass;<br>        <span class=\"hljs-comment\">//获取泛型类型</span><br>        Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();<br>        System.out.println(actualTypeArguments[<span class=\"hljs-number\">0</span>]);<span class=\"hljs-comment\">//class java.lang.String</span><br>        System.out.println(actualTypeArguments[<span class=\"hljs-number\">0</span>].getTypeName());<span class=\"hljs-comment\">//java.lang.String</span><br>        System.out.println(((Class)(actualTypeArguments[<span class=\"hljs-number\">0</span>])).getName());<span class=\"hljs-comment\">//java.lang.String</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 获取运行时类的接口</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test9</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//返回当前运行时类的接口（不包括父类）</span><br>        Class&lt;?&gt;[] interfaces = personClass.getInterfaces();<br>        <span class=\"hljs-keyword\">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;<br>            System.out.println(anInterface);<br>        &#125;<br>        <span class=\"hljs-comment\">//获取运行时类父类的接口</span><br>        Class&lt;?&gt;[] interfaces1 = personClass.getSuperclass().getInterfaces();<br>        <span class=\"hljs-keyword\">for</span> (Class&lt;?&gt; aClass : interfaces1) &#123;<br>            System.out.println(aClass);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 获取运行时类所在的包</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test10</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-type\">Package</span> <span class=\"hljs-variable\">aPackage</span> <span class=\"hljs-operator\">=</span> personClass.getPackage();<br>        System.out.println(aPackage);<span class=\"hljs-comment\">//package src1</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 获取运行时类声明的注解</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test11</span><span class=\"hljs-params\">()</span>&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        Annotation[] annotations = personClass.getAnnotations();<br>        <span class=\"hljs-keyword\">for</span> (Annotation annotation : annotations) &#123;<br>            System.out.print(annotation + <span class=\"hljs-string\">&quot;\\t&quot;</span>);<span class=\"hljs-comment\">//@src1.MyAnnotation(value=[hi])</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"调用运行时类的指定结构\"><a class=\"markdownIt-Anchor\" href=\"#调用运行时类的指定结构\">#</a> 调用运行时类的指定结构</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs JAVA\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><span class=\"hljs-keyword\">import</span> src1.Person;<br><br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Constructor;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Field;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Method;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/18 - 8:39</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 调用运行时类中指定的结构：属性、方法、构造器</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ReflectionTest1</span> &#123;<br>    <span class=\"hljs-comment\">//属性</span><br>    <span class=\"hljs-comment\">//不理想，只能获取public</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testField</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">//创建运行时类的对象</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> personClass.newInstance();<br>        <span class=\"hljs-comment\">//获取指定的属性：要求获取的属性声明为public</span><br>        <span class=\"hljs-type\">Field</span> <span class=\"hljs-variable\">id</span> <span class=\"hljs-operator\">=</span> personClass.getField(<span class=\"hljs-string\">&quot;id&quot;</span>);<br>        <span class=\"hljs-comment\">//设置当前属性的值</span><br>        <span class=\"hljs-comment\">//set()：参数1：指明设置哪个对象的属性，参数2：将此属性值设置为多少</span><br>        id.set(person, <span class=\"hljs-number\">10</span>);<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 获取当前对象属性值</span><br><span class=\"hljs-comment\">        * get()：参数1：获取哪个对象的当前属性值</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> (<span class=\"hljs-type\">int</span>)id.get(person);<br>        System.out.println(i);<span class=\"hljs-comment\">//10</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 获取属性的方法2，可以获取所有权限的属性。 开发中使用这种</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testField1</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<span class=\"hljs-comment\">//</span><br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> personClass.newInstance();<br>        <span class=\"hljs-comment\">//获取属性</span><br>        <span class=\"hljs-type\">Field</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredField(<span class=\"hljs-string\">&quot;name&quot;</span>);<br>        <span class=\"hljs-comment\">//将accessible权限设置为true,保证当前属性是可访问的</span><br>        name.setAccessible(<span class=\"hljs-literal\">true</span>);<span class=\"hljs-comment\">//对于private属性，默认是false，不可访问</span><br>        <span class=\"hljs-comment\">//设置属性</span><br>        name.set(person, <span class=\"hljs-string\">&quot;Tom&quot;</span>);<br>        <span class=\"hljs-comment\">//获取属性</span><br>        System.out.println(name.get(person));<span class=\"hljs-comment\">//Tom</span><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testMethod</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> personClass.newInstance();<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 1、获取指定的某个方法</span><br><span class=\"hljs-comment\">        *   &gt; 参数1：方法名称</span><br><span class=\"hljs-comment\">        *   &gt; 参数2：要获取的方法的形参列表</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">Method</span> <span class=\"hljs-variable\">showInterest</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredMethod(<span class=\"hljs-string\">&quot;showInterest&quot;</span>, String.class, <span class=\"hljs-type\">int</span>.class);<br>        <span class=\"hljs-comment\">//保证当前方法是可访问的</span><br>        showInterest.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-comment\">//方法调用，invoke()：参数1：调用者。 参数2：实参列表</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">nation</span> <span class=\"hljs-operator\">=</span> (String)showInterest.invoke(person, <span class=\"hljs-string\">&quot;China&quot;</span>, <span class=\"hljs-number\">10</span>);<span class=\"hljs-comment\">// String showInterest()</span><br>        System.out.println(nation);<br>        <span class=\"hljs-comment\">//////////////////////调用静态方法///////////////////////////////</span><br>        <span class=\"hljs-type\">Method</span> <span class=\"hljs-variable\">showDesc</span> <span class=\"hljs-operator\">=</span> personClass.getDeclaredMethod(<span class=\"hljs-string\">&quot;showDesc&quot;</span>);<br>        showDesc.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">returnVal</span> <span class=\"hljs-operator\">=</span> showDesc.invoke(Person.class);<span class=\"hljs-comment\">//静态方法，调用者是当前类</span><br>        showDesc.invoke(<span class=\"hljs-literal\">null</span>);<span class=\"hljs-comment\">//静态方法，调用者写成null也可以</span><br>        System.out.println(returnVal);<span class=\"hljs-comment\">//因为返回值是void，所以returnVal是null</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">    * 调用运行时类中指定的构造器</span><br><span class=\"hljs-comment\">    * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testConstructor</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception&#123;<br>        Class&lt;Person&gt; personClass = Person.class;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * getDeclaredConstructor()参数1：构造器的形参列表</span><br><span class=\"hljs-comment\">        * */</span><br>        Constructor&lt;Person&gt; constructor = personClass.getDeclaredConstructor(String.class, <span class=\"hljs-type\">int</span>.class);<br>        <span class=\"hljs-comment\">//保证构造器是可访问的</span><br>        constructor.setAccessible(<span class=\"hljs-literal\">true</span>);<br>        <span class=\"hljs-comment\">//创建运行时类的对象</span><br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">tom</span> <span class=\"hljs-operator\">=</span> constructor.newInstance(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">10</span>);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"关于class的理解\"><a class=\"markdownIt-Anchor\" href=\"#关于class的理解\">#</a> 关于 Class 的理解</h3>\n<blockquote>\n<p>程序经过 javac.exe 命令后，会生成一个或多个字节码文件 (.class 结尾)。接着我们使用 java.exe 命令对某个字节码文件进行解释运行，相当于将某个字节码文件加载到内存中。此过程就成为类的加载。加载到内存中的类，我们就成为内存中的类，此运行时类，就作为 Class 类的一个实例。</p>\n</blockquote>\n<blockquote>\n<p>新建运行时类的对象时，Object obj = clazz.newInstance () 有如下要求：</p>\n<ul>\n<li>必须有空参的构造器</li>\n<li>权限修饰符的权限要够，通常设置成 public</li>\n</ul>\n</blockquote>\n<h3 id=\"反射的应用动态代理\"><a class=\"markdownIt-Anchor\" href=\"#反射的应用动态代理\">#</a> 反射的应用：动态代理</h3>\n<h4 id=\"静态代理\"><a class=\"markdownIt-Anchor\" href=\"#静态代理\">#</a> 静态代理</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/18 - 19:19</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 静态代理示例：被代理类和代理类在编译期就已经确定下来了</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StaticProxyTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-comment\">//创建被代理类的对象</span><br>        <span class=\"hljs-type\">NikeClothFactory</span> <span class=\"hljs-variable\">nike</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">NikeClothFactory</span>();<br>        <span class=\"hljs-comment\">//创建代理类的对象</span><br>        <span class=\"hljs-type\">ProxyClothFactory</span> <span class=\"hljs-variable\">proxy</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ProxyClothFactory</span>(nike);<br>        <span class=\"hljs-comment\">//调用代理类的方法</span><br>        proxy.produceCloth();<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">ClothFactory</span>&#123;<br>    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">produceCloth</span><span class=\"hljs-params\">()</span>;<br>&#125;<br><br><span class=\"hljs-comment\">//代理类</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ProxyClothFactory</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">ClothFactory</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> ClothFactory factory;<span class=\"hljs-comment\">//用被代理类的对象进行实例化</span><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">ProxyClothFactory</span><span class=\"hljs-params\">(ClothFactory factory)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.factory = factory;<br>    &#125;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">produceCloth</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;代理工厂准备一些工作&quot;</span>);<br>        factory.produceCloth();<br>        System.out.println(<span class=\"hljs-string\">&quot;代理工厂做后续工作&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NikeClothFactory</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">ClothFactory</span>&#123;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">produceCloth</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Nike工厂生产一批运动服&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"动态代理\"><a class=\"markdownIt-Anchor\" href=\"#动态代理\">#</a> 动态代理</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> java.lang.reflect.InvocationHandler;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Method;<br><span class=\"hljs-keyword\">import</span> java.lang.reflect.Proxy;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/18 - 19:26</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 动态代理的示例</span><br><span class=\"hljs-comment\">* */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ProxyTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">SuperMan</span> <span class=\"hljs-variable\">superMan</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SuperMan</span>();<br>        <span class=\"hljs-comment\">//proxyInstance：代理类的对象</span><br>        <span class=\"hljs-type\">Human</span> <span class=\"hljs-variable\">proxyInstance</span> <span class=\"hljs-operator\">=</span> (Human)ProxyFactory.getProxyInstance(superMan);<br>        <span class=\"hljs-comment\">//通过代理类对象调用方法时，会自动调用被代理类中同名的方法</span><br>        System.out.println(proxyInstance.getBelief());<br>        proxyInstance.eat(<span class=\"hljs-string\">&quot;麻辣烫&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">Human</span>&#123;<br>    String <span class=\"hljs-title function_\">getBelief</span><span class=\"hljs-params\">()</span>;<br>    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">eat</span><span class=\"hljs-params\">(String food)</span>;<br>&#125;<br><br><span class=\"hljs-comment\">//被代理类</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SuperMan</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Human</span>&#123;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getBelief</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;I believe I can fly&quot;</span>;<br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">eat</span><span class=\"hljs-params\">(String food)</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;我喜欢吃&quot;</span> + food);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">* 要想实现动态代理，需要解决的问题？</span><br><span class=\"hljs-comment\">* 1、如何根据加载到内存中的被代理类，动态地创建一个代理类及其对象？</span><br><span class=\"hljs-comment\">* 2、当通过代理类的对象调用方法时，如何动态地调用被代理类中的同名方法？</span><br><span class=\"hljs-comment\">* */</span><br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ProxyFactory</span>&#123;<br><br>    <span class=\"hljs-comment\">//调用此方法，返回一个代理类的对象</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Object <span class=\"hljs-title function_\">getProxyInstance</span><span class=\"hljs-params\">(Object obj)</span>&#123;<span class=\"hljs-comment\">//obj：被代理类的对象</span><br>        <span class=\"hljs-type\">MyInvocationHandler</span> <span class=\"hljs-variable\">handler</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyInvocationHandler</span>();<br>        handler.bind(obj);<br>        <span class=\"hljs-keyword\">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(), obj.getClass().getInterfaces(), handler);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyInvocationHandler</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">InvocationHandler</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> Object obj;<span class=\"hljs-comment\">//赋值时，需要使用被代理类对象进行赋值</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">bind</span><span class=\"hljs-params\">(Object obj)</span>&#123;<br>        <span class=\"hljs-built_in\">this</span>.obj = obj;<br>    &#125;<br>    <span class=\"hljs-comment\">//当我们通过代理类的对象调用方法a时，就会自动调用如下的方法invoke()</span><br>    <span class=\"hljs-comment\">//将被代理类要执行的方法a的功能就声明在invoke()方法中</span><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title function_\">invoke</span><span class=\"hljs-params\">(Object proxy, Method method, Object[] args)</span><span class=\"hljs-keyword\">throws</span> Throwable&#123;<br>        <span class=\"hljs-comment\">//method:即为代理类对象调用的方法，此方法也就作为了被代理类要调用的方法</span><br>        <span class=\"hljs-comment\">//obj:被代理类的对象</span><br>        <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">returnVal</span> <span class=\"hljs-operator\">=</span> method.invoke(obj, args);<br>        <span class=\"hljs-comment\">//上述方法的返回值就作为当前类中invoke()方法的返回值</span><br>        <span class=\"hljs-keyword\">return</span> returnVal;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"jdk8新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk8新特性\">#</a> JDK8 新特性</h2>\n<h3 id=\"lambda表达式\"><a class=\"markdownIt-Anchor\" href=\"#lambda表达式\">#</a> lambda 表达式</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Comparator;<br><span class=\"hljs-keyword\">import</span> java.util.function.Consumer;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/19 - 16:36</span><br><span class=\"hljs-comment\"> * lambda表达式的使用</span><br><span class=\"hljs-comment\"> * 1、举例：(o1, o2) -&gt; Integer.compare(o1,o2);</span><br><span class=\"hljs-comment\"> * 2、格式：</span><br><span class=\"hljs-comment\"> *      (形参列表) -&gt; lambda体(其实就是方法体)</span><br><span class=\"hljs-comment\"> * 3、使用：分六种情况介绍</span><br><span class=\"hljs-comment\"> * 4、lambda表达式本质：作为接口的具体实现类的对象。简化了接口的实现过程。如Comparator实现类子类的创建</span><br><span class=\"hljs-comment\"> * 5、要求实现的接口是函数式接口：只有一个方法的接口</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LambdaTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 语法格式一：无参，无返回值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">Runnable</span> <span class=\"hljs-variable\">r1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Runnable</span>()&#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span>&#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;I Love You&quot;</span>);<br>            &#125;<br>        &#125;;<br>        r1.run();<br>        System.out.println(<span class=\"hljs-string\">&quot;..........................&quot;</span>);<br>        <span class=\"hljs-type\">Runnable</span> <span class=\"hljs-variable\">r2</span> <span class=\"hljs-operator\">=</span> () -&gt; &#123;System.out.print(<span class=\"hljs-string\">&quot;I Love You Too, &quot;</span>);<br>            System.out.println(<span class=\"hljs-string\">&quot;骗你的&quot;</span>);&#125;;<br>        r2.run();<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * lambda需要一个参数，但没有返回值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-comment\">//原型</span><br>        Consumer&lt;String&gt; con = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Consumer</span>&lt;String&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">accept</span><span class=\"hljs-params\">(String s)</span> &#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;爱你哦&quot;</span>);<br>            &#125;<br>        &#125;;<br>        con.accept(<span class=\"hljs-string\">&quot;sssss&quot;</span>);<br>        <span class=\"hljs-comment\">//lambda表达式形式</span><br>        Consumer&lt;String&gt; con1 = (String s) -&gt; &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;我不爱&quot;</span>);<br>        &#125;;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况三：参数类型可省略，由编译器自动推断</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//原型</span><br>        Consumer&lt;Integer&gt; con = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Consumer</span>&lt;Integer&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">accept</span><span class=\"hljs-params\">(Integer s)</span> &#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;爱你哦&quot;</span>);<br>            &#125;<br>        &#125;;<br>        con.accept(<span class=\"hljs-number\">123</span>);<br>        <span class=\"hljs-comment\">//lambda表达式形式</span><br>        Consumer&lt;String&gt; con1 = s -&gt; &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;我不爱&quot;</span>);<br>        &#125;;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况四：只有一个参数时，括号可以省略</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//原型</span><br>        Consumer&lt;Integer&gt; con = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Consumer</span>&lt;Integer&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">accept</span><span class=\"hljs-params\">(Integer s)</span> &#123;<br>                System.out.println(<span class=\"hljs-string\">&quot;爱你哦&quot;</span>);<br>            &#125;<br>        &#125;;<br>        con.accept(<span class=\"hljs-number\">123</span>);<br>        <span class=\"hljs-comment\">//lambda表达式形式</span><br>        Consumer&lt;String&gt; con1 = (s) -&gt; &#123;<br>            System.out.println(<span class=\"hljs-string\">&quot;我不爱&quot;</span>);<br>        &#125;;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况五：需要两个以上参数，有多条语句，有返回值</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;Integer&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Integer o1, Integer o2)</span> &#123;<br>                <span class=\"hljs-keyword\">return</span> Integer.compare(o1, o2);<br>            &#125;<br>        &#125;;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">compare1</span> <span class=\"hljs-operator\">=</span> com1.compare(<span class=\"hljs-number\">12</span>,<span class=\"hljs-number\">21</span>);<br>        System.out.println(compare1);<br>        System.out.println(<span class=\"hljs-string\">&quot;////////////////////////////&quot;</span>);<br>        <span class=\"hljs-comment\">//lambda表达式</span><br>        Comparator&lt;Integer&gt; com2 = (o1, o2) -&gt; &#123;<br>            System.out.println(o1);<br>            System.out.println(o2);<br>            <span class=\"hljs-keyword\">return</span> Integer.compare(o1, o2);<br>        &#125;;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况六：lambda体只有一条语句时，若有Return和大括号，则都可以省略</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span>&#123;<br>        Comparator&lt;Integer&gt; com1 = (o1, o2) -&gt; o1.compareTo(o2);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"函数式接口\"><a class=\"markdownIt-Anchor\" href=\"#函数式接口\">#</a> 函数式接口</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 自定义函数式接口</span><br><span class=\"hljs-comment\"> * 说明：lambda表达式是对象，而不是函数，它们必须依附于一类特别的对象类型--函数式接口</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/19 - 19:09</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@FunctionalInterface</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">MyInterface</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 函数式接口的示例</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">method1</span><span class=\"hljs-params\">()</span>;<br>&#125;<br><br><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.ArrayList;<br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-keyword\">import</span> java.util.function.Consumer;<br><span class=\"hljs-keyword\">import</span> java.util.function.Predicate;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Java内置的4大核心函数式接口</span><br><span class=\"hljs-comment\"> * 消费型接口 Consumer&lt;T&gt; void accept(T t)</span><br><span class=\"hljs-comment\"> * 供给型接口 Supplier&lt;T&gt; T get()</span><br><span class=\"hljs-comment\"> * 函数型接口 Function&lt;T, R&gt;  R apply(T t)</span><br><span class=\"hljs-comment\"> * 断定型接口 Predicate&lt;T&gt; boolean test(T t)</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/19 - 19:22</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FunctionalInterfaceTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试函数式接口Consumer，所有类似于void accept(T t)的函数都可以用lambda表达式代替</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//使用lambda表达式创建函数式接口Consumer&lt;Double&gt;的实例</span><br>        happyTime(<span class=\"hljs-number\">500</span>, (o) -&gt; System.out.println(<span class=\"hljs-string\">&quot;消费&quot;</span> + o + <span class=\"hljs-string\">&quot;元&quot;</span>));<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">happyTime</span><span class=\"hljs-params\">(<span class=\"hljs-type\">double</span> money, Consumer&lt;Double&gt; con)</span>&#123;<br>        con.accept(money);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 测试predicate&lt;T&gt;接口</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        List&lt;String&gt; aList = Arrays.asList(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>[]&#123;<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;hi&quot;</span>, <span class=\"hljs-string\">&quot;why&quot;</span>&#125;);<br>        <span class=\"hljs-comment\">//表示如果字符串是&quot;hello&quot;，就会被过滤</span><br>        List&lt;String&gt; list = filterString(aList, s -&gt; !s.equals(<span class=\"hljs-string\">&quot;hello&quot;</span>));<br>        <span class=\"hljs-comment\">//输出结果为[hi, why]</span><br>        System.out.println(list);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 根据给定的规则，过滤list中符合条件的字符串，此规则由Predicate的方法决定</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> List&lt;String&gt; <span class=\"hljs-title function_\">filterString</span><span class=\"hljs-params\">(List&lt;String&gt; list, Predicate&lt;String&gt; pre)</span>&#123;<br>        ArrayList&lt;String&gt; filterList = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-keyword\">for</span> (String s : list) &#123;<br>            <span class=\"hljs-keyword\">if</span>(pre.test(s))&#123;<br>                filterList.add(s);<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> filterList;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"方法引用与构造器引用\"><a class=\"markdownIt-Anchor\" href=\"#方法引用与构造器引用\">#</a> 方法引用与构造器引用</h3>\n<h4 id=\"方法引用\"><a class=\"markdownIt-Anchor\" href=\"#方法引用\">#</a> 方法引用</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Comparator;<br><span class=\"hljs-keyword\">import</span> java.util.function.BiPredicate;<br><span class=\"hljs-keyword\">import</span> java.util.function.Consumer;<br><span class=\"hljs-keyword\">import</span> java.util.function.Function;<br><span class=\"hljs-keyword\">import</span> java.util.function.Supplier;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 方法引用的使用：</span><br><span class=\"hljs-comment\"> * 1、使用的情景：当要传递给lambda体的操作已经有实现的方法了，可以使用方法引用。</span><br><span class=\"hljs-comment\"> * 2、方法引用，本质上就是lambda表达式，而lambda表达式作为函数式接口的实例，所以方法引用也是函数式接口</span><br><span class=\"hljs-comment\"> * 3、使用格式： 类（或对象）:: 方法名</span><br><span class=\"hljs-comment\"> *      &gt; 类 :: 非静态方法</span><br><span class=\"hljs-comment\"> *      &gt; 类(对象) :: 静态方法</span><br><span class=\"hljs-comment\"> *      &gt; 类 :: 非静态方法  ******</span><br><span class=\"hljs-comment\"> * 4、什么时候使用方法引用？要求？</span><br><span class=\"hljs-comment\"> *  &gt; 要求接口中的抽象方法的形参列表和返回值类型与方法引用的方法的形参列表和返回值类型一致（针对情况一和二）</span><br><span class=\"hljs-comment\"> *  &gt;</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/19 - 19:56</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MethodRefTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况一：对象::实例方法</span><br><span class=\"hljs-comment\">     * Consumer中的void accept(T t)</span><br><span class=\"hljs-comment\">     * PrintStream中的void println(T t)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        Consumer&lt;String&gt; con1 = str -&gt; System.out.println(str);<br>        con1.accept(<span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        System.out.println(<span class=\"hljs-string\">&quot;................&quot;</span>);<br>        <span class=\"hljs-comment\">//这两个lambda表达式效果一致</span><br>        Consumer&lt;String&gt; con2 = System.out::println;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Supplier的 T get()</span><br><span class=\"hljs-comment\">     * Employee中的String getName()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式形式</span><br>        <span class=\"hljs-type\">Employee</span> <span class=\"hljs-variable\">emp</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">10</span>);<br>        Supplier&lt;String&gt; s =  () -&gt; emp.getName();<br>        <span class=\"hljs-comment\">//方法引用形式</span><br>        Supplier&lt;Integer&gt; s1 = emp::getAge;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 类名 :: 静态方法名</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式的写法</span><br>        Comparator&lt;Integer&gt; con = (t1, t2) -&gt; Integer.compare(t1, t2);<br>        <span class=\"hljs-comment\">//方法引用的写法</span><br>        Comparator&lt;Double&gt; con1 = Double::compare;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Function中的 R apply(T t)</span><br><span class=\"hljs-comment\">     * Math中的Long round(Double d)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式写法</span><br>        Function&lt;Double, Long&gt; func = (d) -&gt; Math.round(d);<br>        func.apply(<span class=\"hljs-number\">12.3</span>);<br>        <span class=\"hljs-comment\">//方法引用写法</span><br>        Function&lt;Double, Long&gt; func1 = Math::round;<br>        func1.apply(<span class=\"hljs-number\">12.6</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 情况三： 类名 :: 实例方法</span><br><span class=\"hljs-comment\">     * Comparator中的int compare(T t1, T t2)</span><br><span class=\"hljs-comment\">     * String中的boolean t1.equals(t2)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式写法</span><br>        Comparator&lt;String&gt; con1 = (s1, s2) -&gt; s1.compareTo(s2);<br>        <span class=\"hljs-comment\">//方法引用写法</span><br>        Comparator&lt;String&gt; con2 = String::compareTo;<br>        <span class=\"hljs-comment\">////////////////////////////////////////////</span><br><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * BiPredicate中的 boolean test(T t1, T t2)</span><br><span class=\"hljs-comment\">        * String中的 boolean t1.equals(t2)</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-comment\">//lambda表达式写法</span><br>        BiPredicate&lt;String, String&gt; bp = (t1, t2) -&gt; t1.equals(t2);<br>        System.out.println(bp.test(<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;world&quot;</span>));<br>        <span class=\"hljs-comment\">//方法引用写法</span><br>        BiPredicate&lt;String, String&gt; bp2 = String::equals;<br>        System.out.println(bp2.test(<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;hello&quot;</span>));<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Employee中的String getName()</span><br><span class=\"hljs-comment\">     * Function中的 R apply(T t)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式写法</span><br>        Function&lt;Employee, String&gt; func = (e) -&gt; e.getName();<br>        <span class=\"hljs-comment\">//方法引用写法</span><br>        Function&lt;Employee, String&gt; func1 = Employee::getName;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"构造器引用和数组引用\"><a class=\"markdownIt-Anchor\" href=\"#构造器引用和数组引用\">#</a> 构造器引用和数组引用</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.function.BiFunction;<br><span class=\"hljs-keyword\">import</span> java.util.function.Function;<br><span class=\"hljs-keyword\">import</span> java.util.function.Supplier;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * 一、构造器引用</span><br><span class=\"hljs-comment\"> *  和方法引用类似，函数式接口的抽象方法的形参列表和构造器的形参列表一致，抽象方法的返回值就是构造器的返回值</span><br><span class=\"hljs-comment\"> * 二、数组引用</span><br><span class=\"hljs-comment\"> *  把数组看成一个类，那么数组引用就是构造器引用了</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/20 - 1:12</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ConstructorRef</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 构造器引用</span><br><span class=\"hljs-comment\">     * Supplier中的 T get()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式</span><br>        Supplier&lt;Employee&gt; supplier = () -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>();<br>        <span class=\"hljs-comment\">//构造器引用</span><br>        Supplier&lt;Employee&gt; supplier1 = Employee::<span class=\"hljs-keyword\">new</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Function中的T apply(T t)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式</span><br>        Function&lt;Integer, Employee&gt; fun1 = (age) -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>(age);<br>        <span class=\"hljs-comment\">//构造器引用</span><br>        Function&lt;Integer, Employee&gt; fun2 = Employee::<span class=\"hljs-keyword\">new</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * BiFunction的 R apply(T t, U u)</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式</span><br>        BiFunction&lt;String, Integer, Employee&gt; func = (str, age) -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>(str, age);<br>        <span class=\"hljs-comment\">//构造器引用</span><br>        BiFunction&lt;String, Integer, Employee&gt; func1 = Employee::<span class=\"hljs-keyword\">new</span>;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 数组引用</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//lambda表达式</span><br>        Function&lt;Integer, String[]&gt; func = (length) -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>[length];<br>        <span class=\"hljs-comment\">//数组引用</span><br>        Function&lt;Integer, String[]&gt; func1 = String[]::<span class=\"hljs-keyword\">new</span>;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"string-api\"><a class=\"markdownIt-Anchor\" href=\"#string-api\">#</a> String API</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-keyword\">import</span> java.util.Optional;<br><span class=\"hljs-keyword\">import</span> java.util.stream.Collectors;<br><span class=\"hljs-keyword\">import</span> java.util.stream.IntStream;<br><span class=\"hljs-keyword\">import</span> java.util.stream.Stream;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Stream API的使用</span><br><span class=\"hljs-comment\"> * 1、Stream关注的是数据的运算，与CPU打交道</span><br><span class=\"hljs-comment\"> *    集合讲的是数据的存储，与内存打交道</span><br><span class=\"hljs-comment\"> * 2、Stream不会自己存储数据，不会改变源对象，相反，他们会返回一个持有结果的新Stream</span><br><span class=\"hljs-comment\"> * 3、Stream是延迟执行的，这意味着他们会等到需要结果的时候才执行</span><br><span class=\"hljs-comment\"> * 4、操作步骤</span><br><span class=\"hljs-comment\"> *  &gt; 创建Stream</span><br><span class=\"hljs-comment\"> *  &gt; 一系列的中间操作</span><br><span class=\"hljs-comment\"> *  &gt; 终止操作（一旦执行终止操作，就会开始执行中间操作并产生结果），之后，就不能再被使用</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/20 - 20:45</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StreamTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建Stream实例的方法一：通过集合</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;hi&quot;</span>, <span class=\"hljs-string\">&quot;why&quot;</span>);<br>        <span class=\"hljs-comment\">// default Stream&lt;E&gt; stream()：返回一个顺序流</span><br>        Stream&lt;String&gt; stream = list.stream();<br>        <span class=\"hljs-comment\">// default Stream&lt;E&gt; parallelStream()：返回一个并行流</span><br>        Stream&lt;String&gt; stringStream = list.parallelStream();<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建Stream实例的方法二：通过数组</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//调用static &lt;T&gt;  Stream&lt;T&gt; Arrays.stream(T[] array)：返回一个流</span><br>        <span class=\"hljs-type\">IntStream</span> <span class=\"hljs-variable\">stream</span> <span class=\"hljs-operator\">=</span> Arrays.stream(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[]&#123;<span class=\"hljs-number\">123</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">54</span>, <span class=\"hljs-number\">232</span>, <span class=\"hljs-number\">6</span>&#125;);<br><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建Stream实例的方法三：通过Stream.of()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        Stream&lt;Integer&gt; integerStream = Stream.of(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建Stream实例的方法四：通过Stream.iterate() 和 Stream.generate()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//迭代</span><br>        <span class=\"hljs-comment\">//public static &lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</span><br>        <span class=\"hljs-comment\">//遍历前10个偶数</span><br>        Stream.iterate(<span class=\"hljs-number\">0</span>, t -&gt; t + <span class=\"hljs-number\">2</span>).limit(<span class=\"hljs-number\">10</span>).forEach(System.out::println);<br>        <span class=\"hljs-comment\">//生成</span><br>        <span class=\"hljs-comment\">//public static &lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</span><br>        <span class=\"hljs-comment\">//产生十个随机数</span><br>        Stream.generate(Math::random).limit(<span class=\"hljs-number\">10</span>).forEach(System.out::println);<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">//接下来介绍中间操作</span><br><br><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Stream中间操作一：筛选与切片</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * filter(Predicate p)：接受lambda，从流中删除一些元素</span><br><span class=\"hljs-comment\">        * */</span><br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;hi&quot;</span>, <span class=\"hljs-string\">&quot;why&quot;</span>, <span class=\"hljs-string\">&quot;world&quot;</span>, <span class=\"hljs-string\">&quot;but&quot;</span>, <span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        Stream&lt;String&gt; stream = list.stream();<br>        <span class=\"hljs-comment\">//实例：删除流中字符串hi</span><br>        stream.filter(e -&gt; !e.equals(<span class=\"hljs-string\">&quot;hi&quot;</span>)).forEach(System.out::println);<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * limit(n) 截断流，使元素不超过给定数量</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-comment\">//因为stream已经执行终止操作，所以得重新造一个</span><br>        <span class=\"hljs-comment\">//筛选出前三条数据</span><br>        list.stream().limit(<span class=\"hljs-number\">3</span>).forEach(System.out::println);<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * skip(n) 跳过前n个元素，若元素个数不足n，则返回空流</span><br><span class=\"hljs-comment\">        * */</span><br>        list.stream().skip(<span class=\"hljs-number\">3</span>).forEach(System.out::println);<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * distinct() 筛选，通过流所生成的元素的hashCode()和equals()去除重复元素</span><br><span class=\"hljs-comment\">        * */</span><br>        list.stream().distinct().forEach(System.out::println);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 中间操作之映射</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//map(Function f)：按照f将元素转换成其他形式</span><br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;aa&quot;</span>, <span class=\"hljs-string\">&quot;bb&quot;</span>, <span class=\"hljs-string\">&quot;cc&quot;</span>, <span class=\"hljs-string\">&quot;dd&quot;</span>);<br>        <span class=\"hljs-comment\">//转换成大写</span><br>        list.stream().map(String::toUpperCase).forEach(System.out::println);<br>        <span class=\"hljs-comment\">//flatMap(Function f)接受一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流合成一个流</span><br><br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * map和flatMap的区别：</span><br><span class=\"hljs-comment\">        * map相当于List.add</span><br><span class=\"hljs-comment\">        * flatMap相当于List.addAll</span><br><span class=\"hljs-comment\">        * */</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 中间操作之排序</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//sorted() 自然排序</span><br>        List&lt;Integer&gt; list = Arrays.asList(<span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">43</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">46</span>, <span class=\"hljs-number\">32</span>);<br>        list.stream().sorted().forEach(System.out::println);<br>        System.out.println(<span class=\"hljs-string\">&quot;.......................&quot;</span>);<br>        <span class=\"hljs-comment\">//sorted(Comparator com)：定制排序</span><br>        <span class=\"hljs-comment\">//这里实现从大到小排序</span><br>        list.stream().sorted((n1, n2) -&gt; -Integer.compare(n1, n2)).forEach(System.out::println);<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 终止操作：匹配与查找</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//boolean allMatch(Predicate p) 检查是否匹配所有元素</span><br>        <span class=\"hljs-comment\">// 判断是否所有元素的长度都大于3</span><br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;avf&quot;</span>, <span class=\"hljs-string\">&quot;dfgr&quot;</span>, <span class=\"hljs-string\">&quot;a&quot;</span>);<br>        Stream&lt;String&gt; stream = list.stream();<br>        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">b</span> <span class=\"hljs-operator\">=</span> stream.allMatch(s -&gt; s.length() &gt; <span class=\"hljs-number\">3</span>);<br>        <span class=\"hljs-comment\">//false</span><br>        System.out.println(b);<br>        <span class=\"hljs-comment\">//boolean anyMatch(Predicate p) 检查是否有元素匹配该规则</span><br>        <span class=\"hljs-comment\">//true</span><br>        list.stream().anyMatch(s -&gt; s.length() &gt; <span class=\"hljs-number\">3</span>);<br>        <span class=\"hljs-comment\">//boolean noneMatch(Predicate p) 如果没有任何元素符合，就返回true</span><br>        <span class=\"hljs-comment\">//true</span><br>        list.stream().noneMatch(s -&gt; s.length() &gt; <span class=\"hljs-number\">5</span>);<br>        <span class=\"hljs-comment\">//Optional&lt;T&gt; findFirst() 返回第一个元素</span><br>        Optional&lt;String&gt; first = list.stream().findFirst();<br>        <span class=\"hljs-comment\">//Optional&lt;T&gt; findAny() 返回任意元素，</span><br>        Optional&lt;String&gt; any = list.stream().findAny();<br>        <span class=\"hljs-comment\">//long count()返回流中元素总数</span><br>        <span class=\"hljs-type\">long</span> <span class=\"hljs-variable\">count</span> <span class=\"hljs-operator\">=</span> list.stream().count();<br>        <span class=\"hljs-comment\">//Optional&lt;T&gt; max(Comparator c) 返回最大值</span><br>        <span class=\"hljs-comment\">//Optional&lt;T&gt; min(Comparator c) 返回最小值</span><br>        <span class=\"hljs-comment\">//forEach(Consumer c) 内部迭代</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 终止操作之归约</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test9</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//reduce(T identity BinaryOperator) 将流中元素反复结合起来，得到一个值并返回</span><br>        <span class=\"hljs-comment\">//identity是初始值</span><br>        <span class=\"hljs-comment\">//计算1-10的自然数之和</span><br>        List&lt;Integer&gt; list = Arrays.asList(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">7</span>,<span class=\"hljs-number\">8</span>,<span class=\"hljs-number\">9</span>,<span class=\"hljs-number\">10</span>);<br>        list.stream().reduce(<span class=\"hljs-number\">0</span>, Integer::sum);<br>        <span class=\"hljs-comment\">//reduce(BinaryOperator)，返回Optional&lt;T&gt;</span><br>        <span class=\"hljs-comment\">//计算list中所有元素之和</span><br>        Optional&lt;Integer&gt; reduce = list.stream().reduce(Integer::sum);<br>        <span class=\"hljs-comment\">//也可以这样写</span><br>        Optional&lt;Integer&gt; reduce1 = list.stream().reduce((n1, n2) -&gt; n1 + n2);<br>        System.out.println(reduce1.toString());<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 终止操作之收集</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test10</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//collect(Collector c) ：c决定了如何对流执行收集的操作（如收集到List，Set，Map）</span><br>        List&lt;Integer&gt; list = Arrays.asList(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">7</span>,<span class=\"hljs-number\">8</span>,<span class=\"hljs-number\">9</span>,<span class=\"hljs-number\">10</span>);<br>        <span class=\"hljs-comment\">//找到大于5的数字并返回一个List</span><br>        List&lt;Integer&gt; list1 = list.stream().filter(e -&gt; e &gt; <span class=\"hljs-number\">5</span>).collect(Collectors.toList());<br>        <span class=\"hljs-keyword\">for</span> (Integer integer : list1) &#123;<br>            System.out.print(integer + <span class=\"hljs-string\">&quot; &quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"optional类\"><a class=\"markdownIt-Anchor\" href=\"#optional类\">#</a> Optional 类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Optional;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Optional类的使用：为了避免程序中空指针异常而创建的类</span><br><span class=\"hljs-comment\"> * 1、常用方法</span><br><span class=\"hljs-comment\"> *  &gt; ofNullable(T t)</span><br><span class=\"hljs-comment\"> *  &gt; T orElse(T t)</span><br><span class=\"hljs-comment\"> *  &gt; T get() 如果Optional内部value不为空，返回该值，否则，抛异常</span><br><span class=\"hljs-comment\"> *  &gt; T getOrElse(Supplier&lt;? super T&gt; consumer) 如果有值，就返回值，没有就返回Supplier接口提供的返回值</span><br><span class=\"hljs-comment\"> *  &gt; boolean isPresent() 判断是否包含对象</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/21 - 1:19</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OptionalTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//Optional.of(T t) 要求t必须不为null</span><br>        Optional&lt;Employee&gt; employee = Optional.of(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>());<br>        <span class=\"hljs-comment\">//Optional.empty() 创建一个空的Optional实例</span><br>        Optional&lt;Object&gt; empty = Optional.empty();<br>        <span class=\"hljs-comment\">//Optional.ofNullable(T t) 允许t为空</span><br>        Optional&lt;Object&gt; o = Optional.ofNullable(<span class=\"hljs-literal\">null</span>);<br>        <span class=\"hljs-type\">Employee</span> <span class=\"hljs-variable\">e</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-comment\">//这里会报空指针</span><br><span class=\"hljs-comment\">//        getEmployeeName(e);</span><br>        <span class=\"hljs-comment\">//这里调用使用了Optional的getName()，虽然e是空，但是避免了空指针</span><br>        System.out.println(OptionalTest.getName(e));<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 假设我想获取Employee的姓名，如果不适用Optional，传入null的时候就会空指针异常</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getEmployeeName</span><span class=\"hljs-params\">(Employee e)</span>&#123;<br>        <span class=\"hljs-keyword\">return</span> e.getName();<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 假设我想获取Employee的姓名，如果不适用Optional，传入null的时候就会空指针异常</span><br><span class=\"hljs-comment\">     * 按照以往逻辑，可以这样优化</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getEmployeeName1</span><span class=\"hljs-params\">(Employee e)</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(e == <span class=\"hljs-literal\">null</span>)&#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>();<br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            <span class=\"hljs-keyword\">return</span> e.getName();<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 使用Optional后</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> String <span class=\"hljs-title function_\">getName</span><span class=\"hljs-params\">(Employee e)</span>&#123;<br>        <span class=\"hljs-comment\">//这里的e有可能是null，有可能不是</span><br>        Optional&lt;Employee&gt; e1 = Optional.ofNullable(e);<br>        <span class=\"hljs-comment\">// T orElse(T other) 如果Optional内部的value有值就返回value，没有就返回other</span><br>        <span class=\"hljs-comment\">//如果e1内部的T是空，就会返回新创建的employee，如果e1不为空，就会返回e1</span><br>        <span class=\"hljs-comment\">//这样，获取的Employee对象就一定不是null，可以避免空指针</span><br>        <span class=\"hljs-keyword\">return</span> e1.orElse(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Employee</span>(<span class=\"hljs-string\">&quot;我是空值&quot;</span>,<span class=\"hljs-number\">12</span>)).getName();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h2 id=\"jdk9-11新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk9-11新特性\">#</a> JDK9-11 新特性</h2>\n<h3 id=\"jdk9新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk9新特性\">#</a> JDK9 新特性</h3>\n<h4 id=\"模块化系统\"><a class=\"markdownIt-Anchor\" href=\"#模块化系统\">#</a> 模块化系统</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> dzc.good.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 如果在一个模块需要用到另外一个模块的类，就需要：</span><br><span class=\"hljs-comment\"> * ①在两个类的src目录下都建立module-info.java文件夹</span><br><span class=\"hljs-comment\"> * ②被引用类module-info.java中，将被使用的类所在的包名exports，格式： exports 包名;</span><br><span class=\"hljs-comment\"> * ③在引用别的模块的类的module-info.java中，格式为：requires 模块名;</span><br><span class=\"hljs-comment\"> * ④最后，在project structures的使用者module下配置依赖dependencies</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 16:32</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ModuleTest</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">Person</span> <span class=\"hljs-variable\">person</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&quot;Tom&quot;</span>,<span class=\"hljs-number\">12</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//使用者的module-info.java</span><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 16:25</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">module</span> day27 &#123;<br>    <span class=\"hljs-keyword\">requires</span> day27test; <span class=\"hljs-comment\">// 格式： requires 被使用模块名</span><br>&#125;<br><br><span class=\"hljs-comment\">//被使用的类声明在模块day27test下</span><br><span class=\"hljs-comment\">//被使用类的声明(声明在dzc.good包下)：</span><br><span class=\"hljs-keyword\">package</span> dzc.good;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 16:40</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span> &#123;<br>    <span class=\"hljs-keyword\">private</span> String name;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> age;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">()</span> &#123;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Person</span><span class=\"hljs-params\">(String name, <span class=\"hljs-type\">int</span> age)</span> &#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-built_in\">this</span>.age = age;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">//被使用模块的module-info.java</span><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 16:25</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">module</span> day27test &#123;<br>    <span class=\"hljs-keyword\">exports</span> dzc.good; <span class=\"hljs-comment\">// 格式： exports 被使用类所在的包名</span><br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"java的repl工具jshell命令\"><a class=\"markdownIt-Anchor\" href=\"#java的repl工具jshell命令\">#</a> Java 的 REPL 工具：jShell 命令</h4>\n<blockquote>\n<p>REPL: 读取、求值、打印、循环</p>\n<p>通俗地讲，jShell 命名使得 java 可以像 python 一样成为脚本语言，在命令行下一行一行地执行</p>\n<p>JShell 环境下，语句末尾的’;' 是可选的，但推荐还是最好加上，提高代码的可读性</p>\n</blockquote>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211022165818755.png\" alt=\"jShell使用举例\">)</p>\n<h4 id=\"接口的私有方法\"><a class=\"markdownIt-Anchor\" href=\"#接口的私有方法\">#</a> 接口的私有方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 17:18</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">MyInterface</span> &#123;<br>    <span class=\"hljs-comment\">//如下的三个方法的权限修饰符都是public</span><br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 接口中的普通方法</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodAbstract</span><span class=\"hljs-params\">()</span>;<br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 接口中的静态方法</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodStatic</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;我是接口中的静态方法&quot;</span>);<br>    &#125;<br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 接口中的default方法</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodDefault</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;我是接口中的默认方法&quot;</span>);<br>        <span class=\"hljs-comment\">//接口内部可以调用私有接口的方法</span><br>        <span class=\"hljs-built_in\">this</span>.methodPrivate();<br>    &#125;<br>    <br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 接口中的私有方法</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodPrivate</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;我是接口中的私有方法&quot;</span>);<br>    &#125;<br>    <br>&#125;<br><br><br><br><span class=\"hljs-comment\">//下面是接口的实现类</span><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 此类实现接口MyInterface</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 17:22</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyInterfaceImp</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">MyInterface</span>&#123;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodAbstract</span><span class=\"hljs-params\">()</span> &#123;<br><br>    &#125;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">methodDefault</span><span class=\"hljs-params\">()</span> &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;实现类重写了接口的缺省方法&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-comment\">//接口中的静态方法只能由接口自己调用</span><br>        MyInterface.methodStatic();<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * 实现类不能调用接口的静态方法</span><br><span class=\"hljs-comment\">        * MyInterfaceImp.methodStatic();</span><br><span class=\"hljs-comment\">        * */</span><br><br>        <span class=\"hljs-type\">MyInterfaceImp</span> <span class=\"hljs-variable\">myInterfaceImp</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyInterfaceImp</span>();<br>        <span class=\"hljs-comment\">//接口的私有方法不能在接口外使用</span><br>        myInterfaceImp.methodDefault();<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"钻石操作符的升级\"><a class=\"markdownIt-Anchor\" href=\"#钻石操作符的升级\">#</a> 钻石操作符的升级</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Comparator;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 新特性：在匿名内部类中也可以使用泛型的自动推断&lt;&gt;</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 17:28</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DiamondOperator</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//匿名内部类中也可以使用泛型了的自动推断了</span><br>        <span class=\"hljs-comment\">//JDK8中，是不允许的</span><br>        <span class=\"hljs-comment\">//JDK8中，必须写成Comparator&lt;Object&gt; com = new Comparator&lt;Object&gt;&#123;&#125;;</span><br>        Comparator&lt;Object&gt; com = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(Object o1, Object o2)</span> &#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"try语句优化\"><a class=\"markdownIt-Anchor\" href=\"#try语句优化\">#</a> try 语句优化</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.IOException;<br><span class=\"hljs-keyword\">import</span> java.io.InputStreamReader;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * try语句的升级</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 17:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TryTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * JDK8之前的情况</span><br><span class=\"hljs-comment\">     * 资源关闭操作在finally中</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">inputStreamReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            inputStreamReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(System.in);<br>            <span class=\"hljs-type\">char</span>[] buf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">20</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">if</span>((len = inputStreamReader.read(buf)) != -<span class=\"hljs-number\">1</span>)&#123;<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(buf, <span class=\"hljs-number\">0</span>, len);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>            <span class=\"hljs-keyword\">if</span>(inputStreamReader != <span class=\"hljs-literal\">null</span>)&#123;<br>                <span class=\"hljs-keyword\">try</span> &#123;<br>                    inputStreamReader.close();<br>                &#125; <span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * jdk8中的资源关闭操作</span><br><span class=\"hljs-comment\">     * 可以把资源的声明写在try()&#123;&#125;的小括号中，小括号内的资源可以自动关闭</span><br><span class=\"hljs-comment\">     * 要求执行后必须关闭的资源必须在try子句的小括号中声明并实例化，否则编译不通过</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">try</span>(<span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">inputStreamReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(System.in);)&#123;<br>            inputStreamReader = <br>            <span class=\"hljs-type\">char</span>[] buf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">20</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">if</span>((len = inputStreamReader.read(buf)) != -<span class=\"hljs-number\">1</span>)&#123;<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(buf, <span class=\"hljs-number\">0</span>, len);<br>            &#125;<br>        &#125;<span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * jdk9中的资源关闭</span><br><span class=\"hljs-comment\">     * 可以把资源声明在try外面，然后在try子句中放入资源对象即可</span><br><span class=\"hljs-comment\">     * 要求：try子句中的对象是默认为final的，如果修改它，就会报错</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">InputStreamReader</span> <span class=\"hljs-variable\">inputStreamReader</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InputStreamReader</span>(System.in);<br>        <span class=\"hljs-keyword\">try</span>(inputStreamReader )&#123;<br><span class=\"hljs-comment\">//            reader = null; //会报错，reader默认是final的，不能修改</span><br>            <span class=\"hljs-type\">char</span>[] buf = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">char</span>[<span class=\"hljs-number\">20</span>];<br>            <span class=\"hljs-type\">int</span> len;<br>            <span class=\"hljs-keyword\">if</span>((len = inputStreamReader.read(buf)) != -<span class=\"hljs-number\">1</span>)&#123;<br>                <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(buf, <span class=\"hljs-number\">0</span>, len);<br>            &#125;<br>        &#125;<span class=\"hljs-keyword\">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"string存储结构的变更\"><a class=\"markdownIt-Anchor\" href=\"#string存储结构的变更\">#</a> String 存储结构的变更</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//底层的存储结构由两字节的char[]改成了一字节的byte[]和编码标记,如果是latin类的字符，则一字节表示一个字符，如果是中文类字符，</span><br><span class=\"hljs-comment\">//则用两个字节表示一个字符</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"集合工厂方法创建只读集合\"><a class=\"markdownIt-Anchor\" href=\"#集合工厂方法创建只读集合\">#</a> 集合工厂方法：创建只读集合</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK9新特性：集合工厂方法：创建只读集合</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 22:03</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CollectionFactoryTest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 在JDK8中创建只读集合的方法，缺点：比较麻烦</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        List&lt;String&gt; nameList = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        nameList.add(<span class=\"hljs-string\">&quot;Tom&quot;</span>);<br>        nameList.add(<span class=\"hljs-string\">&quot;Mike&quot;</span>);<br>        nameList.add(<span class=\"hljs-string\">&quot;Jerry&quot;</span>);<br>        <span class=\"hljs-comment\">//创建只读集合</span><br>        nameList = Collections.unmodifiableList(nameList);<br>        <span class=\"hljs-comment\">//以下语句会报错，因为nameList是只读集合</span><br><span class=\"hljs-comment\">//        nameList.add(&quot;Tommy&quot;);</span><br>        System.out.println(nameList);<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * JDK9中提供的of()方法，可以快速得到只读集合</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//此时得到的list是只读的，JDK8可以做到</span><br>        List&lt;Integer&gt; list = Arrays.asList(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>);<br>        <span class=\"hljs-comment\">//此时得到的list是只读的，JDK9之后才有</span><br>        List&lt;String&gt; nameList = List.of(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-string\">&quot;Mike&quot;</span>, <span class=\"hljs-string\">&quot;Jerry&quot;</span>);<br>        <span class=\"hljs-comment\">//此时得到的set是只读的，JDK9之后才有</span><br>        Set&lt;Integer&gt; integers = Set.of(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>);<br>        <span class=\"hljs-comment\">//此时得到的map是只读的，JDK9之后才有</span><br>        Map&lt;String, Integer&gt; myMap = Map.of(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-number\">13</span>, <span class=\"hljs-string\">&quot;Otis&quot;</span>, <span class=\"hljs-number\">16</span>);<br>        <span class=\"hljs-comment\">//以下语句会报错</span><br><span class=\"hljs-comment\">//        nameList.add(&quot;hello&quot;);</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"inputstream加强\"><a class=\"markdownIt-Anchor\" href=\"#inputstream加强\">#</a> InputStream 加强</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.io.*;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK9中InputStream的新方法：transferTo()</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 22:20</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">InputStreamTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br><br>        <span class=\"hljs-keyword\">try</span>(<span class=\"hljs-type\">InputStream</span> <span class=\"hljs-variable\">is</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;test/hello.txt&quot;</span>);<br>            <span class=\"hljs-type\">OutputStream</span> <span class=\"hljs-variable\">os</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;test/hello1.txt&quot;</span>);)&#123;<br>            is.transferTo(os);<span class=\"hljs-comment\">//把输入流中的所有数据直接自动地赋值到输出流中</span><br>        &#125;<span class=\"hljs-keyword\">catch</span> (IOException e)&#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"增强的stream-api\"><a class=\"markdownIt-Anchor\" href=\"#增强的stream-api\">#</a> 增强的 Stream API</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-keyword\">import</span> java.util.stream.Stream;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK9新特性：Stream API的加强</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 22:40</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StreamAPITest</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * takeWhile()</span><br><span class=\"hljs-comment\">     * dropWhile()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        List&lt;Integer&gt; list = Arrays.asList(<span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">3235</span>, <span class=\"hljs-number\">63</span>, <span class=\"hljs-number\">856</span>);<br>        <span class=\"hljs-comment\">//takeWhile(Predicate p)会返回从开头开始尽可能多的元素，一旦遇到不符合条件的，即使后面有符合条件的，也会被忽略</span><br>        list.stream().takeWhile(x -&gt; x &lt; <span class=\"hljs-number\">60</span>).forEach(System.out::println);<br>        <span class=\"hljs-comment\">//dropWhile(Predicate p)：将符合条件的丢弃，直到遇见不符合条件的</span><br>        list.stream().dropWhile(x -&gt; x &lt; <span class=\"hljs-number\">60</span>).forEach(System.out :: println);<br>        <span class=\"hljs-comment\">//</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * ofNullable()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//实例化方法一</span><br>        Stream&lt;Integer&gt; integerStream = Stream.of(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>);<br>        <span class=\"hljs-comment\">//允许某个值是null</span><br>        Stream&lt;Integer&gt; integerStream1 = Stream.of(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-literal\">null</span>);<br>        System.out.println(integerStream1.count());<span class=\"hljs-comment\">//元素个数被认为是4个</span><br>        <span class=\"hljs-comment\">//不允许只有null</span><br><span class=\"hljs-comment\">//        Stream&lt;Integer&gt; integerStream2 = Stream.of(null);</span><br>        <span class=\"hljs-comment\">//允许是多个null</span><br>        Stream&lt;Integer&gt; integerStream3 = Stream.of(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>);<br>        System.out.println(integerStream3.count());<span class=\"hljs-comment\">//元素个数被认为是3个</span><br><br>        <span class=\"hljs-comment\">//ofNullable() 允许只有null</span><br>        Stream&lt;Integer&gt; integerStream4 = Stream.ofNullable(<span class=\"hljs-literal\">null</span>);<br>        System.out.println(integerStream4.count());<span class=\"hljs-comment\">//元素个数被认为是0个</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * iterate()</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//JDK8已经有了</span><br>        Stream.iterate(<span class=\"hljs-number\">0</span>, x -&gt; x + <span class=\"hljs-number\">1</span>).limit(<span class=\"hljs-number\">10</span>).forEach(System.out::println);<br>        <span class=\"hljs-comment\">//JDK9新增：可以自定义终止条件，下面的终止条件是 x &lt; 100</span><br>        Stream.iterate(<span class=\"hljs-number\">0</span>, x -&gt; x &lt; <span class=\"hljs-number\">100</span>, x -&gt; x + <span class=\"hljs-number\">1</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"optional获取stream的方法\"><a class=\"markdownIt-Anchor\" href=\"#optional获取stream的方法\">#</a> Optional 获取 Stream 的方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><span class=\"hljs-keyword\">import</span> java.util.Optional;<br><span class=\"hljs-keyword\">import</span> java.util.stream.Stream;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK9新特性：Optional的stream()方法</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/22 - 23:37</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OptionalTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        List&lt;String&gt; list = Arrays.asList(<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-string\">&quot;Otis&quot;</span>);<br>        Optional&lt;List&lt;String&gt;&gt; optional = Optional.ofNullable(list);<br>        <span class=\"hljs-comment\">//stream()方法会返回一个流。</span><br>        <span class=\"hljs-comment\">//下面的例子中，会返回一个流，流内只有一个list对象</span><br>        Stream&lt;List&lt;String&gt;&gt; stream = optional.stream();<br>        stream.flatMap(x -&gt; x.stream()).forEach(System.out::println);<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"javascript引擎升级nashorn\"><a class=\"markdownIt-Anchor\" href=\"#javascript引擎升级nashorn\">#</a> Javascript 引擎升级：Nashorn</h4>\n<p>它为 Java 提供轻量级的 Javascript 运行时，使得 Java 应用能够嵌入 Javascript。它在 JDK11 中就被废弃了。。。。。</p>\n<h3 id=\"jdk10新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk10新特性\">#</a> JDK10 新特性</h3>\n<h4 id=\"局部变量类型推断\"><a class=\"markdownIt-Anchor\" href=\"#局部变量类型推断\">#</a> 局部变量类型推断</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.ArrayList;<br><span class=\"hljs-keyword\">import</span> java.util.function.Consumer;<br><span class=\"hljs-keyword\">import</span> java.util.function.Supplier;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * JDK10新特性：局部变量类型推断</span><br><span class=\"hljs-comment\"> * 1、工作原理</span><br><span class=\"hljs-comment\"> *  var是根据右边的类型来推断左边的类型的，如果右边的不确定，左边就不能用var</span><br><span class=\"hljs-comment\"> *  推断完成后，会把原来的类型写入字节码文件，var不会出现在字节码文件中</span><br><span class=\"hljs-comment\"> * 2、var不是关键字</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/23 - 13:36</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JDK10Test</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//以前的写法</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">10</span>;<br>        <span class=\"hljs-comment\">//1、声明变量时，根据所赋的值，推断变量的类型</span><br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">num1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">11</span>;<br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;String&gt;();<br>        list.add(<span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        <span class=\"hljs-comment\">//2、遍历</span><br>        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> str : list)&#123;<br>            System.out.println(str + <span class=\"hljs-string\">&quot; &quot;</span> + str.getClass());<br>        &#125;<br>        <span class=\"hljs-comment\">//普通的遍历操作</span><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++) &#123;<br>            System.out.println(i);<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 不能使用类型推断的场景</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//情况一：没有赋初始值的情况</span><br>        <span class=\"hljs-type\">int</span> num;<br><span class=\"hljs-comment\">//        var num;</span><br>        <span class=\"hljs-comment\">//情况二：lambda表达式中，左边的接口不能省略</span><br>        Supplier&lt;Double&gt; sup = () -&gt; Math.random();<br>        <span class=\"hljs-comment\">//lambda表达式是作为实例赋值给接口的，你现在把接口都省略了，我怎么知道赋值给谁啊。。。</span><br><span class=\"hljs-comment\">//        var sup1 = () -&gt; Math.random();</span><br>        <span class=\"hljs-comment\">//情况三：方法引用中，左边的接口不能省略</span><br>        Consumer&lt;String&gt; con = System.out::println;<br><span class=\"hljs-comment\">//        var con1 = System.out::println;</span><br>        <span class=\"hljs-comment\">//情况四：数组的静态初始化中</span><br><span class=\"hljs-comment\">//        var arr = &#123;1,2,3,4&#125;;</span><br>        <span class=\"hljs-comment\">//以下是可以的</span><br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">arr</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">int</span>[]&#123;<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>&#125;;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 其他不可使用的情况</span><br><span class=\"hljs-comment\">     * */</span><br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//没有初始化的局部变量声明</span><br><span class=\"hljs-comment\">//        var num = null;</span><br>        <span class=\"hljs-comment\">//方法的返回类型：原则是由返回值类型判断return语句是不是合法，而不是根据return推断返回值类型</span><br>        <span class=\"hljs-comment\">//方法的参数类型： public void method(var a, var b)，理由同上。 如果写成var，什么牛马都可以往里面塞</span><br>        <span class=\"hljs-comment\">//构造器的参数类型：理由同上</span><br>        <span class=\"hljs-comment\">//属性：属性涉及到构造函数，构造函数就会涉及到参数类型</span><br>        <span class=\"hljs-comment\">//catch块</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"集合新增的copyof创建只读集合\"><a class=\"markdownIt-Anchor\" href=\"#集合新增的copyof创建只读集合\">#</a> 集合新增的 copyOf ()：创建只读集合</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.ArrayList;<br><span class=\"hljs-keyword\">import</span> java.util.Arrays;<br><span class=\"hljs-keyword\">import</span> java.util.List;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK10新特性：集合中新增的copyOf()方法，用于创建只读集合</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/23 - 14:02</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CopyOfTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">list</span> <span class=\"hljs-operator\">=</span> List.of(<span class=\"hljs-string\">&quot;Java&quot;</span>, <span class=\"hljs-string\">&quot;Python&quot;</span>, <span class=\"hljs-string\">&quot;C&quot;</span>);<br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">copy1</span> <span class=\"hljs-operator\">=</span> List.copyOf(list);<br>        <span class=\"hljs-comment\">//true</span><br>        System.out.println(list == copy1);<br><br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">alist</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();<br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">copy2</span> <span class=\"hljs-operator\">=</span> List.copyOf(alist);<br>        <span class=\"hljs-comment\">//false</span><br>        System.out.println(alist == copy2);<br><br>        <span class=\"hljs-comment\">//两个代码基本一致，为什么一个为true，一个为false？</span><br>        <span class=\"hljs-comment\">//答：如果copyOf()的实际参数是只读的，则没必要再造一个，直接返回实际参数</span><br>        <span class=\"hljs-comment\">//如果copyOf()的实际参数不是只读的，就会新造一个。</span><br>        <span class=\"hljs-comment\">//所以copy1实际上就是list，而copy2是新造的</span><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h3 id=\"jdk11新特性\"><a class=\"markdownIt-Anchor\" href=\"#jdk11新特性\">#</a> JDK11 新特性</h3>\n<h4 id=\"string新增的方法\"><a class=\"markdownIt-Anchor\" href=\"#string新增的方法\">#</a> String 新增的方法</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK11新特性：String新增的方法</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/23 - 14:25</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StringAPITest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//isBlank()：没有实际的字符的，就返回true（\\t,\\n，空格，空字符都不算实际字符）</span><br>        System.out.println(<span class=\"hljs-string\">&quot; \\t \\n   &quot;</span>.isBlank());<br>        <span class=\"hljs-comment\">//strip()：去除前后的空格、\\t、\\n等空白</span><br>        System.out.println(<span class=\"hljs-string\">&quot;  hello  &quot;</span>.strip());<br><br>        <span class=\"hljs-comment\">//stripTrailing()：去除尾部空白</span><br>        <span class=\"hljs-comment\">//stripLeading()：去除首部空白</span><br><br>        <span class=\"hljs-comment\">//repeat(int count)：将字符串重复n次</span><br>        System.out.println(<span class=\"hljs-string\">&quot;5&quot;</span>.repeat(<span class=\"hljs-number\">5</span>));<br>        <span class=\"hljs-comment\">//lines().count()：返回行数</span><br>        <span class=\"hljs-comment\">//首尾的\\n是不被算进去的</span><br>        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">str</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;abc\\nde\\nfg&quot;</span>;<br>        System.out.println(str.lines().count());<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"optional加强\"><a class=\"markdownIt-Anchor\" href=\"#optional加强\">#</a> Optional 加强</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.Optional;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * JDK11新特性：Optional加强</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/23 - 14:34</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JDK11OptionalTest</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        * boolean isEmpty() ：value为空，就返回true。 注意和isPresent()区别</span><br><span class=\"hljs-comment\">        * ifPresentOrElse(Consumer c, Runnable r) : value存在，执行c，不存在，执行r</span><br><span class=\"hljs-comment\">        * orElseThrow()：value存在，就返回value，不存在，就抛异常</span><br><span class=\"hljs-comment\">        * stream() ：value为空，就返回一个空stream，value存在，就返回value的stream</span><br><span class=\"hljs-comment\">        * or(Optional o)：value存在，就返回对应的optional，value不存在，就返回参数指定的optional</span><br><span class=\"hljs-comment\">        * */</span><br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">op</span> <span class=\"hljs-operator\">=</span> Optional.of(<span class=\"hljs-string\">&quot;hello&quot;</span>);<br>        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">op1</span> <span class=\"hljs-operator\">=</span> Optional.of(<span class=\"hljs-string\">&quot;hi&quot;</span>);<br>        <span class=\"hljs-comment\">//因为op里面的value非空，所以返回的是op</span><br>        Optional&lt;String&gt; op2 = op.or(() -&gt; op1);<br>        <span class=\"hljs-comment\">//因为op里面的value为空，所以返回的是op1</span><br>        op = Optional.empty();<br>        op2= op.or(() -&gt; op1);<br><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"局部变量类型推断的升级\"><a class=\"markdownIt-Anchor\" href=\"#局部变量类型推断的升级\">#</a> 局部变量类型推断的升级</h4>\n<p>允许在 var 局部变量上添加注解</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> org.junit.Test;<br><br><span class=\"hljs-keyword\">import</span> java.util.function.Consumer;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> DzcGood</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2021/10/23 - 14:52</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JDK11OtherstEST</span> &#123;<br>    <span class=\"hljs-meta\">@Test</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-comment\">//在lambda表达式如果想用注解，就不能省略类型</span><br>        Consumer&lt;String&gt; con = (<span class=\"hljs-meta\">@Deprecated</span> String t) -&gt; System.out.println(t.toUpperCase());<br>        <span class=\"hljs-comment\">//以下是错误的，没有加类型</span><br><span class=\"hljs-comment\">//        Consumer&lt;String&gt; con1 = (@Deprecated t) -&gt; System.out.println(t.toUpperCase());</span><br>        <span class=\"hljs-comment\">//JDK11中，可以用var这样写</span><br>        Consumer&lt;String&gt; con2 = (<span class=\"hljs-meta\">@Deprecated</span> <span class=\"hljs-keyword\">var</span> t) -&gt; System.out.println(t.toUpperCase());<br><br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"http-client\"><a class=\"markdownIt-Anchor\" href=\"#http-client\">#</a> HTTP Client</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">//HttpClient替换原有的HttpURLConnection</span><br><span class=\"hljs-comment\">//具体的在JavaWeb学吧。。。</span><br></code></pre></div></td></tr></table></figure>\n<h4 id=\"更简化的编译运行程序\"><a class=\"markdownIt-Anchor\" href=\"#更简化的编译运行程序\">#</a> 更简化的编译运行程序</h4>\n<blockquote>\n<p>在 JDK11 之前，执行 Java 程序需要两个步骤：javac classname.java 和 java clasname</p>\n<p>现在，只需要一个命令： java classname.java 就可以完成编译和执行的操作了</p>\n<p>但是这样做有一些要求：</p>\n<blockquote>\n<p>1、可以调用同一个文件的其它类</p>\n</blockquote>\n<blockquote>\n<p>2、不能调用别的文件的类</p>\n</blockquote>\n<blockquote>\n<p>3、只会调用当前源文件中第一个类的 main 方法</p>\n</blockquote>\n</blockquote>\n<p>总结：这个功能玩玩就可以了。。。。。</p>\n<h4 id=\"其他新特性\"><a class=\"markdownIt-Anchor\" href=\"#其他新特性\">#</a> 其他新特性</h4>\n<ul>\n<li>废弃 Nashorn 引擎（太鸡肋了，刚刚出来没多久就被 Deprecated 了）</li>\n<li>ZGC：一个并发、基于 region，压缩型的垃圾收集器（反正是一个很牛的东西，以后再学。。。）</li>\n<li>……</li>\n</ul>\n<h2 id=\"完结撒花\"><a class=\"markdownIt-Anchor\" href=\"#完结撒花\">#</a> 完结撒花</h2>\n<p>撒花撒花撒花。。。。。。</p>\n<p>Next Step ------ MySql</p>\n",
            "tags": [
                "学习笔记",
                "JavaSE"
            ]
        },
        {
            "id": "http://example.com/2021/11/02/BinarySearch/",
            "url": "http://example.com/2021/11/02/BinarySearch/",
            "title": "二分查找",
            "date_published": "2021-11-01T16:41:36.000Z",
            "content_html": "<h1 id=\"leetcode-t704-二分查找\"><a class=\"markdownIt-Anchor\" href=\"#leetcode-t704-二分查找\">#</a> Leetcode T704 二分查找</h1>\n<h2 id=\"关于\"><a class=\"markdownIt-Anchor\" href=\"#关于\">#</a> 关于</h2>\n<p>第一篇刷题<s>水文</s>当然要从最简单的数组开始啦～</p>\n<h2 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\">#</a> 题目描述</h2>\n<blockquote>\n<p>一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。</p>\n<p>示例 1:</p>\n<blockquote>\n<p>输入: nums = [-1,0,3,5,9,12], target = 9<br>\n 输出: 4<br>\n 解释: 9 出现在 nums 中并且下标为 4</p>\n</blockquote>\n<p>示例 2:</p>\n<blockquote>\n<p>输入: nums = [-1,0,3,5,9,12], target = 2<br>\n 输出: -1<br>\n 解释: 2 不存在 nums 中因此返回 -1</p>\n</blockquote>\n<p>提示：</p>\n<blockquote>\n<p>你可以假设 nums 中的所有元素是不重复的。<br>\nn 将在 [1, 10000] 之间。<br>\nnums 的每个元素都将在 [-9999, 9999] 之间。</p>\n</blockquote>\n<p>来源：力扣（LeetCode）<br>\n链接：<a href=\"https://leetcode-cn.com/problems/binary-search\">https://leetcode-cn.com/problems/binary-search</a></p>\n</blockquote>\n<h2 id=\"分析\"><a class=\"markdownIt-Anchor\" href=\"#分析\">#</a> 分析</h2>\n<p>这是一个数组的题，考察的知识点是二分查找，<s>这不是废话吗？题目明摆写着呢。</s></p>\n<p>还是好好分析一下，这类题目如果直接暴力遍历的话，时间复杂度为 O (n)，数组元素比较多的情况下，应该会超时吧</p>\n<p>这时要关注一下题目给的条件：</p>\n<ul>\n<li>有序的（升序）整型数组</li>\n<li>可以假设 nums 中的所有元素是不重复的</li>\n</ul>\n<p>这两个条件就是为二分查找量身打造的，对于二分查找，一定要满足<em><strong>元素有序</strong></em>的条件，不然得到的结果<s>肯定</s>是错的，那这题当然是用<strong>二分查找</strong>啦</p>\n<h2 id=\"思路\"><a class=\"markdownIt-Anchor\" href=\"#思路\">#</a> 思路</h2>\n<p>先定义两个整型变量 left，right 和 mid，约定要查找的目标 index 的索引位置在区间 [left, right] 内（注意，这里是闭区间，如果是左闭右开的话，对应的算法有所不同）。对于每一对 left 和 right 值，始终让 mid =  (left + right) / 2，比较 nums [mid] 和 target 的大小：</p>\n<ul>\n<li>target &lt;nums [mid]：说明 target 的索引位置在 [left, mid)，此时更新 right 为 mid - 1</li>\n<li>target = nums [mid]：此时的 mid 就是所求值</li>\n<li>target &gt; nums [mid]：说明 target 的索引位置在 (mid, right]，此时更新 left 为 mid + 1</li>\n</ul>\n<h2 id=\"复杂度分析\"><a class=\"markdownIt-Anchor\" href=\"#复杂度分析\">#</a> 复杂度分析</h2>\n<ul>\n<li>时间复杂度：O (logn)，其中 n 是数组的长度</li>\n<li>空间复杂度：O (1)</li>\n</ul>\n<h2 id=\"代码java语言描述\"><a class=\"markdownIt-Anchor\" href=\"#代码java语言描述\">#</a> 代码（Java 语言描述）</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> T704;<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 简单地不能再简单的二分查找</span><br><span class=\"hljs-comment\"> * */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">search</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span>[] nums, <span class=\"hljs-type\">int</span> target)</span> &#123;<br>        <span class=\"hljs-comment\">//这里假设nums[target]的索引在区间[left, right]内，注意这里是闭区间</span><br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">left</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">right</span> <span class=\"hljs-operator\">=</span> nums.length;<br>        <span class=\"hljs-type\">int</span> mid;<br>        <span class=\"hljs-keyword\">while</span>(left &lt;= right)&#123;<br>            mid = (left + right) / <span class=\"hljs-number\">2</span>;<br>            <span class=\"hljs-comment\">//找到</span><br>            <span class=\"hljs-keyword\">if</span>(nums[mid] == target)&#123;<br>                <span class=\"hljs-keyword\">return</span> mid;<br>            &#125;<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(target &lt; nums[mid])&#123;<br>                <span class=\"hljs-comment\">//说明target在左边</span><br>                right = mid - <span class=\"hljs-number\">1</span>;<br>            &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                <span class=\"hljs-comment\">//说明target在右边</span><br>                left = mid + <span class=\"hljs-number\">1</span>;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-comment\">//没找到，返回-1</span><br>        <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>\n<h2 id=\"算法对比\"><a class=\"markdownIt-Anchor\" href=\"#算法对比\">#</a> 算法对比</h2>\n<p>这么简单的二分查找肯定是标准答案啦（<s>等到别的题我就知道错了</s>）</p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211102010323501.png\" alt=\"执行用时分布图表\"></p>\n<p><img src=\"https://blog-img-1308044888.cos.ap-shanghai.myqcloud.com/img/image-20211102010414508.png\" alt=\"执行消耗内存分布图表\"></p>\n",
            "tags": [
                "leetcode",
                "数组",
                "二分查找"
            ]
        },
        {
            "id": "http://example.com/2021/10/31/XLEX_Generator/",
            "url": "http://example.com/2021/10/31/XLEX_Generator/",
            "title": "编译原理实验二 XLEX",
            "date_published": "2021-10-31T06:33:54.000Z",
            "content_html": "<h1 id=\"xlex软件文档\"><a class=\"markdownIt-Anchor\" href=\"#xlex软件文档\">#</a> XLEX 软件文档</h1>\n<h2 id=\"关于\"><a class=\"markdownIt-Anchor\" href=\"#关于\">#</a> 关于</h2>\n<blockquote>\n<p>SCNU-CS 编译原理实验二，本来想好好写一写的，但是时间紧迫，先水一水吧，以后有时间再改一改。（还有 bug 没改）</p>\n</blockquote>\n<h2 id=\"作者\"><a class=\"markdownIt-Anchor\" href=\"#作者\">#</a> 作者</h2>\n<blockquote>\n<p><a href = https://github.com/dzcgood>@dzcgood</a></p>\n</blockquote>\n<h2 id=\"开发环境\"><a class=\"markdownIt-Anchor\" href=\"#开发环境\">#</a> 开发环境</h2>\n<blockquote>\n<p>Qt Creator 4.11.1(Community)</p>\n</blockquote>\n<h2 id=\"顶层程序流程图\"><a class=\"markdownIt-Anchor\" href=\"#顶层程序流程图\">#</a> 顶层程序流程图</h2>\n<p><img src=\"/img/%E9%A1%B6%E5%B1%82%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"顶层流程图\"></p>\n<h2 id=\"实现思路\"><a class=\"markdownIt-Anchor\" href=\"#实现思路\">#</a> 实现思路</h2>\n<h3 id=\"this-nfa-选择\"><a class=\"markdownIt-Anchor\" href=\"#this-nfa-选择\">#</a> this | nfa  选择</h3>\n<blockquote>\n<p>设 this 和 nfa 都代表一个 nfa 图，则执行‘|’操作只需要新建 startNode 和 endNode 和四条边，将二者连接即可。</p>\n</blockquote>\n<p><img src=\"/img/%E9%80%89%E6%8B%A9%E6%93%8D%E4%BD%9C.jpg\" alt=\"选择操作\"></p>\n<h3 id=\"thisnfa连接\"><a class=\"markdownIt-Anchor\" href=\"#thisnfa连接\">#</a> thisnfa 连接</h3>\n<blockquote>\n<p>直接把 this-&gt;endNode 和 nfa -&gt; startNode 之间加一条 NFAEdge 连起来</p>\n</blockquote>\n<p><img src=\"/img/%E8%BF%9E%E6%8E%A5%E6%93%8D%E4%BD%9C.jpg\" alt=\"连接操作\"></p>\n<h3 id=\"a-闭包\"><a class=\"markdownIt-Anchor\" href=\"#a-闭包\">#</a> a* 闭包</h3>\n<blockquote>\n<p>需要新建 startNode 和 endNode，和 nfa 前后连起来，然后把 nfa 的 startNode 和 endNode 连起来。总结一下，就是新建两个结点和四条边。</p>\n</blockquote>\n<p><img src=\"/img/%E9%97%AD%E5%8C%85.jpg\" alt=\"闭包\"></p>\n<h3 id=\"生成nfa\"><a class=\"markdownIt-Anchor\" href=\"#生成nfa\">#</a> 生成 NFA</h3>\n<blockquote>\n<p>获取 NFA 图，由输入的正则表达式产生 NFA</p>\n<p>正则表达式转 NFA 递归方法思路： 首先把 (…) 看成一个单元素 NFA, 和 a 等价，把单个 NFA 看成一个或数个元素的 Union，即 NFA = a [|b|c…]。扫描正则表达式，首先扫描 | 进行拆分递归，逐项建立 NFA 后，用 ‘|’ 连接，对于括号要进行进行递归处理</p>\n</blockquote>\n<p><img src=\"/img/%E7%94%9F%E6%88%90NFA.jpg\" alt=\"生成NFA\"></p>\n<h3 id=\"生成dfa\"><a class=\"markdownIt-Anchor\" href=\"#生成dfa\">#</a> 生成 DFA</h3>\n<blockquote>\n<p>分为两个步骤：</p>\n<ul>\n<li>给 NFA 的结点编号并建立初始 DFA 结点</li>\n<li>确定结点与结点之间的关系，建立 DFA 的边</li>\n</ul>\n</blockquote>\n<h5 id=\"nfa结点编号建立dfa结点\"><a class=\"markdownIt-Anchor\" href=\"#nfa结点编号建立dfa结点\">#</a> NFA 结点编号，建立 DFA 结点</h5>\n<p><img src=\"/img/serializeNFA.jpg\" alt=\"serializeNFA\"></p>\n<h5 id=\"建立dfa的边\"><a class=\"markdownIt-Anchor\" href=\"#建立dfa的边\">#</a> 建立 DFA 的边</h5>\n<p><img src=\"/img/%E5%BB%BA%E7%AB%8BDFA%E7%9A%84%E8%BE%B9.jpg\" alt=\"建立DFA的边\"></p>\n<h3 id=\"最小化dfa\"><a class=\"markdownIt-Anchor\" href=\"#最小化dfa\">#</a> 最小化 DFA</h3>\n<blockquote>\n<p>分为两个步骤：</p>\n<ul>\n<li>求初态集合、终态集合并对这些集合进行划分，建立最后的 DFANode</li>\n<li>建立 DFANode 之间的边，形成最小 DFA 图</li>\n</ul>\n</blockquote>\n<h5 id=\"集合划分建立dfanode\"><a class=\"markdownIt-Anchor\" href=\"#集合划分建立dfanode\">#</a> 集合划分，建立 DFANode</h5>\n<p><img src=\"/img/%E9%9B%86%E5%90%88%E5%88%92%E5%88%86%EF%BC%8C%E7%94%9F%E6%88%90DFANode.jpg\" alt=\"集合划分，生成DFANode\"></p>\n<h5 id=\"建立dfanode的边\"><a class=\"markdownIt-Anchor\" href=\"#建立dfanode的边\">#</a> 建立 DFANode 的边</h5>\n<p><img src=\"/img/%E5%BB%BA%E7%AB%8B%E6%9C%80%E5%B0%8FDFA%E7%9A%84%E8%BE%B9.jpg\" alt=\"建立最小DFA的边\"></p>\n<h3 id=\"生成c语言代码\"><a class=\"markdownIt-Anchor\" href=\"#生成c语言代码\">#</a> 生成 c 语言代码</h3>\n<blockquote>\n<p>对于从个某结点出发的每一条边，分为两类，指向自己的，以及指向下一个结点的。对于指向自己的边，生成 while 语句；对于指向下一个结点的边，生成 if 语句，并且需要递归进入下一个结点，直到当前结点的状态为 END 时，结束递归，并回调。</p>\n</blockquote>\n<p><img src=\"/img/%E7%94%9F%E6%88%90c%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81.jpg\" alt=\"生成c语言代码\"></p>\n<h2 id=\"枚举-结构体-类设计\"><a class=\"markdownIt-Anchor\" href=\"#枚举-结构体-类设计\">#</a> 枚举、结构体、类设计</h2>\n<h3 id=\"枚举\"><a class=\"markdownIt-Anchor\" href=\"#枚举\">#</a> 枚举</h3>\n<blockquote>\n<p>定义了一个枚举 State，用于标记每个结点的状态，包括 START（开始节点）, END（结束结点）, NORMAL（其他结点）</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">    定义各个结点的状态：开始，结束，普通</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">State</span>&#123;<br>    START,END,NORMAL<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"结构体\"><a class=\"markdownIt-Anchor\" href=\"#结构体\">#</a> 结构体</h3>\n<blockquote>\n<p>共四个结构体，NFANode，NFAEdge，DFANode，DFAEdge，分别代表一个 NFA 图的结点、一条 NFA 图的边、一个 DFA 图的结点、一个 DFA 图的边。接下来详细说明四个结构体的具体定义。</p>\n</blockquote>\n<h4 id=\"nfanode\"><a class=\"markdownIt-Anchor\" href=\"#nfanode\">#</a> NFANode</h4>\n<blockquote>\n<p>DFANode 用来描述一个 NFA 图的结点，其属性包括编号（id），状态 (state)，入边 (inEdges)，出边 (outEdges)</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">    NFA的结点</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">NFANode</span>&#123;<br>    <span class=\"hljs-comment\">//唯一标记结点</span><br>    <span class=\"hljs-type\">int</span> id;<br>    <span class=\"hljs-comment\">//标实该结点是否为开始结点或结束结点</span><br>    State state;<br>    <span class=\"hljs-comment\">//入边</span><br>    vector&lt;NFAEdge&gt; inEdges;<br>    <span class=\"hljs-comment\">//出边</span><br>    vector&lt;NFAEdge&gt; outEdges;<br>    <span class=\"hljs-comment\">//构造函数</span><br>    <span class=\"hljs-built_in\">NFANode</span>(<span class=\"hljs-type\">int</span> i, State s) : <span class=\"hljs-built_in\">id</span>(i), <span class=\"hljs-built_in\">state</span>(s)&#123;&#125;<br>    <span class=\"hljs-comment\">//空参构造函数</span><br>    <span class=\"hljs-built_in\">NFANode</span>(): <span class=\"hljs-built_in\">id</span>(DEFAULT_ID), <span class=\"hljs-built_in\">state</span>(NORMAL)&#123;&#125;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"nfaedge\"><a class=\"markdownIt-Anchor\" href=\"#nfaedge\">#</a> NFAEdge</h4>\n<blockquote>\n<p>NFAEdge 用于描述一条 NFA 图中的边，其属性包括开始结点 (startNode)，结束结点 (endNode)，处理的字符 (word)</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">    NFA的边</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">NFAEdge</span>&#123;<br>    <span class=\"hljs-comment\">//该边由startNode指向endNode</span><br>    NFANode * startNode;<br>    NFANode * endNode;<br>    <span class=\"hljs-comment\">//该边处理字符word</span><br>    <span class=\"hljs-type\">char</span> word;<br>    <span class=\"hljs-comment\">//构造函数</span><br>    <span class=\"hljs-built_in\">NFAEdge</span>(NFANode * s, NFANode * e, <span class=\"hljs-type\">char</span> c): <span class=\"hljs-built_in\">startNode</span>(s), <span class=\"hljs-built_in\">endNode</span>(e), <span class=\"hljs-built_in\">word</span>(c)&#123;&#125;<br>    <span class=\"hljs-comment\">//空参构造函数</span><br>    <span class=\"hljs-built_in\">NFAEdge</span>(): <span class=\"hljs-built_in\">startNode</span>(<span class=\"hljs-literal\">NULL</span>), <span class=\"hljs-built_in\">endNode</span>(<span class=\"hljs-literal\">NULL</span>), <span class=\"hljs-built_in\">word</span>(<span class=\"hljs-string\">&#x27;\\0&#x27;</span>)&#123;&#125;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"dfanode\"><a class=\"markdownIt-Anchor\" href=\"#dfanode\">#</a> DFANode</h4>\n<blockquote>\n<p>DFANode 用于描述一个 DFA 图的结点，其属性包括该结点的 EPSILION 闭包 (nodes)，由该结点出发的边 (edges)，结点名 (minName)，状态 (state)，还有一系列的操作，如插入边，插入结点，输出结点信息等</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">//DFA结点</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">DFANode</span><br>&#123;<br>    <span class=\"hljs-comment\">//该结点的EPSILION闭包</span><br>    set&lt;<span class=\"hljs-type\">int</span>&gt; nodes;<br>    <span class=\"hljs-comment\">//由该结点出发的边</span><br>    vector&lt;DFAEdge&gt; edges;<br>    <span class=\"hljs-comment\">//给这个结点取个名字，A, B, C, D</span><br>    string minName;<br>    <span class=\"hljs-comment\">//该结点在DFA图中的状态</span><br>    State state = NORMAL;<br>    <span class=\"hljs-comment\">//判断结点id是否在该结点中</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">contains</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span></span>;<br>    <span class=\"hljs-comment\">//在该结点插入id</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span></span>;<br>    <span class=\"hljs-comment\">//在该结点插入边</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(DFAEdge edge)</span></span>;<br>    <span class=\"hljs-comment\">//将两个结点合成一个结点</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">unionNode</span><span class=\"hljs-params\">(DFANode * node)</span></span>;<br>    <span class=\"hljs-comment\">//该结点处理字符c后转变为的结点</span><br>    <span class=\"hljs-function\">DFANode * <span class=\"hljs-title\">process</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span></span>;<br>    <span class=\"hljs-comment\">//输出该结点信息 如： &#123;1，2，4，6&#125;</span><br>    <span class=\"hljs-function\">string <span class=\"hljs-title\">toString</span><span class=\"hljs-params\">()</span></span>;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"dfaedge\"><a class=\"markdownIt-Anchor\" href=\"#dfaedge\">#</a> DFAEdge</h4>\n<blockquote>\n<p>DFAEdge 用于描述一条 DFA 图的边，其属性包括指向的结点（next）和处理的字符（word）</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">//DFA边</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">DFAEdge</span><br>&#123;<br>    <span class=\"hljs-comment\">//边指向的结点</span><br>    DFANode * next;<br>    <span class=\"hljs-comment\">//处理的字符</span><br>    <span class=\"hljs-type\">char</span> word;<br>    <span class=\"hljs-comment\">//构造函数</span><br>    <span class=\"hljs-built_in\">DFAEdge</span>(DFANode *n, <span class=\"hljs-type\">char</span> c): <span class=\"hljs-built_in\">next</span>(n), <span class=\"hljs-built_in\">word</span>(c)&#123;&#125;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h3 id=\"类\"><a class=\"markdownIt-Anchor\" href=\"#类\">#</a> 类</h3>\n<blockquote>\n<p>一共定义了三个类，分别是 NFA, DFA, Proxy，其中 NFA 和 DFA 类分别代表一个 NFA 图和 DFA 图，Proxy 是代理类，用于代理有关 NFA 和 DFA 类的操作，具体包括生成 NFA 图、给 NFA 图编号并生成 DFA 图、最小化 DFA 图、生成 c 语言代码等操作。</p>\n</blockquote>\n<h4 id=\"nfa\"><a class=\"markdownIt-Anchor\" href=\"#nfa\">#</a> NFA</h4>\n<blockquote>\n<p>主要涉及到选择（a | b）闭包（a*），连接（ab）操作</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">    NFA类，集成构建NFA图的操作</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NFA</span>&#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-comment\">//NFA图的开始结点</span><br>    NFANode * startNode;<br>    <span class=\"hljs-comment\">//NFA图的结束结点</span><br>    NFANode * endNode;<br>    <span class=\"hljs-comment\">//结点个数</span><br>    <span class=\"hljs-type\">int</span> nodeNumber;<br>    <span class=\"hljs-comment\">//空参构造函数</span><br>    <span class=\"hljs-built_in\">NFA</span>():<span class=\"hljs-built_in\">startNode</span>(<span class=\"hljs-literal\">NULL</span>), <span class=\"hljs-built_in\">endNode</span>(<span class=\"hljs-literal\">NULL</span>), <span class=\"hljs-built_in\">nodeNumber</span>(<span class=\"hljs-number\">2</span>)&#123;&#125;<br>    <span class=\"hljs-comment\">//初始化一个处理字符c的NFA图</span><br>    <span class=\"hljs-comment\">//这里原作者id的类型是char ？？？ 暂时没看懂，，先改成 int</span><br>    <span class=\"hljs-built_in\">NFA</span>(<span class=\"hljs-type\">char</span> c, <span class=\"hljs-type\">int</span> id1, <span class=\"hljs-type\">int</span> id2);<br>    <span class=\"hljs-comment\">//初始化一个识别c的标号未定的NFA图</span><br>    <span class=\"hljs-built_in\">NFA</span>(<span class=\"hljs-type\">char</span> c);<br>    <span class=\"hljs-comment\">//已知开始结点和结束结点</span><br>    <span class=\"hljs-built_in\">NFA</span>(NFANode * s, NFANode * e): <span class=\"hljs-built_in\">startNode</span>(s), <span class=\"hljs-built_in\">endNode</span>(e)&#123;&#125;<br>    <span class=\"hljs-comment\">//浅复制</span><br>    <span class=\"hljs-type\">void</span> <span class=\"hljs-keyword\">operator</span>=(<span class=\"hljs-type\">const</span> NFA &amp;nfa);<br>    <span class=\"hljs-comment\">// a | b 选择</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Or</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> NFA &amp;nfa)</span></span>;<br>    <span class=\"hljs-comment\">// ab 连接</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">And</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> NFA &amp;nfa)</span></span>;<br>    <span class=\"hljs-comment\">// a* 闭包</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Star</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//当前NFA图是否为空</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isEmpty</span><span class=\"hljs-params\">()</span> <span class=\"hljs-type\">const</span></span>;<br>    <span class=\"hljs-comment\">//id对应的结点是不是endNode</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isEnd</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span> <span class=\"hljs-type\">const</span></span>;<br>    <span class=\"hljs-comment\">//获取endNode的id</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">getEndId</span><span class=\"hljs-params\">()</span> <span class=\"hljs-type\">const</span></span>;<br>    <span class=\"hljs-comment\">//获取startNode的id</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">getStartId</span><span class=\"hljs-params\">()</span> <span class=\"hljs-type\">const</span></span>;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"dfa\"><a class=\"markdownIt-Anchor\" href=\"#dfa\">#</a> DFA</h4>\n<blockquote>\n<p>用于描述一个 DFA 图，其主要操作涉及到由该结点生成该结点对应的 c 语言代码</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-comment\">//DFA类</span><br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DFA</span><br>&#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-comment\">//DFA图的结点</span><br>    vector&lt;DFANode*&gt; graph;<br>    <span class=\"hljs-comment\">//通过id返回图的结点</span><br>    <span class=\"hljs-function\">vector&lt;DFANode*&gt; <span class=\"hljs-title\">getNodes</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span></span>;<br>    <span class=\"hljs-comment\">//DFA图最小开始结点</span><br>    DFANode *minStartNode;<br>    <span class=\"hljs-comment\">//DFA图最小结束结点</span><br>    vector&lt;DFANode*&gt; minEndNodes;<br>    <span class=\"hljs-comment\">//能处理的字符</span><br>    set&lt;<span class=\"hljs-type\">char</span>&gt; wordList;<br>    <span class=\"hljs-comment\">//建一个新结点</span><br>    <span class=\"hljs-function\">DFANode* <span class=\"hljs-title\">crateNewNode</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span></span>;<br>    <span class=\"hljs-comment\">//判断两个结点的转化是否等价，若转化后是同一个结点，则等价</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">equals</span><span class=\"hljs-params\">(DFANode *node1, DFANode *node2, set&lt;<span class=\"hljs-type\">char</span>&gt; words)</span></span>;<br>    <span class=\"hljs-comment\">//判断该结点是否为结束结点</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isEndNode</span><span class=\"hljs-params\">(DFANode *node)</span> <span class=\"hljs-type\">const</span></span>;<br>    <span class=\"hljs-comment\">//从当前DFA中删除某个结点</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">delNode</span><span class=\"hljs-params\">(DFANode *node)</span></span>;<br>    <span class=\"hljs-comment\">//获取该结点的c语言代码，n是结点指针，lines是生成的代码，tabNumber是缩进数</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">getCode</span><span class=\"hljs-params\">(DFANode *n, vector&lt;string&gt; &amp;lines, <span class=\"hljs-type\">int</span> tabNumber)</span></span>;<br><span class=\"hljs-keyword\">private</span>:<br>    <span class=\"hljs-comment\">//获取缩进的空格</span><br>    <span class=\"hljs-function\">string <span class=\"hljs-title\">getTabs</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> tabNumber)</span></span>;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n<h4 id=\"proxy\"><a class=\"markdownIt-Anchor\" href=\"#proxy\">#</a> Proxy</h4>\n<blockquote>\n<p>代理 NFA 和 DFA 的操作，包括产生 NFA，产生 DFA，最小化 DFA</p>\n</blockquote>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter hljs\"><div class=\"hljs code-wrapper\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></div></td><td class=\"code\"><div class=\"hljs code-wrapper\"><pre><code class=\"hljs c++\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Proxy</span><br>&#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-comment\">//正则表达式</span><br>    string regularExpression;<br>    <span class=\"hljs-comment\">//NFA图</span><br>    NFA nfa;<br>    <span class=\"hljs-comment\">//最初始的DFA图</span><br>    DFA dfa;<br>    <span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\">        经过处理后的DFA图</span><br><span class=\"hljs-comment\">        因为有好几个结点最后会合成一个结点，所以minDFA其实是有好多个vector组成的，</span><br><span class=\"hljs-comment\">        每个vector元素又包含了好几个结点，这写结点最后会被合成一个结点</span><br><span class=\"hljs-comment\">        例子： minDFA = &#123;&#123;1&#125;， &#123;3，5，7&#125;, &#123;2,4&#125;, &#123;6,8&#125;&#125;</span><br><span class=\"hljs-comment\">     */</span><br>    vector&lt;vector&lt;DFANode *&gt;&gt; minDFA;<br>    <span class=\"hljs-comment\">//最终的DFA</span><br>    DFA finalDFA;<br>    <span class=\"hljs-comment\">//DFA最小化生成的表格</span><br>    <span class=\"hljs-type\">char</span> chart[MAX_NODE_NUMBER][MAX_NODE_NUMBER];<br>    <span class=\"hljs-comment\">//最后生成的代码</span><br>    string code;<br>    <span class=\"hljs-comment\">//能处理的字符集</span><br>    set&lt;<span class=\"hljs-type\">char</span>&gt; wordList;<br>    <span class=\"hljs-comment\">//构造函数，用正则表达式来初始化Proxy代理类</span><br>    <span class=\"hljs-built_in\">Proxy</span>(<span class=\"hljs-type\">const</span> string regExp);<br>    <span class=\"hljs-comment\">//给NFA的结点编号并建立初始DFA结点</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">serializeNFA</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//初始DFA图后处理</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">processDFA</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//最小化DFA</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">minimizeDFA</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//最小DFA图后处理</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">processMinDFA</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-comment\">//生成c语言代码</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">generateCode</span><span class=\"hljs-params\">()</span></span>;<br><span class=\"hljs-keyword\">private</span>:<br>    <span class=\"hljs-comment\">//获取NFA图，由输入的正则表达式产生NFA</span><br>    <span class=\"hljs-function\">NFA <span class=\"hljs-title\">getNFA</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> string regExp)</span></span>;<br>    <span class=\"hljs-comment\">//把正则表达式看成 a | b | c的形式，以&#x27;|&#x27;为分隔符号，所以要先获取&#x27;|&#x27; 的索引</span><br>    <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">getOrOperatorIndex</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> string regExp)</span></span>;<br>    <span class=\"hljs-comment\">//判断ch是不是字符（字母或数字）</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isLetter</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> ch)</span></span>;<br>    <span class=\"hljs-comment\">//获取索引为index的左括号对应的右括号的索引，在初始化NFA的时候会用到</span><br>    <span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">getRightBracketIndex</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> string regExp, <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> leftIndex)</span></span>;<br>    <span class=\"hljs-comment\">//用于得知id号结点可以有哪些转化</span><br>    <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">getConnections</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span></span>;<br>&#125;;<br></code></pre></div></td></tr></table></figure>\n",
            "tags": [
                "编译原理",
                "SCNU-CS",
                "XLEX"
            ]
        }
    ]
}